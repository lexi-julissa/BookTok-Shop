/*! BARNES-BUILDER 2024-02-21 */
function printObj(a,b){(isNaN(b)||1>b)&&(b=0);var c="{",d=0,e="",f=!1;do e+="	",d++;while(b>=d);for(var g in a)try{if(!Object.prototype.hasOwnProperty.call(a,g))continue;f===!1&&(f=!!(c+="\n"));var h=a[g];if("object"==typeof h){c+=e+g+": "+printObj(h,b+1)+",\n";continue}c+=e+g+": `"+h+"`,\n"}catch(i){continue}return f===!0&&(c+=e.replace("	","")),c+="}"}try{[1].indexOf(1)}catch(e){Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}}try{[].filter([1,2],function(a){return a})}catch(e){Array.prototype.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)e in this&&a.call(b,c=this[e],e,this)&&d.push(c);return d}}try{Object.getPrototypeOf({})}catch(e){Object.getPrototypeOf="object"==typeof"test".__proto__?function(a){return a.__proto__}:function(a){if(a.constructor===Array){var b={},c=["concat","constructor","join","length","pop","push","reverse","shift","slice","sort","splice","toLocaleString","toString","unshift"];for(var d in c)c.hasOwnProperty(d)&&(b[c[d]]=Array.prototype[c[d]])}return a.constructor.prototype}}try{Object.defineProperty({},"x",{})}catch(e){Object.defineProperty=function(a,b,c){"use strict";if(!a instanceof Object)throw new TypeError("Object.defineProperty called on non-object");if(!c instanceof Object)throw new TypeError("Argument `description` must be an object: "+c);if(!b instanceof String)throw new TypeError("Argument `property` must be a string: "+b);return a[b]=c.hasOwnProperty("value")?c.value:void 0,a}}try{Object.defineProperties({},{foo:{value:"bar"}})}catch(e){Object.defineProperties=function(a,b){"use strict";if(!a instanceof Object)throw new TypeError("Object.defineProperties called on non-object");if(!b instanceof Object)throw new TypeError("Property properties must be an object: "+b);for(var c in b)b.hasOwnProperty(c)&&(a=Object.defineProperty(a,c,b[c]));return a}}try{Object.create({},Object.prototype)}catch(e){Object.create=function(a,b){"use strict";function c(){}if(arguments.length>2)throw new Error("Object.create implementation only accepts two parameters.");if(c.prototype=a,b){var d=new c;return Object.defineProperties(d,b),d}return new c}}try{Object.keys({foo:"bar"})}catch(e){Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}}try{Object.getOwnPropertyNames({foo:"bar"})}catch(e){Object.getOwnPropertyNames=function(){return Object.keys.apply(Object,arguments)}}try{Object.getOwnPropertyDescriptor({x:!0},"x")}catch(e){Object.getOwnPropertyDescriptor=function(a,b){return{value:a[b]}}}try{" foo ".trim()}catch(e){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}!function(a,b){function c(a){var c=b[a];b[a]=function(a){return e(c(a))}}function d(b,c,d){return(d=this).attachEvent("on"+b,function(b){var b=b||a.event;b.preventDefault=b.preventDefault||function(){b.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){b.cancelBubble=!0},c.call(d,b)})}function e(a,b){if(b=a.length)for(;b--;)a[b].addEventListener=d;else a.addEventListener=d;return a}a.addEventListener||(e([b,a]),"Element"in a?a.Element.prototype.addEventListener=d:(b.attachEvent("onreadystatechange",function(){e(b.all)}),c("getElementsByTagName"),c("getElementById"),c("createElement"),c("querySelectorAll"),c("querySelector"),e(b.all)))}(window,document),Date.now||(Date.now=function(){return(new Date).getTime()});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"$:nomunge";var b,c,d,e=1,f=this,g=!1,h="postMessage",i=-1!=navigator.userAgent.indexOf("OPR/")||/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent),j=f[h]&&!i;a[h]=function(b,c,d){c&&(b="string"==typeof b?b:a.param(b),d=d||parent,j?d[h](b,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(d.location=c.replace(/#.*$/,"")+"#"+ +new Date+e++ +"&"+b))},a.receiveMessage=d=function(e,h,i){var k;j?(e&&(k&&d(),k=function(b){return"string"==typeof h&&b.origin!==h||a.isFunction(h)&&h(b.origin)===g?g:void e(b)}),f.addEventListener?f[e?"addEventListener":"removeEventListener"]("message",k,g):f[e?"attachEvent":"detachEvent"]("onmessage",k)):(b&&clearInterval(b),b=null,e&&(i="number"==typeof h?h:"number"==typeof i?i:100,b=setInterval(function(){var a=document.location.hash,b=/^#?\d+&/;a!==c&&b.test(a)&&(c=a,e({data:a.replace(b,"")}))},i)))}}(jQuery),!function(a){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var b=require("jquery");module.exports=a(b)}else if("function"==typeof define&&define.amd)define(["jquery"],function(b){return a(b)});else{var c=(!1||eval)("this");c.deparam=a(jQuery)}}(function(a){return function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=decodeURIComponent(h[0]),j=d,k=0,l=i.split("]["),m=l.length-1;if(/\[/.test(l[0])&&/\]$/.test(l[m])?(l[m]=l[m].replace(/\]$/,""),l=l.shift().split("[").concat(l),m=l.length-1):m=0,2===h.length)if(g=decodeURIComponent(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?void 0:void 0!==e[g]?e[g]:g),m)for(;m>=k;k++)i=""===l[k]?j.length:l[k],j=j[i]=m>k?j[i]||(l[k+1]&&isNaN(l[k+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]=void 0!==d[i]?[d[i],g]:g;else i&&(d[i]=c?void 0:"")}),d}});;/*! BARNES-BUILDER 2024-02-21 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.ScrollMagic=b()}(this,function(){"use strict";var a=function(){};a.version="2.0.5",window.addEventListener("mousewheel",function(){});var b="data-scrollmagic-pin-spacer";a.Controller=function(d){var f,g,h="ScrollMagic.Controller",i="FORWARD",j="REVERSE",k="PAUSED",l=c.defaults,m=this,n=e.extend({},l,d),o=[],p=!1,q=0,r=k,s=!0,t=0,u=!0,v=function(){for(var a in n)l.hasOwnProperty(a)||delete n[a];if(n.container=e.get.elements(n.container)[0],!n.container)throw h+" init failed.";s=n.container===window||n.container===document.body||!document.body.contains(n.container),s&&(n.container=window),t=y(),n.container.addEventListener("resize",C),n.container.addEventListener("scroll",C),n.refreshInterval=parseInt(n.refreshInterval)||l.refreshInterval,w()},w=function(){n.refreshInterval>0&&(g=window.setTimeout(D,n.refreshInterval))},x=function(){return n.vertical?e.get.scrollTop(n.container):e.get.scrollLeft(n.container)},y=function(){return n.vertical?e.get.height(n.container):e.get.width(n.container)},z=this._setScrollPos=function(a){n.vertical?s?window.scrollTo(e.get.scrollLeft(),a):n.container.scrollTop=a:s?window.scrollTo(a,e.get.scrollTop()):n.container.scrollLeft=a},A=function(){if(u&&p){var a=e.type.Array(p)?p:o.slice(0);p=!1;var b=q;q=m.scrollPos();var c=q-b;0!==c&&(r=c>0?i:j),r===j&&a.reverse(),a.forEach(function(a){a.update(!0)})}},B=function(){f=e.rAF(A)},C=function(a){"resize"==a.type&&(t=y(),r=k),p!==!0&&(p=!0,B())},D=function(){if(!s&&t!=y()){var a;try{a=new Event("resize",{bubbles:!1,cancelable:!1})}catch(b){a=document.createEvent("Event"),a.initEvent("resize",!1,!1)}n.container.dispatchEvent(a)}o.forEach(function(a){a.refresh()}),w()};this._options=n;var E=function(a){if(a.length<=1)return a;var b=a.slice(0);return b.sort(function(a,b){return a.scrollOffset()>b.scrollOffset()?1:-1}),b};return this.addScene=function(b){if(e.type.Array(b))b.forEach(function(a){m.addScene(a)});else if(b instanceof a.Scene)if(b.controller()!==m)b.addTo(m);else if(o.indexOf(b)<0){o.push(b),o=E(o),b.on("shift.controller_sort",function(){o=E(o)});for(var c in n.globalSceneOptions)b[c]&&b[c].call(b,n.globalSceneOptions[c])}return m},this.removeScene=function(a){if(e.type.Array(a))a.forEach(function(a){m.removeScene(a)});else{var b=o.indexOf(a);b>-1&&(a.off("shift.controller_sort"),o.splice(b,1),a.remove())}return m},this.updateScene=function(b,c){return e.type.Array(b)?b.forEach(function(a){m.updateScene(a,c)}):c?b.update(!0):p!==!0&&b instanceof a.Scene&&(p=p||[],-1==p.indexOf(b)&&p.push(b),p=E(p),B()),m},this.update=function(a){return C({type:"resize"}),a&&A(),m},this.scrollTo=function(c,d){if(e.type.Number(c))z.call(n.container,c,d);else if(c instanceof a.Scene)c.controller()===m&&m.scrollTo(c.scrollOffset(),d);else if(e.type.Function(c))z=c;else{var f=e.get.elements(c)[0];if(f){for(;f.parentNode.hasAttribute(b);)f=f.parentNode;var g=n.vertical?"top":"left",h=e.get.offset(n.container),i=e.get.offset(f);s||(h[g]-=m.scrollPos()),m.scrollTo(i[g]-h[g],d)}}return m},this.scrollPos=function(a){return arguments.length?(e.type.Function(a)&&(x=a),m):x.call(m)},this.info=function(a){var b={size:t,vertical:n.vertical,scrollPos:q,scrollDirection:r,container:n.container,isDocument:s};return arguments.length?void 0!==b[a]?b[a]:void 0:b},this.loglevel=function(){return m},this.enabled=function(a){return arguments.length?(u!=a&&(u=!!a,m.updateScene(o,!0)),m):u},this.destroy=function(a){window.clearTimeout(g);for(var b=o.length;b--;)o[b].destroy(a);return n.container.removeEventListener("resize",C),n.container.removeEventListener("scroll",C),e.cAF(f),null},v(),m};var c={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};a.Controller.addOption=function(a,b){c.defaults[a]=b},a.Controller.extend=function(b){var c=this;a.Controller=function(){return c.apply(this,arguments),this.$super=e.extend({},this),b.apply(this,arguments)||this},e.extend(a.Controller,c),a.Controller.prototype=c.prototype,a.Controller.prototype.constructor=a.Controller},a.Scene=function(c){var f,g,h="BEFORE",i="DURING",j="AFTER",k=d.defaults,l=this,m=e.extend({},k,c),n=h,o=0,p={start:0,end:0},q=0,r=!0,s=function(){for(var a in m)k.hasOwnProperty(a)||delete m[a];for(var b in k)B(b);z()},t={};this.on=function(a,b){return e.type.Function(b)&&(a=a.trim().split(" "),a.forEach(function(a){var c=a.split("."),d=c[0],e=c[1];"*"!=d&&(t[d]||(t[d]=[]),t[d].push({namespace:e||"",callback:b}))})),l},this.off=function(a,b){return a?(a=a.trim().split(" "),a.forEach(function(a){var c=a.split("."),d=c[0],e=c[1]||"",f="*"===d?Object.keys(t):[d];f.forEach(function(a){for(var c=t[a]||[],d=c.length;d--;){var f=c[d];!f||e!==f.namespace&&"*"!==e||b&&b!=f.callback||c.splice(d,1)}c.length||delete t[a]})}),l):l},this.trigger=function(b,c){if(b){var d=b.trim().split("."),e=d[0],f=d[1],g=t[e];g&&g.forEach(function(b){f&&f!==b.namespace||b.callback.call(l,new a.Event(e,b.namespace,l,c))})}return l},l.on("change.internal",function(a){"loglevel"!==a.what&&"tweenChanges"!==a.what&&("triggerElement"===a.what?w():"reverse"===a.what&&l.update())}).on("shift.internal",function(){u(),l.update()}),this.addTo=function(b){return b instanceof a.Controller&&g!=b&&(g&&g.removeScene(l),g=b,z(),v(!0),w(!0),u(),g.info("container").addEventListener("resize",x),b.addScene(l),l.trigger("add",{controller:g}),l.update()),l},this.enabled=function(a){return arguments.length?(r!=a&&(r=!!a,l.update(!0)),l):r},this.remove=function(){if(g){g.info("container").removeEventListener("resize",x);var a=g;g=void 0,a.removeScene(l),l.trigger("remove")}return l},this.destroy=function(a){return l.trigger("destroy",{reset:a}),l.remove(),l.off("*.*"),null},this.update=function(a){if(g)if(a)if(g.enabled()&&r){var b,c=g.info("scrollPos");b=m.duration>0?(c-p.start)/(p.end-p.start):c>=p.start?1:0,l.trigger("update",{startPos:p.start,endPos:p.end,scrollPos:c}),l.progress(b)}else C&&n===i&&E(!0);else g.updateScene(l,!1);return l},this.refresh=function(){return v(),w(),l},this.progress=function(a){if(arguments.length){var b=!1,c=n,d=g?g.info("scrollDirection"):"PAUSED",e=m.reverse||a>=o;if(0===m.duration?(b=o!=a,o=1>a&&e?0:1,n=0===o?h:i):0>a&&n!==h&&e?(o=0,n=h,b=!0):a>=0&&1>a&&e?(o=a,n=i,b=!0):a>=1&&n!==j?(o=1,n=j,b=!0):n!==i||e||E(),b){var f={progress:o,state:n,scrollDirection:d},k=n!=c,p=function(a){l.trigger(a,f)};k&&c!==i&&(p("enter"),p(c===h?"start":"end")),p("progress"),k&&n!==i&&(p(n===h?"start":"end"),p("leave"))}return l}return o};var u=function(){p={start:q+m.offset},g&&m.triggerElement&&(p.start-=g.info("size")*m.triggerHook),p.end=p.start+m.duration},v=function(a){if(f){var b="duration";A(b,f.call(l))&&!a&&(l.trigger("change",{what:b,newval:m[b]}),l.trigger("shift",{reason:b}))}},w=function(a){var c=0,d=m.triggerElement;if(g&&d){for(var f=g.info(),h=e.get.offset(f.container),i=f.vertical?"top":"left";d.parentNode.hasAttribute(b);)d=d.parentNode;var j=e.get.offset(d);f.isDocument||(h[i]-=g.scrollPos()),c=j[i]-h[i]}var k=c!=q;q=c,k&&!a&&l.trigger("shift",{reason:"triggerElementPosition"})},x=function(){m.triggerHook>0&&l.trigger("shift",{reason:"containerResize"})},y=e.extend(d.validate,{duration:function(a){if(e.type.String(a)&&a.match(/^(\.|\d)*\d+%$/)){var b=parseFloat(a)/100;a=function(){return g?g.info("size")*b:0}}if(e.type.Function(a)){f=a;try{a=parseFloat(f())}catch(c){a=-1}}if(a=parseFloat(a),!e.type.Number(a)||0>a)throw f?(f=void 0,0):0;return a}}),z=function(a){a=arguments.length?[a]:Object.keys(y),a.forEach(function(a){var b;if(y[a])try{b=y[a](m[a])}catch(c){b=k[a]}finally{m[a]=b}})},A=function(a,b){var c=!1,d=m[a];return m[a]!=b&&(m[a]=b,z(a),c=d!=m[a]),c},B=function(a){l[a]||(l[a]=function(b){return arguments.length?("duration"===a&&(f=void 0),A(a,b)&&(l.trigger("change",{what:a,newval:m[a]}),d.shifts.indexOf(a)>-1&&l.trigger("shift",{reason:a})),l):m[a]})};this.controller=function(){return g},this.state=function(){return n},this.scrollOffset=function(){return p.start},this.triggerPosition=function(){var a=m.offset;return g&&(a+=m.triggerElement?q:g.info("size")*l.triggerHook()),a};var C,D;l.on("shift.internal",function(a){var b="duration"===a.reason;(n===j&&b||n===i&&0===m.duration)&&E(),b&&F()}).on("progress.internal",function(){E()}).on("add.internal",function(){F()}).on("destroy.internal",function(a){l.removePin(a.reset)});var E=function(a){if(C&&g){var b=g.info(),c=D.spacer.firstChild;if(a||n!==i){var d={position:D.inFlow?"relative":"absolute",top:0,left:0},f=e.css(c,"position")!=d.position;D.pushFollowers?m.duration>0&&(n===j&&0===parseFloat(e.css(D.spacer,"padding-top"))?f=!0:n===h&&0===parseFloat(e.css(D.spacer,"padding-bottom"))&&(f=!0)):d[b.vertical?"top":"left"]=m.duration*o,e.css(c,d),f&&F()}else{"fixed"!=e.css(c,"position")&&(e.css(c,{position:"fixed"}),F());var k=e.get.offset(D.spacer,!0),l=m.reverse||0===m.duration?b.scrollPos-p.start:Math.round(o*m.duration*10)/10;k[b.vertical?"top":"left"]+=l,e.css(D.spacer.firstChild,{top:k.top,left:k.left})}}},F=function(){if(C&&g&&D.inFlow){var a=n===i,b=g.info("vertical"),c=D.spacer.firstChild,d=e.isMarginCollapseType(e.css(D.spacer,"display")),f={};D.relSize.width||D.relSize.autoFullWidth?a?e.css(C,{width:e.get.width(D.spacer)}):e.css(C,{width:"100%"}):(f["min-width"]=e.get.width(b?C:c,!0,!0),f.width=a?f["min-width"]:"auto"),D.relSize.height?a?e.css(C,{height:e.get.height(D.spacer)-(D.pushFollowers?m.duration:0)}):e.css(C,{height:"100%"}):(f["min-height"]=e.get.height(b?c:C,!0,!d),f.height=a?f["min-height"]:"auto"),D.pushFollowers&&(f["padding"+(b?"Top":"Left")]=m.duration*o,f["padding"+(b?"Bottom":"Right")]=m.duration*(1-o)),e.css(D.spacer,f)}},G=function(){g&&C&&n===i&&!g.info("isDocument")&&E()},H=function(){g&&C&&n===i&&((D.relSize.width||D.relSize.autoFullWidth)&&e.get.width(window)!=e.get.width(D.spacer.parentNode)||D.relSize.height&&e.get.height(window)!=e.get.height(D.spacer.parentNode))&&F()},I=function(a){g&&C&&n===i&&!g.info("isDocument")&&(a.preventDefault(),g._setScrollPos(g.info("scrollPos")-((a.wheelDelta||a[g.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-a.detail)))};this.setPin=function(a,c){var d={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(c=e.extend({},d,c),a=e.get.elements(a)[0],!a)return l;if("fixed"===e.css(a,"position"))return l;if(C){if(C===a)return l;l.removePin()}C=a;var f=C.parentNode.style.display,g=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];C.parentNode.style.display="none";var h="absolute"!=e.css(C,"position"),i=e.css(C,g.concat(["display"])),j=e.css(C,["width","height"]);C.parentNode.style.display=f,!h&&c.pushFollowers&&(c.pushFollowers=!1);var k=C.parentNode.insertBefore(document.createElement("div"),C),m=e.extend(i,{position:h?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(h||e.extend(m,e.css(C,["width","height"])),e.css(k,m),k.setAttribute(b,""),e.addClass(k,c.spacerClass),D={spacer:k,relSize:{width:"%"===j.width.slice(-1),height:"%"===j.height.slice(-1),autoFullWidth:"auto"===j.width&&h&&e.isMarginCollapseType(i.display)},pushFollowers:c.pushFollowers,inFlow:h},!C.___origStyle){C.___origStyle={};var n=C.style,o=g.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);o.forEach(function(a){C.___origStyle[a]=n[a]||""})}return D.relSize.width&&e.css(k,{width:j.width}),D.relSize.height&&e.css(k,{height:j.height}),k.appendChild(C),e.css(C,{position:h?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(D.relSize.width||D.relSize.autoFullWidth)&&e.css(C,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",G),window.addEventListener("resize",G),window.addEventListener("resize",H),C.addEventListener("mousewheel",I),C.addEventListener("DOMMouseScroll",I),E(),l},this.removePin=function(a){if(C){if(n===i&&E(!0),a||!g){var c=D.spacer.firstChild;if(c.hasAttribute(b)){var d=D.spacer.style,f=["margin","marginLeft","marginRight","marginTop","marginBottom"];margins={},f.forEach(function(a){margins[a]=d[a]||""}),e.css(c,margins)}D.spacer.parentNode.insertBefore(c,D.spacer),D.spacer.parentNode.removeChild(D.spacer),C.parentNode.hasAttribute(b)||(e.css(C,C.___origStyle),delete C.___origStyle)}window.removeEventListener("scroll",G),window.removeEventListener("resize",G),window.removeEventListener("resize",H),C.removeEventListener("mousewheel",I),C.removeEventListener("DOMMouseScroll",I),C=void 0}return l};var J,K=[];return l.on("destroy.internal",function(a){l.removeClassToggle(a.reset)}),this.setClassToggle=function(a,b){var c=e.get.elements(a);return 0!==c.length&&e.type.String(b)?(K.length>0&&l.removeClassToggle(),J=b,K=c,l.on("enter.internal_class leave.internal_class",function(a){var b="enter"===a.type?e.addClass:e.removeClass;K.forEach(function(a){b(a,J)})}),l):l},this.removeClassToggle=function(a){return a&&K.forEach(function(a){e.removeClass(a,J)}),l.off("start.internal_class end.internal_class"),J=void 0,K=[],l},s(),l};var d={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(a){if(a=parseFloat(a),!e.type.Number(a))throw 0;return a},triggerElement:function(a){if(a=a||void 0){var b=e.get.elements(a)[0];if(!b)throw 0;a=b}return a},triggerHook:function(a){var b={onCenter:.5,onEnter:1,onLeave:0};if(e.type.Number(a))a=Math.max(0,Math.min(parseFloat(a),1));else{if(!(a in b))throw 0;a=b[a]}return a},reverse:function(a){return!!a}},shifts:["duration","offset","triggerHook"]};a.Scene.addOption=function(a,b,c,e){a in d.defaults||(d.defaults[a]=b,d.validate[a]=c,e&&d.shifts.push(a))},a.Scene.extend=function(b){var c=this;a.Scene=function(){return c.apply(this,arguments),this.$super=e.extend({},this),b.apply(this,arguments)||this},e.extend(a.Scene,c),a.Scene.prototype=c.prototype,a.Scene.prototype.constructor=a.Scene},a.Event=function(a,b,c,d){d=d||{};for(var e in d)this[e]=d[e];return this.type=a,this.target=this.currentTarget=c,this.namespace=b||"",this.timeStamp=this.timestamp=Date.now(),this};var e=a._util=function(a){var b,c={},d=function(a){return parseFloat(a)||0},e=function(b){return b.currentStyle?b.currentStyle:a.getComputedStyle(b)},f=function(b,c,f,g){if(c=c===document?a:c,c===a)g=!1;else if(!l.DomElement(c))return 0;b=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();var h=(f?c["offset"+b]||c["outer"+b]:c["client"+b]||c["inner"+b])||0;if(f&&g){var i=e(c);h+="Height"===b?d(i.marginTop)+d(i.marginBottom):d(i.marginLeft)+d(i.marginRight)}return h},g=function(a){return a.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})};c.extend=function(a){for(a=a||{},b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},c.isMarginCollapseType=function(a){return["block","flex","list-item","table","-webkit-box"].indexOf(a)>-1};var h=0,i=["ms","moz","webkit","o"],j=a.requestAnimationFrame,k=a.cancelAnimationFrame;for(b=0;!j&&b<i.length;++b)j=a[i[b]+"RequestAnimationFrame"],k=a[i[b]+"CancelAnimationFrame"]||a[i[b]+"CancelRequestAnimationFrame"];j||(j=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-h)),e=a.setTimeout(function(){b(c+d)},d);return h=c+d,e}),k||(k=function(b){a.clearTimeout(b)}),c.rAF=j.bind(a),c.cAF=k.bind(a);var l=c.type=function(a){return Object.prototype.toString.call(a).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};l.String=function(a){return"string"===l(a)},l.Function=function(a){return"function"===l(a)},l.Array=function(a){return Array.isArray(a)},l.Number=function(a){return!l.Array(a)&&a-parseFloat(a)+1>=0},l.DomElement=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName};var m=c.get={};return m.elements=function(b){var c=[];if(l.String(b))try{b=document.querySelectorAll(b)}catch(d){return c}if("nodelist"===l(b)||l.Array(b))for(var e=0,f=c.length=b.length;f>e;e++){var g=b[e];c[e]=l.DomElement(g)?g:m.elements(g)}else(l.DomElement(b)||b===document||b===a)&&(c=[b]);return c},m.scrollTop=function(b){return b&&"number"==typeof b.scrollTop?b.scrollTop:a.pageYOffset||0},m.scrollLeft=function(b){return b&&"number"==typeof b.scrollLeft?b.scrollLeft:a.pageXOffset||0},m.width=function(a,b,c){return f("width",a,b,c)},m.height=function(a,b,c){return f("height",a,b,c)},m.offset=function(a,b){var c={top:0,left:0};if(a&&a.getBoundingClientRect){var d=a.getBoundingClientRect();c.top=d.top,c.left=d.left,b||(c.top+=m.scrollTop(),c.left+=m.scrollLeft())}return c},c.addClass=function(a,b){b&&(a.classList?a.classList.add(b):a.className+=" "+b)},c.removeClass=function(a,b){b&&(a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," "))},c.css=function(a,b){if(l.String(b))return e(a)[g(b)];if(l.Array(b)){var c={},d=e(a);return b.forEach(function(a){c[a]=d[g(a)]}),c}for(var f in b){var h=b[f];h==parseFloat(h)&&(h+="px"),a.style[g(f)]=h}},c}(window||{});return a});;/*! BARNES-BUILDER 2024-02-21 */
"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){var b,c,d=function(b,c){return this.$el=b,this.options=a.extend({},d.rules.defaults,d.rules[c.rule]||{},c),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.$el.on({"focus.spinner":a.proxy(function(b){b.preventDefault(),a(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this),"change.spinner":a.proxy(function(a){a.preventDefault(),this.value(this.$el.val())},this),"keydown.spinner":a.proxy(function(a){var b={38:"up",40:"down"}[a.which];b&&(a.preventDefault(),this.spin(b))},this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};d.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},d.prototype={spin:function(b){if(!this.$el.prop("disabled")){this.oldValue=this.value();var c=a.isFunction(this.options.step)?this.options.step.call(this,b):this.options.step,d="up"===b?1:-1;this.value(this.oldValue+Number(c)*d)}},value:function(d){if(null===d||void 0===d)return this.numeric(this.$el.val());d=this.numeric(d);var e=this.validate(d);0!==e&&(d=-1===e?this.min:this.max),this.$el.val(d.toFixed(this.options.precision)),this.oldValue!==this.value()&&(this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(b),b=setTimeout(a.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),c.delay))},numeric:function(a){return a=this.options.precision>0?parseFloat(a,10):parseInt(a,10),isFinite(a)?a:a||this.options.min||0},validate:function(a){return null!==this.options.min&&a<this.min?-1:null!==this.options.max&&a>this.max?1:0}},c=function(b,c){this.$el=a(b),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find(':input[type="text"]')),c=a.extend({},c,this.$spinning.data()),this.spinning=new d(this.$spinning,c),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',a.proxy(this,"spin")).on("mousedown.spinner",'[data-spin="up"], [data-spin="down"]',a.proxy(this,"spin")),a(document).on("mouseup.spinner",a.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),c.delay&&this.delay(c.delay),c.changed&&this.changed(c.changed),c.changing&&this.changing(c.changing)},c.delay=500,c.prototype={constructor:c,spin:function(b){var c=a(b.currentTarget).data("spin");switch(b.type){case"click":b.preventDefault(),this.spinning.spin(c);break;case"mousedown":1===b.which&&(this.spinTimeout=setTimeout(a.proxy(this,"beginSpin",c),300))}},delay:function(a){var b=Number(a);b>=0&&(this.constructor.delay=b+100)},value:function(){return this.spinning.value()},changed:function(a){this.bindHandler("changed.spinner",a)},changing:function(a){this.bindHandler("changing.spinner",a)},bindHandler:function(b,c){a.isFunction(c)?this.$spinning.on(b,c):this.$spinning.off(b)},beginSpin:function(b){this.spinInterval=setInterval(a.proxy(this.spinning,"spin",b),100)}};var e=a.fn.spinner;return a.fn.spinner=function(b,d){return this.each(function(){var e=a.data(this,"spinner");e||(e=new c(this,b),a.data(this,"spinner",e)),"delay"===b||"changed"===b||"changing"===b?e[b](d):"step"===b&&d?e.spinning.step=d:"spin"===b&&d&&e.spinning.spin(d)})},a.fn.spinner.Constructor=c,a.fn.spinner.noConflict=function(){return a.fn.spinner=e,this},a(function(){a('[data-trigger="spinner"]').spinner()}),a.fn.spinner});;/*! BARNES-BUILDER 2024-02-21 */
+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function b(b,d){var e,f=this;f.defaults={accessibility:!0,adaptiveHeight:!0,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},f.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(f,f.initials),f.activeBreakpoint=null,f.animType=null,f.animProp=null,f.breakpoints=[],f.breakpointSettings=[],f.cssTransitions=!1,f.focussed=!1,f.interrupted=!1,f.hidden="hidden",f.paused=!0,f.positionProp=null,f.respondTo=null,f.rowCount=1,f.shouldClick=!0,f.$slider=a(b),f.$slidesCache=null,f.transformType=null,f.transitionType=null,f.visibilityChange="visibilitychange",f.windowWidth=0,f.windowTimer=null,e=a(b).data("slick")||{},f.options=a.extend({},f.defaults,d,e),f.currentSlide=f.options.initialSlide,f.originalSettings=f.options,"undefined"!=typeof document.mozHidden?(f.hidden="mozHidden",f.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(f.hidden="webkitHidden",f.visibilityChange="webkitvisibilitychange"),f.autoPlay=a.proxy(f.autoPlay,f),f.autoPlayClear=a.proxy(f.autoPlayClear,f),f.autoPlayIterator=a.proxy(f.autoPlayIterator,f),f.changeSlide=a.proxy(f.changeSlide,f),f.clickHandler=a.proxy(f.clickHandler,f),f.selectHandler=a.proxy(f.selectHandler,f),f.setPosition=a.proxy(f.setPosition,f),f.swipeHandler=a.proxy(f.swipeHandler,f),f.dragHandler=a.proxy(f.dragHandler,f),f.keyHandler=a.proxy(f.keyHandler,f),f.instanceUid=c++,f.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,f.registerBreakpoints(),f.init(!0)}var c=0;return b}(),b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),d[e.animType]=e.options.vertical===!1?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;return c&&null!==c&&(c=a(c).not(b.$slider)),c},b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};c[b.transitionType]=b.options.fade===!1?b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:"opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(a.options.infinite===!1&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1===0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var b,c,d=this;if(d.options.dots===!0&&d.slideCount>d.options.slidesToShow){for(d.$slider.addClass("slick-dotted"),c=a("<ul />").addClass(d.options.dotsClass),b=0;b<=d.getDotCount();b+=1)c.append(a("<li />").append(d.options.customPaging.call(this,d,b)));d.$dots=c.appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),b.options.centerMode!==!0&&b.options.swipeToSlide!==!0||(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var a,b,c,d,e,f,g,h=this;if(d=document.createDocumentFragment(),f=h.$slider.children(),h.options.rows>1){for(g=h.options.slidesPerRow*h.options.rows,e=Math.ceil(f.length/g),a=0;e>a;a++){var i=document.createElement("div");for(b=0;b<h.options.rows;b++){var j=document.createElement("div");for(c=0;c<h.options.slidesPerRow;c++){var k=a*g+(b*h.options.slidesPerRow+c);f.get(k)&&j.appendChild(f.get(k))}i.appendChild(j)}d.appendChild(i)}h.$slider.empty().append(d),h.$slider.children().children().children().css({width:100/h.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var d,e,f,g=this,h=!1,i=g.$slider.width(),j=window.innerWidth||a(window).width();if("window"===g.respondTo?f=j:"slider"===g.respondTo?f=i:"min"===g.respondTo&&(f=Math.min(j,i)),g.options.responsive&&g.options.responsive.length&&null!==g.options.responsive){e=null;for(d in g.breakpoints)g.breakpoints.hasOwnProperty(d)&&(g.originalSettings.mobileFirst===!1?f<g.breakpoints[d]&&(e=g.breakpoints[d]):f>g.breakpoints[d]&&(e=g.breakpoints[d]));null!==e?null!==g.activeBreakpoint?(e!==g.activeBreakpoint||c)&&(g.activeBreakpoint=e,"unslick"===g.breakpointSettings[e]?g.unslick(e):(g.options=a.extend({},g.originalSettings,g.breakpointSettings[e]),b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b)),h=e):(g.activeBreakpoint=e,"unslick"===g.breakpointSettings[e]?g.unslick(e):(g.options=a.extend({},g.originalSettings,g.breakpointSettings[e]),b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b)),h=e):null!==g.activeBreakpoint&&(g.activeBreakpoint=null,g.options=g.originalSettings,b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b),h=e),b||h===!1||g.$slider.trigger("breakpoint",[g,h])}},b.prototype.changeSlide=function(b,c){var d,e,f,g=this,h=a(b.currentTarget);switch(h.is("a")&&b.preventDefault(),h.is("li")||(h=h.closest("li")),f=g.slideCount%g.options.slidesToScroll!==0,d=f?0:(g.slideCount-g.currentSlide)%g.options.slidesToScroll,b.data.message){case"previous":e=0===d?g.options.slidesToScroll:g.options.slidesToShow-d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide-e,!1,c);break;case"next":e=0===d?g.options.slidesToScroll:d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide+e,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||h.index()*g.options.slidesToScroll;g.slideHandler(g.checkNavigable(i),!1,c),h.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var b,c,d=this;if(b=d.getNavigableIndexes(),c=0,a>b[b.length-1])a=b[b.length-1];else for(var e in b){if(a<b[e]){a=c;break}c=b[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var a,b=this;b.options.rows>1&&(a=b.$slides.children().children(),a.removeAttr("style"),b.$slider.empty().append(a))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var b,c,d,e=this,f=0;return e.slideOffset=0,c=e.$slides.first().outerHeight(!0),e.options.infinite===!0?(e.slideCount>e.options.slidesToShow&&(e.slideOffset=e.slideWidth*e.options.slidesToShow*-1,f=c*e.options.slidesToShow*-1),e.slideCount%e.options.slidesToScroll!==0&&a+e.options.slidesToScroll>e.slideCount&&e.slideCount>e.options.slidesToShow&&(a>e.slideCount?(e.slideOffset=(e.options.slidesToShow-(a-e.slideCount))*e.slideWidth*-1,f=(e.options.slidesToShow-(a-e.slideCount))*c*-1):(e.slideOffset=e.slideCount%e.options.slidesToScroll*e.slideWidth*-1,f=e.slideCount%e.options.slidesToScroll*c*-1))):a+e.options.slidesToShow>e.slideCount&&(e.slideOffset=(a+e.options.slidesToShow-e.slideCount)*e.slideWidth,f=(a+e.options.slidesToShow-e.slideCount)*c),e.slideCount<=e.options.slidesToShow&&(e.slideOffset=0,f=0),e.options.centerMode===!0&&e.options.infinite===!0?e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)-e.slideWidth:e.options.centerMode===!0&&(e.slideOffset=0,e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)),b=e.options.vertical===!1?a*e.slideWidth*-1+e.slideOffset:a*c*-1+f,e.options.variableWidth===!0&&(d=e.$slideTrack.children(".slick-slide").eq(e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?a:a+e.options.slidesToShow),b=e.options.rtl===!0?d[0]?-1*(e.$slideTrack.width()-d[0].offsetLeft-d.width()):0:d[0]?-1*d[0].offsetLeft:0,e.options.centerMode===!0&&(d=e.$slideTrack.children(".slick-slide").eq(e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?a:a+e.options.slidesToShow+1),b=e.options.rtl===!0?d[0]?-1*(e.$slideTrack.width()-d[0].offsetLeft-d.width()):0:d[0]?-1*d[0].offsetLeft:0,b+=(e.$list.width()-d.outerWidth())/2)),b},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var a,b=this,c=0,d=0,e=[];for(b.options.infinite===!1?a=b.slideCount:(c=-1*b.options.slidesToScroll,d=-1*b.options.slidesToScroll,a=2*b.slideCount);a>c;)e.push(c),c=d+b.options.slidesToScroll,d+=b.options.slidesToScroll<=b.options.slidesToShow?b.options.slidesToScroll:b.options.slidesToShow;return e},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var b,c,d,e=this;return d=e.options.centerMode===!0?e.slideWidth*Math.floor(e.options.slidesToShow/2):0,e.options.swipeToSlide===!0?(e.$slideTrack.find(".slick-slide").each(function(b,f){return f.offsetLeft-d+a(f).outerWidth()/2>-1*e.swipeLeft?(c=f,!1):void 0}),b=Math.abs(a(c).attr("data-slick-index")-e.currentSlide)||1):e.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:b.options.rtl===!0?"next":"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:b.options.rtl===!0?"previous":"next"}}))},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")}),g.$slider.trigger("lazyLoaded",[g,b,c])})},d.onerror=function(){b.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),g.$slider.trigger("lazyLoadError",[g,b,c])},d.src=c})}var c,d,e,f,g=this;g.options.centerMode===!0?g.options.infinite===!0?(e=g.currentSlide+(g.options.slidesToShow/2+1),f=e+g.options.slidesToShow+2):(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=2+(g.options.slidesToShow/2+1)+g.currentSlide):(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,f=Math.ceil(e+g.options.slidesToShow),g.options.fade===!0&&(e>0&&e--,f<=g.slideCount&&f++)),c=g.$slider.find(".slick-slide").slice(e,f),b(c),g.slideCount<=g.options.slidesToShow?(d=g.$slider.find(".slick-slide"),b(d)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(d=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),b(d)):0===g.currentSlide&&(d=g.$slider.find(".slick-cloned").slice(-1*g.options.slidesToShow),b(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),b.options.accessibility===!0&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var c,d,e,f=this,g=a("img[data-lazy]",f.$slider);g.length?(c=g.first(),d=c.attr("data-lazy"),e=document.createElement("img"),e.onload=function(){c.attr("src",d).removeAttr("data-lazy").removeClass("slick-loading"),f.options.adaptiveHeight===!0&&f.setPosition(),f.$slider.trigger("lazyLoaded",[f,c,d]),f.progressiveLazyLoad()},e.onerror=function(){3>b?setTimeout(function(){f.progressiveLazyLoad(b+1)},500):(c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),f.$slider.trigger("lazyLoadError",[f,c,d]),f.progressiveLazyLoad())},e.src=d):f.$slider.trigger("allImagesLoaded",[f])},b.prototype.refresh=function(b){var c,d,e=this;d=e.slideCount-e.options.slidesToShow,!e.options.infinite&&e.currentSlide>d&&(e.currentSlide=d),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),c=e.currentSlide,e.destroy(!0),a.extend(e,e.initials,{currentSlide:c}),e.init(),b||e.changeSlide({data:{message:"index",index:c}},!1)},b.prototype.registerBreakpoints=function(){var b,c,d,e=this,f=e.options.responsive||null;if("array"===a.type(f)&&f.length){e.respondTo=e.options.respondTo||"window";for(b in f)if(d=e.breakpoints.length-1,c=f[b].breakpoint,f.hasOwnProperty(b)){for(;d>=0;)e.breakpoints[d]&&e.breakpoints[d]===c&&e.breakpoints.splice(d,1),d--;e.breakpoints.push(c),e.breakpointSettings[c]=f[b].settings}e.breakpoints.sort(function(a,b){return e.options.mobileFirst?a-b:b-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},1))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,!(d.slideCount<1||0>a||a>d.slideCount-1)&&(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var b,c,d=this,e={};d.options.rtl===!0&&(a=-a),b="left"==d.positionProp?Math.ceil(a)+"px":"0px",c="top"==d.positionProp?Math.ceil(a)+"px":"0px",e[d.positionProp]=a,d.transformsEnabled===!1?d.$slideTrack.css(e):(e={},d.cssTransitions===!1?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var b,c=this;c.$slides.each(function(d,e){b=c.slideWidth*d*-1,a(e).css(c.options.rtl===!0?{position:"relative",right:b,top:0,zIndex:c.options.zIndex-2,opacity:0}:{position:"relative",left:b,top:0,zIndex:c.options.zIndex-2,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:c.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var b,c,d,e,f,g=this,h=!1;if("object"===a.type(arguments[0])?(d=arguments[0],h=arguments[1],f="multiple"):"string"===a.type(arguments[0])&&(d=arguments[0],e=arguments[1],h=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?f="responsive":"undefined"!=typeof arguments[1]&&(f="single")),"single"===f)g.options[d]=e;else if("multiple"===f)a.each(d,function(a,b){g.options[a]=b});else if("responsive"===f)for(c in e)if("array"!==a.type(g.options.responsive))g.options.responsive=[e[c]];else{for(b=g.options.responsive.length-1;b>=0;)g.options.responsive[b].breakpoint===e[c].breakpoint&&g.options.responsive.splice(b,1),b--;g.options.responsive.push(e[c])}h&&(g.unload(),g.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),void 0===b.WebkitTransition&&void 0===b.MozTransition&&void 0===b.msTransition||a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;c=f.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),f.$slides.eq(a).addClass("slick-current"),f.options.centerMode===!0?(b=Math.floor(f.options.slidesToShow/2),f.options.infinite===!0&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):c.length<=f.options.slidesToShow?c.addClass("slick-active").attr("aria-hidden","false"):(e=f.slideCount%f.options.slidesToShow,d=f.options.infinite===!0?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active").attr("aria-hidden","false"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()
},b.prototype.setupInfinite=function(){var b,c,d,e=this;if(e.options.fade===!0&&(e.options.centerMode=!1),e.options.infinite===!0&&e.options.fade===!1&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=e.options.centerMode===!0?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;d>b;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.interrupt=function(a){var b=this;a||b.autoPlay(),b.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h,i=null,j=this;return b=b||!1,j.animating===!0&&j.options.waitForAnimate===!0||j.options.fade===!0&&j.currentSlide===a||j.slideCount<=j.options.slidesToShow?void 0:(b===!1&&j.asNavFor(a),d=a,i=j.getLeft(d),g=j.getLeft(j.currentSlide),j.currentLeft=null===j.swipeLeft?g:j.swipeLeft,j.options.infinite===!1&&j.options.centerMode===!1&&(0>a||a>j.getDotCount()*j.options.slidesToScroll)?void(j.options.fade===!1&&(d=j.currentSlide,c!==!0?j.animateSlide(g,function(){j.postSlide(d)}):j.postSlide(d))):j.options.infinite===!1&&j.options.centerMode===!0&&(0>a||a>j.slideCount-j.options.slidesToScroll)?void(j.options.fade===!1&&(d=j.currentSlide,c!==!0?j.animateSlide(g,function(){j.postSlide(d)}):j.postSlide(d))):(j.options.autoplay&&clearInterval(j.autoPlayTimer),e=0>d?j.slideCount%j.options.slidesToScroll!==0?j.slideCount-j.slideCount%j.options.slidesToScroll:j.slideCount+d:d>=j.slideCount?j.slideCount%j.options.slidesToScroll!==0?0:d-j.slideCount:d,j.animating=!0,j.$slider.trigger("beforeChange",[j,j.currentSlide,e]),f=j.currentSlide,j.currentSlide=e,j.setSlideClasses(j.currentSlide),j.options.asNavFor&&(h=j.getNavTarget(),h=h.slick("getSlick"),h.slideCount<=h.options.slidesToShow&&h.setSlideClasses(j.currentSlide)),j.updateDots(),j.updateArrows(),j.options.fade===!0?(c!==!0?(j.fadeSlideOut(f),j.fadeSlide(e,function(){j.postSlide(e)})):j.postSlide(e),void j.animateHeight()):void(c!==!0?j.animateSlide(i,function(){j.postSlide(e)}):j.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"down":"up":"vertical"},b.prototype.swipeEnd=function(){var a,b,c=this;if(c.dragging=!1,c.interrupted=!1,c.shouldClick=!(c.touchObject.swipeLength>10),void 0===c.touchObject.curX)return!1;if(c.touchObject.edgeHit===!0&&c.$slider.trigger("edge",[c,c.swipeDirection()]),c.touchObject.swipeLength>=c.touchObject.minSwipe){switch(b=c.swipeDirection()){case"left":case"down":a=c.options.swipeToSlide?c.checkNavigable(c.currentSlide+c.getSlideCount()):c.currentSlide+c.getSlideCount(),c.currentDirection=0;break;case"right":case"up":a=c.options.swipeToSlide?c.checkNavigable(c.currentSlide-c.getSlideCount()):c.currentSlide-c.getSlideCount(),c.currentDirection=1}"vertical"!=b&&(c.slideHandler(a),c.touchObject={},c.$slider.trigger("swipe",[c,b]))}else c.touchObject.startX!==c.touchObject.curX&&(c.slideHandler(c.currentSlide),c.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var b,c,d,e,f,g=this;return f=void 0!==a.originalEvent?a.originalEvent.touches:null,!(!g.dragging||f&&1!==f.length)&&(b=g.getLeft(g.currentSlide),g.touchObject.curX=void 0!==f?f[0].pageX:a.clientX,g.touchObject.curY=void 0!==f?f[0].pageY:a.clientY,g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curX-g.touchObject.startX,2))),g.options.verticalSwiping===!0&&(g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curY-g.touchObject.startY,2)))),c=g.swipeDirection(),"vertical"!==c?(void 0!==a.originalEvent&&g.touchObject.swipeLength>4&&a.preventDefault(),e=(g.options.rtl===!1?1:-1)*(g.touchObject.curX>g.touchObject.startX?1:-1),g.options.verticalSwiping===!0&&(e=g.touchObject.curY>g.touchObject.startY?1:-1),d=g.touchObject.swipeLength,g.touchObject.edgeHit=!1,g.options.infinite===!1&&(0===g.currentSlide&&"right"===c||g.currentSlide>=g.getDotCount()&&"left"===c)&&(d=g.touchObject.swipeLength*g.options.edgeFriction,g.touchObject.edgeHit=!0),g.swipeLeft=g.options.vertical===!1?b+d*e:b+d*(g.$list.height()/g.listWidth)*e,g.options.verticalSwiping===!0&&(g.swipeLeft=b+d*e),g.options.fade!==!0&&g.options.touchMove!==!1&&(g.animating===!0?(g.swipeLeft=null,!1):void g.setCSS(g.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var b,c=this;return c.interrupted=!0,1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow?(c.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,void(c.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var a,b=this;a=Math.floor(b.options.slidesToShow/2),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&!b.options.infinite&&(b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),b.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===b.currentSlide?(b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):b.currentSlide>=b.slideCount-b.options.slidesToShow&&b.options.centerMode===!1?(b.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):b.currentSlide>=b.slideCount-1&&b.options.centerMode===!0&&(b.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(a.interrupted=document[a.hidden]?!0:!1)},a.fn.slick=function(){var a,c,d=this,e=arguments[0],f=Array.prototype.slice.call(arguments,1),g=d.length;for(a=0;g>a;a++)if("object"==typeof e||"undefined"==typeof e?d[a].slick=new b(d[a],e):c=d[a].slick[e].apply(d[a].slick,f),"undefined"!=typeof c)return c;return d}});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=-1,c=-1,d=function(a){return parseFloat(a)||0},e=function(b){var c=1,e=a(b),f=null,g=[];return e.each(function(){var b=a(this),e=b.offset().top-d(b.css("margin-top")),h=g.length>0?g[g.length-1]:null;null===h?g.push(b):Math.floor(Math.abs(f-e))<=c?g[g.length-1]=h.add(b):g.push(b),f=e}),g},f=function(b){var c={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof b?a.extend(c,b):("boolean"==typeof b?c.byRow=b:"remove"===b&&(c.remove=!0),c)},g=a.fn.matchHeight=function(b){var c=f(b);if(c.remove){var d=this;return this.css(c.property,""),a.each(g._groups,function(a,b){b.elements=b.elements.not(d)}),this}return this.length<=1&&!c.target?this:(g._groups.push({elements:this,options:c}),g._apply(this,c),this)};g.version="0.7.0",g._groups=[],g._throttle=80,g._maintainScroll=!1,g._beforeUpdate=null,g._afterUpdate=null,g._rows=e,g._parse=d,g._parseOptions=f,g._apply=function(b,c){var h=f(c),i=a(b),j=[i],k=a(window).scrollTop(),l=a("html").outerHeight(!0),m=i.parents().filter(":hidden");return m.each(function(){var b=a(this);b.data("style-cache",b.attr("style"))}),m.css("display","block"),h.byRow&&!h.target&&(i.each(function(){var b=a(this),c=b.css("display");"inline-block"!==c&&"flex"!==c&&"inline-flex"!==c&&(c="block"),b.data("style-cache",b.attr("style")),b.css({display:c,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),j=e(i),i.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||"")})),a.each(j,function(b,c){var e=a(c),f=0;if(h.target)f=h.target.outerHeight(!1);else{if(h.byRow&&e.length<=1)return void e.css(h.property,"");e.each(function(){var b=a(this),c=b.attr("style"),d=b.css("display");"inline-block"!==d&&"flex"!==d&&"inline-flex"!==d&&(d="block");var e={display:d};e[h.property]="",b.css(e),b.outerHeight(!1)>f&&(f=b.outerHeight(!1)),c?b.attr("style",c):b.css("display","")})}e.each(function(){var b=a(this),c=0;h.target&&b.is(h.target)||("border-box"!==b.css("box-sizing")&&(c+=d(b.css("border-top-width"))+d(b.css("border-bottom-width")),c+=d(b.css("padding-top"))+d(b.css("padding-bottom"))),b.css(h.property,f-c+"px"))})}),m.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||null)}),g._maintainScroll&&a(window).scrollTop(k/l*a("html").outerHeight(!0)),this},g._applyDataApi=function(){var b={};a("[data-match-height], [data-mh]").each(function(){var c=a(this),d=c.attr("data-mh")||c.attr("data-match-height");b[d]=d in b?b[d].add(c):c}),a.each(b,function(){this.matchHeight(!0)})};var h=function(b){g._beforeUpdate&&g._beforeUpdate(b,g._groups),a.each(g._groups,function(){g._apply(this.elements,this.options)}),g._afterUpdate&&g._afterUpdate(b,g._groups)};g._update=function(d,e){if(e&&"resize"===e.type){var f=a(window).width();if(f===b)return;b=f}d?-1===c&&(c=setTimeout(function(){h(e),c=-1},g._throttle)):h(e)},a(g._applyDataApi),a(window).bind("load",function(a){g._update(!1,a)}),a(window).bind("resize orientationchange",function(a){g._update(!0,a)})});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){var b=this.SelectBox=function(a,b){if(a instanceof jQuery){if(!(a.length>0))return;a=a[0]}return this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),b="object"==typeof b?b:{},this.selectElement=a,!(!b.mobile&&navigator.userAgent.match(/IEMobile|BlackBerry/i)&&"searchFilterSelect"!=a.id)&&"select"===a.tagName.toLowerCase()&&void this.init(b)};b.prototype.version="1.3.0",b.prototype.init=function(b){var c=a(this.selectElement);if(c.data("selectBox-control"))return!1;var d=a('<div class="selectBox-container" />'),e=a('<a class="selectBox" />'),f=c.attr("multiple")||parseInt(c.attr("size"))>1,g=b||{},h=parseInt(c.prop("tabindex"))||0,i=c.next(".selectBox-container"),j=this;if(i.length>0&&i.remove(),c.outerWidth>0&&e.width(c.outerWidth()),e.addClass(c.attr("class")).attr("title",c.attr("title")||"").attr("tabindex",h).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&a(document.activeElement).blur(),e.hasClass("selectBox-active")||(e.addClass("selectBox-active"),c.trigger("focus"))}).bind("blur.selectBox",function(){e.hasClass("selectBox-active")&&(e.removeClass("selectBox-active"),c.trigger("blur"))}),a(window).data("selectBox-bindings")||a(window).data("selectBox-bindings",!0).bind("scroll.selectBox",g.hideOnWindowScroll?this.hideMenus:a.noop).bind("resize.selectBox",this.hideMenus),c.attr("disabled")&&e.addClass("selectBox-disabled"),c.bind("click.selectBox",function(a){e.focus(),a.preventDefault()}),f){if(b=this.getOptions("inline"),e.append(b).data("selectBox-options",b).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(a){j.handleKeyDown(a)}).bind("keypress.selectBox",function(a){j.handleKeyPress(a)}).bind("mousedown.selectBox",function(b){1===b.which&&(a(b.target).is("A.selectBox-inline")&&b.preventDefault(),e.hasClass("selectBox-focus")||e.focus())}).insertAfter(c),!c[0].style.height){var k=c.attr("size")?parseInt(c.attr("size")):5,l=e.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");l.find(".selectBox-options").html("<li><a> </a></li>");var m=parseInt(l.find(".selectBox-options A:first").html("&nbsp;").outerHeight());l.remove(),e.height(m*k)}this.disableSelection(e)}else{var n=a('<span class="selectBox-label" />'),o=a('<span class="selectBox-arrow" />'),p=a('<span class="selectBox-title" />').append(c.attr("title")||"");n.attr("class",this.getLabelClass()).text(this.getLabelText()),b=this.getOptions("dropdown"),e.data("selectBox-options",b).addClass("selectBox-dropdown").append(p).append(n).append(o).bind("mousedown.selectBox",function(a){1===a.which&&(e.hasClass("selectBox-menuShowing")?j.hideMenus():(a.stopPropagation(),b.data("selectBox-down-at-x",a.screenX).data("selectBox-down-at-y",a.screenY),j.showMenu()))}).bind("keydown.selectBox",function(a){j.handleKeyDown(a)}).bind("keypress.selectBox",function(a){j.handleKeyPress(a)}).bind("open.selectBox",function(a,b){b&&b._selectBox===!0||j.showMenu()}).bind("close.selectBox",function(a,b){b&&b._selectBox===!0||j.hideMenus()}).appendTo(d),b.appendTo(d),d.insertAfter(c);var q=e.width()-o.outerWidth()-(parseInt(n.css("paddingLeft"))||0)-(parseInt(n.css("paddingRight"))||0);q>0&&n.width(q),this.disableSelection(e)}c.addClass("selectBox").data("selectBox-control",e).data("selectBox-settings",g).hide(),c.val()?e.addClass("selectBox--filled"):e.removeClass("selectBox--filled"),c.data("container-classes")&&d.addClass(c.data("container-classes"))},b.prototype.getOptions=function(b){var c,d=a(this.selectElement),e=this,f=function(b,c){return b.children("OPTION, OPTGROUP").each(function(){if(a(this).is("OPTION"))a(this).length>0?e.generateOptions(a(this),c):c.append("<li> </li>");else{var b=a('<li class="selectBox-optgroup" />');b.text(a(this).attr("label")),c.append(b),c=f(a(this),c)}}),c};switch(b){case"inline":return c=a('<ul class="selectBox-options" />'),c=f(d,c),c.find("A").bind("mouseover.selectBox",function(){e.addHover(a(this).parent())}).bind("mouseout.selectBox",function(){e.removeHover(a(this).parent())}).bind("mousedown.selectBox",function(a){1===a.which&&(a.preventDefault(),d.selectBox("control").hasClass("selectBox-active")||d.selectBox("control").focus())}).bind("mouseup.selectBox",function(b){1===b.which&&(e.hideMenus(),e.selectOption(a(this).parent(),b))}),this.disableSelection(c),c;case"dropdown":c=a('<ul class="selectBox-dropdown-menu selectBox-options" />'),c=f(d,c),c.data("selectBox-select",d).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(b){1===b.which&&(b.preventDefault(),b.screenX===c.data("selectBox-down-at-x")&&b.screenY===c.data("selectBox-down-at-y")&&(c.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),/android/i.test(navigator.userAgent.toLowerCase())&&/chrome/i.test(navigator.userAgent.toLowerCase())&&e.selectOption(a(this).parent()),e.hideMenus()))}).bind("mouseup.selectBox",function(b){1===b.which&&(b.screenX===c.data("selectBox-down-at-x")&&b.screenY===c.data("selectBox-down-at-y")||(c.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),e.selectOption(a(this).parent()),e.hideMenus()))}).bind("mouseover.selectBox",function(){e.addHover(a(this).parent())}).bind("mouseout.selectBox",function(){e.removeHover(a(this).parent())});var g=d.attr("class")||"";if(""!==g){g=g.split(" ");for(var h=0;h<g.length;h++)c.addClass(g[h]+"-selectBox-dropdown-menu")}return this.disableSelection(c),c}},b.prototype.getLabelClass=function(){var b=a(this.selectElement).find("OPTION:selected");return("selectBox-label "+(b.attr("class")||"")).replace(/\s+$/,"")},b.prototype.getLabelText=function(){var b=a(this.selectElement).find("OPTION:selected");return b.text()||" "},b.prototype.setLabel=function(){var b=a(this.selectElement),c=b.data("selectBox-control");c&&c.find(".selectBox-label").attr("class",this.getLabelClass()).text(this.getLabelText())},b.prototype.destroy=function(){var b=a(this.selectElement),c=b.data("selectBox-control");if(c){var d=c.data("selectBox-options");d.remove(),c.remove(),b.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()}},b.prototype.refresh=function(){var b,c=a(this.selectElement),d=c.data("selectBox-control"),e=d.hasClass("selectBox-dropdown")?"dropdown":"inline";switch(d.data("selectBox-options").remove(),b=this.getOptions(e),d.data("selectBox-options",b),e){case"inline":d.append(b);break;case"dropdown":this.setLabel(),a("BODY").append(b)}"dropdown"===e&&d.hasClass("selectBox-menuShowing")&&this.showMenu()},b.prototype.showMenu=function(){var b=this,c=a(this.selectElement),d=c.data("selectBox-control"),e=c.data("selectBox-settings"),f=d.data("selectBox-options");if(d.hasClass("selectBox-disabled"))return!1;this.hideMenus();var g=parseInt(d.css("borderBottomWidth"))||0,h=(parseInt(d.css("borderTopWidth"))||0,d.height()),i=(e.topPositionCorrelation?e.topPositionCorrelation:0,e.bottomPositionCorrelation?e.bottomPositionCorrelation:0,f.outerHeight()),j=d.outerHeight(),k=parseInt(f.css("max-height")),l=a(window).scrollTop(),m=d.offset().top-l,n=a(window).height()-(m+j),o=m>n&&i>n&&(null==e.keepInViewport||e.keepInViewport),p=o?-i:h+g;if(k>m&&k>n)if(o){var q=k-(m-5);f.css({"max-height":k-q+"px"}),p+=q}else{var q=k-(n-5);f.css({"max-height":k-q+"px"})}if(f.data("posTop",o),f.width(d.innerWidth()).css({top:p}).addClass("selectBox-options selectBox-options-"+(o?"top":"bottom")),c.triggerHandler("beforeopen"))return!1;var r=function(){c.triggerHandler("open",{_selectBox:!0})};switch(e.menuTransition){case"fade":f.fadeIn(e.menuSpeed,r);break;case"slide":f.slideDown(e.menuSpeed,r);break;default:f.show(e.menuSpeed,r)}e.menuSpeed||r();var s=f.find(".selectBox-selected:first");this.keepOptionInView(s,!0),this.addHover(s),d.addClass("selectBox-menuShowing selectBox-menuShowing-"+(o?"top":"bottom")),a(document).bind("mousedown.selectBox",function(c){if(1===c.which){if(a(c.target).parents().addBack().hasClass("selectBox-options"))return;b.hideMenus()}})},b.prototype.hideMenus=function(){0!==a(".selectBox-dropdown-menu:visible").length&&(a(document).unbind("mousedown.selectBox"),a(".selectBox-dropdown-menu").each(function(){var b=a(this),c=b.data("selectBox-select"),d=c.data("selectBox-control"),e=c.data("selectBox-settings"),f=b.data("posTop");if(c.triggerHandler("beforeclose"))return!1;var g=function(){c.triggerHandler("close",{_selectBox:!0})};if(e){switch(e.menuTransition){case"fade":b.fadeOut(e.menuSpeed,g);break;case"slide":b.slideUp(e.menuSpeed,g);break;default:b.hide(e.menuSpeed,g)}e.menuSpeed||g(),d.removeClass("selectBox-menuShowing selectBox-menuShowing-"+(f?"top":"bottom"))}else a(this).hide(),a(this).triggerHandler("close",{_selectBox:!0}),a(this).removeClass("selectBox-menuShowing selectBox-menuShowing-"+(f?"top":"bottom"));b.css("max-height",""),b.removeClass("selectBox-options-"+(f?"top":"bottom")),b.data("posTop",!1)}))},b.prototype.selectOption=function(b,c){var d=a(this.selectElement);b=a(b);var e=d.data("selectBox-control");if(d.data("selectBox-settings"),e.hasClass("selectBox-disabled"))return!1;if(0===b.length||b.hasClass("selectBox-disabled"))return!1;if(d.attr("multiple"))if(c.shiftKey&&e.data("selectBox-last-selected")){b.toggleClass("selectBox-selected");var f;f=b.index()>e.data("selectBox-last-selected").index()?b.siblings().slice(e.data("selectBox-last-selected").index(),b.index()):b.siblings().slice(b.index(),e.data("selectBox-last-selected").index()),f=f.not(".selectBox-optgroup, .selectBox-disabled"),b.hasClass("selectBox-selected")?f.addClass("selectBox-selected"):f.removeClass("selectBox-selected")}else this.isMac&&c.metaKey||!this.isMac&&c.ctrlKey?b.toggleClass("selectBox-selected"):(b.siblings().removeClass("selectBox-selected"),b.addClass("selectBox-selected"));else b.siblings().removeClass("selectBox-selected"),b.addClass("selectBox-selected");e.hasClass("selectBox-dropdown")&&e.find(".selectBox-label").text(b.text());var g=0,h=[];return d.attr("multiple")?e.find(".selectBox-selected A").each(function(){h[g++]=a(this).attr("rel")}):h=b.find("A").attr("rel"),e.data("selectBox-last-selected",b),d.val()!==h&&(d.val(h),d.val()?e.addClass("selectBox--filled"):e.removeClass("selectBox--filled"),this.setLabel(),d.trigger("change")),!0},b.prototype.addHover=function(b){b=a(b);var c=a(this.selectElement),d=c.data("selectBox-control"),e=d.data("selectBox-options");e.find(".selectBox-hover").removeClass("selectBox-hover"),b.addClass("selectBox-hover")},b.prototype.getSelectElement=function(){return this.selectElement},b.prototype.removeHover=function(b){b=a(b);var c=a(this.selectElement),d=c.data("selectBox-control"),e=d.data("selectBox-options");e.find(".selectBox-hover").removeClass("selectBox-hover")},b.prototype.keepOptionInView=function(b,c){if(b&&0!==b.length){var d=a(this.selectElement),e=d.data("selectBox-control"),f=e.data("selectBox-options"),g=e.hasClass("selectBox-dropdown")?f:f.parent(),h=parseInt(b.offset().top-g.position().top),i=parseInt(h+b.outerHeight());c?g.scrollTop(b.offset().top-g.offset().top+g.scrollTop()-g.height()/2):(0>h&&g.scrollTop(b.offset().top-g.offset().top+g.scrollTop()),i>g.height()&&g.scrollTop(b.offset().top+b.outerHeight()-g.offset().top+g.scrollTop()-g.height()))}},b.prototype.handleKeyDown=function(b){var c=a(this.selectElement),d=c.data("selectBox-control"),e=d.data("selectBox-options"),f=c.data("selectBox-settings"),g=0,h=0;if(!d.hasClass("selectBox-disabled"))switch(b.keyCode){case 8:b.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:d.hasClass("selectBox-menuShowing")?(this.selectOption(e.find("LI.selectBox-hover:first"),b),d.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:if(b.preventDefault(),d.hasClass("selectBox-menuShowing")){var i=e.find(".selectBox-hover").prev("LI");for(g=e.find("LI:not(.selectBox-optgroup)").length,h=0;(0===i.length||i.hasClass("selectBox-disabled")||i.hasClass("selectBox-optgroup"))&&(i=i.prev("LI"),0===i.length&&(i=e.find(f.loopOptions?"LI:last":"LI:first")),!(++h>=g)););this.addHover(i),this.selectOption(i,b),this.keepOptionInView(i)}else this.showMenu();break;case 40:case 39:if(b.preventDefault(),d.hasClass("selectBox-menuShowing")){var j=e.find(".selectBox-hover").next("LI");for(g=e.find("LI:not(.selectBox-optgroup)").length,h=0;(0===j.length||j.hasClass("selectBox-disabled")||j.hasClass("selectBox-optgroup"))&&(j=j.next("LI"),0===j.length&&(j=e.find(f.loopOptions?"LI:first":"LI:last")),!(++h>=g)););this.addHover(j),this.selectOption(j,b),this.keepOptionInView(j)}else this.showMenu()}},b.prototype.handleKeyPress=function(b){var c=a(this.selectElement),d=c.data("selectBox-control"),e=d.data("selectBox-options"),f=this;if(!d.hasClass("selectBox-disabled"))switch(b.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:d.hasClass("selectBox-menuShowing")||this.showMenu(),b.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(b.charCode||b.keyCode),e.find("A").each(function(){return a(this).text().substr(0,f.typeSearch.length).toLowerCase()===f.typeSearch.toLowerCase()?(f.addHover(a(this).parent()),f.selectOption(a(this).parent(),b),f.keepOptionInView(a(this).parent()),!1):void 0}),this.typeTimer=setTimeout(function(){f.typeSearch=""},1e3)}},b.prototype.enable=function(){var b=a(this.selectElement);b.prop("disabled",!1);var c=b.data("selectBox-control");c&&c.removeClass("selectBox-disabled")},b.prototype.disable=function(){var b=a(this.selectElement);b.prop("disabled",!0);var c=b.data("selectBox-control");c&&c.addClass("selectBox-disabled")},b.prototype.setValue=function(b){var c=a(this.selectElement);c.val(b),b=c.val(),null===b&&(b=c.children().first().val(),c.val(b));var d=c.data("selectBox-control");if(d){b?d.addClass("selectBox--filled"):d.removeClass("selectBox--filled");var e=c.data("selectBox-settings"),f=d.data("selectBox-options");this.setLabel(),f.find(".selectBox-selected").removeClass("selectBox-selected"),f.find("A").each(function(){if("object"==typeof b)for(var c=0;c<b.length;c++)a(this).attr("rel")==b[c]&&a(this).parent().addClass("selectBox-selected");else a(this).attr("rel")==b&&a(this).parent().addClass("selectBox-selected")}),e.change&&e.change.call(c)}},b.prototype.setOptions=function(b){var c=a(this.selectElement),d=c.data("selectBox-control");switch(typeof b){case"string":c.html(b);break;case"object":c.html("");for(var e in b)if(null!==b[e])if("object"==typeof b[e]){var f=a('<optgroup label="'+e+'" />');for(var g in b[e])f.append('<option value="'+g+'">'+b[e][g]+"</option>");c.append(f)}else{var h=a('<option value="'+e+'">'+b[e]+"</option>");c.append(h)}}d&&this.refresh()},b.prototype.disableSelection=function(b){a(b).css("MozUserSelect","none").bind("selectstart",function(a){a.preventDefault()})},b.prototype.generateOptions=function(b,c){var d=a("<li />"),e=a("<a />");d.addClass(b.attr("class")),d.data(b.data()),e.attr("rel",b.val()).text(b.text()),d.append(e),b.attr("disabled")&&d.addClass("selectBox-disabled"),b.attr("selected")&&d.addClass("selectBox-selected"),c.append(d)},a.extend(a.fn,{selectBox:function(c,d){var e;switch(c){case"control":return a(this).data("selectBox-control");case"settings":if(!d)return a(this).data("selectBox-settings");a(this).each(function(){a(this).data("selectBox-settings",a.extend(!0,a(this).data("selectBox-settings"),d))});break;case"options":if(void 0===d)return a(this).data("selectBox-control").data("selectBox-options");a(this).each(function(){(e=a(this).data("selectBox"))&&e.setOptions(d)});break;case"value":if(void 0===d)return a(this).val();a(this).each(function(){(e=a(this).data("selectBox"))&&e.setValue(d)});break;case"refresh":a(this).each(function(){(e=a(this).data("selectBox"))&&e.refresh()});break;case"enable":a(this).each(function(){(e=a(this).data("selectBox"))&&e.enable(this)});break;case"disable":a(this).each(function(){(e=a(this).data("selectBox"))&&e.disable()});break;case"destroy":a(this).each(function(){(e=a(this).data("selectBox"))&&(e.destroy(),a(this).data("selectBox",null))});break;case"instance":return a(this).data("selectBox");default:a(this).each(function(d,e){a(e).data("selectBox")||a(e).data("selectBox",new b(e,c))})}return a(this)}})}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
window.addEventListener("load",function(){function a(){return null}function b(a,b,c){if(0>b){if(a.previousElementSibling){for(a=a.previousElementSibling;a.lastElementChild;)a=a.lastElementChild;return a}return a.parentElement}if(a!=c&&a.firstElementChild)return a.firstElementChild;for(;a;){if(a.nextElementSibling)return a.nextElementSibling;a=a.parentElement}return null}function c(a){for(;a&&a!==document.documentElement;){if(a.hasAttribute("inert"))return a;a=a.parentElement}return null}function d(a){var b=a.path;return b&&b[0]||a.target}function e(a){a.path[a.path.length-1]!==window&&(f(d(a)),a.preventDefault(),a.stopPropagation())}function f(a){var d=c(a);if(d){if(document.hasFocus()&&0!==g){var e=(h||document).activeElement,f=0>g?!0:!1,i=null;try{i=new KeyboardEvent("keydown",{keyCode:9,which:9,key:"Tab",code:"Tab",keyIdentifier:"U+0009",shiftKey:!!f,bubbles:!0})}catch(j){try{i=document.createEvent("KeyboardEvent"),i.initKeyboardEvent("keydown",!0,!0,window,"Tab",0,f?"Shift":"",!1,"en")}catch(k){}}if(i){try{Object.defineProperty(i,"keyCode",{value:9})}catch(j){}document.dispatchEvent(i)}if(e!=(h||document).activeElement)return;for(f=d;f=b(f,g,d),f;)if(!(0>f.tabIndex)&&(f.focus(),(h||document).activeElement!==e))return}a.blur()}}!function(a){var b=document.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),document.body.appendChild(b)}("/*[inert]*/*[inert]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}"),window.ShadowRoot&&(a=function(a){for(;a&&a!==document.documentElement;){if(a instanceof window.ShadowRoot)return a;a=a.parentNode}return null});var g=0;document.addEventListener("keydown",function(a){g=9===a.keyCode?a.shiftKey?-1:1:0}),document.addEventListener("mousedown",function(){g=0});var h=null;document.body.addEventListener("focus",function(b){var c=d(b);if(b=c==b.target?null:a(c),b!=h){if(h){if(!(h instanceof window.ShadowRoot))throw Error("not shadow root: "+h);h.removeEventListener("focusin",e,!0)}b&&b.addEventListener("focusin",e,!0),h=b}f(c)},!0),document.addEventListener("click",function(a){c(d(a))&&(a.preventDefault(),a.stopPropagation())},!0)}),Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(a){a?this.setAttribute("inert",""):this.removeAttribute("inert")}});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"undefined"==typeof WSDEBUG&&(window.WSDEBUG=!0);var b=function(){window.asyncWebshims||(window.asyncWebshims={cfg:[],ready:[]})},c=function(){window.jQuery&&(a(jQuery),a=function(){return window.webshims})};window.webshims={setOptions:function(){b(),window.asyncWebshims.cfg.push(arguments)},ready:function(){b(),window.asyncWebshims.ready.push(arguments)},activeLang:function(a){b(),window.asyncWebshims.lang=a},polyfill:function(a){b(),window.asyncWebshims.polyfill=a},_curScript:function(){var a,b,c,d=document.currentScript;if(WSDEBUG&&(d=!1),!d){try{throw new Error("")}catch(e){c=(e.sourceURL||e.stack||"").split("\n"),c=((c[c.length-1]||c[c.length-2]||"").match(/(?:fil|htt|wid|abo|app|res)(.)+/i)||[""])[0].replace(/[\:\s\(]+[\d\:\)\(\s]+$/,"")}for(a=document.scripts||document.getElementsByTagName("script"),b=0;b<a.length;b++)if(a[b].getAttribute("src")&&(d=a[b],"interactive"==a[b].readyState||c==a[b].src)){WSDEBUG&&(d.wsFoundCurrent=!0);break}}return d}()},window.webshim=window.webshims,window.webshims.timer=setInterval(c,0),c(),"function"==typeof define&&define.amd&&define("polyfiller",["jquery"],a)}(function(a){"use strict";function b(a){return document.createElement(a)}var c,d,e=window.navigator,f=window.webshims,g="dom-support",h=a.event.special,i=a([]),j=window.asyncWebshims,k={},l=window.Object,m=function(a){return a+"\n//# sourceURL="+this.url},n=function(a){return p.enhanceAuto||"auto"!=a?a:!1},o={matchmedia:"matchMedia",xhr2:"filereader",promise:"es6",URL:"url"};clearInterval(f.timer),k.advancedObjectProperties=k.objectAccessor=k.ES5=!!("create"in l&&"seal"in l),!k.ES5||"toJSON"in Date.prototype||(k.ES5=!1),d=a.support.hrefNormalized===!1?f._curScript.getAttribute("src",4):f._curScript.src,d=d.split("?")[0].slice(0,d.lastIndexOf("/")+1)+"shims/",a.extend(f,{version:"1.15.0-RC2",cfg:{enhanceAuto:window.Audio&&(!window.matchMedia||matchMedia("(min-device-width: 721px)").matches),waitReady:!0,loadStyles:!0,wsdoc:document,wspopover:{appendTo:"auto",hideOnBlur:!0},ajax:{},loadScript:function(b,c){a.ajax(a.extend({},p.ajax,{url:b,success:c,dataType:"script",cache:!0,global:!1,dataFilter:m}))},basePath:d},support:k,bugs:{},modules:{},features:{},featureList:[],setOptions:function(b,c){"string"==typeof b&&arguments.length>1?p[b]=a.isPlainObject(c)?a.extend(!0,p[b]||{},c):c:"object"==typeof b&&a.extend(!0,p,b)},getLazyFn:function(a,b){var c=function(){w(b)};return s("WINDOWLOAD",c),function(){var d=arguments,e=this;c(),s(b,function(){e[a].apply(e,d)})}},_getAutoEnhance:n,addPolyfill:function(b,c){c=c||{};var d=c.f||b;q[d]||(q[d]=[],f.featureList.push(d),p[d]={}),q[d].push(b),c.options=a.extend(p[d],c.options),x(b,c),c.methodNames&&a.each(c.methodNames,function(a,b){f.addMethodName(b)})},polyfill:function(){var a={};return function(b){if(b||(b=f.featureList,WSDEBUG&&f.warn("loading all features without specifing might be bad for performance")),"string"==typeof b&&(b=b.split(" ")),WSDEBUG)for(var c=0;c<b.length;c++)a[b[c]]&&f.error(b[c]+" already loaded, you might want to use updatePolyfill instead? see: bit.ly/12BtXX3"),a[b[c]]=!0;return f._polyfill(b)}}(),_polyfill:function(b){var d,e=[];c.run||(d=-1!==a.inArray("forms-ext",b),c(),d&&-1==a.inArray("forms",b)&&(b.push("forms"),WSDEBUG&&f.error("need to load forms feature to use forms-ext feature.")),p.loadStyles&&v.loadCSS("styles/shim"+(d&&!u["form-number-date-ui"].test()?"-ext":"")+".css")),p.waitReady&&(a.readyWait++,s(b,function(){a.ready(!0)})),a.each(b,function(a,b){return b=o[b]||b,q[b]?(b!==q[b][0]&&s(q[b],function(){r(b,!0)}),void(e=e.concat(q[b]))):(WSDEBUG&&f.error("could not find webshims-feature (aborted): "+b),void r(b,!0))}),w(e),a.each(b,function(a,b){var c=p[b];c&&("mediaelement"==b&&(c.replaceUI=n(c.replaceUI))&&c.plugins.unshift("mediacontrols"),c.plugins&&c.plugins.length&&w(p[b].plugins))})},reTest:function(){var b,c=function(c,d){var e=u[d],f=d+"Ready";!e||e.loaded||(e.test&&a.isFunction(e.test)?e.test([]):e.test)||(h[f]&&delete h[f],q[e.f],b.push(d))};return function(d){"string"==typeof d&&(d=d.split(" ")),b=[],a.each(d,c),w(b)}}(),isReady:function(b,c){if(b+="Ready",c){if(h[b]&&h[b].add)return!0;h[b]=a.extend(h[b]||{},{add:function(a){a.handler.call(this,b)}}),a(document).triggerHandler(b)}return!(!h[b]||!h[b].add)||!1},ready:function(b,c){var d=arguments[2];if("string"==typeof b&&(b=b.split(" ")),d||(b=a.map(a.grep(b,function(a){return!r(a)}),function(a){return a+"Ready"})),!b.length)return void c(a,f,window,document);var e=b.shift(),g=function(){s(b,c,!0)};a(document).one(e,g)},capturingEvents:function(b,c){document.addEventListener&&("string"==typeof b&&(b=[b]),a.each(b,function(b,d){var e=function(b){return b=a.event.fix(b),c&&f.capturingEventPrevented&&f.capturingEventPrevented(b),a.event.dispatch.call(this,b)};h[d]=h[d]||{},h[d].setup||h[d].teardown||a.extend(h[d],{setup:function(){this.addEventListener(d,e,!0)},teardown:function(){this.removeEventListener(d,e,!0)}})}))},register:function(b,c){var d=u[b];if(!d)return void f.error("can't find module: "+b);d.loaded=!0;var e=function(){c(a,f,window,document,void 0,d.options),r(b,!0)};d.d&&d.d.length?s(d.d,e):e()},c:{},loader:{addModule:function(b,c){u[b]=c,c.name=c.name||b,c.c||(c.c=[]),a.each(c.c,function(a,c){f.c[c]||(f.c[c]=[]),f.c[c].push(b)})},loadList:function(){var b=[],c=function(c,d){"string"==typeof d&&(d=[d]),a.merge(b,d),v.loadScript(c,!1,d)},d=function(c,d){if(r(c)||-1!=a.inArray(c,b))return!0;var e,f=u[c];return f?(e=f.test&&a.isFunction(f.test)?f.test(d):f.test,e?(r(c,!0),!0):!1):!0},e=function(b,c){if(b.d&&b.d.length){var e=function(b,e){d(e,c)||-1!=a.inArray(e,c)||c.push(e)};a.each(b.d,function(b,c){u[c]?u[c].loaded||e(b,c):q[c]&&(a.each(q[c],e),s(q[c],function(){r(c,!0)}))}),b.noAutoCallback||(b.noAutoCallback=!0)}};return function(g){var h,i,j,k,l=[],m=function(d,e){return k=e,a.each(f.c[e],function(c,d){return-1==a.inArray(d,l)||-1!=a.inArray(d,b)?(k=!1,!1):void 0}),k?(c("combos/"+k,f.c[k]),!1):void 0};for(i=0;i<g.length;i++)h=u[g[i]],h&&!d(h.name,g)?(h.css&&p.loadStyles&&v.loadCSS(h.css),h.loadInit&&h.loadInit(),e(h,g),h.loaded||l.push(h.name),h.loaded=!0):WSDEBUG&&!h&&f.warn("could not find: "+g[i]);for(i=0,j=l.length;j>i;i++)k=!1,h=l[i],-1==a.inArray(h,b)&&("noCombo"!=p.debug&&a.each(u[h].c,m),k||c(u[h].src||h,h))}}(),makePath:function(a){return-1!=a.indexOf("//")||0===a.indexOf("/")?a:(-1==a.indexOf(".")&&(a+=".js"),p.addCacheBuster&&(a+=p.addCacheBuster),p.basePath+a)},loadCSS:function(){var b,c={};return function(d){d=this.makePath(d),c[d]||(b=b||a("link, style")[0]||a("script")[0],c[d]=1,a('<link rel="stylesheet" />').insertBefore(b).attr({href:d}))}}(),loadScript:function(){var b={};return function(c,d,e,f){if(f||(c=v.makePath(c)),!b[c]){var g=function(){d&&d(),e&&("string"==typeof e&&(e=e.split(" ")),a.each(e,function(a,b){u[b]&&(u[b].afterLoad&&u[b].afterLoad(),r(u[b].noAutoCallback?b+"FileLoaded":b,!0))}))};b[c]=1,p.loadScript(c,g,a.noop)}}}()}});var p=f.cfg,q=f.features,r=f.isReady,s=f.ready,t=f.addPolyfill,u=f.modules,v=f.loader,w=v.loadList,x=v.addModule,y=f.bugs,z=[],A={warn:1,error:1},B=a.fn,C=b("video");f.addMethodName=function(a){a=a.split(":");var b=a[1];1==a.length?(b=a[0],a=a[0]):a=a[0],B[a]=function(){return this.callProp(b,arguments)}},B.callProp=function(b,c){var d;return c||(c=[]),this.each(function(){var e=a.prop(this,b);if(e&&e.apply){if(d=e.apply(this,c),void 0!==d)return!1}else f.warn(b+" is not a method of "+this)}),void 0!==d?d:this},f.activeLang=function(){"language"in e||(e.language=e.browserLanguage||"");var b=a.attr(document.documentElement,"lang")||e.language;return s("webshimLocalization",function(){f.activeLang(b)}),function(a){if(a)if("string"==typeof a)b=a;else if("object"==typeof a){var c=arguments,d=this;s("webshimLocalization",function(){f.activeLang.apply(d,c)})}return b}}(),f.errorLog=[],a.each(["log","error","warn","info"],function(a,b){f[b]=function(a){(A[b]&&p.debug!==!1||p.debug)&&(f.errorLog.push(a),window.console&&console.log&&console[console[b]?b:"log"](a))}}),WSDEBUG&&(f._curScript.wsFoundCurrent||f.error("Could not detect currentScript! Use basePath to set script path.")),function(){a.isDOMReady=a.isReady;var b=function(){a.isDOMReady=!0,r("DOM",!0),setTimeout(function(){r("WINDOWLOAD",!0)},9999)};c=function(){if(!c.run){if((p.debug||!("crossDomain"in p.ajax)&&location.protocol.indexOf("http"))&&(p.ajax.crossDomain=!0),WSDEBUG&&a.mobile&&(a.mobile.textinput||a.mobile.rangeslider||a.mobile.button)&&(f.info('jQM textinput/rangeslider/button detected waitReady was set to false. Use webshims.ready("featurename") to script against polyfilled methods/properties'),p.readyEvt||f.error('in a jQuery mobile enviroment: you should change the readyEvt to "pageinit".'),p.waitReady&&f.error("in a jQuery mobile enviroment: you should change the waitReady to false.")),WSDEBUG&&p.waitReady&&a.isReady&&f.warn("Call webshims.polyfill before DOM-Ready or set waitReady to false."),!a.isDOMReady&&p.waitReady){var d=a.ready;a.ready=function(a){return a!==!0&&document.body&&b(),d.apply(this,arguments)},a.ready.promise=d.promise}p.readyEvt?a(document).one(p.readyEvt,b):a(b)}c.run=!0},a(window).on("load",function(){b(),setTimeout(function(){r("WINDOWLOAD",!0)},9)});var d=[],e=function(){1==this.nodeType&&f.triggerDomUpdate(this)};a.extend(f,{addReady:function(a){var b=function(b,c){f.ready("DOM",function(){a(b,c)})};d.push(b),p.wsdoc&&b(p.wsdoc,i)},triggerDomUpdate:function(b){if(!b||!b.nodeType)return void(b&&b.jquery&&b.each(function(){f.triggerDomUpdate(this)}));var c=b.nodeType;if(1==c||9==c){var e=b!==document?a(b):i;a.each(d,function(a,c){c(b,e)})}}}),B.clonePolyfill=B.clone,B.htmlPolyfill=function(b){if(!arguments.length)return a(this.clonePolyfill()).html();var c=B.html.call(this,b);return c===this&&a.isDOMReady&&this.each(e),c},B.jProp=function(){return this.pushStack(a(B.prop.apply(this,arguments)||[]))},a.each(["after","before","append","prepend","replaceWith"],function(b,c){B[c+"Polyfill"]=function(b){return b=a(b),B[c].call(this,b),a.isDOMReady&&b.each(e),this}}),a.each(["insertAfter","insertBefore","appendTo","prependTo","replaceAll"],function(b,c){B[c.replace(/[A-Z]/,function(a){return"Polyfill"+a})]=function(){return B[c].apply(this,arguments),a.isDOMReady&&f.triggerDomUpdate(this),this}}),B.updatePolyfill=function(){return a.isDOMReady&&f.triggerDomUpdate(this),this},a.each(["getNativeElement","getShadowElement","getShadowFocusElement"],function(a,b){B[b]=function(){return this.pushStack(this)}})}(),WSDEBUG&&(p.debug=!0),l.create&&(f.objectCreate=function(b,c,d){WSDEBUG&&c&&f.error("second argument for webshims.objectCreate is only available with DOM support");var e=l.create(b);return d&&(e.options=a.extend(!0,{},e.options||{},d),d=e.options),e._create&&a.isFunction(e._create)&&e._create(d),e}),x("swfmini",{test:function(){return window.swfobject&&!window.swfmini&&(window.swfmini=window.swfobject),"swfmini"in window},c:[16,7,2,8,1,12,23]}),u.swfmini.test(),x("sizzle",{test:a.expr.filters}),t("es5",{test:!(!k.ES5||!Function.prototype.bind),d:["sizzle"]}),t("dom-extend",{f:g,noAutoCallback:!0,d:["es5"],c:[16,7,2,15,30,3,8,4,9,10,25,31,34]}),b("picture"),t("picture",{test:"picturefill"in window||!!window.HTMLPictureElement,d:["matchMedia"],c:[18],loadInit:function(){r("picture",!0)}}),t("matchMedia",{test:!(!window.matchMedia||!matchMedia("all").addListener),c:[18]}),t("es6",{test:!!(Math.imul&&Number.MIN_SAFE_INTEGER&&l.is&&window.Promise&&Promise.all),d:["es5"]}),t("geolocation",{test:"geolocation"in e,options:{destroyWrite:!0},c:[21]});var D="getUserMedia"in e;return t("usermedia-core",{f:"usermedia",test:D&&window.URL,d:["url",g]}),t("usermedia-shim",{f:"usermedia",test:!!(D||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),d:["url","mediaelement",g]}),function(){t("canvas",{src:"excanvas",test:"getContext"in b("canvas"),options:{type:"flash"},noAutoCallback:!0,loadInit:function(){var a=this.options.type;!a||-1===a.indexOf("flash")||u.swfmini.test()&&!swfmini.hasFlashPlayerVersion("9.0.0")||(this.src="flash"==a?"FlashCanvas/flashcanvas":"FlashCanvasPro/flashcanvas")},methodNames:["getContext"],d:[g]})}(),function(){var c,d,h="form-shim-extend",i="formvalidation",j="form-number-date-api",l=!1,m=!1,o=!1,q={},r=b("progress"),s=b("output"),v=function(){var d,f,g="1(",j=b("input");if(f=a('<fieldset><textarea required="" /></fieldset>')[0],k.inputtypes=q,a.each(["range","date","datetime-local","month","color","number"],function(a,b){j.setAttribute("type",b),q[b]=j.type==b&&(j.value=g)&&j.value!=g}),k.datalist=!!("options"in b("datalist")&&window.HTMLDataListElement),k[i]="checkValidity"in j,k.fieldsetelements="elements"in f,k.fieldsetdisabled="disabled"in f){try{f.querySelector(":invalid")&&(f.disabled=!0,d=!f.querySelector(":invalid")&&f.querySelector(":disabled"))}catch(n){}k.fieldsetdisabled=!!d}if(k[i]&&(m=!(k.fieldsetdisabled&&k.fieldsetelements&&"value"in r&&"value"in s),o=m&&/Android/i.test(e.userAgent),l=window.opera||y.bustedValidity||m||!k.datalist,!l&&q.number)){l=!0;try{j.type="number",j.value="",j.stepUp(),l="1"!=j.value}catch(p){}}return y.bustedValidity=l,c=k[i]&&!l?"form-native-extend":h,v=a.noop,!1},w=function(b){var c=!0;return b._types||(b._types=b.types.split(" ")),a.each(b._types,function(a,b){return b in q&&!q[b]?(c=!1,!1):void 0}),c};f.validationMessages=f.validityMessages={langSrc:"i18n/formcfg-",availableLangs:"ar cs el es fa fr he hi hu it ja lt nl pl pt pt-BR pt-PT ru sv zh-CN zh-TW".split(" ")},f.formcfg=a.extend({},f.validationMessages),f.inputTypes={},t("form-core",{f:"forms",d:["es5"],options:{placeholderType:"value",messagePopover:{},test:v,list:{popover:{constrainWidth:!0}},iVal:{sel:".ws-validate",handleBubble:"hide",recheckDelay:400}},methodNames:["setCustomValidity","checkValidity","setSelectionRange"],c:[16,7,2,8,1,15,30,3,31]}),d=p.forms,t("form-native-extend",{f:"forms",test:function(b){return v(),!k[i]||l||-1==a.inArray(j,b||[])||u[j].test()},d:["form-core",g,"form-message"],c:[6,5,14,29]}),t(h,{f:"forms",test:function(){return v(),k[i]&&!l},d:["form-core",g,"sizzle"],c:[16,15,28]}),t(h+"2",{f:"forms",test:function(){return v(),k[i]&&!m},d:[h],c:[27]}),t("form-message",{f:"forms",test:function(a){return v(),!(d.customMessages||!k[i]||l||!u[c].test(a))},d:[g],c:[16,7,15,30,3,8,4,14,28]}),t(j,{f:"forms-ext",options:{types:"date time range number"},test:function(){v();var a=!l;return a&&(a=w(this.options)),a},methodNames:["stepUp","stepDown"],d:["forms",g],c:[6,5,17,14,28,29,33]}),x("range-ui",{options:{},noAutoCallback:!0,test:function(){return!!B.rangeUI},d:["es5"],c:[6,5,9,10,17,11]}),t("form-number-date-ui",{f:"forms-ext",test:function(){var a=this.options;return a.replaceUI=n(a.replaceUI),v(),!a.replaceUI&&o&&(a.replaceUI=!0),!a.replaceUI&&w(a)},d:["forms",g,j,"range-ui"],options:{widgets:{calculateWidth:!0,animate:!0}},c:[6,5,9,10,17,11]}),t("form-datalist",{f:"forms",test:function(){return v(),o&&(d.customDatalist=!0),k.datalist&&!d.fD},d:["form-core",g],c:[16,7,6,2,9,15,30,31,28,33]})}(),t("filereader",{test:"FileReader"in window&&"FormData"in window,d:[g,"swfmini"],c:[25,27]}),t("details",{test:"open"in b("details"),d:[g],options:{text:"Details"},c:[21,22]}),t("url",{test:function(){var a=!1;try{a=new URL("b","http://a"),a=!(!a.searchParams||"http://a/b"!=a.href)}catch(b){}return a},d:["es5"]}),function(){f.mediaelement={};var c=b("track");if(k.mediaelement="canPlayType"in C,k.texttrackapi="addTextTrack"in C,k.track="kind"in c,b("audio"),!(y.track=!k.texttrackapi))try{y.track=!("oncuechange"in C.addTextTrack("metadata"))}catch(d){}t("mediaelement-core",{f:"mediaelement",noAutoCallback:!0,options:{jme:{},plugins:[],vars:{},params:{},attrs:{},changeSWF:a.noop},methodNames:["play","pause","canPlayType","mediaLoad:load"],d:["swfmini"],c:[16,7,2,8,1,12,13,23]}),t("mediaelement-jaris",{f:"mediaelement",d:["mediaelement-core",g],test:function(){var a=this.options;return!k.mediaelement||f.mediaelement.loadSwf?!1:(a.preferFlash&&!u.swfmini.test()&&(a.preferFlash=!1),!(a.preferFlash&&swfmini.hasFlashPlayerVersion("11.3")))},c:[21,25]}),t("track",{options:{positionDisplay:!0,override:y.track},test:function(){var a=this.options;return a.override=n(a.override),!a.override&&!y.track},d:["mediaelement",g],methodNames:["addTextTrack"],c:[21,12,13,22,34]}),x("jmebase",{src:"jme/base",c:[98,99,97]}),a.each([["mediacontrols",{c:[98,99],css:"jme/controls.css"}],["playlist",{c:[98,97]}],["alternate-media"]],function(b,c){x(c[0],a.extend({src:"jme/"+c[0],d:["jmebase"]},c[1]))}),x("track-ui",{d:["track",g]})}(),t("feature-dummy",{test:!0,loaded:!0,c:z}),f.$=a,a.webshims=f,a.webshim=webshim,f.callAsync=function(){f.callAsync=a.noop,j&&(j.cfg&&(j.cfg.length||(j.cfg=[[j.cfg]]),a.each(j.cfg,function(a,b){f.setOptions.apply(f,b)})),j.ready&&a.each(j.ready,function(a,b){f.ready.apply(f,b)}),j.lang&&f.activeLang(j.lang),"polyfill"in j&&f.polyfill(j.polyfill)),f.isReady("jquery",!0)},f.callAsync(),f});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){a.fn.hoverIntent=function(b,c,d){var e={interval:100,sensitivity:7,timeout:0};e="object"==typeof b?a.extend(e,b):a.isFunction(c)?a.extend(e,{over:b,out:c,selector:d}):a.extend(e,{over:b,out:b,selector:c});var f,g,h,i,j=function(a){f=a.pageX,g=a.pageY},k=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(h-f)+Math.abs(i-g)<e.sensitivity?(a(c).off("mousemove.hoverIntent",j),c.hoverIntent_s=1,e.over.apply(c,[b])):(h=f,i=g,c.hoverIntent_t=setTimeout(function(){k(b,c)},e.interval),void 0)},l=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,e.out.apply(b,[a])},m=function(b){var c=jQuery.extend({},b),d=this;d.hoverIntent_t&&(d.hoverIntent_t=clearTimeout(d.hoverIntent_t)),"mouseenter"==b.type?(h=c.pageX,i=c.pageY,a(d).on("mousemove.hoverIntent",j),1!=d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){k(c,d)},e.interval))):(a(d).off("mousemove.hoverIntent",j),1==d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){l(c,d)},e.timeout)))};return this.on({"mouseenter.hoverIntent":m,"mouseleave.hoverIntent":m},e.selector)}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData,a.fn.ajaxSubmit=function(b){function c(b){var c,d,e=a.param(b).split("&"),f=e.length,g=[];for(c=0;f>c;c++)e[c]=e[c].replace(/\+/g," "),d=e[c].split("="),g.push([decodeURIComponent(d[0]),decodeURIComponent(d[1])]);return g}function f(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var i=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});b.uploadProgress&&(i.xhr=function(){var a=jQuery.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),a}),i.data=null;var j=i.beforeSend;return i.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(i)}function g(c){function e(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function f(){function b(){try{var a=e(q).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),g(A),v&&clearTimeout(v),v=void 0}}var c=k.attr("target"),f=k.attr("action");w.setAttribute("target",n),h||w.setAttribute("method","POST"),f!=l.url&&w.setAttribute("action",l.url),l.skipEncodingOverride||h&&!/post/i.test(h)||k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(v=setTimeout(function(){u=!0,g(z)},l.timeout));var i=[];try{if(l.extraData)for(var j in l.extraData)l.extraData.hasOwnProperty(j)&&i.push(a.isPlainObject(l.extraData[j])&&l.extraData[j].hasOwnProperty("name")&&l.extraData[j].hasOwnProperty("value")?a('<input type="hidden" name="'+l.extraData[j].name+'">').val(l.extraData[j].value).appendTo(w)[0]:a('<input type="hidden" name="'+j+'">').val(l.extraData[j]).appendTo(w)[0]);l.iframeTarget||(p.appendTo("body"),q.attachEvent?q.attachEvent("onload",g):q.addEventListener("load",g,!1)),setTimeout(b,15);var m=document.createElement("form").submit;m.apply(w)}finally{w.setAttribute("action",f),c?w.setAttribute("target",c):k.removeAttr("target"),a(i).remove()}}function g(b){if(!r.aborted&&!F){try{E=e(q)}catch(c){d("cannot access response document: ",c),b=A}if(b===z&&r)return r.abort("timeout"),void y.reject(r,"timeout");if(b==A&&r)return r.abort("server abort"),void y.reject(r,"error","server abort");if(E&&E.location.href!=l.iframeSrc||u){q.detachEvent?q.detachEvent("onload",g):q.removeEventListener("load",g,!1);var f,h="success";try{if(u)throw"timeout";var i="xml"==l.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+i),!i&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(g,250);var j=E.body?E.body:E.documentElement;r.responseText=j?j.innerHTML:null,r.responseXML=E.XMLDocument?E.XMLDocument:E,i&&(l.dataType="xml"),r.getResponseHeader=function(a){var b={"content-type":l.dataType};return b[a]},j&&(r.status=Number(j.getAttribute("status"))||r.status,r.statusText=j.getAttribute("statusText")||r.statusText);var k=(l.dataType||"").toLowerCase(),n=/(json|script|text)/.test(k);if(n||l.textarea){var o=E.getElementsByTagName("textarea")[0];if(o)r.responseText=o.value,r.status=Number(o.getAttribute("status"))||r.status,r.statusText=o.getAttribute("statusText")||r.statusText;else if(n){var s=E.getElementsByTagName("pre")[0],t=E.getElementsByTagName("body")[0];s?r.responseText=s.textContent?s.textContent:s.innerText:t&&(r.responseText=t.textContent?t.textContent:t.innerText)}}else"xml"==k&&!r.responseXML&&r.responseText&&(r.responseXML=H(r.responseText));try{D=J(r,k,l)}catch(b){h="parsererror",r.error=f=b||h}}catch(b){d("error caught: ",b),h="error",r.error=f=b||h}r.aborted&&(d("upload aborted"),h=null),r.status&&(h=r.status>=200&&r.status<300||304===r.status?"success":"error"),"success"===h?(l.success&&l.success.call(l.context,D,"success",r),y.resolve(r.responseText,"success",r),m&&a.event.trigger("ajaxSuccess",[r,l])):h&&(void 0===f&&(f=r.statusText),l.error&&l.error.call(l.context,r,h,f),y.reject(r,"error",f),m&&a.event.trigger("ajaxError",[r,l,f])),m&&a.event.trigger("ajaxComplete",[r,l]),m&&!--a.active&&a.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,r,h),F=!0,l.timeout&&clearTimeout(v),setTimeout(function(){l.iframeTarget||p.remove(),r.responseXML=null},100)}}}var i,j,l,m,n,p,q,r,s,t,u,v,w=k[0],x=!!a.fn.prop,y=a.Deferred();if(c)for(j=0;j<o.length;j++)i=a(o[j]),x?i.prop("disabled",!1):i.removeAttr("disabled");if(l=a.extend(!0,{},a.ajaxSettings,b),l.context=l.context||l,n="jqFormIO"+(new Date).getTime(),l.iframeTarget?(p=a(l.iframeTarget),t=p.attr("name"),t?n=t:p.attr("name",n)):(p=a('<iframe name="'+n+'" src="'+l.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),q=p[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{q.contentWindow.document.execCommand&&q.contentWindow.document.execCommand("Stop")}catch(e){}p.attr("src",l.iframeSrc),r.error=c,l.error&&l.error.call(l.context,r,c,b),m&&a.event.trigger("ajaxError",[r,l,c]),l.complete&&l.complete.call(l.context,r,c)}},m=l.global,m&&0===a.active++&&a.event.trigger("ajaxStart"),m&&a.event.trigger("ajaxSend",[r,l]),l.beforeSend&&l.beforeSend.call(l.context,r,l)===!1)return l.global&&a.active--,y.reject(),y;if(r.aborted)return y.reject(),y;s=w.clk,s&&(t=s.name,t&&!s.disabled&&(l.extraData=l.extraData||{},l.extraData[t]=s.value,"image"==s.type&&(l.extraData[t+".x"]=w.clk_x,l.extraData[t+".y"]=w.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(l.extraData=l.extraData||{},l.extraData[C]=B),l.forceSync?f():setTimeout(f,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var h,i,j,k=this;"function"==typeof b&&(b={success:b}),h=this.attr("method"),i=this.attr("action"),j="string"==typeof i?a.trim(i):"",j=j||window.location.href||"",j&&(j=(j.match(/^([^#]+)/)||[])[1]),"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&j.indexOf("http")<0&&(j=BN_EXTERNAL_DOMAIN_PREFIXED+j),"undefined"!=typeof BN_IS_IE9&&BN_IS_IE9?(j+=j.indexOf("?")>=0?"&jsonp=true":"?jsonp=true",b=a.extend(!0,{url:j,cache:!1,dataType:"jsonp",jsonpCallback:"jsonpCallbackFormSubmit",success:a.ajaxSettings.success,type:h||"GET"},b)):b=a.extend(!0,{url:j,xhrFields:{withCredentials:!0},success:a.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var l={};if(this.trigger("form-pre-serialize",[this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=b.traditional;void 0===m&&(m=a.ajaxSettings.traditional);var n,o=[],p=this.formToArray(b.semantic,o);if(b.data&&(b.extraData=b.data,n=a.param(b.data,m)),b.beforeSubmit&&b.beforeSubmit(p,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=a.param(p,m);n&&(q=q?q+"&"+n:n),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+q,b.data=null):b.data=q;var r=[];if(b.resetForm&&r.push(function(){k.resetForm()}),b.clearForm&&r.push(function(){k.clearForm(b.includeHidden)}),!b.dataType&&b.target){var s=b.success||function(){};r.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(s,arguments)})}else b.success&&r.push(b.success);b.success=function(a,c,d){for(var e=b.context||this,f=0,g=r.length;g>f;f++)r[f].apply(e,[a,c,d||k,k])};var t=a('input[type=file]:enabled[value!=""]',this),u=t.length>0,v="multipart/form-data",w=k.attr("enctype")==v||k.attr("encoding")==v,x=e.fileapi&&e.formdata;d("fileAPI :"+x);var y,z=(u||w)&&!x;b.iframe!==!1&&(b.iframe||z)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){y=g(p)}):y=g(p):y=(u||w)&&x?f(p):a.ajax(b),k.removeData("jqxhr").data("jqxhr",y);for(var A=0;A<o.length;A++)o[A]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().on("submit.form-plugin",e,b).on("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name)if(b&&f.clk&&"image"==l.type)l.disabled||f.clk!=l||(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type&&!l.disabled){c&&c.push(l);var o=l.files;if(o.length)for(i=0;i<o.length;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&"undefined"!=typeof k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone()):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function($){function sc_setScroll(a,b,c){return"transition"==c.transition&&"swing"==b&&(b="ease"),{anims:[],duration:a,orgDuration:a,easing:b,startTime:getTime()}}function sc_startScroll(a,b){for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e&&e[0][b.transition](e[1],a.duration,a.easing,e[2])}}function sc_stopScroll(a,b){is_boolean(b)||(b=!0),is_object(a.pre)&&sc_stopScroll(a.pre,b);for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e[0].stop(!0),b&&(e[0].css(e[1]),is_function(e[2])&&e[2]())}is_object(a.post)&&sc_stopScroll(a.post,b)}function sc_afterScroll(a,b,c){switch(b&&b.remove(),c.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":a.css("opacity",1),a.css("filter","")}}function sc_fireCallbacks(a,b,c,d,e){if(b[c]&&b[c].call(a,d),e[c].length)for(var f=0,g=e[c].length;g>f;f++)e[c][f].call(a,d);return[]}function sc_fireQueue(a,b,c){return b.length&&(a.trigger(cf_e(b[0][0],c),b[0][1]),b.shift()),b}function sc_hideHiddenItems(a){a.each(function(){var a=$(this);a.data("_cfs_isHidden",a.is(":hidden")).hide()})}function sc_showHiddenItems(a){a&&a.each(function(){var a=$(this);a.data("_cfs_isHidden")||a.show()})}function sc_clearTimers(a){return a.auto&&clearTimeout(a.auto),a.progress&&clearInterval(a.progress),a}function sc_mapCallbackArguments(a,b,c,d,e,f,g){return{width:g.width,height:g.height,items:{old:a,skipped:b,visible:c},scroll:{items:d,direction:e,duration:f}}}function sc_getDuration(a,b,c,d){var e=a.duration;return"none"==a.fx?0:("auto"==e?e=b.scroll.duration/b.scroll.items*c:10>e&&(e=d/e),1>e?0:("fade"==a.fx&&(e/=2),Math.round(e)))}function nv_showNavi(a,b,c){var d=is_number(a.items.minimum)?a.items.minimum:a.items.visible+1;if("show"==b||"hide"==b)var e=b;else if(d>b){debug(c,"Not enough items ("+b+" total, "+d+" needed): Hiding navigation.");var e="hide"}else var e="show";var f="show"==e?"removeClass":"addClass",g=cf_c("hidden",c);a.auto.button&&a.auto.button[e]()[f](g),a.prev.button&&a.prev.button[e]()[f](g),a.next.button&&a.next.button[e]()[f](g),a.pagination.container&&a.pagination.container[e]()[f](g)}function nv_enableNavi(a,b,c){if(!a.circular&&!a.infinite){var d="removeClass"==b||"addClass"==b?b:!1,e=cf_c("disabled",c);if(a.auto.button&&d&&a.auto.button[d](e),a.prev.button){var f=d||0==b?"addClass":"removeClass";a.prev.button[f](e)}if(a.next.button){var f=d||b==a.items.visible?"addClass":"removeClass";a.next.button[f](e)}}}function go_getObject(a,b){return is_function(b)?b=b.call(a):is_undefined(b)&&(b={}),b}function go_getItemsObject(a,b){return b=go_getObject(a,b),is_number(b)?b={visible:b}:"variable"==b?b={visible:b,width:b,height:b}:is_object(b)||(b={}),b}function go_getScrollObject(a,b){return b=go_getObject(a,b),is_number(b)?b=50>=b?{items:b}:{duration:b}:is_string(b)?b={easing:b}:is_object(b)||(b={}),b}function go_getNaviObject(a,b){if(b=go_getObject(a,b),is_string(b)){var c=cf_getKeyCode(b);b=-1==c?$(b):c}return b}function go_getAutoObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_boolean(b)?b={play:b}:is_number(b)&&(b={timeoutDuration:b}),b.progress&&(is_string(b.progress)||is_jquery(b.progress))&&(b.progress={bar:b.progress}),b}function go_complementAutoObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_boolean(b.play)||(b.play=!0),is_number(b.delay)||(b.delay=0),is_undefined(b.pauseOnEvent)&&(b.pauseOnEvent=!0),is_boolean(b.pauseOnResize)||(b.pauseOnResize=!0),is_number(b.timeoutDuration)||(b.timeoutDuration=10>b.duration?2500:5*b.duration),b.progress&&(is_function(b.progress.bar)&&(b.progress.bar=b.progress.bar.call(a)),is_string(b.progress.bar)&&(b.progress.bar=$(b.progress.bar)),b.progress.bar?(is_function(b.progress.updater)||(b.progress.updater=$.fn.carouFredSel.progressbarUpdater),is_number(b.progress.interval)||(b.progress.interval=50)):b.progress=!1),b}function go_getPrevNextObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_number(b)&&(b={key:b}),b}function go_complementPrevNextObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_string(b.key)&&(b.key=cf_getKeyCode(b.key)),b}function go_getPaginationObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={container:b}:is_boolean(b)&&(b={keys:b}),b}function go_complementPaginationObject(a,b){return is_function(b.container)&&(b.container=b.container.call(a)),is_string(b.container)&&(b.container=$(b.container)),is_number(b.items)||(b.items=!1),is_boolean(b.keys)||(b.keys=!1),is_function(b.anchorBuilder)||is_false(b.anchorBuilder)||(b.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder),is_number(b.deviation)||(b.deviation=0),b}function go_getSwipeObject(a,b){return is_function(b)&&(b=b.call(a)),is_undefined(b)&&(b={onTouch:!1}),is_true(b)?b={onTouch:b}:is_number(b)&&(b={items:b}),b}function go_complementSwipeObject(a,b){return is_boolean(b.onTouch)||(b.onTouch=!0),is_boolean(b.onMouse)||(b.onMouse=!1),is_object(b.options)||(b.options={}),is_boolean(b.options.triggerOnTouchEnd)||(b.options.triggerOnTouchEnd=!1),b}function go_getMousewheelObject(a,b){return is_function(b)&&(b=b.call(a)),is_true(b)?b={}:is_number(b)?b={items:b}:is_undefined(b)&&(b=!1),b}function go_complementMousewheelObject(a,b){return b}function gn_getItemIndex(a,b,c,d,e){if(is_string(a)&&(a=$(a,e)),is_object(a)&&(a=$(a,e)),is_jquery(a)?(a=e.children().index(a),is_boolean(c)||(c=!1)):is_boolean(c)||(c=!0),is_number(a)||(a=0),is_number(b)||(b=0),c&&(a+=d.first),a+=b,d.total>0){for(;a>=d.total;)a-=d.total;for(;0>a;)a+=d.total}return a}function gn_getVisibleItemsPrev(a,b,c){for(var d=0,e=0,f=c;f>=0;f--){var g=a.eq(f);if(d+=g.is(":visible")?g[b.d.outerWidth](!0):0,d>b.maxDimension)return e;0==f&&(f=a.length),e++}}function gn_getVisibleItemsPrevFilter(a,b,c){return gn_getItemsPrevFilter(a,b.items.filter,b.items.visibleConf.org,c)}function gn_getScrollItemsPrevFilter(a,b,c,d){return gn_getItemsPrevFilter(a,b.items.filter,d,c)}function gn_getItemsPrevFilter(a,b,c,d){for(var e=0,f=0,g=d,h=a.length;g>=0;g--){if(f++,f==h)return f;var i=a.eq(g);if(i.is(b)&&(e++,e==c))return f;0==g&&(g=h)}}function gn_getVisibleOrg(a,b){return b.items.visibleConf.org||a.children().slice(0,b.items.visible).filter(b.items.filter).length}function gn_getVisibleItemsNext(a,b,c){for(var d=0,e=0,f=c,g=a.length-1;g>=f;f++){var h=a.eq(f);if(d+=h.is(":visible")?h[b.d.outerWidth](!0):0,d>b.maxDimension)return e;if(e++,e==g+1)return e;f==g&&(f=-1)}}function gn_getVisibleItemsNextTestCircular(a,b,c,d){var e=gn_getVisibleItemsNext(a,b,c);return b.circular||c+e>d&&(e=d-c),e}function gn_getVisibleItemsNextFilter(a,b,c){return gn_getItemsNextFilter(a,b.items.filter,b.items.visibleConf.org,c,b.circular)}function gn_getScrollItemsNextFilter(a,b,c,d){return gn_getItemsNextFilter(a,b.items.filter,d+1,c,b.circular)-1}function gn_getItemsNextFilter(a,b,c,d){for(var e=0,f=0,g=d,h=a.length-1;h>=g;g++){if(f++,f>=h)return f;var i=a.eq(g);if(i.is(b)&&(e++,e==c))return f;g==h&&(g=-1)}}function gi_getCurrentItems(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsPrev(a,b,c){return a.slice(c,b.items.visibleConf.old+c)}function gi_getNewItemsPrev(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsNext(a,b){return a.slice(0,b.items.visibleConf.old)}function gi_getNewItemsNext(a,b,c){return a.slice(c,b.items.visible+c)}function sz_storeMargin(a,b,c){b.usePadding&&(is_string(c)||(c="_cfs_origCssMargin"),a.each(function(){var a=$(this),d=parseInt(a.css(b.d.marginRight),10);is_number(d)||(d=0),a.data(c,d)}))}function sz_resetMargin(a,b,c){if(b.usePadding){var d=is_boolean(c)?c:!1;is_number(c)||(c=0),sz_storeMargin(a,b,"_cfs_tempCssMargin"),a.each(function(){var a=$(this);a.css(b.d.marginRight,d?a.data("_cfs_tempCssMargin"):c+a.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(a){a.each(function(){var a=$(this);a.data("_cfs_origCss",a.attr("style")||"")})}function sz_restoreOrigCss(a){a.each(function(){var a=$(this);a.attr("style",a.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(a,b){var c=(a.items.visible,a.items[a.d.width]),d=a[a.d.height],e=is_percentage(d);b.each(function(){var b=$(this),f=c-ms_getPaddingBorderMargin(b,a,"Width");b[a.d.width](f),e&&b[a.d.height](ms_getPercentage(f,d))})}function sz_setSizes(a,b){var c=a.parent(),d=a.children(),e=gi_getCurrentItems(d,b),f=cf_mapWrapperSizes(ms_getSizes(e,b,!0),b,!1);if(c.css(f),b.usePadding){var g=b.padding,h=g[b.d[1]];b.align&&0>h&&(h=0);var i=e.last();i.css(b.d.marginRight,i.data("_cfs_origCssMargin")+h),a.css(b.d.top,g[b.d[0]]),a.css(b.d.left,g[b.d[3]])}return a.css(b.d.width,f[b.d.width]+2*ms_getTotalSize(d,b,"width")),a.css(b.d.height,ms_getLargestSize(d,b,"height")),f}function ms_getSizes(a,b,c){return[ms_getTotalSize(a,b,"width",c),ms_getLargestSize(a,b,"height",c)]}function ms_getLargestSize(a,b,c,d){return is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d?b[b.d[c]]:is_number(b.items[b.d[c]])?b.items[b.d[c]]:(c=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",ms_getTrueLargestSize(a,b,c))}function ms_getTrueLargestSize(a,b,c){for(var d=0,e=0,f=a.length;f>e;e++){var g=a.eq(e),h=g.is(":visible")?g[b.d[c]](!0):0;h>d&&(d=h)}return d}function ms_getTotalSize(a,b,c,d){if(is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d)return b[b.d[c]];if(is_number(b.items[b.d[c]]))return b.items[b.d[c]]*a.length;for(var e=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",f=0,g=0,h=a.length;h>g;g++){var i=a.eq(g);f+=i.is(":visible")?i[b.d[e]](!0):0}return f}function ms_getParentSize(a,b,c){var d=a.is(":visible");d&&a.hide();var e=a.parent()[b.d[c]]();return d&&a.show(),e}function ms_getMaxDimension(a,b){return is_number(a[a.d.width])?a[a.d.width]:b}function ms_hasVariableSizes(a,b,c){for(var d=!1,e=!1,f=0,g=a.length;g>f;f++){var h=a.eq(f),i=h.is(":visible")?h[b.d[c]](!0):0;d===!1?d=i:d!=i&&(e=!0),0==d&&(e=!0)}return e}function ms_getPaddingBorderMargin(a,b,c){return a[b.d["outer"+c]](!0)-a[b.d[c.toLowerCase()]]()}function ms_getPercentage(a,b){if(is_percentage(b)){if(b=parseInt(b.slice(0,-1),10),!is_number(b))return a;a*=b/100}return a}function cf_e(a,b,c,d,e){return is_boolean(c)||(c=!0),is_boolean(d)||(d=!0),is_boolean(e)||(e=!1),c&&(a=b.events.prefix+a),d&&(a=a+"."+b.events.namespace),d&&e&&(a+=b.serialNumber),a}function cf_c(a,b){return is_string(b.classnames[a])?b.classnames[a]:a}function cf_mapWrapperSizes(a,b,c){is_boolean(c)||(c=!0);var d=b.usePadding&&c?b.padding:[0,0,0,0],e={};return e[b.d.width]=a[0]+d[1]+d[3],e[b.d.height]=a[1]+d[0]+d[2],e}function cf_sortParams(a,b){for(var c=[],d=0,e=a.length;e>d;d++)for(var f=0,g=b.length;g>f;f++)if(b[f].indexOf(typeof a[d])>-1&&is_undefined(c[f])){c[f]=a[d];break}return c}function cf_getPadding(a){if(is_undefined(a))return[0,0,0,0];if(is_number(a))return[a,a,a,a];if(is_string(a)&&(a=a.split("px").join("").split("em").join("").split(" ")),!is_array(a))return[0,0,0,0];for(var b=0;4>b;b++)a[b]=parseInt(a[b],10);switch(a.length){case 0:return[0,0,0,0];case 1:return[a[0],a[0],a[0],a[0]];case 2:return[a[0],a[1],a[0],a[1]];case 3:return[a[0],a[1],a[2],a[1]];default:return[a[0],a[1],a[2],a[3]]}}function cf_getAlignPadding(a,b){var c=is_number(b[b.d.width])?Math.ceil(b[b.d.width]-ms_getTotalSize(a,b,"width")):0;switch(b.align){case"left":return[0,c];case"right":return[c,0];case"center":default:return[Math.ceil(c/2),Math.floor(c/2)]}}function cf_getDimensions(a){for(var b=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],c=b[0].length,d="right"==a.direction||"left"==a.direction?0:1,e={},f=0;c>f;f++)e[b[0][f]]=b[d][f];return e}function cf_getAdjust(a,b,c,d){var e=a;if(is_function(c))e=c.call(d,e);else if(is_string(c)){var f=c.split("+"),g=c.split("-");if(g.length>f.length)var h=!0,i=g[0],j=g[1];else var h=!1,i=f[0],j=f[1];switch(i){case"even":e=1==a%2?a-1:a;break;case"odd":e=0==a%2?a-1:a;break;default:e=a}j=parseInt(j,10),is_number(j)&&(h&&(j=-j),e+=j)}return(!is_number(e)||1>e)&&(e=1),e}function cf_getItemsAdjust(a,b,c,d){return cf_getItemAdjustMinMax(cf_getAdjust(a,b,c,d),b.items.visibleConf)}function cf_getItemAdjustMinMax(a,b){return is_number(b.min)&&b.min>a&&(a=b.min),is_number(b.max)&&a>b.max&&(a=b.max),1>a&&(a=1),a}function cf_getSynchArr(a){is_array(a)||(a=[[a]]),is_array(a[0])||(a=[a]);for(var b=0,c=a.length;c>b;b++)is_string(a[b][0])&&(a[b][0]=$(a[b][0])),is_boolean(a[b][1])||(a[b][1]=!0),is_boolean(a[b][2])||(a[b][2]=!0),is_number(a[b][3])||(a[b][3]=0);return a}function cf_getKeyCode(a){return"right"==a?39:"left"==a?37:"up"==a?38:"down"==a?40:-1}function cf_setCookie(a,b,c){if(a){var d=b.triggerHandler(cf_e("currentPosition",c));$.fn.carouFredSel.cookie.set(a,d)}}function cf_getCookie(a){var b=$.fn.carouFredSel.cookie.get(a);return""==b?0:b}function in_mapCss(a,b){for(var c={},d=0,e=b.length;e>d;d++)c[b[d]]=a.css(b[d]);return c}function in_complementItems(a,b,c,d){return is_object(a.visibleConf)||(a.visibleConf={}),is_object(a.sizesConf)||(a.sizesConf={}),0==a.start&&is_number(d)&&(a.start=d),is_object(a.visible)?(a.visibleConf.min=a.visible.min,a.visibleConf.max=a.visible.max,a.visible=!1):is_string(a.visible)?("variable"==a.visible?a.visibleConf.variable=!0:a.visibleConf.adjust=a.visible,a.visible=!1):is_function(a.visible)&&(a.visibleConf.adjust=a.visible,a.visible=!1),is_string(a.filter)||(a.filter=c.filter(":hidden").length>0?":visible":"*"),a[b.d.width]||(b.responsive?(debug(!0,"Set a "+b.d.width+" for the items!"),a[b.d.width]=ms_getTrueLargestSize(c,b,"outerWidth")):a[b.d.width]=ms_hasVariableSizes(c,b,"outerWidth")?"variable":c[b.d.outerWidth](!0)),a[b.d.height]||(a[b.d.height]=ms_hasVariableSizes(c,b,"outerHeight")?"variable":c[b.d.outerHeight](!0)),a.sizesConf.width=a.width,a.sizesConf.height=a.height,a}function in_complementVisibleItems(a,b){return"variable"==a.items[a.d.width]&&(a.items.visibleConf.variable=!0),a.items.visibleConf.variable||(is_number(a[a.d.width])?a.items.visible=Math.floor(a[a.d.width]/a.items[a.d.width]):(a.items.visible=Math.floor(b/a.items[a.d.width]),a[a.d.width]=a.items.visible*a.items[a.d.width],a.items.visibleConf.adjust||(a.align=!1)),("Infinity"==a.items.visible||1>a.items.visible)&&(debug(!0,'Not a valid number of visible items: Set to "variable".'),a.items.visibleConf.variable=!0)),a}function in_complementPrimarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerWidth")),a}function in_complementSecondarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerHeight")),a||(a=b.items[b.d.height]),a}function in_getAlignPadding(a,b){var c=cf_getAlignPadding(gi_getCurrentItems(b,a),a);return a.padding[a.d[1]]=c[1],a.padding[a.d[3]]=c[0],a}function in_getResponsiveValues(a,b){var c=cf_getItemAdjustMinMax(Math.ceil(a[a.d.width]/a.items[a.d.width]),a.items.visibleConf);c>b.length&&(c=b.length);var d=Math.floor(a[a.d.width]/c);return a.items.visible=c,a.items[a.d.width]=d,a[a.d.width]=c*d,a}function bt_pauseOnHoverConfig(a){if(is_string(a))var b=a.indexOf("immediate")>-1?!0:!1,c=a.indexOf("resume")>-1?!0:!1;else var b=c=!1;return[b,c]}function bt_mousesheelNumber(a){return is_number(a)?a:null}function is_null(a){return null===a}function is_undefined(a){return is_null(a)||void 0===a||""===a||"undefined"===a}function is_array(a){return a instanceof Array}function is_jquery(a){return a instanceof jQuery}function is_object(a){return(a instanceof Object||"object"==typeof a)&&!is_null(a)&&!is_jquery(a)&&!is_array(a)&&!is_function(a)}function is_number(a){return(a instanceof Number||"number"==typeof a)&&!isNaN(a)}function is_string(a){return(a instanceof String||"string"==typeof a)&&!is_undefined(a)&&!is_true(a)&&!is_false(a)}function is_function(a){return a instanceof Function||"function"==typeof a}function is_boolean(a){return a instanceof Boolean||"boolean"==typeof a||is_true(a)||is_false(a)}function is_true(a){return a===!0||"true"===a}function is_false(a){return a===!1||"false"===a}function is_percentage(a){return is_string(a)&&"%"==a.slice(-1)}function getTime(){return(new Date).getTime()}function deprecated(a,b){debug(!0,a+" is DEPRECATED, support for it will be removed. Use "+b+" instead.")}function debug(a,b){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(a)){var c=" ("+a.selector+")";a=a.debug}else var c="";if(!a)return!1;b=is_string(b)?"carouFredSel"+c+": "+b:["carouFredSel"+c+":",b],window.console.log(b)}return!1}$.fn.carouFredSel||($.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(0==this.length)return debug(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).carouFredSel(options,configs)});var $cfs=this,$tt0=this[0],starting_position=!1;$cfs.data("_cfs_isCarousel")&&(starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition"),$cfs.trigger("_cfs_triggerEvent",["destroy",!0]));var FN={};FN._init=function(a,b,c){a=go_getObject($tt0,a),a.items=go_getItemsObject($tt0,a.items),a.scroll=go_getScrollObject($tt0,a.scroll),a.auto=go_getAutoObject($tt0,a.auto),a.prev=go_getPrevNextObject($tt0,a.prev),a.next=go_getPrevNextObject($tt0,a.next),a.pagination=go_getPaginationObject($tt0,a.pagination),a.swipe=go_getSwipeObject($tt0,a.swipe),a.mousewheel=go_getMousewheelObject($tt0,a.mousewheel),b&&(opts_orig=$.extend(!0,{},$.fn.carouFredSel.defaults,a)),opts=$.extend(!0,{},$.fn.carouFredSel.defaults,a),opts.d=cf_getDimensions(opts),crsl.direction="up"==opts.direction||"left"==opts.direction?"next":"prev";var d=$cfs.children(),e=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)&&(opts.cookie="caroufredsel_cookie_"+conf.serialNumber),opts.maxDimension=ms_getMaxDimension(opts,e),opts.items=in_complementItems(opts.items,opts,d,c),opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,d),opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,d),opts.responsive&&(is_percentage(opts[opts.d.width])||(opts[opts.d.width]="100%")),is_percentage(opts[opts.d.width])&&(crsl.upDateOnWindowResize=!0,crsl.primarySizePercentage=opts[opts.d.width],opts[opts.d.width]=ms_getPercentage(e,crsl.primarySizePercentage),opts.items.visible||(opts.items.visibleConf.variable=!0)),opts.responsive?(opts.usePadding=!1,opts.padding=[0,0,0,0],opts.align=!1,opts.items.visibleConf.variable=!1):(opts.items.visible||(opts=in_complementVisibleItems(opts,e)),opts[opts.d.width]||(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&"*"==opts.items.filter?(opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width],opts.align=!1):opts[opts.d.width]="variable"),is_undefined(opts.align)&&(opts.align=is_number(opts[opts.d.width])?"center":!1),opts.items.visibleConf.variable&&(opts.items.visible=gn_getVisibleItemsNext(d,opts,0))),"*"==opts.items.filter||opts.items.visibleConf.variable||(opts.items.visibleConf.org=opts.items.visible,opts.items.visible=gn_getVisibleItemsNextFilter(d,opts,0)),opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts.responsive)opts.items.visibleConf.min||(opts.items.visibleConf.min=opts.items.visible),opts.items.visibleConf.max||(opts.items.visibleConf.max=opts.items.visible),opts=in_getResponsiveValues(opts,d,e);else switch(opts.padding=cf_getPadding(opts.padding),"top"==opts.align?opts.align="left":"bottom"==opts.align&&(opts.align="right"),opts.align){case"center":case"left":case"right":"variable"!=opts[opts.d.width]&&(opts=in_getAlignPadding(opts,d),opts.usePadding=!0);break;default:opts.align=!1,opts.usePadding=0==opts.padding[0]&&0==opts.padding[1]&&0==opts.padding[2]&&0==opts.padding[3]?!1:!0}is_number(opts.scroll.duration)||(opts.scroll.duration=500),is_undefined(opts.scroll.items)&&(opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||"*"!=opts.items.filter?"visible":opts.items.visible),opts.auto=$.extend(!0,{},opts.scroll,opts.auto),opts.prev=$.extend(!0,{},opts.scroll,opts.prev),opts.next=$.extend(!0,{},opts.scroll,opts.next),opts.pagination=$.extend(!0,{},opts.scroll,opts.pagination),opts.auto=go_complementAutoObject($tt0,opts.auto),opts.prev=go_complementPrevNextObject($tt0,opts.prev),opts.next=go_complementPrevNextObject($tt0,opts.next),opts.pagination=go_complementPaginationObject($tt0,opts.pagination),opts.swipe=go_complementSwipeObject($tt0,opts.swipe),opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel),opts.synchronise&&(opts.synchronise=cf_getSynchArr(opts.synchronise)),opts.auto.onPauseStart&&(opts.auto.onTimeoutStart=opts.auto.onPauseStart,deprecated("auto.onPauseStart","auto.onTimeoutStart")),opts.auto.onPausePause&&(opts.auto.onTimeoutPause=opts.auto.onPausePause,deprecated("auto.onPausePause","auto.onTimeoutPause")),opts.auto.onPauseEnd&&(opts.auto.onTimeoutEnd=opts.auto.onPauseEnd,deprecated("auto.onPauseEnd","auto.onTimeoutEnd")),opts.auto.pauseDuration&&(opts.auto.timeoutDuration=opts.auto.pauseDuration,deprecated("auto.pauseDuration","auto.timeoutDuration"))},FN._build=function(){$cfs.data("_cfs_isCarousel",!0);var a=$cfs.children(),b=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),c="relative";switch(b.position){case"absolute":case"fixed":c=b.position}"parent"==conf.wrapper?sz_storeOrigCss($wrp):$wrp.css(b),$wrp.css({overflow:"hidden",position:c}),sz_storeOrigCss($cfs),$cfs.data("_cfs_origCssZindex",b.zIndex),$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),sz_storeMargin(a,opts),sz_storeOrigCss(a),opts.responsive&&sz_setResponsiveSizes(opts,a)},FN._bind_events=function(){FN._unbind_events(),$cfs.bind(cf_e("stop",conf),function(a,b){return a.stopPropagation(),crsl.isStopped||opts.auto.button&&opts.auto.button.addClass(cf_c("stopped",conf)),crsl.isStopped=!0,opts.auto.play&&(opts.auto.play=!1,$cfs.trigger(cf_e("pause",conf),b)),!0}),$cfs.bind(cf_e("finish",conf),function(a){return a.stopPropagation(),crsl.isScrolling&&sc_stopScroll(scrl),!0}),$cfs.bind(cf_e("pause",conf),function(a,b,c){if(a.stopPropagation(),tmrs=sc_clearTimers(tmrs),b&&crsl.isScrolling){scrl.isStopped=!0;var d=getTime()-scrl.startTime;scrl.duration-=d,scrl.pre&&(scrl.pre.duration-=d),scrl.post&&(scrl.post.duration-=d),sc_stopScroll(scrl,!1)}if(crsl.isPaused||crsl.isScrolling||c&&(tmrs.timePassed+=getTime()-tmrs.startTime),crsl.isPaused||opts.auto.button&&opts.auto.button.addClass(cf_c("paused",conf)),crsl.isPaused=!0,opts.auto.onTimeoutPause){var e=opts.auto.timeoutDuration-tmrs.timePassed,f=100-Math.ceil(100*e/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,f,e)}return!0}),$cfs.bind(cf_e("play",conf),function(a,b,c,d){a.stopPropagation(),tmrs=sc_clearTimers(tmrs);var e=[b,c,d],f=["string","number","boolean"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],"prev"!=b&&"next"!=b&&(b=crsl.direction),is_number(c)||(c=0),is_boolean(d)||(d=!1),d&&(crsl.isStopped=!1,opts.auto.play=!0),!opts.auto.play)return a.stopImmediatePropagation(),debug(conf,"Carousel stopped: Not scrolling.");crsl.isPaused&&opts.auto.button&&(opts.auto.button.removeClass(cf_c("stopped",conf)),opts.auto.button.removeClass(cf_c("paused",conf))),crsl.isPaused=!1,tmrs.startTime=getTime();var h=opts.auto.timeoutDuration+c;return dur2=h-tmrs.timePassed,perc=100-Math.ceil(100*dur2/h),opts.auto.progress&&(tmrs.progress=setInterval(function(){var a=getTime()-tmrs.startTime+tmrs.timePassed,b=Math.ceil(100*a/h);opts.auto.progress.updater.call(opts.auto.progress.bar[0],b)},opts.auto.progress.interval)),tmrs.auto=setTimeout(function(){opts.auto.progress&&opts.auto.progress.updater.call(opts.auto.progress.bar[0],100),opts.auto.onTimeoutEnd&&opts.auto.onTimeoutEnd.call($tt0,perc,dur2),crsl.isScrolling?$cfs.trigger(cf_e("play",conf),b):$cfs.trigger(cf_e(b,conf),opts.auto)},dur2),opts.auto.onTimeoutStart&&opts.auto.onTimeoutStart.call($tt0,perc,dur2),!0}),$cfs.bind(cf_e("resume",conf),function(a){return a.stopPropagation(),scrl.isStopped?(scrl.isStopped=!1,crsl.isPaused=!1,crsl.isScrolling=!0,scrl.startTime=getTime(),sc_startScroll(scrl,conf)):$cfs.trigger(cf_e("play",conf)),!0}),$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(a,b,c,d,e){if(a.stopPropagation(),crsl.isStopped||$cfs.is(":hidden"))return a.stopImmediatePropagation(),debug(conf,"Carousel stopped or hidden: Not scrolling.");var f=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(f>itms.total)return a.stopImmediatePropagation(),debug(conf,"Not enough items ("+itms.total+" total, "+f+" needed): Not scrolling.");var g=[b,c,d,e],h=["object","number/string","function","boolean"],i=cf_sortParams(g,h);b=i[0],c=i[1],d=i[2],e=i[3];var j=a.type.slice(conf.events.prefix.length);if(is_object(b)||(b={}),is_function(d)&&(b.onAfter=d),is_boolean(e)&&(b.queue=e),b=$.extend(!0,{},opts[j],b),b.conditions&&!b.conditions.call($tt0,j))return a.stopImmediatePropagation(),debug(conf,'Callback "conditions" returned false.');if(!is_number(c)){if("*"!=opts.items.filter)c="visible";else for(var k=[c,b.items,opts[j].items],i=0,l=k.length;l>i;i++)if(is_number(k[i])||"page"==k[i]||"visible"==k[i]){c=k[i];break}switch(c){case"page":return a.stopImmediatePropagation(),$cfs.triggerHandler(cf_e(j+"Page",conf),[b,d]);case"visible":opts.items.visibleConf.variable||"*"!=opts.items.filter||(c=opts.items.visible)}}if(scrl.isStopped)return $cfs.trigger(cf_e("resume",conf)),$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]]),a.stopImmediatePropagation(),debug(conf,"Carousel resumed scrolling.");if(b.duration>0&&crsl.isScrolling)return b.queue&&("last"==b.queue&&(queu=[]),("first"!=b.queue||0==queu.length)&&$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]])),a.stopImmediatePropagation(),debug(conf,"Carousel currently scrolling.");if(tmrs.timePassed=0,$cfs.trigger(cf_e("slide_"+j,conf),[b,c]),opts.synchronise)for(var m=opts.synchronise,n=[b,c],o=0,l=m.length;l>o;o++){var p=j;m[o][2]||(p="prev"==p?"next":"prev"),m[o][1]||(n[0]=m[o][0].triggerHandler("_cfs_triggerEvent",["configuration",p])),n[1]=c+m[o][3],m[o][0].trigger("_cfs_triggerEvent",["slide_"+p,n])}return!0}),$cfs.bind(cf_e("slide_prev",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&0==itms.first)return opts.infinite&&$cfs.trigger(cf_e("next",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if(opts.items.visibleConf.variable)c=gn_getVisibleItemsPrev(d,opts,itms.total-1);else if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsPrevFilter(d,opts,itms.total-1,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}if(opts.circular||itms.total-c<itms.first&&(c=itms.total-itms.first),opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){var f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0);f>=opts.items.visible+c&&itms.total>c&&(c++,f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0)),opts.items.visible=f}else if("*"!=opts.items.filter){var f=gn_getVisibleItemsNextFilter(d,opts,itms.total-c);opts.items.visible=cf_getItemsAdjust(f,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items backward."),itms.first+=c;itms.first>=itms.total;)itms.first-=itms.total;opts.circular||(0==itms.first&&b.onEnd&&b.onEnd.call($tt0,"prev"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),$cfs.children().slice(itms.total-c,itms.total).prependTo($cfs),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),g=gi_getOldItemsPrev(d,opts,c),h=gi_getNewItemsPrev(d,opts),i=d.eq(c-1),j=g.last(),k=h.last();sz_resetMargin(d,opts);var l=0,m=0;if(opts.align){var n=cf_getAlignPadding(h,opts);l=n[0],m=n[1]}var o=0>l?opts.padding[opts.d[3]]:0,p=!1,q=$();if(c>opts.items.visible&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,i=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(h,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B={},C={},D=sc_getDuration(b,opts,c,t);switch(b.fx){case"cover":case"cover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visible),opts,"width")}p&&(opts.items[opts.d.width]=r),sz_resetMargin(d,opts,!0),m>=0&&sz_resetMargin(j,opts,opts.padding[opts.d[1]]),l>=0&&sz_resetMargin(i,opts,opts.padding[opts.d[3]]),opts.align&&(opts.padding[opts.d[1]]=m,opts.padding[opts.d[3]]=l),B[opts.d.left]=-(t-o),C[opts.d.left]=-(v-o),x[opts.d.left]=u[opts.d.width];var E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){},L=function(){},M=function(){},N=function(){},O=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp)}switch(b.fx){case"crossfade":case"uncover":case"uncover-fade":s.children().slice(0,c).remove(),s.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":s.children().slice(opts.items.visible).remove(),s.css(C)}if($cfs.css(B),scrl=sc_setScroll(D,b.easing,conf),w[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0,("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(E=function(){$wrp.css(u)},F=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){switch(k.not(i).length&&(y[opts.d.marginRight]=i.data("_cfs_origCssMargin"),0>l?i.css(y):(K=function(){i.css(y)},L=function(){scrl.anims.push([i,y])})),b.fx){case"cover":case"cover-fade":s.children().eq(c-1).css(y)}k.not(j).length&&(z[opts.d.marginRight]=j.data("_cfs_origCssMargin"),G=function(){j.css(z)},H=function(){scrl.anims.push([j,z])}),m>=0&&(A[opts.d.marginRight]=k.data("_cfs_origCssMargin")+opts.padding[opts.d[1]],I=function(){k.css(A)},J=function(){scrl.anims.push([k,A])})}O=function(){$cfs.css(w)};var P=opts.items.visible+c-itms.total;N=function(){if(P>0&&($cfs.children().slice(itms.total).remove(),g=$($cfs.children().slice(itms.total-(opts.items.visible-P)).get().concat($cfs.children().slice(0,P).get()))),sc_showHiddenItems(p),opts.usePadding){var a=$cfs.children().eq(opts.items.visible+c-1);a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var Q=sc_mapCallbackArguments(g,q,h,c,"prev",D,u);switch(M=function(){sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",Q,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",Q,clbk),b.fx){case"none":$cfs.css(w),E(),G(),I(),K(),O(),N(),M();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){E(),G(),I(),K(),O(),N(),scrl=sc_setScroll(D,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},M]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},M]),F(),G(),I(),K(),O(),N();break;case"cover":scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]),scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"uncover":scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;default:scrl.anims.push([$cfs,w,function(){N(),M()}]),F(),H(),J(),L()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0
}),$cfs.bind(cf_e("slide_next",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&itms.first==opts.items.visible)return opts.infinite&&$cfs.trigger(cf_e("prev",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsNextFilter(d,opts,0,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}var f=0==itms.first?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable)var g=gn_getVisibleItemsNext(d,opts,c),e=gn_getVisibleItemsPrev(d,opts,f-1);else var g=opts.items.visible,e=opts.items.visible;c+g>f&&(c=f-e)}if(opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){for(var g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible-c>=g&&itms.total>c;)c++,g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible=g}else if("*"!=opts.items.filter){var g=gn_getVisibleItemsNextFilter(d,opts,c);opts.items.visible=cf_getItemsAdjust(g,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items forward."),itms.first-=c;0>itms.first;)itms.first+=itms.total;opts.circular||(itms.first==opts.items.visible&&b.onEnd&&b.onEnd.call($tt0,"next"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),h=gi_getOldItemsNext(d,opts),i=gi_getNewItemsNext(d,opts,c),j=d.eq(c-1),k=h.last(),l=i.last();sz_resetMargin(d,opts);var m=0,n=0;if(opts.align){var o=cf_getAlignPadding(i,opts);m=o[0],n=o[1]}var p=!1,q=$();if(c>opts.items.visibleConf.old&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,j=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(i,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B=sc_getDuration(b,opts,c,t);switch(b.fx){case"uncover":case"uncover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visibleConf.old),opts,"width")}p&&(opts.items[opts.d.width]=r),opts.align&&0>opts.padding[opts.d[1]]&&(opts.padding[opts.d[1]]=0),sz_resetMargin(d,opts,!0),sz_resetMargin(k,opts,opts.padding[opts.d[1]]),opts.align&&(opts.padding[opts.d[1]]=n,opts.padding[opts.d[3]]=m),A[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0;var C=function(){},D=function(){},E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp),s.children().slice(opts.items.visibleConf.old).remove()}switch(b.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1),s.css("zIndex",0)}if(scrl=sc_setScroll(B,b.easing,conf),w[opts.d.left]=-t,x[opts.d.left]=-v,0>m&&(w[opts.d.left]+=m),("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(C=function(){$wrp.css(u)},D=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){var L=l.data("_cfs_origCssMargin");n>=0&&(L+=opts.padding[opts.d[1]]),l.css(opts.d.marginRight,L),j.not(k).length&&(z[opts.d.marginRight]=k.data("_cfs_origCssMargin")),E=function(){k.css(z)},F=function(){scrl.anims.push([k,z])};var M=j.data("_cfs_origCssMargin");m>0&&(M+=opts.padding[opts.d[3]]),y[opts.d.marginRight]=M,G=function(){j.css(y)},H=function(){scrl.anims.push([j,y])}}K=function(){$cfs.css(A)};var N=opts.items.visible+c-itms.total;J=function(){N>0&&$cfs.children().slice(itms.total).remove();var a=$cfs.children().slice(0,c).appendTo($cfs).last();if(N>0&&(i=gi_getCurrentItems(d,opts)),sc_showHiddenItems(p),opts.usePadding){if(itms.total<opts.items.visible+c){var b=$cfs.children().eq(opts.items.visible-1);b.css(opts.d.marginRight,b.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var O=sc_mapCallbackArguments(h,q,i,c,"next",B,u);switch(I=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex")),sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",O,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",O,clbk),b.fx){case"none":$cfs.css(w),C(),E(),G(),K(),J(),I();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){C(),E(),G(),K(),J(),scrl=sc_setScroll(B,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},I]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},I]),D(),E(),G(),K(),J();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"uncover":scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;default:scrl.anims.push([$cfs,w,function(){K(),J(),I()}]),D(),F(),H()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0}),$cfs.bind(cf_e("slideTo",conf),function(a,b,c,d,e,f,g){a.stopPropagation();var h=[b,c,d,e,f,g],i=["string/number/object","number","boolean","object","string","function"],j=cf_sortParams(h,i);return e=j[3],f=j[4],g=j[5],b=gn_getItemIndex(j[0],j[1],j[2],itms,$cfs),0==b?!1:(is_object(e)||(e=!1),"prev"!=f&&"next"!=f&&(f=opts.circular?itms.total/2>=b?"next":"prev":0==itms.first||itms.first>b?"next":"prev"),"prev"==f&&(b=itms.total-b),$cfs.trigger(cf_e(f,conf),[e,b,g]),!0)}),$cfs.bind(cf_e("prevPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d-1,b,"prev",c])}),$cfs.bind(cf_e("nextPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d+1,b,"next",c])}),$cfs.bind(cf_e("slideToPage",conf),function(a,b,c,d,e){a.stopPropagation(),is_number(b)||(b=$cfs.triggerHandler(cf_e("currentPage",conf)));var f=opts.pagination.items||opts.items.visible,g=Math.ceil(itms.total/f)-1;return 0>b&&(b=g),b>g&&(b=0),$cfs.triggerHandler(cf_e("slideTo",conf),[b*f,0,!0,c,d,e])}),$cfs.bind(cf_e("jumpToStart",conf),function(a,b){if(a.stopPropagation(),b=b?gn_getItemIndex(b,0,!0,itms,$cfs):0,b+=itms.first,0!=b){if(itms.total>0)for(;b>itms.total;)b-=itms.total;$cfs.prepend($cfs.children().slice(b,itms.total))}return!0}),$cfs.bind(cf_e("synchronise",conf),function(a,b){if(a.stopPropagation(),b)b=cf_getSynchArr(b);else{if(!opts.synchronise)return debug(conf,"No carousel to synchronise.");b=opts.synchronise}for(var c=$cfs.triggerHandler(cf_e("currentPosition",conf)),d=!0,e=0,f=b.length;f>e;e++)b[e][0].triggerHandler(cf_e("slideTo",conf),[c,b[e][3],!0])||(d=!1);return d}),$cfs.bind(cf_e("queue",conf),function(a,b,c){return a.stopPropagation(),is_function(b)?b.call($tt0,queu):is_array(b)?queu=b:is_undefined(b)||queu.push([b,c]),queu}),$cfs.bind(cf_e("insertItem",conf),function(a,b,c,d,e){a.stopPropagation();var f=[b,c,d,e],g=["string/object","string/number/object","boolean","number"],h=cf_sortParams(f,g);if(b=h[0],c=h[1],d=h[2],e=h[3],is_object(b)&&!is_jquery(b)?b=$(b):is_string(b)&&(b=$(b)),!is_jquery(b)||0==b.length)return debug(conf,"Not a valid object.");is_undefined(c)&&(c="end"),sz_storeMargin(b,opts),sz_storeOrigCss(b);var i=c,j="before";"end"==c?d?(0==itms.first?(c=itms.total-1,j="after"):(c=itms.first,itms.first+=b.length),0>c&&(c=0)):(c=itms.total-1,j="after"):c=gn_getItemIndex(c,e,d,itms,$cfs);var k=$cfs.children().eq(c);return k.length?k[j](b):(debug(conf,"Correct insert-position not found! Appending item to the end."),$cfs.append(b)),"end"==i||d||itms.first>c&&(itms.first+=b.length),itms.total=$cfs.children().length,itms.first>=itms.total&&(itms.first-=itms.total),$cfs.trigger(cf_e("updateSizes",conf)),$cfs.trigger(cf_e("linkAnchors",conf)),!0}),$cfs.bind(cf_e("removeItem",conf),function(a,b,c,d){a.stopPropagation();var e=[b,c,d],f=["string/number/object","boolean","number"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],b instanceof $&&b.length>1)return h=$(),b.each(function(){var a=$cfs.trigger(cf_e("removeItem",conf),[$(this),c,d]);a&&(h=h.add(a))}),h;if(is_undefined(b)||"end"==b)h=$cfs.children().last();else{b=gn_getItemIndex(b,d,c,itms,$cfs);var h=$cfs.children().eq(b);h.length&&itms.first>b&&(itms.first-=h.length)}return h&&h.length&&(h.detach(),itms.total=$cfs.children().length,$cfs.trigger(cf_e("updateSizes",conf))),h}),$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length);return is_array(b)&&(clbk[c]=b),is_function(b)&&clbk[c].push(b),clbk[c]}),$cfs.bind(cf_e("currentPosition",conf),function(a,b){if(a.stopPropagation(),0==itms.first)var c=0;else var c=itms.total-itms.first;return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("currentPage",conf),function(a,b){a.stopPropagation();var c,d=opts.pagination.items||opts.items.visible,e=Math.ceil(itms.total/d-1);return c=0==itms.first?0:itms.first<itms.total%d?0:itms.first!=d||opts.circular?Math.round((itms.total-itms.first)/d):e,0>c&&(c=0),c>e&&(c=e),is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("currentVisible",conf),function(a,b){a.stopPropagation();var c=gi_getCurrentItems($cfs.children(),opts);return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("slice",conf),function(a,b,c,d){if(a.stopPropagation(),0==itms.total)return!1;var e=[b,c,d],f=["number","number","function"],g=cf_sortParams(e,f);if(b=is_number(g[0])?g[0]:0,c=is_number(g[1])?g[1]:itms.total,d=g[2],b+=itms.first,c+=itms.first,items.total>0){for(;b>itms.total;)b-=itms.total;for(;c>itms.total;)c-=itms.total;for(;0>b;)b+=itms.total;for(;0>c;)c+=itms.total}var h,i=$cfs.children();return h=c>b?i.slice(b,c):$(i.slice(b,itms.total).get().concat(i.slice(0,c).get())),is_function(d)&&d.call($tt0,h),h}),$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length),d=crsl[c];return is_function(b)&&b.call($tt0,d),d}),$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=!1;if(is_function(a))a.call($tt0,opts);else if(is_object(a))opts_orig=$.extend(!0,{},opts_orig,a),b!==!1?reInit=!0:opts=$.extend(!0,{},opts,a);else if(!is_undefined(a))if(is_function(b)){var val=eval("opts."+a);is_undefined(val)&&(val=""),b.call($tt0,val)}else{if(is_undefined(b))return eval("opts."+a);"boolean"!=typeof c&&(c=!0),eval("opts_orig."+a+" = b"),c!==!1?reInit=!0:eval("opts."+a+" = b")}if(reInit){sz_resetMargin($cfs.children(),opts),FN._init(opts_orig),FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[!0,sz])}return opts}),$cfs.bind(cf_e("linkAnchors",conf),function(a,b,c){return a.stopPropagation(),is_undefined(b)?b=$("body"):is_string(b)&&(b=$(b)),is_jquery(b)&&0!=b.length?(is_string(c)||(c="a.caroufredsel"),b.find(c).each(function(){var a=this.hash||"";a.length>0&&-1!=$cfs.children().index($(a))&&$(this).unbind("click").click(function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),a)})}),!0):debug(conf,"Not a valid object.")}),$cfs.bind(cf_e("updatePageStatus",conf),function(a,b){if(a.stopPropagation(),opts.pagination.container){var c=opts.pagination.items||opts.items.visible,d=Math.ceil(itms.total/c);b&&(opts.pagination.anchorBuilder&&(opts.pagination.container.children().remove(),opts.pagination.container.each(function(){for(var a=0;d>a;a++){var b=$cfs.children().eq(gn_getItemIndex(a*c,0,!0,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(b[0],a+1))}})),opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(a){$(this).bind(opts.pagination.event,function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[a*c,-opts.pagination.deviation,!0,opts.pagination])})})}));var e=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;return e>=d&&(e=0),0>e&&(e=d-1),opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(e).addClass(cf_c("selected",conf))}),!0}}),$cfs.bind(cf_e("updateSizes",conf),function(){var a=opts.items.visible,b=$cfs.children(),c=ms_getParentSize($wrp,opts,"width");if(itms.total=b.length,crsl.primarySizePercentage?(opts.maxDimension=c,opts[opts.d.width]=ms_getPercentage(c,crsl.primarySizePercentage)):opts.maxDimension=ms_getMaxDimension(opts,c),opts.responsive?(opts.items.width=opts.items.sizesConf.width,opts.items.height=opts.items.sizesConf.height,opts=in_getResponsiveValues(opts,b,c),a=opts.items.visible,sz_setResponsiveSizes(opts,b)):opts.items.visibleConf.variable?a=gn_getVisibleItemsNext(b,opts,0):"*"!=opts.items.filter&&(a=gn_getVisibleItemsNextFilter(b,opts,0)),!opts.circular&&0!=itms.first&&a>itms.first){if(opts.items.visibleConf.variable)var d=gn_getVisibleItemsPrev(b,opts,itms.first)-itms.first;else if("*"!=opts.items.filter)var d=gn_getVisibleItemsPrevFilter(b,opts,itms.first)-itms.first;else var d=opts.items.visible-itms.first;debug(conf,"Preventing non-circular: sliding "+d+" items backward."),$cfs.trigger(cf_e("prev",conf),d)}opts.items.visible=cf_getItemsAdjust(a,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts=in_getAlignPadding(opts,b);var e=sz_setSizes($cfs,opts);return $cfs.trigger(cf_e("updatePageStatus",conf),[!0,e]),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),e}),$cfs.bind(cf_e("destroy",conf),function(a,b){return a.stopPropagation(),tmrs=sc_clearTimers(tmrs),$cfs.data("_cfs_isCarousel",!1),$cfs.trigger(cf_e("finish",conf)),b&&$cfs.trigger(cf_e("jumpToStart",conf)),sz_restoreOrigCss($cfs.children()),sz_restoreOrigCss($cfs),FN._unbind_events(),FN._unbind_buttons(),"parent"==conf.wrapper?sz_restoreOrigCss($wrp):$wrp.replaceWith($cfs),!0}),$cfs.bind(cf_e("debug",conf),function(){return debug(conf,"Carousel width: "+opts.width),debug(conf,"Carousel height: "+opts.height),debug(conf,"Item widths: "+opts.items.width),debug(conf,"Item heights: "+opts.items.height),debug(conf,"Number of items visible: "+opts.items.visible),opts.auto.play&&debug(conf,"Number of items scrolled automatically: "+opts.auto.items),opts.prev.button&&debug(conf,"Number of items scrolled backward: "+opts.prev.items),opts.next.button&&debug(conf,"Number of items scrolled forward: "+opts.next.items),conf.debug}),$cfs.bind("_cfs_triggerEvent",function(a,b,c){return a.stopPropagation(),$cfs.triggerHandler(cf_e(b,conf),c)})},FN._unbind_events=function(){$cfs.unbind(cf_e("",conf)),$cfs.unbind(cf_e("",conf,!1)),$cfs.unbind("_cfs_triggerEvent")},FN._bind_buttons=function(){if(FN._unbind_buttons(),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),opts.auto.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button&&opts.auto.button.bind(cf_e(opts.auto.event,conf,!1),function(a){a.preventDefault();var b=!1,c=null;crsl.isPaused?b="play":opts.auto.pauseOnEvent&&(b="pause",c=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)),b&&$cfs.trigger(cf_e(b,conf),c)}),opts.prev.button&&(opts.prev.button.bind(cf_e(opts.prev.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("prev",conf))}),opts.prev.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.next.button&&(opts.next.button.bind(cf_e(opts.next.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("next",conf))}),opts.next.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.pagination.container&&opts.pagination.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if((opts.prev.key||opts.next.key)&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b==opts.next.key&&(a.preventDefault(),$cfs.trigger(cf_e("next",conf))),b==opts.prev.key&&(a.preventDefault(),$cfs.trigger(cf_e("prev",conf)))}),opts.pagination.keys&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b>=49&&58>b&&(b=(b-49)*opts.items.visible,itms.total>=b&&(a.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[b,0,!0,opts.pagination])))}),$.fn.swipe){var b="ontouchstart"in window;if(b&&opts.swipe.onTouch||!b&&opts.swipe.onMouse){var c=$.extend(!0,{},opts.prev,opts.swipe),d=$.extend(!0,{},opts.next,opts.swipe),e=function(){$cfs.trigger(cf_e("prev",conf),[c])},f=function(){$cfs.trigger(cf_e("next",conf),[d])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=f,opts.swipe.options.swipeDown=e;break;default:opts.swipe.options.swipeLeft=f,opts.swipe.options.swipeRight=e}crsl.swipe&&$cfs.swipe("destroy"),$wrp.swipe(opts.swipe.options),$wrp.css("cursor","move"),crsl.swipe=!0}}if($.fn.mousewheel&&opts.mousewheel){var g=$.extend(!0,{},opts.prev,opts.mousewheel),h=$.extend(!0,{},opts.next,opts.mousewheel);crsl.mousewheel&&$wrp.unbind(cf_e("mousewheel",conf,!1)),$wrp.bind(cf_e("mousewheel",conf,!1),function(a,b){a.preventDefault(),b>0?$cfs.trigger(cf_e("prev",conf),[g]):$cfs.trigger(cf_e("next",conf),[h])}),crsl.mousewheel=!0}if(opts.auto.play&&$cfs.trigger(cf_e("play",conf),opts.auto.delay),crsl.upDateOnWindowResize){var i=function(){$cfs.trigger(cf_e("finish",conf)),opts.auto.pauseOnResize&&!crsl.isPaused&&$cfs.trigger(cf_e("play",conf)),sz_resetMargin($cfs.children(),opts),$cfs.trigger(cf_e("updateSizes",conf))},j=$(window),k=null;if($.debounce&&"debounce"==conf.onWindowResize)k=$.debounce(200,i);else if($.throttle&&"throttle"==conf.onWindowResize)k=$.throttle(300,i);else{var l=0,m=0;k=function(){var a=j.width(),b=j.height();(a!=l||b!=m)&&(i(),l=a,m=b)}}j.bind(cf_e("resize",conf,!1,!0,!0),k)}},FN._unbind_buttons=function(){var a=(cf_e("",conf),cf_e("",conf,!1));ns3=cf_e("",conf,!1,!0,!0),$(document).unbind(ns3),$(window).unbind(ns3),$wrp.unbind(a),opts.auto.button&&opts.auto.button.unbind(a),opts.prev.button&&opts.prev.button.unbind(a),opts.next.button&&opts.next.button.unbind(a),opts.pagination.container&&(opts.pagination.container.unbind(a),opts.pagination.anchorBuilder&&opts.pagination.container.children().remove()),crsl.swipe&&($cfs.swipe("destroy"),$wrp.css("cursor","default"),crsl.swipe=!1),crsl.mousewheel&&(crsl.mousewheel=!1),nv_showNavi(opts,"hide",conf),nv_enableNavi(opts,"removeClass",conf)},is_boolean(configs)&&(configs={debug:configs});var crsl={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(!0,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(!0,{},options),$wrp="parent"==conf.wrapper?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();if(conf.selector=$cfs.selector,conf.serialNumber=$.fn.carouFredSel.serialNumber++,conf.transition=conf.transition&&$.fn.transition?"transition":"animate",FN._init(opts_orig,!0,starting_position),FN._build(),FN._bind_events(),FN._bind_buttons(),is_array(opts.items.start))var start_arr=opts.items.start;else{var start_arr=[];0!=opts.items.start&&start_arr.push(opts.items.start)}if(opts.cookie&&start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10)),start_arr.length>0)for(var a=0,l=start_arr.length;l>a;a++){var s=start_arr[a];if(0!=s){if(s===!0){if(s=window.location.hash,1>s.length)continue}else"random"===s&&(s=Math.floor(Math.random()*itms.total));if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,!0,{fx:"none"}]))break}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);return opts.onCreate&&opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm}),$cfs.trigger(cf_e("updatePageStatus",conf),[!0,siz]),$cfs.trigger(cf_e("linkAnchors",conf)),conf.debug&&$cfs.trigger(cf_e("debug",conf)),$cfs},$.fn.carouFredSel.serialNumber=1,$.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},$.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},$.fn.carouFredSel.pageAnchorBuilder=function(a){return'<a href="#"><span>'+a+"</span></a>"},$.fn.carouFredSel.progressbarUpdater=function(a){$(this).css("width",a+"%")},$.fn.carouFredSel.cookie={get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;d>c;c++){for(var e=b[c];" "==e.charAt(0);)e=e.slice(1);if(0==e.indexOf(a))return e.slice(a.length)}return 0},set:function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+864e5*c),d="; expires="+e.toGMTString()}document.cookie=a+"="+b+d+"; path=/"},remove:function(a){$.fn.carouFredSel.cookie.set(a,"",-1)}},$.extend($.easing,{quadratic:function(a){var b=a*a;return a*(-b*a+4*b-6*a+4)},cubic:function(a){return a*(4*a*a-9*a+6)},elastic:function(a){var b=a*a;return a*(33*b*b-106*b*a+126*b-67*a+15)}}))}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});;/*! BARNES-BUILDER 2024-02-21 */
var Extend=function(a,b){if(~["boolean","string"].indexOf(typeof arguments[arguments.length-1])&&(execParent=Array.prototype.pop.apply(arguments)),1>arguments)throw new TypeError("Must supply parent class to extend");for(;2<arguments.length;){var c=arguments.length-2,d=Array.prototype.pop.apply(arguments),d=Extend(arguments[c],d,!1);arguments[c]=d,2==c&&(b=d)}var e=function(){!0!==e.prototype.execParent&&"before"!==e.prototype.execParent||e.prototype.parentClass.apply(this,arguments),e.prototype.thisClass.apply(this,arguments),"after"===e.prototype.execParent&&e.prototype.parentClass.apply(this,arguments)};return Extend.mergeObjects(e,a,b),e.prototype=Extend.mergePrototypes(Extend.getPrototype(a),Extend.getPrototype(b)),e.prototype.execParent=execParent,e.prototype.originClass=b.prototype.originClass?b.prototype.originClass:b,e.prototype.parentClass=b,e.prototype.thisClass=a,e.prototype.thisConstructor=e};Extend.mergeObjects=function(a,b,c){return jQuery.extend.apply(a,[!0,a,c,b])},Extend.defineProperties=function(a,b){var c,d=Object.getOwnPropertyNames(a);for(c in b)if(b.hasOwnProperty(c)){if(-1<d.indexOf(c)){var e=Object.getOwnPropertyDescriptor(a,c);if(!e.configurable)continue;Extend.isObjectLiteral(e.value)&&Extend.isObjectLiteral(b[c].value)&&(b[c].value=Extend.mergeObjects({},b[c].value,e.value))}Object.defineProperty(a,c,b[c])}return a},Extend.getObjProperties=function(a){if(!(a&&a instanceof Object))return[];var b,c=Object.getOwnPropertyNames(a),d={};for(b in c){var e=c[b];a.hasOwnProperty(e)&&(d[e]=Object.getOwnPropertyDescriptor(a,e))}return d},Extend.getPrototype=function(a){return Extend.getObjProperties(a.prototype)},Extend.mergePrototypes=function(a,b){var c={};if("object"!=typeof a||"object"!=typeof b)throw new TypeError("mergePrototypes: All parameters must be objects");if(2<arguments.length&&isNaN(arguments[2]))for(var d=arguments.length;d>1;d--)arguments[d-1]=Extend.mergePrototypes(arguments[d-1],arguments[d]);return Extend.setProperties(c,b),Extend.setProperties(c,a),c},Extend.setProperties=function(a,b){for(var c in b)if("parentClass"!=c&&"thisClass"!=c){var d=b[c];~Object.getOwnPropertyNames(a).indexOf(c)&&a[c]&&a[c].constructor===Object&&d.value&&d.value.constructor===Object&&(d.value=Extend.mergeObjects({},d.value,a[c])),Object.defineProperty(a,c,d)}},Extend.isObjectLiteral=function(a){return a&&a.constructor&&a.constructor===Object};var ExtNodeList=function(){var a=function(a){a&&this.childNodes(a)};return a.prototype=Object.create(Array.prototype,{clone:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var a=document.createElement("temp"),b=0;b<this.length;b++)a.appendChild(this[b].cloneNode(!0));for(var a=new ExtNodeList(a.childNodes),b=this.querySelectorAll("select"),c=a.querySelectorAll("select"),d=0;d<b.length;d++)c[d].selectedIndex=b[d].selectedIndex;return a}},concat:{writable:!1,configurable:!1,enumerable:!1,value:function(a){var b=new ExtNodeList(this);if(1<arguments.length)for(var c=0;c<arguments.length;c++)b=b.concat(arguments[c]);else for(c=0;c<a.length;c++)b.push(a[c]);return b}},childNodes:{writable:!1,configurable:!1,enumerable:!1,value:function(a){if(1>arguments.length)return this.nodeList;this.splice(0,this.length),this.nodeList=a;for(var b=0;b<a.length;b++)this.push(a[b]);return a}},appendTo:{writable:!1,configurable:!1,enumerable:!1,value:function(a){for(var b=0;b<this.length;b++)a.appendChild(this[b]);return this}},querySelectorAll:{writable:!1,configurable:!1,enumerable:!1,value:function(a){for(var b=new ExtNodeList,c=0;c<this.length;c++){var d=this[c],e=document.createElement("div");if(e.appendChild(d.cloneNode(!1)),0<e.querySelectorAll(a).length&&b.push(this[c]),d.querySelectorAll)for(d=d.querySelectorAll(a),e=0;e<d.length;e++)b.push(d[e])}return b}}}),a}(),ModalFlow=function(){var a=function(a){this.closeEvents=[],this.push(a)};return a.prototype=Object.create(Array.prototype,{closeOnBack:{writable:!0,configurable:!0,enumerable:!1,value:!0},goTo:{writable:!1,configurable:!1,enumerable:!1,value:function(a,b){var c=this.getIndexBySelector(a);if(b||(b="back"),0>c){if(this.closeOnBack)return c=this[0],c.triggerClose(b),delete this[0],c;c=0}var d=this[c];if(c+1<this.length)for(var e=this.length-1;e>c;e--)this[e].triggerClose(b),delete this[e];return d}},get:{writable:!1,configurable:!1,enumerable:!1,value:function(a){return this[this.getIndexBySelector(a)]}},getIndexBySelector:{writable:!1,configurable:!1,enumerable:!1,value:function(a){var b=-1;switch(a){case 0:b=0;break;case"start":case"first":b=0,2>this.length&&b--;break;case"prev":case"previous":case"back":b=this.length-2;break;default:if(isNaN(a)){for(b=0;b<this.length;b++)if(this[b].tplName==a)return b}else a=parseInt(a);b=0>a?this.length+a:a}return b}},push:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var a=0;a<arguments.length;a++)this._addElement(this.length,arguments[a]);return this.length}},pop:{writable:!1,configurable:!1,enumerable:!1,value:function(){return this._removeElement(this.length-1)}},splice:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var a=Array.prototype.splice.apply(arguments,[0,1])[0],b=Array.prototype.splice.apply(arguments,[0,1])[0],c=Array.prototype.splice.apply(arguments),d=[],e=a;a+b>e;e++)d.push(this._removeElement(e));for(;void 0!=(elem=c.pop());)this._addElement(a,elem);return d}},_addElement:{writable:!1,configurable:!1,enumerable:!1,value:function(a,b){if(!b.pureModal)throw new TypeError("ModalFlow only allows pureModal objects");Array.prototype.splice.apply(this,[a,0,b]);var c=this,d=function(){var a=c.indexOf(this);a>-1&&c.splice(a,1)};return this.closeEvents.splice(a,0,d),b.closeEvents.all.push(d),b}},_removeElement:{writable:!1,configurable:!1,enumerable:!1,value:function(a){for(var b=-1;-1<(b=this[a].closeEvents.all.indexOf(this.closeEvents[a]));)this[a].closeEvents.all.splice(b,1);return this.closeEvents.splice(a,1),Array.prototype.splice.apply(this,[a,1])[0]}}}),a}();Modal=function(){var e=function(a,b,c,d){if(this.data=b,this.options=Extend.mergeObjects({},c||{},this.defaultOptions),this.userOptions=c||{},a&&"string"==typeof a)this.tplName=a;else if(this.getSetting("tplUrlOverride")&&"string"==typeof this.getSetting("tplUrlOverride")){var e=this.getSetting("tplUrlOverride").split(/\?/).splice(0,1)[0].split(/\//).pop().split(/\./);e.pop(),this.tplName=e.join(".")}else if(!this.tplName||"string"!=typeof this.tplName)throw new TypeError("First parameter must be string if extended class has not specified a template or URL override");this.displayed=!1,this.overlay=null,this.guid=this.__generateId(),this.events={},this.closeEvents={back:[],button:[],method:[],all:[]},this.__initContent.apply(this,arguments),d&&(this.flow(d.flow()),this.flow().push(this),this.parent=d),this.trigger("ready"),this.getSetting("autoDisplay")?this.Display():this.trigger("nodisplay")};return e.prototype={data:null,content:null,options:null,tplName:null,displayed:!1,overlay:null,guid:!1,events:null,closeEvents:null,target:null,parent:null,contentExclude:[{method:"querySelector",args:['[data-role="breadcrumbs"]']},{method:"querySelectorAll",args:["*"]}],contentInclude:[{method:"querySelectorAll",args:["[data-content],data[value]"]}],breadcrumbsInclude:[{method:"querySelectorAll",args:["[data-crumb]"]}],pureModal:!0,openModals:{},defaultOptions:{async:!0,autoDisplay:!0,classes:[],css:{},position:{center:!0,anchor:[null,""],container:null,viewport:!0},posPriority:["center","anchor","container","viewport"],posBuffer:{anchor:5,container:-20,viewport:10,override:null},scrollTo:!1,tplDir:"",tplExt:".html",tplParams:null,tplUrlOverride:"",useCache:!0,overlay:!0,overlayClose:!1,copyContent:!0,useContentSetters:!0,replaceContentSetters:!0,hideParent:!0,stackOverlay:!1,modalIsScrollable:!1,initializers:{breadcrumbs:!0,openers:!0,closers:!0,roles:!0},manualDisplayDom:!1,zIndex:null},zIndexes:{start:3e4,interval:1e3,next:0},global:{cache:{},topModal:null,overlayModal:null},_dom:null,_tpl:null,_zIndex:null,_flow:null,dom:function(a){return 1>arguments.length?(this._dom||(this._dom=this.tpl().clone(!0)),this._dom):this._dom=a},tpl:function(a){return 1>arguments.length?this._tpl:this._tpl=a},zIndex:function(a){return 1===arguments.length?this.options.zIndex=a:(this.options.zIndex||(0>=this.zIndexes.next&&(this.zIndexes.next=this.zIndexes.start),this.options.zIndex=this.zIndexes.next,this.zIndexes.next+=this.zIndexes.interval),this.options.zIndex)},flow:function(a){return 1===arguments.length?this._flow=a:(this._flow||(this._flow=new ModalFlow(this)),this._flow)},Display:function(){return!0===this.displayed&&this.modal&&this.modal.parentNode?this.isHidden()&&this.show():(this.displayed=!1,this.__initTpl()),this},initView:function(){return!0},initOverlay:function(){var a=document.createElement("div");return a.className+=" pure-modal-overlay",a},__initContent:function(){var a;if(a=this.hasOwnProperty("content")?this.content:this.options.hasOwnProperty("content")?this.options.content:this.defaultOptions.content,"function"==typeof a)this.content=a.apply(this,arguments)||{};else if(this.getSetting("copyContent")&&a&&a.constructor===Object){this.content={};for(var b in a)this.content[b]=a[b]}else this.content=a||{};delete this.options.content},__initModalDom:function(){this._initializing=!0,this.dom();var a=this.modal=document.createElement("div");this.dom().appendTo(a),a.className=["modal__dialog"].concat(this.getSetting("classes")).join(" "),a.setAttribute("data-modal-name",this.tplName),a.setAttribute("data-modal-guid",this.guid);var b=this.getSetting("css");if(b)for(var c in b)a.style[c]=b[c];!1!==this.trigger("beforeDisplay",!0)&&(a=this.initView(),this.getSetting("manualDisplayDom")||!1===a||this.__displayDom())},__createScrollableContainer:function(){var a=document.createElement("div");return a.className+="modal",[a]},__disableBodyScrolling:function(){var a=document.body;if($(document.documentElement).hasClass("pm-no-scroll-main"))return this;var b=this.__getScrollTop(),c=b.toString().indexOf("px")?"px":"",d=document.documentElement;return this.addClass(d,"pm-no-scroll-main"),"ontouchstart"in d&&$(".modal-open").addClass("modal-position"),a.style.top="-"+b+c,this},__restoreScrollAndBodyElement:function(){{var a=document.body;a.style.top.toString().substr(1).replace(/px/i,"")}return this.removeClass(document.documentElement,"pm-no-scroll-main"),this},__displayDom:function(){this.__initComponents();var a=this.modal,b=this.getSetting("modalIsScrollable");if(b){var c=this.__createScrollableContainer(),d=c[0];this.overlay=d,document.body.appendChild(d),d.appendChild(a),"register"==a.getAttribute("data-modal-name")||"reset-password-email"==a.getAttribute("data-modal-name")||"reset-password"==a.getAttribute("data-modal-name")||"change-password"==a.getAttribute("data-modal-name")||"conflictingaccount"==a.getAttribute("data-modal-name")||"sociallogin-missingparam"==a.getAttribute("data-modal-name")?($(d).addClass("fade modal-sign-in in"),$(document).find(".modal-quickview").length>0&&(d.style.zIndex=this.zIndex()),"register"!=a.getAttribute("data-modal-name")&&$(d).children(".modal__dialog").addClass("modal--611-wide--with-scaling hide-frame"),$(d).children(".modal__dialog").addClass("modal--611-wide--no-scaling")):"login"===a.getAttribute("data-modal-name")&&$(a).find("iframe").data("membershipflag")===!0?($(d).addClass("fade modal-sign-in in"),$(d).children(".modal__dialog").addClass("membership-modal-restructure")):(d.style.zIndex=this.zIndex(),a.style.position="fixed",a.style.textAlign="left",a.style.background="#fff",a.style.width="auto"),a.children[1]&&a.children[1].src?(a.style.height=$(a.children[1]).innerHeight()+"px",a.children[1].src.indexOf("bookseller-login-frame")>-1?(a.style.width="41rem",a.style.height="35.41rem"):a.children[1].src.indexOf("login-frame")>-1?(a.style.width="38.1875rem",a.style.maxWidth="38.1875rem"):a.children[1].src.indexOf("register-frame")>-1?(a.style.width="38.1875rem",a.style.maxWidth="38.1875rem"):a.children[1].src.indexOf("reset-password-frame")>-1?(a.style.width="38.1875rem",a.style.maxWidth="38.1875rem"):a.children[1].src.indexOf("reset-password-email-frame")>-1?(a.style.width="38.1875rem",a.style.maxWidth="38.1875rem"):a.children[1].src.indexOf("change-password-frame")>-1&&(a.style.width="38.1875rem",a.style.maxWidth="38.1875rem")):$(a.children[0]).hasClass("modal--783-wide")?(a.style.maxWidth="48.9375rem",a.style.width="48.9375rem"):$(a.children[0]).hasClass("modal--752-wide")?(a.style.maxWidth="47rem",a.style.width="47rem"):$(a.children[0]).hasClass("modal--458-wide")?(a.style.maxWidth="28.625rem",a.style.width="28.625rem"):$(a.children[0]).hasClass("modal--487-wide")?(a.style.maxWidth="37.47rem",a.style.width="37.47rem"):$(a.children[0]).hasClass("modal--611-wide")?(a.style.maxWidth="38.1875rem",a.style.width="38.1875rem"):$(a.children[0]).hasClass("modal--523-wide")?(a.style.maxWidth="32.6875rem",a.style.width="32.6875rem"):$(a.children[0]).hasClass("modal--535-wide")?(a.style.maxWidth="33.4375rem",a.style.width="33.4375rem"):$(a.children[0]).hasClass("modal--548-wide")?(a.style.maxWidth="34.25rem",a.style.width="34.25rem"):$(a.children[0]).hasClass("modal--554-wide")?(a.style.maxWidth="34.625rem",a.style.width="34.625rem"):$(a.children[0]).hasClass("modal--563-wide")?(a.style.maxWidth="43.32rem",a.style.width="43.32rem"):$(a.children[0]).hasClass("modal--800-wide")?(a.style.maxWidth="50rem",a.style.width="50rem"):$(a.children[0]).hasClass("modal--854-wide")?(a.style.maxWidth="53.375rem",a.style.width="53.375rem"):$(a.children[0]).hasClass("modal--895-wide")?(a.style.maxWidth="55.9375rem",a.style.width="55.9375rem"):$(a.children[0]).hasClass("modal--937-wide")?(a.style.maxWidth="58.55rem",a.style.width="58.55rem"):$(a.children[0]).hasClass("modal--960-wide")?(a.style.maxWidth="60rem",a.style.width="60rem"):$(a.children[0]).hasClass("modal--1071-wide")?(a.style.maxWidth="66.9375rem",a.style.width="66.9375rem",a.style.maxHeight="100vh"):$(a.children[0]).hasClass("modal--1247-wide")?(a.style.maxWidth="77.9375rem",a.style.width="77.9375rem"):$(a.children[0]).hasClass("modal--1260-wide")?(a.style.maxWidth="78.786rem",a.style.width="78.786rem"):$(a.children[0]).hasClass("modal--581-wide")?(a.style.maxWidth="36.3125rem",a.style.width="36.3125rem"):$(a.children[0]).hasClass("customer-lookup--modal")?(a.style.width="72.5rem",a.style.maxWidth="72.5rem",a.style.maxHeight="47.57rem",a.style.overflow="auto"):$(a.children[0]).hasClass("modal-two-step-verification")?(a.style.width="49.2409rem",a.style.maxWidth="49.2409rem"):(a.style.maxWidth="38.1875rem",a.style.width="38.1875rem"),d.style.display="inline-block",d.style.backgroundColor="rgba(0,0,0,.5)",("register"==a.getAttribute("data-modal-name")||"reset-password-email"==a.getAttribute("data-modal-name")||"reset-password"==a.getAttribute("data-modal-name")||"change-password"==a.getAttribute("data-modal-name")||"conflictingaccount"==a.getAttribute("data-modal-name")||"sociallogin-missingparam"==a.getAttribute("data-modal-name")||"login"===a.getAttribute("data-modal-name")&&$(a).find("iframe").data("membershipflag")===!0)&&(a.removeAttribute("style"),a.style.display="flex",a.children[0].style.alignSelf="center"),this.__disableBodyScrolling(),this.closeEvents.all.push(this.__restoreScrollAndBodyElement)}else document.body.appendChild(a),d=this.getSetting("css"),d&&d.position||(a.style.position="absolute"),a.style.zIndex=this.zIndex(),this.RefreshPosition(!0);var e=this.parent;if(e&&(this.getSetting("hideParent")&&e.hide(),this.closeEvents.all.push(function(){e.show()})),this.__initOverlay(),this.displayed=!0,this._initializing=!1,this.openModals[this.guid]=this,!b){var f=this;window.addEventListener("resize",function(){f.RefreshPosition()})}return this.trigger("display visible"),this},__initOverlay:function(){var a=this.overlay||this.getSetting("overlay"),b=this;if(a){this.__isDOM(a)||(a=this.initOverlay(),a.style.zIndex||(a.style.zIndex=this.zIndex()-Math.ceil(this.zIndexes.interval/10))),this.getSetting("overlayClose")&&a.addEventListener("click",function(a){var c=a.target||a.srcElement;if((c==this||!b.isChildOfModal(c))&&(a.stopPropagation(),(a=b.getSetting("overlayClose"))&&"none"!=a)){var c=b.flow(),d=b.openModals;switch(b.triggerClose("overlay"),a){case"this":case"self":break;case"all":for(var e in d){if(!d.hasOwnProperty(e))return;d[e].triggerClose("parent overlay")}break;default:for(;0<c.length;)c.pop().triggerClose("parent overlay")}}}),this.overlay=a;var c=this.global.overlayModal;this.getSetting("stackOverlay")||c===this||!c||c.isHidden()?(this.global.overlayModal=this,this.trigger("showOverlay")):c.on("hideOverlay",function(){b.isHidden()||this.openModals.hasOwnProperty(b.guid)&&b.__initOverlay()})}},__initComponents:function(){this.setContentItems(),this.__initBreadcrumbs(),this.parseContentItems(this.__getContentElements()),this.initOpeners(),this.initClosers()},initOpeners:function(a){var b=this.getSetting("initializers");if(b&&b.openers){var c=this,d=a?e.getModalForDom(a):this;for(a=(a||this.modal).querySelectorAll("[data-modal],[data-modal-class]"),b=0;b<a.length;b++)a[b].addEventListener("click",function(a){a.preventDefault();var b=this.openModal;if(b&&Modal.prototype.openModals.hasOwnProperty(b)){var e=Modal.prototype.openModals[b];e.isHidden()&&e.show()}else{var b={},f=this.getAttribute("data-modal-class");f||(f="Modal");var g=c.getContructorFromString(f);if(data=c.getObjectFromDom(this),data.targetEvent=a,data.target=this,a=this.getAttribute("data-modal"),(!a||""==a||-1<a.indexOf("%"))&&a){var h=a.replace(/\%/gi,"");if(h=this.getAttribute(h))b.tplUrlOverride=h,a=null;else if(!g.prototype.tplName)return void console.error("Invalid Modal Name: "+a)}try{e=new g(a,data,b,d)}catch(i){return console.error("Error initializing modal: "+f),console.error(i.stack),void console.log(this)}this.openModal=e.guid}},!0)}},getContructorFromString:function(a){if(a){var b=null;if(-1<a.indexOf("."))for(var b=window,c=a.split("."),d=0;d<c.length;d++){var e=c[d];if(!e||!b[e]){b=null;break}b=b[e]}else b=window[a];if(b&&b!==window)return b;consoleError("Invalid Modal Constructor Name: "+a)}else consoleError("Invalid Modal Constructor: empty")},getObjectFromDom:function(a){a=[].filter.call(a.attributes,function(a){return/^data-/i.test(a.name)});for(var b={},c=0;c<a.length;c++){var d=a[c];if(d.name&&""!=d.name){var e=d.name.replace(/^data-/i,"");b[e]=d.value}}return b},initClosers:function(){var a=this.getSetting("initializers");if(a&&a.closers)for(var b=this,a=this.modal.querySelectorAll("[data-close]"),c=0;c<a.length;c++)a[c].addEventListener("click",function(a){switch(a.preventDefault(),this.getAttribute("data-close")){case"flow":b.flow().goTo(0,"button").triggerClose("button");break;case"all":a=b.openModals;for(var c in a){if(!a.hasOwnProperty(c))return;a[c].triggerClose("button")}break;default:b.triggerClose("button")}})},__initBreadcrumbs:function(){var a=this.getSetting("initializers");if(a&&a.breadcrumbs){for(var a=this.modal.querySelectorAll('[data-role="breadcrumbs"]'),b=0;b<a.length;b++){var c=a[b],d=c.querySelector('[data-role="crumb"]'),e=this.flow();c.removeChild(d);for(var f=0;f<e.length;f++){var g=e.get(f),h=d.cloneNode(!0);h.setAttribute("data-crumb",f),this.parseContentItems(h,g.content),this.__initCrumbEvent(h),c.appendChild(h)}}for(a=this.__getContentCrumbs(),b=0;b<a.length;b++)this.__initCrumbEvent(a[b])}},__initCrumbEvent:function(a){if(a){var b=this;a.addEventListener("click",function(a){a.preventDefault(),(a=this.getAttribute("data-crumb"))&&b.flow().goTo(a)})}},show:function(){return this.openModals.hasOwnProperty(this.guid)&&this.__isDOM(this.modal)&&this.modal.parentNode?(this.getSetting("modalIsScrollable")?this.overlay.style.display="block":(this.modal.style.display="block",this.__initOverlay()),this.trigger("show visible"),this):this},hide:function(){return this.isHidden()?this:(this.getSetting("modalIsScrollable")?(this.overlay.style.display="none",this.trigger("hideOverlay")):(this.modal.style.display="none",this.__isDOM(this.overlay)&&this.overlay.parentNode&&(this.overlay.parentNode.removeChild(this.overlay),this.overlay=null,this.trigger("hideOverlay"))),this.trigger("hide"),this)},isHidden:function(){return!this.__isDOM(this.modal)||!this.modal.parentNode||!this.__isVisible(this.modal)},__isVisible:function(a,b,c,d,e,f,g){var h=a.parentNode;return h&&9===h.nodeType?!0:"0"===this.__getStyle(a,"opacity")||"none"===this.__getStyle(a,"display")||"hidden"===this.__getStyle(a,"visibility")?!1:(("undefined"==typeof b||"undefined"==typeof c||"undefined"==typeof d||"undefined"==typeof e||"undefined"==typeof f||"undefined"==typeof g)&&(b=a.offsetTop,e=a.offsetLeft,d=b+a.offsetHeight,c=e+a.offsetWidth,f=a.offsetWidth,g=a.offsetHeight),h?"hidden"!==this.__getStyle(h,"overflow")&&"scroll"!==this.__getStyle(h,"overflow")||a.offsetParent!==h||!(e+2>h.offsetWidth+h.scrollLeft||e+f-2<h.scrollLeft||b+2>h.offsetHeight+h.scrollTop||b+g-2<h.scrollTop)?(a.offsetParent===h&&(e+=h.offsetLeft,b+=h.offsetTop),this.__isVisible(h,b,c,d,e,f,g)):!1:!0)},__getStyle:function(a,b){return window.getComputedStyle?document.defaultView.getComputedStyle(a)[b]:a.currentStyle?a.currentStyle[b]:void 0},__stringToDom:function(a){var b=document.createElement("div");return b.innerHTML=a,a=this.__cleanNodeList(b.childNodes),new ExtNodeList(a)},__cleanNodeList:function(a){if(!(a instanceof NodeList))throw new TypeError("First parameter must be of type NodeList");for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof Text){var d=c.nodeValue;(""==d||d.match(/^\s+$/i))&&c.parentNode.removeChild(c)}else 0<c.childNodes.length&&this.__cleanNodeList(c.childNodes)}return a},__isDOM:function(a){return"object"!=typeof a||void 0==a||null==a?!1:this.__isNode(a)||this.__isElement(a)||a instanceof NodeList},__isNode:function(a){return"object"!=typeof a||void 0==a||null==a?!1:"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},__isElement:function(a){return"object"!=typeof a||void 0==a||null==a?!1:"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},__getViewportSize:function(){return"undefined"!=typeof window.innerWidth?{width:window.innerWidth,height:window.innerHeight}:{width:document.getElementsByTagName("body")[0].clientWidth,height:document.getElementsByTagName("body")[0].clientHeight}},__getElementOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},Close:function(){this.triggerClose("method")},triggerClose:function(a){a||(a="method"),this.__isDOM(this.modal)&&this.modal.parentNode&&this.modal.parentNode.removeChild(this.modal);var b=this.flow().indexOf(this);if(b>-1&&this.flow().splice(b,1),this.flow(null),delete this.openModals[this.guid],this.displayed=!1,a=this.closeEvents.all.concat(this.closeEvents[a]||[]),0<a.length)for(b=0;b<a.length;b++){var c=a[b];a.indexOf(c),c instanceof Function&&c.apply(this)}this.__isDOM(this.overlay)&&this.overlay.parentNode&&(this.overlay.parentNode.removeChild(this.overlay),this.overlay=null),this.global.overlayModal==this&&(this.global.overlayModal=null)},trigger:function(a,b){var c=/\s+/gi;if(c.test(a)){for(var d=a.split(c),c=0;c<d.length;c++){var e=this.trigger(d[c]);if(b&&!1===e)return!1}return!0}if((d=this.events[a])&&0<d.length)for(c=0;c<d.length;c++)if(e=d[c],d.indexOf(e)==c&&e instanceof Function&&(e=e.apply(this,[a]),b&&!1===e))return!1;return!0},on:function(a,b){var c=/\s+/gi;if(c.test(a)){for(var c=a.split(c),d=0;d<c.length;d++)this.on(c[d],b);return this}return(c=this.events[a])||(c=this.events[a]=[]),0>c.indexOf(b)&&c.push(b),this},RefreshPosition:function(a){if(!this.getSetting("modalIsScrollable")&&(a||!this.isHidden())){a=this.getSetting("posPriority");for(var b=0;b<a.length;b++){var c="__"+a[b]+"Pos";this[c]&&"function"==typeof this[c]&&this[c].call(this)}this.trigger("move")}},__centerPos:function(){var a,b=this.modal,c=b.offsetWidth,d=b.offsetHeight,e=(a=this.__getViewportSize(),a.scrollTop=window.scrollY,a);this.getSetting("position").center&&(b.style.top=(e.height/2-d/2).toString()+"px",b.style.left=(e.width/2-c/2).toString()+"px")},__viewportPos:function(){var a=this.modal;if(this.getSetting("position").viewport){var b,c=this.getSetting("posBuffer"),c=c.override||c.viewport||0,d=(b=this.__getViewportSize(),b.scrollTop=window.scrollY,b);b=this.__getElementOffset(a);var e=a.offsetWidth,f=d.width-(b.left+e),g=d.scrollTop+d.height-(b.top+a.offsetHeight),h=b.top-d.scrollTop;0>b.left?(a.style.top=b.top+"px",a.style.left=c+"px"):0>f&&(a.style.top=b.top+"px",a.style.left=d.width-e-c+"px"),this.getSetting("scrollTo")&&(0>h?window.scrollTo(0,Math.abs(h)):0>g&&window.scrollTo(0,Math.abs(g)+(d.scrollTop+c))),0>=d.scrollTop&&0>h&&(a.style.top=c+"px")}},__containerPos:function(){var a=this.modal,b=this.getSetting("position").container;if(b){var c,d=this.getSetting("posBuffer"),e=d.override||d.container||0,d=this.__getElementOffset(a),f=a.offsetWidth,b=(c=this.__getElementOffset(b),c.height=b.offsetHeight,c.width=b.offsetWidth,c);c=b.top+e;var g=b.left+e,e=(b.right||b.left+b.width)-e,h=d.top-b.top,i=d.left-b.left,b=b.left+b.width-(d.left+f);Extend.mergeObjects({},d),0>h&&(a.style.left=c+"px",a.style.bottom="auto"),0>i&&(a.style.left=g+"px",a.style.right="auto"),0>b&&(a.style.left=e-f+"px",a.style.right="auto")}},__anchorPos:function(){var a=this.getSetting("position").anchor;if(a){var b=a[0],a=a[1];if("target"==b&&(b=this.data.target),this.__isDOM(b)){var a=a?a.trim():"top center",c=a.split(/\s+/),a=c[0],c=c[1],d={};d.modal=this.modal,d.target=b,d.bufferSettings=this.getSetting("posBuffer"),d.buffer=d.bufferSettings.override||d.bufferSettings.anchor||0,d.offset=this.__getElementOffset(d.modal),d.height=d.modal.offsetHeight,d.width=d.modal.offsetWidth,d.anchorDim=Extend.mergeObjects({},this.__getElementOffset(d.target),{width:d.target.offsetWidth,height:d.target.offsetHeight}),d.far={top:d.anchorDim.top+d.anchorDim.height-d.offset.top,bottom:d.anchorDim.top-(d.offset.top+d.height),left:d.anchorDim.left+d.anchorDim.width-d.offset.left,right:d.anchorDim.left-(d.offset.left+d.width),vertCenter:d.anchorDim.top+d.anchorDim.height/2-(d.offset.top+d.height/2),horzCenter:d.anchorDim.left+d.anchorDim.width/2-(d.offset.left+d.width/2)},~a.indexOf("bot")?this.__anchorBottom(d):~a.indexOf("cen")?this.__anchorVerticleCenter(d):this.__anchorTop(d),~c.indexOf("left")?this.__anchorLeft(d):~c.indexOf("right")?this.__anchorRight(d):this.__anchorHorizontalCenter(d)}}},__anchorTop:function(a){with(a)modal.style.top=offset.top+far.top+"px",modal.style.left=offset.left+"px"},__anchorHorizontalCenter:function(a){with(a)a=this.__getElementOffset(modal),modal.style.top=a.top+"px",modal.style.left=a.left+far.horzCenter+"px"},__anchorBottom:function(a){with(a)modal.style.top=offset.top+far.top-(target.offsetHeight+modal.offsetHeight+buffer.bottom)+"px",modal.style.left=offset.left+"px"},__anchorLeft:function(a){with(a)modal.style.left=offset.left+far.left+target.offsetWidth/2-buffer.left+"px"},__anchorRight:function(){},__anchorVerticleCenter:function(){},getModalsBySelector:function(a){var b=[],c=this.flow();switch(a){case"flow":for(var d=0;d<c.length;d++)b.push(c[d]);break;case"all":c=this.openModals;for(d in c)c.hasOwnProperty(d)&&c[d]&&b.push(c[d]);break;default:c.get(a)||b.push(this)}return b},getSetting:function(a){return this.options&&this.options.hasOwnProperty(a)?this.options[a]:this.defaultOptions[a]},newXmlHttpRequest:function(){try{return new XMLHttpRequest}catch(a){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){return!1}}}},__trimString:function(a){return String.prototype.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")},__generateId:function(){return this.__generateRandomString()+this.__generateRandomString()+"-"+this.__generateRandomString()+"-"+this.__generateRandomString()+"-"+this.__generateRandomString()+"-"+this.__generateRandomString()+this.__generateRandomString()+this.__generateRandomString()},__generateRandomString:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},__appendParameterToUrl:function(a,b,c){var d=a.indexOf("?"),e=a.substr(-1,1);return a+=(d>-1&&"&"!=e&&"?"!=e?"&":"?")+b+"="+c},__initTpl:function(){return this.tpl()?(this.__initModalDom(),!0):this.__getTpl()},__getTpl:function(){if("undefined"==typeof BN_IS_IE9||!BN_IS_IE9){var a=this.newXmlHttpRequest();if(!a)return!1;var b=this.getSetting("async"),c=this.getSetting("tplParams"),d=this.__getTplUri();if(c&&"object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&(d=this.__appendParameterToUrl(d,e,c[e]));if(d=this.__appendParameterToUrl(d,"_",Math.random()),b){var f=this;a.onreadystatechange=function(){f.__tplResponseCallback.call(f,a)}}return a.open("GET",d,b),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.withCredentials=!0,a.send(),b?!1:this.__tplResponseCallback(a)}var g=this,c=this.getSetting("tplParams"),h=this.__getTplUri();if(c&&"object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&(h=this.__appendParameterToUrl(h,e,c[e]));h+=h.indexOf("?")>=0?"&jsonp=true":"?jsonp=true";var i="jsonpCallback_"+Math.floor(9e4*Math.random())+1e4;h+="&jsonpCallback="+i,$.ajax({url:h,type:"get",cache:!1,dataType:"jsonp",jsonpCallback:i}).done(function(a){var b={};b.responseText=a.jsonpkey,g.__tplResponseCallback(b)})},__tplResponseCallback:function(a){if("undefined"!=typeof BN_IS_IE9&&BN_IS_IE9)this._tpl=this.__stringToDom(a.responseText),this.__initModalDom();else if(!this.displayed&&!this._initializing&&4==a.readyState){if(200!=a.status)throw Error("Error retrieving modal template. Response: "+a.status);this._tpl=this.__stringToDom(a.responseText),this.__initModalDom()}},__getTplUri:function(){return this.getSetting("tplUrlOverride")||this.getSetting("tplDir")+this.tplName+this.getSetting("tplExt")},__getContentElements:function(){for(var a=this.__getUsingProcess(this.modal,this.contentExclude),b=this.__getUsingProcess(this.modal,this.contentInclude),c=0;c<a.length;c++){var d=b.indexOf(a[c]);d>-1&&b.splice(d,1)}return b},__getContentCrumbs:function(){for(var a=this.__getUsingProcess(this.modal,this.contentExclude),b=this.__getUsingProcess(this.modal,this.breadcrumbsInclude),c=0;c<b.length;c++)-1<a.indexOf(b[c])&&b.splice(c,1);return b},__getUsingProcess:function(a,b){for(var c=0;c<b.length;c++)if(b[c]){var d=b[c];if(a[d.method]&&(a=a[d.method].apply(a,d.args)),!a||1>a.length)return new ExtNodeList}return new ExtNodeList(a)},setContentItems:function(a,b){a||(a=this.modal),b||(b=this.content);for(var c=this.getSetting("useContentSetters"),d=this.getSetting("replaceContentSetters"),e=a.querySelectorAll("[data-set]"),f=0;f<e.length;f++){var g=e[f],h=this.__determineValueAttr(g),i=g.getAttribute("data-set"),j=g.getAttribute("data-value")||g[h],k=b[i];c&&void 0!==k?d&&(g[h]=k):b[i]=j}return!0},getContent:function(a){var b=this.content;return b.hasOwnProperty(a)?b[a]:(b=this.defaultOptions.content,b.hasOwnProperty(a)?b[a]:void 0)},parseContentItems:function(a,b,c,d){if(b&&"object"==typeof b||(b=this.content),c||(c=[]),!b||"object"!=typeof b)return!1;for(var e in b)if(b.hasOwnProperty(e)&&!(-1<c.indexOf(e))){var f=a.querySelectorAll('[data-content="'+e+'"],data[value="'+e+'"]');if(f&&!(1>f.length))for(var g=0;g<f.length;g++){var h=f[g],i=this.__determineValueAttr(h),j=h.getAttribute("data-retain");i&&("DATA"==h.tagName?j&&"true"==j?h[i]=b[e]:h.parentNode.replaceChild(document.createTextNode(b[e]),h):(h[i]=b[e],("true"!=j||d)&&h.removeAttribute("data-content")))}}return a},__determineValueAttr:function(a){if(!a)return null;switch(a.nodeName){case"INPUT":return"value";case"IMG":case"SCRIPT":return"src";default:return"innerHTML"}},__getDOMParents:function(a){for(var b=[];a;)b.unshift(a),a=a.parentNode;return new ExtNodeList(b)},isChildOfModal:function(a){for(var b=!1;a;){if($(a).hasClass("modal__dialog")){b=a;
break}a=a.parentNode}return b},__getScrollableElement:function(){return doc=document.documentElement,doc.clientHeight?doc:document.body},__getScrollTop:function(){return"undefined"!=typeof pageYOffset?pageYOffset:this.__getScrollableElement().scrollTop},addClass:function(a,b){return a.className+=" "+b,this},removeClass:function(a,b){if(!a||!a.className||!b)return!1;var c=a.className.split(/\s+/),d=c.indexOf(b);return d>-1&&c.splice(d,1),a.className=c.join(" "),this},hasClass:function(a,b){return a&&a.className&&b?-1<(" "+a.className.toString()+" ").indexOf(" "+b+" "):!1}},e.getModalForDom=function(a){return(a=this.isChildOfModal(a))?(a=a.getAttribute("data-modal-guid"),this.openModals.hasOwnProperty(a)?this.openModals[a]:!1):!1},e.changeDefaultSetting=function(a,b){if("object"!=typeof a)this.prototype.defaultOptions[a]=b;else for(var c in a)a.hasOwnProperty(c)&&(this.prototype.defaultOptions[c]=a[c]);return this.prototype.defaultOptions},e.isChildOfModal=e.prototype.isChildOfModal,e.initOpeners=e.prototype.initOpeners,e.initClosers=e.prototype.initClosers,e.openModals=e.prototype.openModals,e.hasClass=e.prototype.hasClass,e.addClass=e.prototype.addClass,e.removeClass=e.prototype.removeClass,e}();;/*! BARNES-BUILDER 2024-02-21 */
!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.pseudos.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr.pseudos,{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1,a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.on(b,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).on(b,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;a.length>d;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e});var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[g]||$.effects[g])?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),g&&h||i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var d=this._getNumberOfMonths(a),e=d[1],f=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",f*e+"em"),a.dpDiv[(1!=d[0]||1!=d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var g=a.yearshtml;setTimeout(function(){g===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),g=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.pseudos.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&($.effects.effect[c]||$.effects[c])?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){var b=$(a);this._getInst(b[0]),this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?""+b:b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=a.length>s+1&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):undefined}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;a.length>s;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(b.length>r){var u=b.substr(r);if(!/^\s+/.test(u))throw"Extra/unparsed characters found in date: "+u}if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var v=this._getDaysInMonth(i,j-1);if(v>=k)break;j++,k-=v}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=a.length>m+1&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;c>d.length;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;a.length>m;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=a.length>e+1&&a.charAt(e+1)==b;return c&&e++,c},e=0;a.length>e;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(h){this.log(h),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==""+f?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])
})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames");this._get(a,"dayNamesShort");var B=this._get(a,"dayNamesMin"),C=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),E=this._get(a,"beforeShowDay"),F=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek")||this.iso8601Week;for(var H=this._getDefaultDate(a),I="",J=0;g[0]>J;J++){var K="";this.maxRows=4;for(var L=0;g[1]>L;L++){var M=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),N=" ui-corner-all",O="";if(j){if(O+='<div class="ui-datepicker-group',g[1]>1)switch(L){case 0:O+=" ui-datepicker-group-first",N=" ui-corner-"+(c?"right":"left");break;case g[1]-1:O+=" ui-datepicker-group-last",N=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",N=""}O+='">'}O+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+N+'">'+(/all|left/.test(N)&&0==J?c?t:r:"")+(/all|right/.test(N)&&0==J?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,J>0||L>0,C,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var P=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",Q=0;7>Q;Q++){var R=(Q+y)%7;P+="<th"+((Q+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[R]+'">'+B[R]+"</span></th>"}O+=P+"</tr></thead><tbody>";var S=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,S));var T=(this._getFirstDayOfMonth(o,n)-y+7)%7,U=Math.ceil((T+S)/7),V=j&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var W=this._daylightSavingAdjust(new Date(o,n,1-T)),X=0;V>X;X++){O+="<tr>";for(var Y=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(W)+"</td>":"",Q=0;7>Q;Q++){var Z=E?E.apply(a.input?a.input[0]:null,[W]):[!0,""],_=W.getMonth()!=n,ab=_&&!G||!Z[0]||l&&l>W||m&&W>m;Y+='<td class="'+((Q+y+6)%7>=5?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(W.getTime()==M.getTime()&&n==a.selectedMonth&&a._keyEvent||H.getTime()==W.getTime()&&H.getTime()==M.getTime()?" "+this._dayOverClass:"")+(ab?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!F?"":" "+Z[1]+(W.getTime()==k.getTime()?" "+this._currentClass:"")+(W.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(_&&!F||!Z[2]?"":' title="'+Z[2]+'"')+(ab?"":' data-handler="selectDay" data-event="click" data-month="'+W.getMonth()+'" data-year="'+W.getFullYear()+'"')+">"+(_&&!F?"&#xa0;":ab?'<span class="ui-state-default">'+W.getDate()+"</span>":'<a class="ui-state-default'+(W.getTime()==b.getTime()?" ui-state-highlight":"")+(W.getTime()==k.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+'" href="#">'+W.getDate()+"</a>")+"</td>",W.setDate(W.getDate()+1),W=this._daylightSavingAdjust(W)}O+=Y+"</tr>"}n++,n>11&&(n=0,o++),O+="</tbody></table>"+(j?"</div>"+(g[0]>0&&L==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),K+=O}I+=K}return I+=x+($.ui.ie6&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||e.getMonth()>=p)&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
"use strict";jQuery.base64=function(){function a(a,b){var c=f.indexOf(a.charAt(b));if(-1===c)throw"Cannot decode base64";return c}function b(b){var c,d,f=0,g=b.length,h=[];if(b=String(b),0===g)return b;if(g%4!==0)throw"Cannot decode base64";for(b.charAt(g-1)===e&&(f=1,b.charAt(g-2)===e&&(f=2),g-=4),c=0;g>c;c+=4)d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6|a(b,c+3),h.push(String.fromCharCode(d>>16,d>>8&255,255&d));switch(f){case 1:d=a(b,c)<<18|a(b,c+1)<<12|a(b,c+2)<<6,h.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=a(b,c)<<18|a(b,c+1)<<12,h.push(String.fromCharCode(d>>16))}return h.join("")}function c(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function d(a){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";a=String(a);var b,d,g=[],h=a.length-a.length%3;if(0===a.length)return a;for(b=0;h>b;b+=3)d=c(a,b)<<16|c(a,b+1)<<8|c(a,b+2),g.push(f.charAt(d>>18)),g.push(f.charAt(d>>12&63)),g.push(f.charAt(d>>6&63)),g.push(f.charAt(63&d));switch(a.length-h){case 1:d=c(a,b)<<16,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+e+e);break;case 2:d=c(a,b)<<16|c(a,b+1)<<8,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+f.charAt(d>>6&63)+e)}return g.join("")}var e="=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="1.0";return{decode:b,encode:d,VERSION:g}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+x.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+y.join(d+" ")+d).split(" "),h(f,b,c))}function j(){n.input=function(c){for(var d=0,e=c.length;e>d;d++)B[c[d]]=!!(c[d]in t);return B.list&&(B.list=!(!b.createElement("datalist")||!a.HTMLDataListElement)),B}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),n.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)t.setAttribute("type",e=a[g]),d="text"!==t.type,d&&(t.value=u,t.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&t.style.WebkitAppearance!==c?(p.appendChild(t),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(t,null).WebkitAppearance&&0!==t.offsetHeight,p.removeChild(t)):/^(search|tel)$/.test(e)||(d=/^(url|email)$/.test(e)?t.checkValidity&&t.checkValidity()===!1:t.value!=u)),A[a[g]]=!!d;return A}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var k,l,m="2.6.2",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=b.createElement("input"),u=":)",v=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),w="Webkit Moz O ms",x=w.split(" "),y=w.toLowerCase().split(" "),z={},A={},B={},C=[],D=C.slice,E={}.hasOwnProperty;l=e(E,"undefined")||e(E.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return E.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=D.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(D.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(D.call(arguments)))};return d}),z.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},z.geolocation=function(){return"geolocation"in navigator},z.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},z.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},z.localstorage=function(){try{return localStorage.setItem(q,q),localStorage.removeItem(q),!0}catch(a){return!1}},z.sessionstorage=function(){try{return sessionStorage.setItem(q,q),sessionStorage.removeItem(q),!0}catch(a){return!1}};for(var F in z)l(z,F)&&(k=F.toLowerCase(),n[k]=z[F](),C.push((n[k]?"":"no-")+k));return n.input||j(),n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),r=t=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=r.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=q[a[o]];return b||(b={},p++,a[o]=p,q[p]=b),b}function f(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=e(c));var f;return f=d.cache[a]?d.cache[a].cloneNode():n.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),f.canHaveChildren&&!m.test(a)?d.frag.appendChild(f):f}function g(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||e(a);for(var f=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)f.createElement(h[g]);return f}function h(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?f(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function i(a){a||(a=b);var d=e(a);return!r.shivCSS||j||d.hasCSS||(d.hasCSS=!!c(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),k||h(a,d),a}var j,k,l=a.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,n=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,o="_html5shiv",p=0,q={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",j="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){j=!0,k=!0}}();var r={elements:l.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:l.shivCSS!==!1,supportsUnknownElements:k,shivMethods:l.shivMethods!==!1,type:"default",shivDocument:i,createElement:f,createDocumentFragment:g};a.html5=r,i(b)}(this,b),n._version=m,n._prefixes=v,n._domPrefixes=y,n._cssomPrefixes=x,n.testProp=function(a){return g([a])},n.testAllProps=i,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" js "+C.join(" "):""),n}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest({texttrackapi:"function"==typeof document.createElement("video").addTextTrack,track:"kind"in document.createElement("track")});;/*! BARNES-BUILDER 2024-02-21 */
function setCustomCookie(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+60*c*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function getCustomCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null}function initializeTextAreaCounter(a,b){var c=parseInt($.trim(b.text()));("undefined"==typeof c||null==c||1>c)&&(c=250),a.on("focus blur keyup input propertychange",function(){var a=$(this),d=a.val(),e=d.length;e>c&&a.val(d.substr(0,c));var f=c-e;0>f&&(f=0),b.text(f)})}function deleteCustomCookie(a){setCustomCookie(a,"",-1)}function initTopNavMenus(){{var a=$(".nav-item"),b=$("#screen");$(".nav-menu")}a.hover(function(){$(".nav-menu").attr("aria-hidden","true"),$(this).find(".nav-menu").attr("aria-hidden","false"),$("a[role=menuitem]").attr("aria-haspopup","false"),$(this).find("a[role=menu]").attr("aria-haspopup","true")},function(){$(this).find(".nav-menu").attr("aria-hidden","true"),$(this).find("a[role=menu]").attr("aria-haspopup","false")}),a.on("touchstart",function(b){var c=$("header").hasClass("rhf-header-sticky");if(!c){b.preventDefault();var d,e,f=$(this),g=$(b.target),h=g.closest(".nav-menu",f),i=h.length>0||g.hasClass("nav-menu"),j=!1;if(i){if(d=g.is("a")?g:g.closest("a",f),d&&d.length>0&&(d.trigger("click"),e=d.attr("href")))return void(window.location.href=e)}else j=!f.hasClass("hover-effect"),a.removeClass("hover-effect"),j&&f.addClass("hover-effect")}}),b.on("touchstart",function(){a.removeClass("hover-effect")}),$(".top-nav-close").on("touchstart",function(b){b.preventDefault(),b.stopPropagation(),a.removeClass("hover-effect"),$(this).closest(".nav-menu").hide()}),$("#myAccountMenu").on("touchstart",function(){$(this).hasClass("hover-effect")?$(this).removeClass("hover-effect"):$(this).addClass("hover-effect")}),$("ol[role=menubar] a[role=menu]").focus(function(){$("ol[role=menubar] a[role=menu]").attr("aria-haspopup","false"),$(this).attr("aria-haspopup","true"),$("ol[role=menubar] a[role=menu]").removeClass("focused"),$(this).addClass("focused"),$(".nav-menu").attr("aria-hidden","true"),$(this).siblings(".nav-menu").attr("aria-hidden","false")}),$("main *").focus(function(){$("ol[role=menubar] a[role=menu]").attr("aria-haspopup","false"),$("ol[role=menubar] a[role=menu]").removeClass("focused"),$(".nav-menu").attr("aria-hidden","true")}),$('[id^="subMenu"]').keyup(function(b){27===b.keyCode&&(a.find(".nav-menu").attr("aria-hidden","true"),a.find("a[role=menu]").attr("aria-haspopup","false"),$("ol[role=menubar] a[role=menu]").removeClass("focused"),$("ol[role=menubar] a[role=menu]").blur())})}function isUvAccountLinked(a,b){var c="/xhr/is-uv-account-linked.jsp";$.ajax({url:c,cache:!1,type:"get",dataType:"json",xhrFields:{withCredentials:!0}}).done(function(c){c.isLinked?a():b()}).fail(function(){b()})}function updateNookForwardUrl(){$(".nook-forward-url-class").val($("#nookForwardUrl").val())}function redirectToNook(){location.href=$("#nookForwardUrl").val()}function openLoginModalNew(a,b){var c={type:b.type||"explicit",preventDefault:b.preventDefault||"always",successCallback:b.successCallback||!1,modalData:b.modalData||{},onclose:b.onclose||!1,modalObjOverride:b.modalObjOverride||BN.Modal.Account.LoginNew,keepParentModalOpen:b.keepParentModalOpen||!1,runSuccessCallbackOnce:b.runSuccessCallbackOnce||!1,callbackRunCount:0};$(document).on("click",a,function(b){if($("body").hasClass("nook-login-page")&&"signInLink"==$(this).attr("id"))return new BN.Modal.Account.Login(null,{target:this},{useCache:!1,tplParams:{isNookLogin:"true",isEgift:$("#isEgiftLogin").val()}}),!1;var d=webContextRoot+"/includes/check-login.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(d=BN_EXTERNAL_DOMAIN_PREFIXED+d),$.ajax({type:"get",url:d,dataType:"script",cache:!1,async:!1});var e=$("form.ip-form .btn-instant-purchase");e.length&&e.hasClass("disabled")&&e.removeClass("disabled");var f=$("#btnInstPurTextbook");f.length&&f.hasClass("disabled")&&f.removeClass("disabled");var g=$("#btnInstPureMag");g.length&&g.hasClass("disabled")&&g.removeClass("disabled");var h=this;if("always"==c.preventDefault&&b.preventDefault(),"explicit"==c.type&&!BN.isExplicitlyLoggedIn||"soft"==c.type&&!BN.isSoftLoggedIn){"conditionally"==c.preventDefault&&b.preventDefault();var i=getCurrentModal($(h));"undefined"==typeof i&&(i=null),c.modalData.target=c.modalData.target||this,c.modalData.redirect=c.modalData.redirect||!1,c.modalData.onclose=c.onclose||this,$(a).hasClass("quick-view")&&(c.keepParentModalOpen=!0);var j=c.keepParentModalOpen?new c.modalObjOverride(null,c.modalData,$(h).data("params")):new c.modalObjOverride(null,c.modalData,$(h).data("params"),i);$(a).hasClass("quick-view")&&$(a).closest(".modal").hide(),$(window).off("amplifiFrameFormSuccess").on("amplifiFrameFormSuccess",function(d,e){BN.isExplicitlyLoggedIn=!0,BN.isSoftLoggedIn=!0;var f=e||"";if(j&&j.pureModal&&j.flow().goTo(0).Close(),$(b.target).hasClass("gig-comment-vote-with-value")){var g=$("#writeReviewBtn").data("work-id")||"",i=$(b.target).hasClass("gig-comment-vote-pos")?"pos":$(b.target).hasClass("gig-comment-vote-neg")?"neg":"",k=$(b.target).closest(".gig-comment").data("comment-id")||"",l={commentID:k,vote:i,streamID:g,categoryID:"Products"};""!=g&&""!=k&&""!=i&&$.cookie("BN_PDP_comment_vote",JSON.stringify(l),{expires:365,path:"/"})}$(a).hasClass("quick-view")&&(c.keepParentModalOpen=!0,$(".sign-in-instant-purchase").is(":visible")&&($(".btn-instant-purchase").removeClass("strict-hidden"),$(".sign-in-instant-purchase").addClass("strict-hidden")),$(a).closest(".modal").show()),c.successCallback===!1?$(h).click():(c.callbackRunCount++,c.successCallback.apply(h,[b,f]))})}else c.successCallback!==!1&&(!c.runSuccessCallbackOnce||c.runSuccessCallbackOnce&&0==c.callbackRunCount)&&(c.callbackRunCount++,c.successCallback.apply(h,[b,null]))})}function openLoginModal(a,b){var c={type:b.type||"explicit",preventDefault:b.preventDefault||"always",successCallback:b.successCallback||!1,modalData:b.modalData||{},modalObjOverride:b.modalObjOverride||BN.Modal.Account.Login,keepParentModalOpen:b.keepParentModalOpen||!1,runSuccessCallbackOnce:b.runSuccessCallbackOnce||!1,callbackRunCount:0};$(document).on("click",a,function(a){if($("body").hasClass("nook-login-page")&&"signInLink"==$(this).attr("id"))return new BN.Modal.Account.Login(null,{target:this},{useCache:!1,tplParams:{isNookLogin:"true",isEgift:$("#isEgiftLogin").val()}}),!1;var b=webContextRoot+"/includes/check-login.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(b=BN_EXTERNAL_DOMAIN_PREFIXED+b),$.ajax({type:"get",url:b,dataType:"script",cache:!1,async:!1});var d=this;if("always"==c.preventDefault&&a.preventDefault(),"explicit"==c.type&&!BN.isExplicitlyLoggedIn||"soft"==c.type&&!BN.isSoftLoggedIn){"conditionally"==c.preventDefault&&a.preventDefault();var e=getCurrentModal($(d));"undefined"==typeof e&&(e=null),c.modalData.target=c.modalData.target||this,c.modalData.redirect=c.modalData.redirect||!1;var f=c.keepParentModalOpen?new c.modalObjOverride(null,c.modalData,$(d).data("params")):new c.modalObjOverride(null,c.modalData,$(d).data("params"),e);$(window).on("amplifiFrameFormSuccess",function(b,e){BN.isExplicitlyLoggedIn=!0,BN.isSoftLoggedIn=!0;var g=e||"";f&&f.pureModal&&f.flow().goTo(0).Close(),c.successCallback===!1?$(d).click():(c.callbackRunCount++,c.successCallback.apply(d,[a,g]))})}else c.successCallback!==!1&&(!c.runSuccessCallbackOnce||c.runSuccessCallbackOnce&&0==c.callbackRunCount)&&(c.callbackRunCount++,c.successCallback.apply(d,[a,null]))})}function attachCartAction(a){var b="",c=$("input[name=spinnerPath]").val();c&&c.indexOf("null")<0&&c.indexOf("undefined")<0&&(b=c);var d=$(".pdp-form"),e=$(".btn-addtocart").first();$spinner=$('<div class="spinner spinner__large"><img src="'+b+'" tabindex="0" role="alert" aria-live="polite" aria-label="Loading..." aria-busy="true"></div>').addClass("mini-cart-spinner"),displayedPrices=[],$displayedPrice=$("#productDetail #prodInfoContainer #prodPromo .price"),findAddToCartButton=function(a){var b=$(a).find(".btn-addtocart");return b.length||(b=e),b},$displayedPrice.each(function(){displayedPrices.push($(this).html())}),BN.uXHR.Form.apply(d),d.on("submit",function(a){var b=findAddToCartButton(this);b.blur(),b.css("opacity","0.5"),$heroSection=b.closest("#hero-section"),$spinnerMid=$spinner.removeClass("spinner__large").addClass("spinner__medium");var c=$(a.target).prop("id");if($heroSection.hasClass("sticky-commerce"))b.closest(".pdp-commerce-zone").removeClass("spinner-container"),$spinnerZone=b.closest("div.purchase-button-container").addClass("spinner-container"),$spinnerMid.appendTo($spinnerZone);else if(void 0!==c&&"frmProtectNookPlan"===c)$spinnerLarge=$spinner.removeClass("spinner__medium").addClass("spinner__large"),$spinnerZone=$('[data-modal-name="m-extended-warranty-details"]'),$spinnerLarge.appendTo($spinnerZone);else if(1===$($(".plp-add-to-cart-btn-container")[0]).length){var d=$(".pdp-form").find(".btn-addtocart");d.blur(),d.css("opacity","0.5"),d.addClass("disabled"),$spinnerZone=$(".resultsListContainer").hasClass("topXList")?b.closest("div.product-info-listView").addClass("spinner-container"):b.closest("div.product-info-view").addClass("spinner-container"),$spinnerLarge=$spinner.removeClass("spinner__medium").addClass("spinner__large"),$spinnerLarge.appendTo($spinnerZone)}else b.closest("div.purchase-button-container").removeClass("spinner-container"),$spinnerZone=b.closest("div.pdp-commerce-zone").addClass("spinner-container"),$spinnerLarge=$spinner.removeClass("spinner__medium").addClass("spinner__large"),$spinnerLarge.appendTo($spinnerZone)}).on("amplifiFormBeforeSerialize",function(){d.find(".is-add-to-cart-ajax").remove(),d.append('<input type="hidden" name="isAjax" value="true" class="is-add-to-cart-ajax" />')}).on("amplifiFormSuccess",function(b,c){var e=findAddToCartButton(this);if(e.css("opacity","1"),1===$($(".plp-add-to-cart-btn-container")[0]).length){var f=$(".pdp-form").find(".btn-addtocart");f.css("opacity","1"),f.removeClass("disabled")}$(".spinner").remove(),RhfLoadHeaderElement($(".rhf-navbar-nav-cart > li > div.dropdown-menu"),webContextRoot+"/includes/minicart-shopping-bag.jsp",!0,!0);var g=e.get(0),h=d;if($(".protection-plan-section").length>0){var i=$(".protection-plan-section [type='checkbox']"),j=c.protectionPlanEnabled,k=c.fromProtectionPlanModel;"true"===k?$("#btnAddPlan").parent().next("a").length>0&&(i.prop("checked",!1),$("#nookProtectionRequired").val("false"),window.location.href=$("#btnAddPlan").parent().next("a").attr("href")):"false"===j?(b.stopImmediatePropagation(),i.is(":checked")||nookProtectionPlanModalCall(g,c)):(b.stopImmediatePropagation(),a?openMiniCartCall():addToCartModalCall(a,g,c,h)),i.prop("checked",!1),$("#nookProtectionRequired").val("false")}else a?openMiniCartCall():addToCartModalCall(a,g,c,h);"undefined"!=typeof s_setP&&updateAnalyticsCart()}).on("amplifiFormError",function(a,b){$spinner.remove(),$spinnerMid.remove();var c=findAddToCartButton(this);if(c.css("opacity","1"),1===$($(".plp-add-to-cart-btn-container")[0]).length){var d=$(".pdp-form").find(".btn-addtocart");d.css("opacity","1"),d.removeClass("disabled")}if($(".protection-plan-section").length>0){var e=$(".protection-plan-section [type='checkbox']");e.prop("checked",!1)}b.response.success||""==b.response.items[0]||$("#wlNotAddedError").length>0&&($("#wlNotAddedError").removeClass("d-none"),$("#wlNotAddedError em").html(b.response.items[0]),$("html, body").animate({scrollTop:$("#wlNotAddedError").offset().top},500))})}function showAllFormats(a){a.find("#prodSummary").parents("#productDetail").addClass("formats-n-editions"),a.find("#prodSummary").children().not("#qvFormatsTabContent").hide(),a.find("#prodInfoContainer, #prodImage, .alt-format").hide(),a.find(".tabgroup h3:first-child").next("section").show(),a.find("#qvFormatsTabContent").show(),a.find(".quick-view-nav li.qvLink").hide(),a.find(".quick-view-nav h1").html("All Formats &amp; Editions"),a.find(".quick-view-nav li").hasClass("qv-pdp-details")?a.find(".quick-view-nav li.qv-pdp-details").show():a.find(".quick-view-nav").append('<li class="qv-pdp-details"><a href="#" id="backToDetails">Product Details</a></li>')}function showProductDetails(a){a.find("#prodSummary").parents("#productDetail").removeClass("formats-n-editions"),a.find("#prodInfoContainer, #prodImage, .alt-format").show(),a.find(".quick-view-nav li.qvLink").show(),a.find(".quick-view-nav h1").html("Product Details"),$(".pure-modal").find(".quick-view-nav .qv-pdp-details").hide()}function gigyaCleanStyles(){$("style").filter(function(){return $(this).html().indexOf(".gig-")>-1}).remove()}function cycleModalByName(a){var b;for(var c in Modal.openModals)Modal.openModals[c].tplName==a&&(b=Modal.openModals[c]);return b.__cycle&&b.__cycle(),b}function getQueryParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function onLoginHandler(a){consoleError(a.context.str+" "+a.eventName+" to "+a.provider+"!\n"+a.provider+" user ID: "+a.user.identities[a.provider].providerUID),verifyTheSignature(a.UID,a.timestamp,a.signature);var b=!0;if(b){var c=Math.round((new Date).getTime()/1e3),d="bn-corp",e=createSignature(d,c),f={siteUID:d,timestamp:c,cid:"",signature:e};gigya.socialize.notifyRegistration(f),consoleError(f)}document.getElementById("prodSummary").style.color="green",document.getElementById("prodSummary").innerHTML="Status: You are now signed in"}function logoutFromGS(){}function redirectFromFrame(a){if("undefined"!=typeof a&&""!=a){var b=$("<textarea/>").html(a).text();"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(b=BN_EXTERNAL_DOMAIN_PREFIXED+b),location.href=b}else if("undefined"!=typeof BN.loginRedirectTo&&""!=BN.loginRedirectTo){var b=BN.loginRedirectTo;"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(b=BN_EXTERNAL_DOMAIN_PREFIXED+b),location.href=b}else location.reload()}function frameFormSuccess(a){var b=a.uxhr;$(window).triggerHandler("amplifiFrameFormSuccess",[b,a])}function closeModalFromFrame(a){var b=getModalObj(a);b.flow().goTo("first").Close()}function closeModalInstanceFromFrame(a){var b=getModalObj(a);b.Close(),-1!==window.location.href.indexOf("/guest-checkout")&&"true"==$("#disableGuestCheckout").val()&&(window.location.href="/checkout")}function getModalObj(a){var b=$('div[data-modal-name="'+a+'"]');return b.length||(b=$("div.modal__dialog").get(0)),"undefined"==typeof b?null:Modal.getModalForDom(b.get(0))}function getCurrentModal(a){var b=null,c=a.closest(".modal__dialog");return c.length&&(b=getModalObj(c.data("modal-name"))),b}function onlyNumbers(){var a=$(this),b=a.val();a.val(b.replace(/\D/g,""))}function initializeTextAreaCounter(a,b){var c=parseInt($.trim(b.text())),d=b.parent();if(("undefined"==typeof c||null==c||1>c)&&(c=250),a.length>0&&!a.hasClass("giftWrapMessage"))if(a.closest("body.pdpPage").length>0)a.attr("aria-labelledby","cardMessageLabel charactersRemaining"),d.attr("id","charactersRemaining");else{var e=a.attr("id").split("giftWrapMessage_")[1],f="charactersRemaining_"+e;d.attr("id",f);var g=a.siblings("label").attr("id"),h=g+" "+f;a.attr("aria-labelledby",h)}a.on("focus blur keyup input propertychange",function(){var a=$(this),e=a.val(),f=e.length;f>c&&a.val(e.substr(0,c));var g=c-f;switch(0>g&&(g=0),b.text(g),!0){case 70>=g&&g>60:d.attr({"aria-live":"polite","aria-atomic":"true"});break;case 60>=g&&g>20:d.attr({"aria-live":"polite","aria-atomic":"false"});break;case 20>=g&&g>=0:d.attr({"aria-live":"polite","aria-atomic":"true"})}})}function initEGiftYear(){$(".egift-day, .egift-month").on("change",updateEgiftYear)}function updateEgiftYear(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear(),e=d+1,f=$(this).closest("form").find(".egift-month"),g=$(this).closest("form").find(".egift-day"),h=$(this).closest("form").find(".egift-year"),i=(parseInt($.trim(h.text())),$(this).closest("form").find(".egift-year-input")),j=parseInt(f.val());j++;var k=parseInt(g.val());""!=j&&""!=k&&(c>j||j==c&&b>k?(h.text(e),i.val(e)):(h.text(d),i.val(d)))}function initInstantPurchaseSignIn(){$(".sign-in-instant-purchase").on("click",function(a){a.preventDefault(),$(this).parent().find(".btn-instant-purchase").click()})}function initToolTip(){$(".expand-cvv-container").hide(),$(".expand-cvv").on("click",function(){$(".expand-cvv-container").toggle(),$(".expand-cvv").toggleClass("expandicon-change")})}function autofillStateFix(){$(document).on("change","#state",function(){var a=$(this).val();$(this).selectBox("value",a)}),$("#state").on("focus",function(a){1!=a.isTrigger&&$(".selectBox.address-state-selecter.selectBox-dropdown").focus()})}function is_pie_key_download_error(){return"undefined"==typeof PIE||"undefined"==typeof PIE.K||"undefined"==typeof PIE.L||"undefined"==typeof PIE.E||"undefined"==typeof PIE.key_id||"undefined"==typeof PIE.phase}function is_pie_encryption_download_error(){return"function"!=typeof ValidatePANChecksum||"function"!=typeof ProtectPANandCVV}function doEncryption(){if(!is_pie_encryption_download_error()&&!is_pie_key_download_error()){var a=document.getElementById("ccNumber").value,b=ProtectPANandCVV(a,"",!1);return null!=b?(document.getElementById("cryptCard").value=b[0],document.getElementById("cryptCvv").value=b[1],b.length>2&&(document.getElementById("integrityCheckVal").value=b[2])):(document.getElementById("cryptCard").value="",document.getElementById("cryptCvv").value=""),document.getElementById("keyId").value=PIE.key_id,document.getElementById("phase").value=PIE.phase,!1}}function getCarousel(a,b,c){$.ajax({url:a,data:{count:c.count,fromWL:c.fromwl,title:c.title,skuId:c.skuid},cache:!1,type:"get"}).done(function(a){var c=b;if(c.html(a),$(document).trigger(c.selector+"Loaded"),$("#clearRecentForm").length>0){var d=$("#clearRecentForm");BN.uXHR.Form.apply(d),d.on("amplifiFormSuccess",function(){location.reload()})}$(document).ready(function(){$("#recentlyViewed .product-shelf").on("init",function(){$("#recentlyViewed .product-shelf").addClass("init")}),$("#recentlyViewed .product-shelf").slick({dots:!1,infinite:!0,slidesToShow:4,slidesToScroll:1,adaptiveHeight:!0})})})}function getRecommendationGrid(a,b,c){$.ajax({url:a,data:{count:c.count,fromWL:c.fromwl,title:c.title,skuId:c.skuid},cache:!1,type:"get"}).done(function(a){var c=b;c.html(a),$(document).trigger(c.selector+"Loaded"),$(document).ready(function(){$("#recommendations .product-shelf").on("init",function(){$("#recommendations .product-shelf").addClass("init")})})})}function getRecommendationBooks_ajax(a){$.ajax({datatype:"json",cache:!1,data:{Ntt:a},url:"/modals/search/endecaRecommenderResponse.jsp"}).done(function(b){var c=JSON.parse(b);if(void 0===b||""===b||0===c.length){$(".search-results-container").addClass("hidden"),$(".no-results-modal").removeClass("hidden"),$("#dialog-title").text($("#noResultHeading").val());var d=$(".no-results-modal").hasClass("hidden")?".search-term":".search-term-error";$(".no-results-modal").find(d).html(a),$(".no-results-modal").find(".fav-finder-sad-face").removeClass("invisible")}else{$("#dialog-title").text($("#recommenderModalHeading").val()),$(".recommended-search-products").each(function(a){if($(this).find(".loader-placeholder").addClass("hidden"),a<c.length){$(this).removeClass("hidden"),$(".recommended-search-products:visible:first").addClass("left-border-none"),$(".recommended-search-products:visible:last").removeClass("right-border-grey");var b=$(this).find(".product-shelf-title a");$(this).find(".product-shelf-image img").attr("src",c[a].imageUrl),$(this).find(".product-shelf-image img").on("load",function(){$(this).addClass("show-image")}),$(this).find(".product-shelf-image img").attr("alt",c[a].productTitle),$(this).find(".product-shelf-title a").html(c[a].productTitle),$(this).find(".product-shelf-author a").html(c[a].srchContributor),$(this).find(".product-shelf-image").data("skuId",c[a].productEAN),$(this).find(".product-shelf-image").data("pdpUrl",c[a].productUrl),$(this).on("click",".product-shelf-image>a, .product-shelf-title>a",function(){var b=c[a].productUrl.split("/")[2];set_cookie($("#recommenderPageType").val()+"_"+b+"_imagetext")}),$(".no-results-modal").addClass("hidden"),$(".search-results-container").removeClass("hidden"),$(this).find(".recommended-search-item").removeClass("strict-hidden"),makeMultiLineEllipsis(b,2)}else $(this).addClass("hidden"),$(".recommended-search-products:visible:first").removeClass("left-border-none"),$(".recommended-search-products:visible:last").addClass("right-border-grey")});var d=$(".no-results-modal").hasClass("hidden")?".search-term":".search-term-error";$(".search-results-container").find(d).html(a)}$(".modal-recommend").find(":tabbable:last").on("keydown",function(a){9!=a.keyCode||a.shiftKey||(a.preventDefault(),$(".modal-recommend").find(":tabbable:first").focus().addClass("focus"))})})}function getRecommendationOfSelectedBook_ajax(a){$.ajax({cache:!1,data:{sendEan:a.skuId,recommenderPageType:$("#recommenderPageType").val()},url:webContextRoot+"/includes/homePageRecommendation.jsp"}).done(function(b){if(void 0===b||""===b)$(".initial-recommendation").addClass("hidden"),$(".recommended-books-suggestion").removeClass("hidden"),$("#recommendedResponse").addClass("hidden"),$(".no-selected-result").removeClass("hidden"),$("#recommendedResponse").html("");else{$(".no-selected-result").addClass("hidden"),$(".recommended-books-suggestion").removeClass("hidden"),$("#recommendedResponse").html(b),$("#recommendationOnSelect").on("init",function(){$(this).addClass("init")}),$("#recommendationOnSelect").slick({slidesToShow:4,slidesToScroll:4,adaptiveHeight:!1,infinite:!1,accessibility:!1});var c=0,d=$("#recommendationOnSelect").find(".product-shelf-image").length;$("#recommendationOnSelect").find("img").on("load",function(){c++,c===d&&($("#recommendedResponse .product-shelf-image-cont").matchHeight(),c=0)}),$(".initial-recommendation").addClass("hidden")}var e=$(".favorite-book-search .searchbox-container");e.addClass("edit-result mb-s"),e.find(".fav-search-logo").addClass("hidden"),$("#resetSearchBtn").removeClass("strict-hidden"),$("#searchRecmdBtn").addClass("strict-hidden"),$(".recommended-books-suggestion").find(".selected-book img").attr("src",a.imgPath),$(".recommended-books-suggestion").find(".selected-book img").attr("alt",a.imgAlt),$(".recommended-books-suggestion").find(".selected-book a").attr("href",a.pdpURL),$(".recommended-books-suggestion").find(".selected-book a").on("click",function(){set_cookie($("#recommenderPageType").val()+"_"+a.pdpURL.split("/")[2]+"_imagetext")}),$(".recommended-books-suggestion").find(".selected-book a").focus(),$(".richTextDefault").addClass("hidden"),$(".richTextResult").removeClass("hidden")})}function openTooltip(a,b){var c=$(a.target),d=c.parent().siblings().filter(b);d.toggle(),c.toggleClass("expandicon-change")}function showTooltip(a){var b=$("[data-tooltip-trigger]");a&&(b=$("#quickView").find("[data-tooltip-trigger]")),b.each(function(){var a=$(this),b=a.data("tooltip-trigger");a.on("click",function(a){openTooltip(a,b)})})}function makeBnLoggingCall(a,b,c){if("undefined"!=typeof bnLoggingEnabled&&bnLoggingEnabled||"undefined"==typeof bnLoggingEnabled){var d="get";"undefined"!=typeof b&&("undefined"!=typeof b.requestType&&""!=b.requestType&&(d=b.requestType),"undefined"!=typeof b.preventDefault&&b.preventDefault&&"undefined"!=typeof c&&c.preventDefault()),$.ajax({url:"/xhr/logging.jsp",type:d,cache:!1,dataType:"json",data:a,timeout:1e3}).always(function(){"undefined"!=typeof b&&"function"==typeof b.callback&&b.callback()})}else"undefined"!=typeof b&&"function"==typeof b.callback&&b.callback()}function modalDisableUsTerritories(a){var b=a.find("#country").val();("AS"==b||"FM"==b||"MH"==b||"PW"==b||"PR"==b||"GU"==b||"MP"==b||"VI"==b)&&($("input.state").val(b).attr("readonly","readonly").addClass("disabled"),$("input#state").val(b).attr("readonly","readonly").addClass("disabled"))}function brierleyCall(){var a="/xhr/service/brierley.jsp";$.ajax({url:a,cache:!1}).done(function(){}).fail(function(){})}function redirectbrierleyLogic(a,b,c){var d="/account/manage/memberships/";if("default"==b)return d+"membership-center.jsp";if("false"==a)return d+"confirm-member-email.jsp";if(c){var e="";switch(b){case"upgradePaid":e=d+"profile.jsp?emailLink=true";break;case"updatePaid":e=d+"profile.jsp?emailLink=true";break;case"claimFree":case"claimPaid":e=d+"welcome-offer-new.jsp";break;case"upsellFree":case"upsellPaid":case"rejoinPaid":e=d+"membership-center.jsp";break;case"renewalPaid":e=d+"automatic-renewal-settings.jsp";break;case"default":default:e=d+"membership-center.jsp"}return e}return d+"profile.jsp?emailLink=true"}function redirectGloseRedeemUrl(a,b,c){var d="https://read.barnesandnoble.com";if(c)var e=window.open("");else var e=window;var f=getCustomCookie("atgusid");$.ajax({url:b,cache:!1,type:"post",contentType:"application/json",dataType:"json",data:JSON.stringify({eid:a,data_source:"ATG",user:f})}).done(function(a){"undefined"!=typeof a&&a.hasOwnProperty("redeem_url")?(d=a.redeem_url,e.location.href=d):e.location.href=d}).fail(function(){e.location.href=d})}function createAccountSocialLogin(a,b,c){var d={type:"explicit",preventDefault:"always",successCallback:b.successCallback||!1,modalData:b.modalData||{},defaultOptions:b.defaultOptions||{},onclose:!1,modalObjOverride:"undefined"!=typeof BN.Modal.Account.RegisterNew?BN.Modal.Account.RegisterNew:BN.Modal.Account.Register,keepParentModalOpen:!1,runSuccessCallbackOnce:!1,callbackRunCount:0},f=webContextRoot+"/includes/check-login.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(f=BN_EXTERNAL_DOMAIN_PREFIXED+f),$.ajax({type:"get",url:f,dataType:"script",cache:!1,async:!1});var g=a;if("always"==d.preventDefault&&c.preventDefault(),"explicit"!=d.type||BN.isExplicitlyLoggedIn)d.successCallback!==!1&&(!d.runSuccessCallbackOnce||d.runSuccessCallbackOnce&&0==d.callbackRunCount)&&(d.callbackRunCount++,d.successCallback.apply(g,[e,null]));else{var h=getCurrentModal($(g));"undefined"==typeof h&&(h=null),d.modalData.target=d.modalData.target||a,d.modalData.redirect=d.modalData.redirect||!1,d.modalData.onclose=d.onclose||a;var i=new d.modalObjOverride(null,d.modalData,d.defaultOptions,h);$(window).on("amplifiFrameFormSuccess",function(a,b){BN.isExplicitlyLoggedIn=!0,BN.isSoftLoggedIn=!0;var e=b||"";i&&i.pureModal&&i.flow().goTo(0).Close(),d.successCallback===!1?$(g).click():(d.callbackRunCount++,d.successCallback.apply(g,[c,e]))})}}function isInViewPort(a,b){var c=!1,d=a.offset().left+b.scrollLeft(),e=a.offset().top+b.scrollTop(),f=b.scrollTop(),g=b.scrollLeft(),h=b.offset().top,i=b.offset().left,j=h+b.innerHeight(),k=i+b.width();return b.scrollTop(-f),b.scrollLeft(-g),c=k>d&&j>e?!0:!1}function openMiniCartCall(){var a=($("#shoppingBag #miniCart"),Modal.prototype.openModals),b=$("body");if(a)for(var c in a){var d=a[c];d&&"quickview"===d.tplName&&"undefined"==typeof s_setP&&d.Close()}b.scrollTop()>0&&b.animate({scrollTop:0},"fast",function(){})}function addToCartModalCall(a,b,c,d){new BN.Modal.Browse.PDP.AddToBag(null,{target:b,onClose:function(){var b=($("#miniCart"),Modal.prototype.openModals),c=$("html, body");if(a&&b)for(var e in b){var f=b[e];f&&"quickview"===f.tplName&&f.closeEvents.all.push(function(){$("body").hasClass("shopping-bag")&&(window.location.href=window.location.href)}),f&&"allFormats-ra"===f.tplName&&f.Close(),f&&"m-add-to-bag-ra"===f.tplName&&f.Close()}c.scrollTop()>0&&0===$(".plp-container").length&&c.animate({scrollTop:0},"fast");var g=$("#productDetail #prodInfoContainer #prodPromo .price");"true"==$(this).attr("data-reset-after-add")&&(d.trigger("reset"),g.each(function(a){$(this).html()!=displayedPrices[a]&&$(this).html(displayedPrices[a])})),"ropis"!=$("#addToCartSuccessModalOpenFrom").val()||$("#openReserveModal").hasClass("no-click")||($("#addToCartSuccessModalOpenFrom").val("pdp"),$("#openReserveModal")[0].click())}},{tplParams:{ean:c.ean,eanQty:c.eanQty,eanPrice:c.eanPrice,isGWPGiftEANAdded:c.GWPItemAdded,protectionPlan:c.protectionPlan,protectionPlanEnabled:c.protectionPlanEnabled,GiftCardPrice:c.GiftCardPrice,isGiftCard:c.isGiftCard}})}function nookProtectionPlanModalCall(a,b){new BN.Modal.Browse.PDP.ExtendedWarrantyDetails(null,{target:a},{tplParams:{ean:b.ean,protectionPlan:b.protectionPlan,commerceItemId:b.commerceItemId,protectionPlanEnabled:b.protectionPlanEnabled}})}function plpCoupon_ajax(){$.ajax({type:"POST",url:webContextRoot+"/cartridges/ResultsList/bnPlpCouponDisplay.jsp",datatype:"json"}).done(function(a){if(a){var b=a.split("::");$(".plp-coupon").html('<span class="coupon-code-text">'+b[0]+'</span><span class="redCouponCode">'+b[1]+"</span>").removeClass("hidden"),heightCalculation()}})}function plp_add_to_cart_ajax(a,b,c){for(var d=[],e=a;b>=e;e++){var f=$($(".sku-data")[e]).val();""==!f&&d.push(f)}$.ajax({type:"POST",url:webContextRoot+"/plp-purchase-btn-cont.jsp",datatype:"html",data:{skuDataArray:d.toString()},beforeSend:function(){"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&performance.mark("PLP_add_to_cart_button_functionality_loading_starts")}}).done(function(a){if(a){var b,c;$(a).each(function(){if("DIV"===$(this)[0].nodeName&&(b=$($(this)[0]).attr("id"),c=$($(this)[0]).html(),""!=c)){$("#"+b).html(c).removeClass("hidden");var a=$("#"+b).find("form[id^=addToBagForm]");BN.uXHR.Form.apply(a)}})}}).always(function(){if(c&&"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure)try{performance.mark("PLP_add_to_cart_button_functionality_loading_ends"),performance.measure("PLPAddToCartButtonDur","PLP_add_to_cart_button_functionality_loading_starts","PLP_add_to_cart_button_functionality_loading_ends")}catch(a){}})}function detectHandHeld(){var a=navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i),b=null==a?"desktop":a;return b}function checkDeviceType(){var a=navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i),b=null==a?"Desktop":"Mobile";return b}function initializeImageLazyLoad(a){if($(".Resolve.lp-lazy").length>0){if("undefined"==typeof com||"undefined"!=typeof com&&"undefined"==typeof com.liquidpixels)return;{new com.liquidpixels.Resolve({server:"prodimage.images-bn.com",uri:"lf",imageFit:"containerWidth",lazyLoad:a?!1:!0,output:function(){return{format:["webp","jp2"],pixelRatio:Math.ceil(window.devicePixelRatio)}},advancedOptions:{cacheThreshold:a?275:300,maxPixelRatio:1},handleEvent:function(a,b){"ready"==a&&($(".responsive-carousel .product-shelf-image-cont").matchHeight({remove:!0}).matchHeight(),$(".department-product-grid .feature-link-item .fc-image-container").find(".fc-image").matchHeight({remove:!0}).matchHeight()),"complete"==a&&($(".responsive-carousel .product-shelf-image-cont").matchHeight({remove:!0}).matchHeight(),$(".department-product-grid .feature-link-item .fc-image-container").find(".fc-image").matchHeight({remove:!0}).matchHeight()),"processed"==a&&(("pdpMainImage"===b.element.getAttribute("id")||b.element.classList.contains("secondary-image"))&&($(b.element).addClass("pdpImgLoadCompleted"),$("#prodImage .product-shelf-curl").show(),$("#prodImage .bn-ProductBadge").show()),$(".responsive-carousel").length>0&&$(".responsive-carousel .product-shelf-image-cont").matchHeight({remove:!0}).matchHeight(),$(".department-product-grid .feature-link-item").length>0&&$(".department-product-grid .feature-link-item .fc-image-container").find(".fc-image").matchHeight({remove:!0}).matchHeight())}})}}}function intiateRecaptchaVthree(a){$(a).length>0&&($(a).submit(function(b){return 0==$(a).find('input[name="g-recaptcha-response"]').length?(initRecaptchaV3(a,b,{},!1),!1):void 0}),$(a).find('input[type="submit"]').on("click",function(b){0==$(a).find('input[name="g-recaptcha-response"]').length&&initRecaptchaV3(a,b,{},!0)
}),$(a).on("amplifiFormError",function(b,c){if($(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove(),"#memberOrder"==a){$("#altPaymentErr").empty().hide();var d=$(a).find("#memberSubmitOrder"),e=$(a).attr("id"),f=$(a);"2FAREQUIRED"==c.response.items[0].toUpperCase()&&"true"!==c.specialCharInShipAddress?(new BN.Modal.Account.TwoStepVerification(null,{target:this},{useCache:!1,tplParams:{formBtn:d,formName:f,formId:e,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}}),$("#memberSubmitOrder").removeClass("disabled reg-button-disabled"),$("#finalOrderSubmit").removeClass("disabled reg-button-disabled")):($("#altPaymentErr").empty(),$("#altPaymentErr").attr({role:"alert","aria-atomic":"true",tabindex:"0"}),$("#altPaymentErr").append($('<em class="emphasis emphasis--alert"></em>').html(c.response.items[0])).show().focus(),$("#memberSubmitOrder").removeClass("disabled reg-button-disabled"),$("#finalOrderSubmit").removeClass("disabled reg-button-disabled"))}}).on("amplifiFormSuccess",function(){$(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove()}))}function initRecaptchaV3(a,b,c,d){if(void 0==$(a).attr("data-qas")&&b.preventDefault(),"undefined"!=typeof captchaV3ApiKey){var e="",f=window.location.pathname.split("/")[1];switch(f){case"account":e="MyAccount";break;case"checkout":e="Checkout";break;case"b":e="gift-cards"==window.location.pathname.split("/")[2]?"GiftCard":"";break;case"w":e="PdpPage";break;default:e="homepage"}"undefined"!=typeof grecaptcha?grecaptcha.ready(function(){grecaptcha.execute(captchaV3ApiKey,{action:e}).then(function(b){$(a).prepend('<input type="hidden" name="g-recaptcha-response" value="'+b+'">'),$(a).prepend('<input type="hidden" name="action" value="'+e+'">'),void 0==$(a).attr("data-qas")?d||"#checkBalanceForm"==a||"#checkBalanceGCLanding"==a||"#checkBalanceGCLandingV3"==a||"#memberOrder"==a||"#submitOrder"==a||"#checkBalance"==a||"#manageCreditForm"==a?$(a).find('input[type="submit"]').click():$(a).submit():($(a).on("amplifiFormError",function(){$(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove(),$(a).removeClass("verifiedQASForCaptchaV3")}).on("amplifiFormSuccess",function(){$(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove(),$(a).removeClass("verifiedQASForCaptchaV3")}),$(a).ajaxSubmit(c))}).catch(function(){formSubmitCaptchaV3(a,c,d)})}):formSubmitCaptchaV3(a,c,d)}}function formSubmitCaptchaV3(a,b,c){$(a).prepend('<input type="hidden" name="g-recaptcha-response" value="">'),void 0==$(a).attr("data-qas")?c||"#checkBalanceForm"==a||"#checkBalanceGCLanding"==a||"#memberOrder"==a||"#checkBalance"==a||"#manageCreditForm"==a?$(a).find('input[type="submit"]').click():$(a).submit():($(a).on("amplifiFormError",function(){$(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove(),$(a).removeClass("verifiedQASForCaptchaV3")}).on("amplifiFormSuccess",function(){$(a).find('input[name="g-recaptcha-response"]').remove(),$(a).find('input[name="action"]').remove(),$(a).removeClass("verifiedQASForCaptchaV3")}),$(a).ajaxSubmit(b))}function resolveInputFieldStyle(a,b){b?$(a).parents(".text-input").addClass("filled"):$(a).parents(".text-input").removeClass("filled")}function delayGuestCheckout(){var a=100*Math.random();window.location.href.indexOf("/guest-checkout.jsp")>-1&&setTimeout(function(){location.reload()},a)}function order_summary_reload(){showSpinner("#ajaxload_order_summary_table"),$.ajax({url:"/checkout/includes/order-summary.jsp",cache:!1,type:"get",data:{parentPage:"checkout/shipping.jsp"},xhrFields:{withCredentials:!0}}).done(function(a){$("#ajaxload_order_summary_table").html(a)}),hideSpinner("#ajaxload_order_summary_table"),guest_review_guest_reload()}function shipping_option_guest_reload(){showSpinner("#ajaxload-shipping-option"),$.ajax({url:"/checkout/delivery-options.jsp",cache:!1,type:"get",data:{checkoutreview:!1},xhrFields:{withCredentials:!0}}).done(function(a){$("#ajaxload-shipping-option").html(a)}),hideSpinner("#ajaxload-shipping-option")}function guest_review_guest_reload(){$.ajax({url:"/checkout/guest-review.jsp",cache:!1,type:"get",data:{checkoutreview:!0},xhrFields:{withCredentials:!0}}).done(function(a){$("#ajaxload-review-order").html(a),$("#reviewOrderSection .all-shipping-info-header").removeClass("d-none").addClass("d-block")})}function guest_payment_reload(){$.ajax({url:"/checkout/payment.jsp",cache:!1,type:"get",xhrFields:{withCredentials:!0}}).done(function(a){$("#ajaxload-payment-GU").html(a),$("#displaySavedPayment").addClass("d-block"),$("#editCheckoutPayment").addClass("d-flex")})}function setCookieCheckout(){var a=$(window).width(),b="";a>1024?b="edesktop":1024>=a&&a>901?b="desktop":900>=a&&a>481?b="tablet":480>=a&&(b="rmobile");var c=new Date;c.setTime(c.getTime()+864e5);var d=c.getUTCDate();$.cookie("viewType",b,{path:"/",expires:d}),$.cookie("windowWidthR",a,{path:"/",expires:d})}function setCookieCreateAttentive(a){if("undefined"!=typeof s_setP){if(a){var b=new Date;b.setTime(b.getTime()+60*a*1e3);var c=b}else var c="";var d=digitalData.user[0].profile[0].profileInfo.email,e=digitalData.user[0].profile[0].profileInfo.customerKey,f="email:"+d+",CustomerKey:"+e;$.cookie("__attentive_client_user_id",f,{path:"/",expires:c})}}function deleteCookieCreateAttentive(){setCookieCreateAttentive(-1)}function htmlDecode(a){var b={"&lt;":"<","&gt;":">","&sol;":"/","&quot;":'"',"&apos;":"'","&amp;":"&","&laquo;":"«","&raquo;":"»","&nbsp;":" ","&copy;":"©","&reg;":"®","&deg;":"°"};for(var c in b)a=a.replace(new RegExp(c,"g"),b[c]);return a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})}function showSpinner(a){$(a).addClass("disabled"),$(a).find(".spinner").remove(),$(a).prepend($('<div class="spinner spinner__large spinner-center"><img src="/static/redesign/srcs/images/spinner.svg" aria-label="Laoding..."></div>'))}function hideSpinner(a){$(a).find(".spinner").remove(),$(a).removeClass("disabled")}function premiumRewardsEligible_ajax(a,b){$.ajax({url:SITE_ROOT+"/cartridges/ProductDetailContent/ProductDetailTypes/includes/membership-pdp-msg.jsp?skuId="+a+"&pageType="+b,cache:!1}).done(function(a){if(a.length>0)if("pdp"==b){if($("#quick-view-productDetail").length>0&&($(".member-premium").removeClass("d-none"),$(".member-premium .premium-member-eligibility-msg").html(a),$(".member-premium .premium-member-eligibility-msg")&&!$(".member-premium .premium-member-eligibility-msg").text().trim())){var c=$(".member-premium .icon-member-card");c&&c.length>0&&c.addClass("d-none")}$("#commerce-zone .member-premium.hidden-in-sticky").removeClass("d-none"),$(".member-premium.hidden-in-sticky .premium-member-eligibility-msg").html(a)}else if($("#commerce-zone .stamp-msg-rewards").removeClass("d-none").addClass("d-flex"),$(".stamp-msg-rewards .member-stamp-shipping-message-text").html(a),$(".stamp-msg-rewards .member-stamp-shipping-message-text")&&!$(".stamp-msg-rewards .member-stamp-shipping-message-text").text().trim()){var c=$(".stamp-msg-rewards .icon-member-stamp");c&&c.length>0&&c.addClass("d-none")}})}function phoneNumberValidation(a){var b=/^\d{10}$/;return a.match(b)?!0:!1}function isValidString(a,b){var c=new RegExp("^"+b+"$");return c.test(a)?!0:!1}function closeAllModals(){var a=Modal.prototype.openModals;for(var b in a){var c=a[b];c&&c.Close&&c.Close()}}function handleSmartCharacters(a){var b=a.value,c=b.replace(/[\u2018\u2019]/g,"'");a.value=c}function checkValidMemberName(a){var b=/^[a-zA-Z0-9 ,.'-]*$/;return b.test(a)?!0:!1}function isValidDaySelected(a,b){return"02"==a&&["29","30","31"].includes(b)?!1:["04","06","09","11"].includes(a)&&"31"==b?!1:!0}function taxCalculation(a,b){var c=a.find(".billing-state").val(),d=a.find(".billing-postalCode").val(),e=a.find(".billing-country").val(),f=$(".Payment-form-"+b+"-renew-id").val(),g="?state="+c+"&postalCode="+d+"&country="+e+"&membershipEAN="+f,h="premium"==b?"/modals/instant-purchase-tax-calculator.jsp":"/account/audiobook/audiobook-tax-calculator.jsp";$.ajax({type:"get",url:SITE_ROOT+h+g,dataType:"script",cache:!1,async:!1,success:function(a){if(a.length>0){var b=$.parseJSON(a);$("#instSubtotal").text("$"+b.subTotal),$("#instTax").text("$"+b.totalTax),$("#instOrdertotal").text("$"+b.orderTotal)}}})}function audiobookBenifitClick(){"true"==$("#benefitBoxSubscriptionMatter").attr("aria-expanded")?($("#benefitBoxSubscriptionMatter").addClass("d-none").removeClass("d-block"),$("#benefitBoxSubscriptionMatter").attr("aria-expanded","false"),$(".show-items").addClass("icon-add").removeClass("icon-remove")):($("#benefitBoxSubscriptionMatter").removeClass("d-none").addClass("d-block"),$("#benefitBoxSubscriptionMatter").attr("aria-expanded","true"),$(".show-items").addClass("icon-remove").removeClass("icon-add"))}"undefined"==typeof jQuery.fn.selectText&&(jQuery.fn.selectText=function(){this.find("input").each(function(){0!=$(this).prev().length&&$(this).prev().hasClass("p_copy")||$('<p class="p_copy" style="position: absolute; z-index: -1;"></p>').insertBefore($(this)),$(this).prev().html($(this).val())});var a=document,b=this[0];if(a.body.createTextRange){var c=document.body.createTextRange();c.moveToElementText(b),c.select()}else if(window.getSelection){var d=window.getSelection(),c=document.createRange();c.selectNodeContents(b),d.removeAllRanges(),d.addRange(c)}}),$("body").hasClass("nook-login-page"),$.fn.changedForm=function(){var a=!1;return $(this).find(":input").each(function(){$(this).data("formValues")!=$(this).val()&&(a=!0)}),a},$(document).trigger("javascriptLoaded:js:functions");var itemsPerRequest=$("#countAjaxPlp").val(),availabilityCode=new Object;if(1===$($(".plp-add-to-cart-btn-container")[0]).length)for(var ajaxCount=Math.ceil(Number(Number($("#totalItemsShown").val())-Number($("#startItemsShown").val())+1)/itemsPerRequest),i=0;ajaxCount>i;i++){var isLastCall=i==ajaxCount-1?!0:!1;plp_add_to_cart_ajax(i*itemsPerRequest,i*itemsPerRequest+(itemsPerRequest-1),isLastCall)};/*! BARNES-BUILDER 2024-02-21 */
function initCarouFredSel(a){var b=$(a.selector),c=$(b).length,d=c>0?"carousel"==$(b).first().attr("data-widget-type"):!1,e=1;!d&&c>0&&$(b).each(function(){var b=this,c=$(this).attr("id"),d=$(this).children("li:not(.add-plus-product)").length,f=$(this).attr("data-visible-items")||a.numDisplay;a.scroll.items=parseInt(f),$(this).attr("data-widget-type","carousel"),a.incrementIds&&($(this).attr("id",c+"-"+e),e++),d>a.numDisplay&&($(this).after(a.paginationButtons),a.breadcrumbContainer&&a.pagination&&$(this).after(a.breadcrumbContainer)),$(this).parent().off("click").on("click",".prev-item, .featured-prev-item",function(){$(b).trigger("prev")}),$(this).parent().on("click",".next-item, .featured-next-item",function(){$(b).trigger("next")}),$(this).carouFredSel({align:a.alignItems,responsive:a.responsive,circular:a.circular,infinite:a.infinite,height:a.carouselHeight,items:{visible:f,width:a.itemWidth,height:a.itemHeight},prev:a.prev,next:a.next,pagination:a.pagination,auto:a.auto,scroll:a.scroll,direction:a.direction})})}function makeMultiLineEllipsis(a,b,c){c=void 0===c?!1:!0;var d=c?a.html().trim():a.text().trim(),e=d.split(" ");a.html("<span class='span-with-normal-white-space'></span>");for(var f=a.find("span.span-with-normal-white-space"),g=0,h=0;h<e.length;h++){var i=c?f.html():f.text();if(c?f.html(i+" "+e[h]):f.text(i+" "+e[h]),0===h){var j=c?f.html():f.text();f.text("W"),g=f.height()*(b-1),c?f.html(j):f.text(j)}if(f.height()>g){c?f.html(i):f.text(i);var k=e.splice(h);a.append("<span class='span-with-no-wrap-white-space'>"+k.join(" ")+"</span>");break}}0===f.text().length&&f.remove()}function placeFocusToHomePageCarousel(){$("section.bopis-banner").length>0?($("section.bopis-banner").find(":visible:tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),$(".homepage-hero").length>0&&($(".icon_hero").attr("aria-hidden","false").removeAttr("role"),$(".icon_hero svg").focus().addClass("focus")))}),$("#globalHeader").find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),$("section.bopis-banner").find(":visible:tabbable:first").focus())})):setTimeout(function(){$("#globalHeader").find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||!$(this).siblings(".nav-menu.visibility-visible").length>0&&$(".homepage-hero").length>0&&($(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden"),a.preventDefault(),a.stopPropagation(),$(".icon_hero").attr("aria-hidden","false").removeAttr("role"),$(".icon_hero svg").focus().addClass("focus"))})},500)}function addCarouselIdAndListener(a){var b=a.type.slice(0,a.type.length-6),c=1;$("[id^=book-carousel]").each(function(){$(this).attr("id","book-carousel-"+c),c++}),$(b+" [id^=label-score-]").on("click",function(){var a=$(this).siblings("form[id^=addItemToWishlist1test]");BN.uXHR.Form.apply(a);var b=$(this).siblings("form[id^=frmRemoveGiftItemtest]");BN.uXHR.Form.apply(b),userWishlistAdd(this)}),$(b+" [id^=guest-label-score-]").on("click",function(){var a=$(this).siblings("form[id^=addItemToWishlist1test]");BN.uXHR.Form.apply(a);var b=$(this).siblings("form[id^=frmRemoveGiftItemtest]");BN.uXHR.Form.apply(b),guestWishlistAdd(this)}),$(b+" form[name^=addItemToWishlist1test]").on("amplifiFormError",function(){addWishlistError(this)}).on("amplifiFormBeforeSubmit",function(){BN.uXHR.Form.apply(this)}).on("amplifiFormSuccess",function(a,b){addWishlistSuccess(this,b)}),$(b+" form[id^=frmRemoveGiftItemtest]").on("amplifiFormError",function(){removeWishlistError(this)}).on("amplifiFormBeforeSubmit",function(){BN.uXHR.Form.apply(this)}).on("amplifiFormSuccess",function(a,b){removeWishlistSuccess(this,b)})}function getCarousel(a,b,c){$.ajax({url:a,data:{count:c.count,fromWL:c.fromwl,title:c.title,skuId:c.skuid},cache:!1,type:"get"}).done(function(a){var c=b;if(c.html(a),$("body").hasClass("shopping-bag")&&$("#recentlyViewed div.container").addClass("recently-viewed"),$(document).trigger("#recentlyViewedLoaded"),$("#clearRecentForm").length>0){var d=$("#clearRecentForm");BN.uXHR.Form.apply(d),d.on("amplifiFormSuccess",function(){location.reload()})}$("#recentlyViewed .product-shelf").on("init",function(){$("#recentlyViewed .product-shelf").addClass("init")});var e=$(document).find("#checkoutContainer").length,f=$('.modal__dialog[data-modal-name="m-confirm-instant-purchase"]').length;$("#recentlyViewed .product-shelf").find(".product-shelf-image-cont").matchHeight({remove:!0}).matchHeight(),$("#recentlyViewed .product-shelf").slick({dots:!1,infinite:!1,slidesToShow:1==e?4:7,slidesToScroll:1==e?4:7,adaptiveHeight:!0,accessibility:!1,responsive:[{breakpoint:f>0?2561:1366,settings:{slidesToShow:1==e?4:6,slidesToScroll:1==e?4:6}},{breakpoint:901,settings:"unslick"}]}),$("#recentlyViewed .product-shelf-favorite").keydown(function(a){a.shiftKey&&9==a.keyCode&&($(this).parent().prev().focus(),$(this).parent().prev().addClass("focus"),a.stopPropagation())}),$(".product-shelf-image-cont").each(function(){$(this).find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(carouselShiftTab=!1,slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")+1,$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').length>0?($(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")),a.preventDefault(),a.stopPropagation())}),$(this).find(":tabbable:first").keydown(function(a){a.shiftKey&&9===a.keyCode&&(carouselShiftTab=!0,slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")-1,0===$(this).parents(".slick-slide").prev().length?0===$(this).parents(".slick-slide").parents(".slick-list").prev("button").length?($(this).parents(".slick-slide").parents(".slick-slider").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").parents(".slick-slider").prev().find(":tabbable:last").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-list").prev("button").focus(),$(this).parents(".slick-slide").parents(".slick-list").prev("button").addClass("focus")):($(this).parents(".slick-slide").prev().hasClass("slick-active")||$(this).parents(".slick-slide").parents(".slick-slider").slick("slickPrev"),$(this).parents(".slick-slide").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").prev().find(":tabbable:last").addClass("focus")),a.preventDefault(),a.stopPropagation())}),$(this).parent().find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(0===$(this).parents(".slick-slide").nextAll(':not("script"):first').length?(0===$(this).parents(".slick-slide").parents(".slick-list").next("button").length?0===$(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').length?0==$(this).parents(".slick-slide").parents(".slick-slider").parents("#recentlyViewed").nextAll(':not("script"):first').length?($(this).parents(".slick-slide").parents(".slick-slider").parents("#recentlyViewed").parents("section").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("#recentlyViewed").parents("section").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-slider").parents("#recentlyViewed").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("#recentlyViewed").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-list").next("button").focus(),$(this).parents(".slick-slide").parents(".slick-list").next("button").addClass("focus")),a.preventDefault(),a.stopPropagation()):$(this).parents(".slick-slide").nextAll(':not("script"):first').hasClass("slick-active")||$(this).parents(".slick-slide").parents(".slick-slider").slick("slickNext"))})}),$("#recentlyViewed .slick-track").removeAttr("role"),$("#recentlyViewed").find(".slick-slide").removeAttr("role"),$("#recentlyViewed .slick-slider").on("init",function(a,b){b.$slides.each(function(){$(this).parent().removeAttr("role")})}).on("afterChange",function(a,b){b.options.slidesToScroll;carouselShiftTab?(carouselShiftTab=!1,$(b.$slides[slideToFocus]).find(":tabbable:last").focus(),$(b.$slides[slideToFocus]).find(":tabbable:last").addClass("focus")):($(b.$slides[slideToFocus]).find(":tabbable:last").focus(),$(b.$slides[slideToFocus]).find(":tabbable:last").addClass("focus"))}),modifyAriaAttribute()})}function getRecommendation(a,b,c){$.ajax({url:a,data:{count:c.count,fromWL:c.fromwl,title:c.title,skuId:c.skuid,skuType:c.skutype,cachingRequired:c.cache},cache:!1,type:"get"}).done(function(a){var d=b;d.html(a);var e=c.title.replace(/ /g,"_");"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&(performance.mark(e+"_loading_ends"),performance.measure("CustomerAlsoBoughtcarouselDur",e+"_loading_starts",e+"_loading_ends")),$(document).trigger("#recommendationsLoaded"),1==$("#recommendations .favIconContainer").data("showcarousel")?($("#recommendations .product-shelf").on("init",function(){$("#recommendations .product-shelf").addClass("init")}),$("#recommendations .product-shelf").slick({dots:!1,infinite:!1,slidesToShow:7,slidesToScroll:7,adaptiveHeight:!0,accessibility:!1,responsive:[{breakpoint:1366,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:901,settings:"unslick"}]}),0==$(".recommendationContainer").find(".product-shelf-tile").length&&($("#recommendations").css("display","none"),$(window).width()<900&&$(".audiobook-coupon")&&$(".audiobook-coupon").length>0||$(".deal-badges .pdp-ov-section-divider-line").css("border-bottom","none")),$("#recommendations .product-shelf-image:last img").on("load",function(){$("#recommendations").find("[data-modifySlick]").length>0&&$("#recommendations [data-modifySlick]").find(".slick-track").addClass("product-shelf-grid")}),$("#recommendations .product-shelf-favorite").keydown(function(a){a.shiftKey&&9==a.keyCode&&($(this).parent().prev().focus(),$(this).parent().prev().addClass("focus"),a.stopPropagation())}),$(".product-shelf-image-cont").each(function(){$(this).find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(carouselShiftTab=!1,slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")+1,$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').length>0?($(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")),a.preventDefault(),a.stopPropagation())}),$(this).find(":tabbable:first").keydown(function(a){a.shiftKey&&9===a.keyCode&&(slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")-1,carouselShiftTab=!0,0===$(this).parents(".slick-slide").prev().length?0===$(this).parents(".slick-slide").parents(".slick-list").prev("button").length?($(this).parents(".slick-slide").parents(".slick-slider").parents("#recommendations").prev().find(":tabbable").last().focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("#recommendations").prev().find(":tabbable").last().addClass("focus")):($(this).parents(".slick-slide").parents(".slick-list").prev("button").focus(),$(this).parents(".slick-slide").parents(".slick-list").prev("button").addClass("focus")):($(this).parents(".slick-slide").prev().hasClass("slick-active")||$(this).parents(".slick-slide").parents(".slick-slider").slick("slickPrev"),$(this).parents(".slick-slide").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").prev().find(":tabbable:last").addClass("focus")),a.preventDefault(),a.stopPropagation())}),$(this).parent().find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(0===$(this).parents(".slick-slide").nextAll(':not("script"):first').length?(0===$(this).parents(".slick-slide").parents(".slick-list").next("button").length?0===$(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').length?($(this).parents(".slick-slide").parents(".slick-slider").parents("#recommendations").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("#recommendations").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".slick-slide").parents(".slick-slider").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-list").next("button").focus(),$(this).parents(".slick-slide").parents(".slick-list").next("button").addClass("focus")),a.preventDefault(),a.stopPropagation()):$(this).parents(".slick-slide").nextAll(':not("script"):first').hasClass("slick-active")||$(this).parents(".slick-slide").parents(".slick-slider").slick("slickNext"))})}),$("#recommendations .slick-track").removeAttr("role"),$("#recommendations .slick-slider").on("init",function(a,b){b.$slides.each(function(){$(this).parent().removeAttr("role")})}).on("afterChange",function(a,b){b.options.slidesToScroll;carouselShiftTab?(carouselShiftTab=!1,$(b.$slides[slideToFocus]).find(":tabbable:last").focus(),$(b.$slides[slideToFocus]).find(":tabbable:last").addClass("focus")):($(b.$slides[slideToFocus]).find(":tabbable:last").focus(),$(b.$slides[slideToFocus]).find(":tabbable:last").addClass("focus"))})):($("#recommendations .product-shelf-favorite").keydown(function(a){a.shiftKey&&9===a.keyCode&&($(this).parent().prev().focus(),$(this).parent().prev().addClass("focus"),a.stopPropagation())}),$("#recommendations .product-shelf-image-cont").each(function(){var a=this;$(this).find(":tabbable").first().keydown(function(b){b.shiftKey&&9===b.keyCode&&(b.preventDefault(),b.stopPropagation(),$(a).parent().prev().length>0?($(a).parent().prev().find(":tabbable").last().focus(),$(a).parent().prev().find(":tabbable").last().addClass("focus")):($("#recommendations").prev().find(":tabbable").last().focus(),$("#recommendations").prev().find(":tabbable").last().addClass("focus")))})})),$("#recommendations").find(":visible:tabbable:first").on("keydown",function(a){a.shiftKey&&9===a.keyCode&&(a.preventDefault(),a.stopPropagation(),$("#hero-section-placeholder").find(":visible:tabbable:last").focus().addClass("focus"))}),modifyAriaAttribute()})}function initPromoCarousel(){$("[id^=upsellPromo]").length>0&&$(function(){var a={incrementIds:!0,carouselWidth:736,carouselHeight:"auto",numDisplay:5,itemWidth:135,alignItems:"left",prevButtonID:"carousel-prev",nextButtonID:"carousel-next",prev:{button:"#"+this.prevButtonID,key:"left"},next:{button:"#"+this.nextButtonID,key:"right"},paginationButtons:'<div class="prev-item carousel-prev" style="display:block;" tabindex="0" role="button" title="previous"><span style="display:none;">Prev</span></div><div class="next-item carousel-next" tabindex="0" role="button" title="next"><span style="display:none;">Next</span></div>',auto:!1,scroll:{fx:"scroll"},circular:!0,infinite:!0},b=$.extend({},a,{selector:"[id^=upsellPromo]",alignItems:"center",incrementIds:!1,carouselWidth:300,carouselHeight:20,auto:{play:!0,timeoutDuration:6e3},scroll:{duration:800,pauseOnHover:!0},numDisplay:1,prevButtonID:"",nextButtonID:"",prev:"",next:"",paginationButtons:"",direction:"up"});initCarouFredSel(b)})}function modifyAriaAttribute(){$(".product-shelf-tile").each(function(){var a=$.trim($(this).children(".product-shelf-info").children(".product-shelf-title").text());"undefined"!=a&&""!=a&&($(this).removeAttr("aria-describedby"),$(this).attr("aria-label",a))})}function productImageTabbing(){$(".product-shelf-image-cont").each(function(){var a=$(this).parent().find(".product-shelf-title a");0===a.find("span").length&&makeMultiLineEllipsis(a,2),$(this).find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")+1,carouselShiftTab=!1,$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').length>0?($(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):$(this).parents(".product-shelf-image-cont").parents(".slick-slide").length>0?($(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").parents(".slick-slide").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")):($(this).parents(".product-shelf-image-cont").parent().nextAll(':not("script"):first').find(":tabbable:first").focus(),$(this).parents(".product-shelf-image-cont").parent().nextAll(':not("script"):first').find(":tabbable:first").addClass("focus")),a.preventDefault(),a.stopPropagation())}),$(this).find(":tabbable:first").keydown(function(a){if(a.shiftKey&&9===a.keyCode){if(carouselShiftTab=!0,slideToFocus=$(this).parents(".slick-slide").attr("data-slick-index")-1,0===$(this).parents(".slick-slide").prev().length)if(0===$(this).parents(".slick-slide").parents(".slick-list").prev("button").length)if(0===$(this).parents(".slick-slide").parents(".slick-slider").prev().length){var b=$($(this).parents(".slick-slide").parents(".slick-slider").parents("[class^='col-lg']")[0]);b.length>0?b.prev().find(":tabbable:last").length>0?b.prev().find(":tabbable:last").focus():$(b.parents(".row")[0]).parent().siblings("header").find(":tabbable:last").length>0?$(b.parents(".row")[0]).parent().siblings("header").find(":tabbable:last").focus():$(b.parents("section")[0]).prev().find(":tabbable:last").length>0&&$(b.parents("section")[0]).prev().find(":tabbable:last").focus():$(this).parents(".slick-slide").length>0?0===$(this).parents(".slick-slide").parents(".slick-slider").parents("section").prev().find(":tabbable:last").length?($(this).parents(".slick-slide").parents(".slick-slider").parents("section").parent().find(".tile-grid").find(":tabbable:last").focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("section").parent().find(".tile-grid").find(":tabbable:last").addClass("focus")):($(this).parents(".slick-slide").parents(".slick-slider").parents("section").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").parents(".slick-slider").parents("section").prev().find(":tabbable:last").addClass("focus")):$(this).parents(".search-promo-atg-container").prevAll(':not("script"):first').find(":tabbable:last").length>0?($(this).parents(".search-promo-atg-container").prevAll(':not("script"):first').find(":tabbable:last").focus(),$(this).parents(".search-promo-atg-container").prevAll(':not("script"):first').find(":tabbable:last").addClass("focus")):$(this).parents(".product-shelf-tile").prevAll(':not("script"):first').find(":tabbable:last").length>0?($(this).parents(".product-shelf-tile").prevAll(':not("script"):first').find(":tabbable:last").focus(),$(this).parents(".product-shelf-tile").prevAll(':not("script"):first').find(":tabbable:last").addClass("focus")):$(this).parents(".record").prevAll(':not("script"):not("input"):first').find(":tabbable:last").length>0?($(this).parents(".record").prevAll(':not("script"):not("input"):first').find(":tabbable:last").focus(),$(this).parents(".record").prevAll(':not("script"):not("input"):first').find(":tabbable:last").addClass("focus")):$($(this).parents("section")[0]).prev().find(":tabbable:last").length>0&&$($(this).parents("section")[0]).prev().find(":tabbable:last").focus()}else $(this).parents(".slick-slide").parents(".slick-slider").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").parents(".slick-slider").prev().find(":tabbable:last").addClass("focus");else $(this).parents(".slick-slide").parents(".slick-list").prev("button").focus(),$(this).parents(".slick-slide").parents(".slick-list").prev("button").addClass("focus");else $(this).parents(".slick-slide").prev().hasClass("slick-active")||$(this).parents(".slick-slide").parents(".slick-slider").slick("slickPrev"),$(this).parents(".slick-slide").prev().find(":tabbable:last").focus(),$(this).parents(".slick-slide").prev().find(":tabbable:last").addClass("focus");a.preventDefault(),a.stopPropagation()}}),$(this).parent().find(":tabbable:last").keydown(function(a){a.shiftKey||9!==a.keyCode||(!$(this).parents(".slick-slide").nextAll(':not("script"):first').hasClass("slick-active")&&$(this).parents(".slick-slide").nextAll(':not("script"):first').length>0?$(this).parents(".slick-slide").parents(".slick-slider").slick("slickNext"):$($(this).parents(".slick-slide").parents("section")[0]).nextAll(':not("script"):first').length>0&&0===$(this).parents(".slick-slide").nextAll(':not("script"):first').length&&0===$(this).parents(".slick-slide").parents(".slick-list").next("button").length&&($($(this).parents(".slick-slide").parents("section")[0]).nextAll(':not("script"):first').find(":tabbable:first").focus(),a.preventDefault(),a.stopPropagation()))})})}var carouselShiftTab=!1,homePageShiftTab=!1,slideToFocus=-1,TabCarousel=!1,homePageCarouselPlayButtonSVG='<svg tabindex="0" role="button" aria-label="Play" aria-hidden="false" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 12 14" style="enable-background:new 0 0 12 14;" xml:space="preserve"> <g><path d="M11.5,6.2l-9.8-6C1.4,0,1-0.1,0.6,0.1C0.2,0.3,0,0.6,0,1v12c0,0.4,0.2,0.7,0.6,0.9C0.8,14,0.9,14,1.1,14c0.2,0,0.4-0.1,0.6-0.2l9.8-6C11.8,7.6,12,7.3,12,7C12,6.7,11.8,6.4,11.5,6.2L11.5,6.2z"/></g></svg>',homePageCarouselPauseButtonSVG='<svg tabindex="0" role="button" aria-label="Pause" aria-hidden="false" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 12 14" style="enable-background:new 0 0 12 14;" xml:space="preserve"><path d="M3.2,14H1.6C0.7,14,0,13.3,0,12.4L0,1.6C0,0.7,0.7,0,1.6,0h1.6c0.9,0,1.6,0.7,1.6,1.6v10.8C4.8,13.3,4.1,14,3.2,14zM12,12.4V1.6C12,0.7,11.3,0,10.4,0H8.8C7.9,0,7.2,0.7,7.2,1.6v10.8c0,0.9,0.7,1.6,1.6,1.6h1.6C11.3,14,12,13.3,12,12.4z"/></svg>';$(window).on("resize",function(){$(window).width()<480&&$(".pdp-commerce-format").length>1&&$(".pdp-commerce-format").addClass("morethanoneformat")}),$(document).ready(function(){function a(a){39===a.keyCode&&$(a.target).parents(".slick-slide").length>0?$(a.target).parents(".slick-slider").find(".slick-next").hasClass("slick-disabled")||$(a.target).parents(".slick-slider").slick("slickNext"):37===a.keyCode&&$(a.target).parents(".slick-slide").length>0&&($(a.target).parents(".slick-slider").find(".slick-prev").hasClass("slick-disabled")||$(a.target).parents(".slick-slider").slick("slickPrev"))}$(window).width()<480&&$(".pdp-commerce-format").length>1&&$(".pdp-commerce-format").addClass("morethanoneformat"),$(".tile-ecomm").find(".tile-content").find("button.btn--tile").focus(function(){$(this).parents(".tile-ecomm").attr("role","presentation"),$(this).removeAttr("role")}),$(".tile-ecomm").find(".tile-content").find("button.btn--tile").focusout(function(){$(this).parents(".tile-ecomm").removeAttr("role")}),$(".homepage").find(".tile-grid").find(".tile-ecomm").focus(function(){if($(this).find(".tile-content").find("button.btn--tile").length>0){$(this).find(".tile-content").find("button.btn--tile").attr("role","presentation"),$(this).removeAttr("role");var a=$(this).attr("id");$(this).attr("aria-labelledby",a)}}),window.addEventListener("keydown",a,!0),$(".slick-dots").append('<li class="icon icon_pause icon_hero"></li>'),$(".slick-dots").find("li:last").html(homePageCarouselPauseButtonSVG),$(".icon_hero").on("click",function(){var a=$(this),b=$(".icon_hero svg");a.hasClass("icon_pause")?(b.blur().removeClass("focus"),a.removeClass("icon_pause").addClass("icon_play").empty().html(homePageCarouselPlayButtonSVG),a.parents(".slick-dotted").slick("slickPause"),a.attr({role:"button","aria-label":"Play"}),$(".icon_hero svg").focus().addClass("focus")):a.hasClass("icon_play")&&(b.blur().removeClass("focus"),a.removeClass("icon_play").addClass("icon_pause").empty().html(homePageCarouselPauseButtonSVG),a.parents(".slick-dotted").slick("slickPlay"),a.attr({role:"button","aria-label":"Pause"}),$(".icon_hero svg").focus().addClass("focus"))}),$(".icon_hero").on("keydown",function(a){if(13===a.keyCode){a.preventDefault(),a.stopPropagation();var b=$(this),c=$(".icon_hero svg");b.hasClass("icon_pause")?(c.blur().removeClass("focus"),b.removeClass("icon_pause").addClass("icon_play").empty().html(homePageCarouselPlayButtonSVG),b.parents(".slick-dotted").slick("slickPause"),b.attr({role:"button","aria-label":"Play"}),$(".icon_hero svg").focus().addClass("focus")):b.hasClass("icon_play")&&(c.blur().removeClass("focus"),b.removeClass("icon_play").addClass("icon_pause").empty().html(homePageCarouselPauseButtonSVG),b.parents(".slick-dotted").slick("slickPlay"),b.attr({role:"button","aria-label":"Pause"}),$(".icon_hero svg").focus().addClass("focus"))}if(a.shiftKey&&9===a.keyCode)if(a.preventDefault(),a.stopPropagation(),$("section.bopis-banner").length>0)$("section.bopis-banner").find(":tabbable:last").focus(),$("section.bopis-banner").find(":tabbable:last").addClass("focus");else{var d=$("#globalHeader").find(":tabbable:last");d.parent().is("li"),d.focus()}else if(!a.shiftKey&&9===a.keyCode){a.preventDefault(),a.stopPropagation();var e=$(".homepage-hero").find(".slick-active").find("a").find("button");e.length>0?e.focus().addClass("focus"):$(".homepage-hero").find(".slick-active").find("a").focus().addClass("focus")}}),$(".gateway-hero").parent().find(".tile-grid").find(":tabbable:first").keydown(function(a){a.shiftKey&&9===a.keyCode&&(a.preventDefault(),a.stopPropagation(),$(".homepage-hero .slick-track").find(".slick-active").find(":tabbable:last").focus().addClass("focus"))}),bodyClass=$("body").attr("class"),"undefined"==typeof bodyClass&&(bodyClass=""),($("[id^=book-carousel]").length>0||$("[data-carousel-type^=book-carousel]").length>0||$("#recommendations").length>0)&&$(function(){var a=$("body").hasClass("pdpPage");if($("[data-carousel-type^=book-carousel]").length>0&&$("[data-carousel-type^=book-carousel]").each(function(){var b=$(this).attr("id"),c="",d=$("#"+b),e=d.data();"recentlyviewed"===b.toLowerCase()&&(c="/includes/bn-recentlyviewed-content-ra.jsp?isPDP="+a),getCarousel(c,d,e)}),$("#recommendations").length>0){var b=$("#recommendations").data(),c="/includes/bn-recommendation-content-body-ra.jsp?isPDP="+a;container=$("#recommendations");var d=b.title.replace(/ /g,"_");"undefined"!=typeof performance.mark&&performance.mark(d+"_loading_starts"),getRecommendation(c,container,b)}}),$("#page-curl__text").attr("aria-hidden","true"),$("#DealoftheDay .slick-slide, #ComingSoon .slick-slide, #ProductEditorial .slick-slide").each(function(){var a=$(this).find(".product-shelf-favorite").find("input:checkbox").attr("id");1==$("#"+a).prop("checked")?$(this).find(".product-shelf-favorite").find("label").attr("aria-label",addToFevourite+"checked"):$(this).find(".product-shelf-favorite").find("label").attr("aria-label",addToFevourite+"unchecked")}),$($(".product-shelf-pricing").find("tr")).each(function(){$($(this).find("td:nth-child(2)").children()).length<=2&&$(this).find("a").removeAttr("aria-describedby")}),$(".slick-list").removeAttr("aria-live");var b=-1;$(".slick-track").removeAttr("role"),$(".slick-slider").on("init",function(a,b){$(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden"),null!==b.$slides&&b.$slides.each(function(){$(this).parent().removeAttr("role")})}).on("beforeChange",function(a,c,d){$(this).parent().removeAttr("role"),$(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden"),b=d}).on("afterChange",function(a,c,d){if($(".slick-slider [aria-hidden=true]").find(":focusable").attr("tabindex","-1"),$(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden"),$(".slick-list").removeAttr("aria-live"),c.$slides.each(function(){if("option"===$(this).attr("role")){$(this).removeAttr("aria-describedby");var a=$(this).closest(".slick-list").siblings("ul.slick-dots");"undefined"!==a&&""!==a&&a.find("li").removeAttr("aria-controls"),$(this).parent().removeAttr("role")}}),$(c.$slider).hasClass("homepage-hero")||$(c.$slider).hasClass("format-chiklets-slider")){if($(c).find(".slick-dots").attr("role","presentation"),$(c).find(".slick-dots").find("li").each(function(){var a=$(this);a.hasClass("icon_hero")||(a.attr({tabindex:"-1","aria-hidden":"true",role:"presentation"}),a.find("button").attr({tabindex:"-1","aria-hidden":"true",role:"presentation"}))}),homePageShiftTab&&(homePageShiftTab=!1,$(c.$slides[d]).find(":tabbable:last").focus().addClass("focus")),TabCarousel){TabCarousel=!1;var e=$(c.$slides[d]).find("button"),f=$(c.$slides[d]).find(":tabbable:first");e.length>0?e.focus().addClass("focus"):f.focus().addClass("focus")}}else{{c.options.slidesToScroll}$(c.$slider).hasClass("multi-author-carousel")?(d!=b&&"Show Less"==$(c.$slides[b]).find(".show-more-pdp").html()&&$(c.$slides[b]).find(".show-more-pdp").trigger("click"),$(c.$slides).each(function(){$(this).hasClass("slick-current")?$(this).removeClass("invisible"):$(this).addClass("invisible")}),$(document.activeElement).focus()):carouselShiftTab?(carouselShiftTab=!1,$(c.$slides[slideToFocus]).find(":tabbable:last").focus().addClass("focus")):$(c.$slides[d]).find(":tabbable:first").focus().addClass("focus")}}),$(".homepage-hero .slick-slide:not('.slick-cloned')").each(function(){var a=$(this).find("img").attr("alt"),b=Number($(this).attr("data-slick-index"))+1,c="Slide #"+b,d=$(".homepage-hero").find(".slick-dots"),e=$($(this).find("a")[0]);e.attr("title",c),e.attr("aria-label",a),e.find("button").attr("role","presentation"),d.attr("role","presentation"),d.find("li").each(function(){var a=$(this);a.hasClass("icon_hero")||(a.attr({tabindex:"-1","aria-hidden":"true",role:"presentation"}),a.find("button").attr({tabindex:"-1","aria-hidden":"true",role:"presentation"}))}),$(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden");var f=$(this).parent().find(".slick-slide:not('.slick-cloned')").length,g=Number($(this).attr("data-slick-index")),h=this;$(this).find(":tabbable:last").keydown(function(a){$(h).hasClass("slick-current")&&(a.shiftKey||9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),g===f-1?$(".gateway-hero").parent().find(".tile-grid").find(":tabbable:first").focus().addClass("focus"):(TabCarousel=!0,$(this).parents(".slick-slider").slick("slickNext"))))});var i=null;i=$(this).find("a").find("button").length>0?$(this).find("a").find("button"):$(this).find(":tabbable:first"),i.keydown(function(a){if(a.shiftKey&&9===a.keyCode){$(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden");var b=Number($(this).parents(".slick-slide").attr("data-slick-index"));
if(0===b){var c=document.activeElement;$(c).is($(this))&&(a.preventDefault(),a.stopPropagation(),$(".icon_hero").removeAttr("role").attr("aria-hidden","false"),$(".icon_hero svg").focus().addClass("focus"))}else{var c=document.activeElement;$(c).is($(this))&&(a.preventDefault(),a.stopPropagation(),homePageShiftTab=!0,$(this).parents(".slick-slider").slick("slickPrev"))}}})}),placeFocusToHomePageCarousel(),$("section.bopis-banner").find(":tabbable:first").keydown(function(a){a.preventDefault(),a.stopPropagation(),a.shiftKey&&9==a.keyCode&&($("#globalHeader").find(":tabbable:last").focus(),$("#globalHeader").find(":tabbable:last").parent().is("li")?$("#globalHeader").find(":tabbable:last").parent().addClass("focus"):$("#globalHeader").find(":tabbable:last").addClass("focus"))});var c=$(".hero-slide").find("h2").text();if(0===c.length){var d=$(".hero-slide").find("img").attr("alt");$(".hero-slide").attr("aria-label",d)}else $(".hero-slide").attr("aria-label",c);2===$(".hero-slide").find("a").length?$(".hero-slide").find("a").eq(1).removeAttr("tabindex"):$(".hero-slide").find("a").removeAttr("tabindex"),$(".product-shelf-tile").focusin(function(){}),$(".product-shelf-ratings").find(".product-last-star").attr("aria-hidden","true"),initPromoCarousel(),$(document).on("#recommendationsLoaded",function(a){initializeImageLazyLoad(),$(".product-shelf-curl").removeClass("hidden"),$(".slick-list").removeAttr("aria-live"),$("#recommendations").find("[id^=img-]").each(function(){$(this).tooltip()}),$("#recommendations .product-shelf-favorite").find("label").on("keydown",function(a){13==a.keyCode&&($(this).trigger("click"),$(this).focus())}),$("#recommendations .product-shelf-image:last img").on("load",function(){$("#recommendations .product-shelf-image-cont").each(function(){$(this).matchHeight()})}),addCarouselIdAndListener(a)}),$("#recommendations").on("afterChange init",function(a,b){b.$slides.each(function(){$(this).parent().removeAttr("role"),$(this).removeAttr("role")})}).on("beforeChange",function(){}),$(document).on("#recentlyViewedLoaded",function(a){initializeImageLazyLoad(),$(".slick-list").removeAttr("aria-live"),$(".product-shelf-curl").removeClass("hidden"),$("#recentlyViewed").find("[id^=img-]").each(function(){$(this).tooltip()}),$("#recentlyViewed .product-shelf-favorite").find("label").on("keydown",function(a){13==a.keyCode&&($(this).trigger("click"),$(this).focus())}),$("#recentlyViewed").find(".slick-slide").removeAttr("role"),$("#recentlyViewed .product-shelf-image:last img").on("load",function(){$("#recentlyViewed .product-shelf-image-cont").matchHeight(),$("#recentlyViewed").find("[data-modifySlick]").length>0&&$("[data-modifySlick]").find(".slick-track").addClass("product-shelf-grid"),$("#recentlyViewed").find(".slick-track").removeAttr("role"),$("#recentlyViewed").find(".slick-track").children().each(function(){})}),addCarouselIdAndListener(a)}),$(window).on("resize",function(){if($(window).width()>900){var a=$(document).find("#checkoutContainer").length,b=$('.modal__dialog[data-modal-name="m-confirm-instant-purchase"]').length;$("#recentlyViewed .product-shelf").find(".product-shelf-image-cont").matchHeight({remove:!0}).matchHeight(),$("#recentlyViewed .product-shelf, #recommendations .product-shelf").not(".slick-initialized").slick({dots:!1,infinite:!1,slidesToShow:1==a?4:7,slidesToScroll:1==a?4:7,adaptiveHeight:!0,accessibility:!1,responsive:[{breakpoint:b>0?2561:1366,settings:{slidesToShow:1==a?4:6,slidesToScroll:1==a?4:6}},{breakpoint:901,settings:"unslick"}]}),$("#recentlyViewed .product-shelf, #recommendations .product-shelf").slick("refresh",!0),$("#recentlyViewed .product-shelf, #recommendations .product-shelf").slick("setPosition"),$("#recommendations").find("[data-modifySlick]").length>0&&$("#recommendations [data-modifySlick]").find(".slick-track").addClass("product-shelf-grid"),$("#recentlyViewed").find("[data-modifySlick]").length>0&&$("#recentlyViewed [data-modifySlick]").find(".slick-track").addClass("product-shelf-grid")}else{var c=$(".formatModal").attr("data-total-formats");$(window).width()<900&&(c>2?$(".pdpPage #otherAvailFormats .slick-track").addClass("chicklet").removeClass("product-shelf-grid"):2==c?$(".pdpPage #otherAvailFormats .slick-track").addClass("two-format").removeClass("product-shelf-grid"):$(".pdp").hasClass(".formatModal")||$(".pdp .d-lg-none .radio-wrapper").css("justify-content","center"))}})}),$(document).ready(function(){var a=$(".formatModal").attr("data-total-formats");$(window).width()<900&&(a>2?$(".pdpPage #otherAvailFormats .slick-track").addClass("chicklet").removeClass("product-shelf-grid"):2==a?$(".pdpPage #otherAvailFormats .slick-track").addClass("two-format").removeClass("product-shelf-grid"):$(".pdp").hasClass(".formatModal")||$(".pdp .d-lg-none .radio-wrapper").css("justify-content","center"))}),$(window).on("load",function(){$(".author-image-carousel .carousel").addClass("init");var a=$("[id^=book-carousel]").length,b=$("[data-carousel]").length;if(a>0){var c=1;$("[id^=book-carousel]").each(function(){$(this).attr("id","book-carousel-"+c),c++})}b>0&&($("[data-carousel]").each(function(){}),$(".product-shelf-favorite").keydown(function(a){a.shiftKey&&9==a.keyCode&&($(this).parent().prev().focus(),$(this).parent().prev().addClass("focus"),a.stopPropagation())}),$(".discoverFeaturedBook").find(".product-shelf-tile").find(":tabbable:last").on("keydown",function(a){a.shiftKey||9!=a.keyCode||($(this).parents(".product-shelf-tile").next(".product-shelf-tile").length>0?$(this).parents(".product-shelf-tile").nextAll(':not("script"):first').find(":tabbable:first").focus():$(this).parents(".author-hero-product-shelf").nextAll(':not("script"):first').find(":tabbable:first").focus())}),$(".discoverFeaturedBook").find(".product-shelf-tile").find(":tabbable:first").on("keydown",function(a){a.shiftKey&&9==a.keyCode&&($(this).parents(".product-shelf-tile").prev(".product-shelf-tile").length>0?$(this).parents(".product-shelf-tile").prev().find(":tabbable:last").focus():$(this).parents("section").prev().find(":tabbable:last").focus())}),$(".author-image-carousel").find(".author-image").find(":tabbable:first").on("keydown",function(a){a.shiftKey&&9==a.keyCode&&($(this).parents(".author-image").prev(".author-image").length>0?$(this).parents(".author-image").prev().find(":tabbable:last").focus():$(this).parents(".container--no-padding-bottom").prev().find(":tabbable:last").focus(),a.preventDefault())}),$(".author-image-carousel").find(".author-image").find(":tabbable:first").on("keydown",function(a){a.shiftKey||9!=a.keyCode||($(this).parents(".author-image").next(".author-image").length>0?$(this).parents(".author-image").nextAll(':not("script"):first').find(":tabbable:first").focus():$(this).parents(".container--no-padding-bottom").nextAll(':not("script"):first').find(":tabbable:first").focus(),a.preventDefault())}));var a=$("[id^=video-carousel]").length;a>0&&$("[id^=video-carousel]").each(function(){$(this).parent().width("100%")}),$("[id^=upsellPromo] li a").focus(function(){$("[id^=upsellPromo]").mouseover()}),$("[id^=upsellPromo] li a").blur(function(){$("[id^=upsellPromo]").mouseout()}),$("[id^=featuredItemList] li a").focus(function(){$("[id^=featuredItemList]").mouseover()}),$("[id^=featuredItemList] li a").blur(function(){$("[id^=featuredItemList]").mouseout()}),$(".featured-item-pagination span").keydown(function(a){13==a.which&&(a.preventDefault(),$(this).click())}),$(".carousel-prev").each(function(){var a=$(this).prev(".caroufredsel_wrapper");$(this).insertBefore($(a))})});;/*! BARNES-BUILDER 2024-02-21 */
var BN=BN||{Data:{},Modal:{},QAS:null,uXHR:null,Validate:null};;/*! BARNES-BUILDER 2024-02-21 */
BN.Validate=BN.Validate||function(){var a=function(){consoleLog("BN.Validate Initializing"),$.webshims.setOptions("forms",{addValidators:!0,customMessages:!0,replaceValidationUI:!0}),$.webshims.setOptions("forms-ext",{replaceUI:!1}),consoleLog("BN.Validate Initialized")};return a.prototype={lang:"en",Listen:function(a,b,c){var d=this,e=$(a);b||(b=".error-msg"),c||(c=$("<em/>").addClass("emphasis emphasis--alert")),e.on("invalid",function(a){a.preventDefault()}).on("firstinvalid",function(){var a=$(this),e=[];if(a.find("input,select,textarea").each(function(){var a=$(this);if(a.hasClass("egift-date")||a.focus(),a.hasClass("egift-date")&&!a.checkValidity()?a.parent("div").addClass("invalid"):a.hasClass("egift-date")&&a.checkValidity()&&a.parent("div").removeClass("invalid"),!a.checkValidity()&&"numeric"!=a.attr("inputmode"))if(a.hasClass("selectBox")){var b=a.attr("custValidationMessage")||a.prop("customValidationMessage")||a.prop("validationMessage");e.push(b.split("<")[0]),a.siblings(".selectBox-container").addClass("invalid")}else e.push(a.attr("custValidationMessage")||a.prop("customValidationMessage")||a.prop("validationMessage"))}),$("#savedAddressList").length>0&&$("#savedAddressList").is(":visible")){var f=!1;$('#savedAddressList input[name="billingNickName"]').length>0&&$('#savedAddressList input[name="billingNickName"]:checked').length>0?f=!0:$('#savedAddressList input[name="nickName"]').length>0&&$('#savedAddressList input[name="nickName"]:checked').length>0&&(f=!0),f||e.push("Saved Billing Address cannot be left blank")}var g=a.attr("id")||"",h=$("#parentUrl").val();if("undefined"!=typeof s_setP&&("loginForm"===g||"createAccountForm"===g||self!=top)){var i=new Object;i.messages=e,i.type="frameValidateError",i.formId=g,$.postMessage(i,h,window.parent)}if(g.indexOf("audiobookForm--")>-1){var j=document.getElementById("billingCheckbox"),k=document.getElementById("tnc"),l=document.getElementById("defaultPaymentCheckbox");$(".defaultPaymentCheckbox").is(":visible")&&0==l.checked&&e.unshift("Please select the checkbox to confirm you understand this will be your default payment method for your bn.com account."),$(".billingCheckbox").is(":visible")&&0==j.checked&&e.unshift("Please select the checkbox to authorize B&N to bill against default card."),$(".tnc").is(":visible")&&0==k.checked&&e.unshift("Please select the checkbox to agree to the B&N Terms of Use, Digital Content Terms of Sale, and Privacy Policy to continue.")}return d.DisplayErrors(a,e,b,c),!1})},HasErrors:function(a){return a.checkValidity()?!0:!1},ClearErrors:function(a,b,c){b||(b=".error-msg"),c||(c=$("<em/>").addClass("emphasis emphasis--alert"));var d=$(a);b=d.attr("data-messaging");var e=d.find(b),f=$(".success-msg");return e=e.length<1?d.parentsUntil(".pure-modals").last().find(b):e,e.length<1?void consoleError("Invalid or Missing Message Container. Please specify a message container as the second argument."):void("frmApplyCoupon"==d[0].id?e.html(""):(e.hide().find(".emphasis--alert").remove(),f.hide()))},DisplayErrors:function(a,b,c,d,e,f){if(d||(d=".error-msg"),e||(e=$("<em/>").addClass("emphasis emphasis--alert")),"undefined"==typeof b?l=[]:b instanceof Array||(b=[b]),!(b.indexOf("2FARequired")>-1&&1==b.length)){if("undefined"!=typeof a&&("loginForm"==a[0].id||"forgotPasswordForm"==a[0].id))for(var g in b)"Please enter an email address."==b[g]&&(b[g]="Please enter a valid email address");"undefined"==typeof c?c=[]:c instanceof Array||(c=[c]);var h=$(a),i=$(".success-msg");if(d=h.attr("data-messaging"),f&&f.response){var j=f.response.data;j&&""===j.instantPurchaseError&&(d=".error-msg")}{var k=h.find(d);h.attr("id")||""}if(k=k.length<1?h.parentsUntil(".pure-modals").last().find(d):k,h.find("input").removeClass("user-error"),i.hide(),k.length<1)return void consoleError("Invalid or Missing Message Container. Please specify a message container as the second argument.");null!=b[0]&&(k.hide().find(".emphasis--alert").remove(),"undefined"!=typeof s_setP&&trackOnError(b,f));for(var g in b)if(b.hasOwnProperty(g)){var l=b[g];if("frmApplyCoupon"==h[0].id||"bookfairApply"==h[0].id)k.attr({role:"alert","aria-atomic":"true",tabindex:"0"}).show().focus().html(l);else{if("loginForm"===h[0].id&&("inactiveUser"===l||"isPasswordResetRequired"===l||"userAccountLocked"===l||"isAccDeactivated"===l))continue;if(h[0].id.indexOf("addItemToWishlist1test")>-1||h[0].id.indexOf("frmRemoveGiftItemtest_")>-1)continue;k.first().attr({role:"alert","aria-atomic":"true",tabindex:"0"}).show().focus().append(e.clone().html(l))}}for(var g in c)if(c.hasOwnProperty(g)){var m=c[g];if(m&&-1!=m.indexOf("value")){var n=m.substring(m.lastIndexOf("value")+6);n&&$("#"+n).addClass("user-error")}}var o=$("#currPword").val();""==o&&"Please enter a valid password &amp; confirm password"==l&&(l="Please enter a current password",k.show().prepend(e.html(l)))}},SetMessage:function(a,b){var c=$.webshims.validityMessages[this.lang];{if("object"!=typeof a)return c[a]=b;for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d])}},GetMessage:function(a){if(a instanceof Array){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=$.webshims.validityMessages[this.lang][d]}return b}return $.webshims.validityMessages[this.lang][a]},GetMessageGroup:function(a){var b=$.webshims.validityMessages[this.lang],c={};for(var d in b)b.hasOwnProperty(d)&&d.length>=a.length&&d.substr(0,a.length)==a&&(c[d]=b[d]);return c},SetAllMessages:function(a){return $.webshims.validityMessages[this.lang]=this._formatMessagesObj(a)},GetAllMessages:function(){return $.webshims.validityMessages[this.lang]},_getMessageObjDim:function(a){var b=$.webshims.validityMessages[this.lang],c=a.split(".");try{for(var d=0;d<c.length-1;d++){var e=c[d];""!=e&&(b=b[e])}}catch(f){return consoleError("Validity Message does not exist for: "+a+"; in $.webshims.validityMessages."+this.lang),!1}return array(b,c.pop())},_formatMessagesObj:function(a){var b={};for(var c in a)if(a.hasOwnProperty(c))if(c.indexOf(/\\\./)>0)for(var d=c.split(/\\\./),e=b,f=d.length;f>0;f--)f>1?e=this._getPropertyObj(e,d.splice(0,1)[0]):e[d.splice(0,1)[0]]=a[c];else b[c]=a[c];return b},_getPropertyObj:function(a,b){return"object"!=typeof a[b]&&(a[b]={}),a[b]}},new a}();;/*! BARNES-BUILDER 2024-02-21 */
BN.uXHR=BN.uXHR||{getService:function(){return BN.uXHR.__init.apply(window,![].splice.call(arguments,0,0,"service")||arguments)},getData:function(){return BN.uXHR.__init.apply(window,![].splice.call(arguments,0,0,"getData")||arguments)},getHtml:function(){return BN.uXHR.__init.apply(window,![].splice.call(arguments,0,0,"getHtml")||arguments)},getObject:function(){return BN.uXHR.__init.apply(window,![].splice.call(arguments,0,0,"getObject")||arguments)},__init:function(a,b,c,d,e){return!c&&!c instanceof Object&&(c={}),c[a]=b,BN.uXHR.__get(BN.uXHR.__generateUrl(c,!1),d,e)},__get:function(a,b,c){return $.ajax({type:"GET",url:a,cache:!1,traditional:!0,success:function(a){if("string"==typeof a){a=a.replace(/\n/g,"").replace(/\r/g,"");try{try{var c=JSON.parse(a)}catch(d){var c=$.parseJSON(a)}}catch(d){var c={success:!1}}}else var c=a;var e=arguments;[].splice.call(e,0,0,c),b&&b.apply(this,e)},error:function(){c&&c.apply(this,arguments)}})},getElemDataParams:function(a){a=$(a)[0];var b={},c=a.attributes;if(!c)return b;for(var d=0;d<c.length;d++){var e=c[d].name,f=c[d].value;(e||f)&&"data-"==e.substr(0,5)&&(b[e.substr(5)]=f)}return b},__generateUrl:function(a,b){if(!b){if(b="",SITE_ROOT&&(b+=SITE_ROOT),!XHR_HANDLER_PATH)return $.error("Path to BN.uXHR utility not configured. Please configure path."),!1;b+=XHR_HANDLER_PATH}var c=b+"?";for(var d in a)c+=d+"="+encodeURIComponent(a[d])+"&";return c},Form:function(){var a=$(this);if(a.length>1)return void a.each(function(){BN.uXHR.Form.apply(this)});var b={title:null,message:null,items:null},c="amplifiForm",d=$.extend(b,{title:"Server Error",message:"An unexpected error has occurred. Please refresh your page and try again. If this problem persists, please contact customer support."}),e={beforeSerialize:function(a,b){return $(a).triggerHandler(c+"BeforeSerialize",[b])},beforeSubmit:function(a,b,d){var e=$(b);return BN.Validate.ClearErrors(e),e.triggerHandler(c+"BeforeSubmit",[a,d])},error:function(b,e,f){BN.Validate.DisplayErrors(a,[d.message],"","","",b),a.triggerHandler(c+"Error",[f||{},b,e,d])},success:function(b,e,f){a.triggerHandler(c+"BeforeResponseParse",[b,f,e,null]),"undefined"!=typeof BN_IS_IE9&&BN_IS_IE9&&(b=b.jsonpkey);try{"object"!=typeof b&&(b=$.parseJSON(b))}catch(g){return consoleLog(b),"undefined"!=typeof b&&null!=b?void a.triggerHandler(c+"Success",[b,f,e,b.response]):(BN.Validate.DisplayErrors(a,[d.message]),void a.triggerHandler(c+"Error",[{},f,e,d]))}if(b.success){eventName="Success";var h=a.triggerHandler(c+"Success",[b,f,e,null]);return void(h!==!1&&void 0!=b.redirect&&(window.location=b.redirect))}BN.Validate.DisplayErrors(a,b.response.items,b.response.properties),a.triggerHandler(c+"Error",[b,f,e,b.response])}};void 0!=a.attr("data-qas")?(consoleLog("NOTICE: Form success yielding to QAS Service",a),BN.QAS.CountryHelperFactory.Bind(a),a.on("success"+BN.QAS.Service.Configuration.eventNamespace,function(b){"checkoutQASReq"==a.attr("id")?a.hasClass("checkout-qas-validate")?"undefined"!=typeof captchaV3ApiKey?(a.addClass("verifiedQASForCaptchaV3"),initRecaptchaV3(".verifiedQASForCaptchaV3",b,e)):a.ajaxSubmit(e):($("#orderSubmitQasCheck").val("true"),$("#memberSubmitOrder").length>0?$("#memberSubmitOrder").click():$("#GuestSubcontinue").removeClass("qas-required").click()):"undefined"!=typeof captchaV3ApiKey?(a.addClass("verifiedQASForCaptchaV3"),initRecaptchaV3(".verifiedQASForCaptchaV3",b,e)):a.ajaxSubmit(e)}),a.on("submit",function(b){b.preventDefault(),void 0!=$(this).attr("data-qas")?BN.QAS.Service.Validate($(this)):a.ajaxSubmit(e)})):a.ajaxForm(e)}};;/*! BARNES-BUILDER 2024-02-21 */
BN.QAS=BN.QAS||{};;/*! BARNES-BUILDER 2024-02-21 */
BN.QAS.CountryHelper=BN.QAS.CountryHelper||function(){var Constructor=function(a){consoleLog("BN.QAS.CountryHelper Initializing, Binding To Form",a);{var b=this.$form=$(a),c=this.$state=b.find("select.address-state-selecter"),d=(this.$phoneNumber=b.find("#phoneNumber"),this.$country=b.find("select.address-country-selecter"));this.$zipCode=b.find("#zipCode")}d.attr("data-value")||d.val()||d.selectBox("value","US"),d.attr("data-country-value")&&d.selectBox("value",d.attr("data-country-value")),this.$stateTpl=c.clone(),this.defaultState=this.current.state=this.$stateTpl.val(),this.$stateTpl.empty(),this.init()};return Constructor.prototype={$form:null,$country:null,$state:null,$stateTpl:null,defaultState:null,current:{country:null,state:null},init:function(){var a=this,b=this.$phoneNumber.parent().find(".phoneRegex");this.$country.on("change click keyup keydown keypress focus blur focusin focusout",function(){var b=$(this).val(),c=a.current.country;return c&&b==c.key?!0:void a.initializeCountry(b)}),this.initializeCountry(this.$country.val()||"US",this.defaultState,b)},initializeCountry:function(id,state,phoneRegexContainer){consoleLog("Initialize country",id);{var Country=this.current.country=BN.QAS.CountryHelperFactory.getCountryByID(id);this.$state.parent()}Country||consoleError("BN.QAS.CountryHelper: Country not found: "+id),jQuery.isEmptyObject(Country.states)?(consoleWarn("BN.QAS.CountryHelper: No state or province list exists for the country selected; Replacing dropdown with textual input."),this.createStateInput(),this.$state.parent().find("label").attr("style","z-index:2;")):(this.current.state=state,this.createStateSelect(),this.$state.parent().find("label").attr("style","z-index:0;"));var internationalPhoneRegex,USValidPhoneRegex;void 0!=phoneRegexContainer&&0!=phoneRegexContainer.length?$.each(phoneRegexContainer,function(a,b){"defaultPhoneRegex"==b.id?USValidPhoneRegex=b.value:internationalPhoneRegex=b.value}):(USValidPhoneRegex=$("#defaultPhoneRegex").val(),internationalPhoneRegex=$("#internationalPhoneRegex").val()),"US"==id||"AS"==id||"GU"==id||"MP"==id||"PR"==id||"VI"==id?(this.$phoneNumber.attr("pattern",USValidPhoneRegex),this.$zipCode.attr("pattern","^\\d{5}(-\\d{4})?$")):"CA"==id?(this.$phoneNumber.attr("pattern",USValidPhoneRegex),this.$zipCode.attr("pattern","^[abceghjklmnprstvxyABCEGHJKLMNPRSTVXY]{1}\\d{1}[a-zA-Z]{1} *\\d{1}[a-zA-Z]{1}\\d{1}$")):(this.$phoneNumber.attr("pattern",internationalPhoneRegex),this.$zipCode.attr("pattern","^[0-9a-zA-Z .-]*$")),this.$zipCode.attr("data-errormessage-pattern-mismatch","The Zip Code is not in a valid format for your country. Please check your entry and update it accordingly.");var that=this;with(this)$form.triggerHandler("amplifiCountryChange",[that,current,$form,$country,$state]);$(".selectBox-dropdown-menu").attr("role","listbox")},createStateInput:function(){var a=this,b=$("<input/>"),c=this.$stateTpl.clone(),d=c.prop("attributes");$.each(d,function(){b.attr(this.name,this.value)}),b.attr({type:"text",role:"textbox","aria-label":"state",tabindex:a._getStateTabIndex}),b.removeAttr("required"),this._replaceStateElement(b)},createStateSelect:function(){var a=this.current.country,b=(this.current.state,a.states),c=this.$stateTpl.clone(),d=$("<option/>");d.attr("value","").html("&nbsp;"),c.append(d);for(var e in b)if(b.hasOwnProperty(e)){var f=$("<option/>");f.attr("value",e),f.text(b[e]),c.append(f)}c.attr("required","required"),this._replaceStateElement(c),c.removeAttr("tabindex");var g="#"+c.attr("id"),h=$(this.$state).next(".selectBox-container").find("a.address-state-selecter");h.attr("tabindex",this._getStateTabIndex);var i=$(g),j=i.parent(),k=j.find("label:first"),l=j.find(".selectBox-dropdown"),m=j.find(".selectBox-dropdown-menu"),n=l.find(".selectBox-label"),o=i.attr("id");i.attr("aria-hidden","true"),n.attr("id",o+"-button-label"),m.attr({id:o+"-option-list",role:"listbox"}),m.find("li").each(function(a){$(this).attr("id",o+"-option-"+a),$(this).is(m.find("li:first"))&&$(this).text().length<2?$(this).attr("role","presentation"):$(this).attr("role","option")}),""!==o&&k.attr({"for":o+"-replacement",id:o+"-label"}),0===k.length?l.attr("aria-labelledby",o+"-button-label"):l.attr("aria-labelledby",o+"-label "+o+"-button-label"),l.attr({id:o+"-replacement","aria-expanded":"false"}).bind("keydown",function(a){switch(a.which){case 9:case 13:case 27:"true"==l.attr("aria-expanded")||m.not(":visible")?(l.attr("aria-expanded","false").removeAttr("aria-activedescendant"),m.attr("aria-hidden","true")):(m.attr("aria-hidden","false"),l.attr("aria-expanded","true").attr("aria-activedescendant",b));break;case 37:case 38:case 39:case 40:"false"==l.attr("aria-expanded")&&(l.attr("aria-expanded","true"),m.attr("aria-hidden","false"));var b=m.find(".selectBox-selected:first").attr("id");l.attr("aria-activedescendant",b)}})},_replaceStateElement:function(a){this.$state.replaceWith(a),this.$state=a;var b=this.$state.siblings(".selectBox-container, .selectBox");b.remove(),this.$state.attr("style",""),this.$state.val(this.current.state),this.$state.is("select")&&this.$state.selectBox()},_getFirstState:function(a){return Object.keys(a.states)[0]},_getStateTabIndex:function(){var a=$("#city").attr("tabindex");return a?Number(a)+1:0}},Constructor}(),BN.QAS.CountryHelperFactory=BN.QAS.CountryHelperFactory||function(){var a=function(){};return a.prototype={Bind:function(a){var b=$(a);b.each(function(){new BN.QAS.CountryHelper(this)})},getCountryByID:function(a){return BN.Data.Countries[a]||null}},new a}();;/*! BARNES-BUILDER 2024-02-21 */
BN.QAS.Service=BN.QAS.Service||function(){var a=function(){consoleLog("BN.QAS.Service Initializing (Quick Address System JavaScript Assistant)")};return a.prototype={Configuration:{domSelector:"input,select",domAttrName:"name",domParametersMap:{address1:/^\/.+?address1$/i,address2:/^\/.+?address2$/i,city:/^\/.+?city$/i,state:/^\/.+?state$/i,postalCode:/^\/.+?postalCode$/i,country:/^\/.+?country$/i},eventNamespace:".QAS"},Forms:[],Validate:function(a,b){var c=this._formExists(a),d={context:a,validator:c||new BN.QAS.Address(a,b)};return d.validator},_formExists:function(a){for(var b=this.Forms,c=0;c<b.length;c++){var d=b;if($(a)[0]==d.context)return d.validator}return void 0}},new a}();;/*! BARNES-BUILDER 2024-02-21 */
BN.QAS.Address=BN.QAS.Address||function(){var a=function(a,b){consoleLog("BN.QAS.Address Initializing (Quick Address System JavaScript Assistant)"),this.form=a,this.config=b||BN.QAS.Service.Configuration,this.Validate()};return a.prototype={config:null,form:null,modal:null,matches:null,values:null,serviceResponse:null,Validate:function(){var a=this,b=$(this.form),c=this.config.eventNamespace,d=this.matches=this.__getMatchingElements(b),e=this.values=this.__getMatchValues(d);return b.triggerHandler("before"+c,[null,e,d])===!1?(consoleLog("QAS Validation Aborted..."),b.triggerHandler("failure"+c,[!1,e,d]),b.triggerHandler("result"+c,[!1,e,d]),!1):this.__isAddressValid(e)?void BN.uXHR.getService("qas",e,function(){return a.handleServiceSuccessResponse.apply(a,arguments)},function(){return a.handleServiceErrorResponse.apply(a,arguments)}):(b.triggerHandler("success"+c,[!0,e,d]),b.triggerHandler("result"+c,[!0,e,d]),!0)},handleServiceSuccessResponse:function(a){consoleLog("QAS Success",arguments);var b=this,c=$(this.form),d=this.config.eventNamespace;a&&a.service&&a.service.verificationType||(consoleError("QAS Response: Malformatted Response...",a),c.triggerHandler("failure"+d,[!1,this.values,this.matches]),c.triggerHandler("result"+d,[!1,this.values,this.matches])),this.serviceResponse=a.service;var e=a.service.verificationType,f="matches-ra",g=a.service.address||"",h=a.service.suggestions.length>0?a.service.suggestions[0]:"";if("Verified"==e&&this.__isAddressEqual(g,h))return"checkoutQASReq"==c.attr("id")&&c.hasClass("checkout-qas-validate")&&c.removeClass("checkout-qas-validate"),this.selectAddress(0),!0;switch(c.triggerHandler("failure"+d,[!1,this.values,this.matches]),c.triggerHandler("result"+d,[!1,this.values,this.matches]),e){case"":f="noconnection-ra";break;case"No matches":f="nomatches-ra";break;case"StreetPartial":f="partial-ra";case"PremisesPartial":f="partial-ra";break;case"InteractionRequired":f="matches-ra";break;default:f=this.__isAddressValid(a.service.suggestions[0])?"matches-ra":"nomatches-ra"}a.service.qas=this,a.service.selectAddress=function(a){b.selectAddress(a)},a.service.replaceAddress=function(a){b.replaceAddress(a)};var i=Modal.getModalForDom(c[0]);a.service.target=c.find("*[type=submit]").first(),a.service.suggestions=$.grep(a.service.suggestions,function(a){return"ND"!==a.postalCode.substring(a.postalCode.length-2)});var j=a.service.suggestions.length>1?"multiple":"single";defaultOptions={tplParams:{addressCount:j}},this.modal=void 0!=typeof j?new BN.Modal.QAS.Base(f,a.service,defaultOptions,i):new BN.Modal.QAS.Base(f,a.service,null,i)},handleServiceErrorResponse:function(){consoleError("QAS Error",arguments);var a=$(this.form),b=this.config.eventNamespace;a.triggerHandler("failure"+b,[!1,this.values,this.matches]),a.triggerHandler("result"+b,[!1,this.values,this.matches])},replaceAddress:function(a){this.serviceResponse.suggestions=[a],this.selectAddress(0,!0)},selectAddress:function(a,b){consoleLog("QAS: Address Selected",arguments);var c=this,d=$(this.form),e=this.config.eventNamespace;if(d.parents(".modal__dialog").length>0&&d.parents(".modal__dialog").find(".spinner").length>0&&d.parents(".modal__dialog").find(".spinner").remove(),a>-1){var f=this.serviceResponse.suggestions,g=f[a];for(var h in g){var i,j,k=$(this.matches[h]),l=this.__getContentProperty(k);k.length<1||(i=k.attr("type"),j=k.prop("tagName").toLowerCase(),"select"==j&&(i=j),"select"==i&&"value"==l&&k.selectBox?k.selectBox("value",g[h]):k.get(0)[l]=g[h])}d.find("[data-verified]").attr("data-verified","true").val("true")}else b=!1,d.find("[data-verified]").attr("data-verified","false").val("false");b===!0?(d.on("failure"+e,function(){return c.modal&&c.modal.Close&&c.modal.Close(),!0}),BN.QAS.Service.Validate(this.form,this.config)):(d.triggerHandler("success"+e,[!0,this.values,this.matches]),d.triggerHandler("result"+e,[!0,this.values,this.matches]))},__isAddressValid:function(a){return a&&a instanceof Object&&""!=a.address1&&""!=a.postalCode?!0:!1},__isAddressEqual:function(a,b){var c=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(b);if(c.length!=d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(a[f].toLowerCase()!==b[f].toLowerCase())return!1}return!0},__getMatchValues:function(a){var b={};for(var c in a){var d=$(a[c]),e=this.__getContentProperty(d);b[c]=d.get(0)[e]}return b},__getMatchingElements:function(a){var b=this.config.domSelector,c=this.config.domAttrName,d={};$cont=$(a),$matches=$cont.find(b);for(var e=0;e<$matches.length;e++){var f=$($matches[e]),g=f.attr(c);if(g){var h=this.__testValueWithMap(g);h&&(d[h]=f)}}return d},__testValueWithMap:function(a){var b=this.config.domParametersMap,c=!1;for(var d in b){var e=b[d];if(this.__checkValue(a,e)){c=d;break}}return c},__checkValue:function(a,b){return b instanceof RegExp?b.test(a):"string"==typeof b?a==b:!1},__getContentProperty:function(a){var b=$(a)[0];if(!b)return null;if(!b.nodeName)return consoleError("Failed: Invalid DOM element supplied to content property determinor"),null;switch(b.nodeName.toUpperCase()){case"BUTTON":case"SELECT":case"INPUT":return"value";case"IMG":case"SCRIPT":return"src";case"DATA":default:return"innerHTML"}return null}},a}();;/*! BARNES-BUILDER 2024-02-21 */
var UXHR_MANAGE_ADDRESS=SITE_ROOT+"/xhr/handler.jsp?getData=manage-address&action=",isPayment=!1;BN.Items=BN.Items||{Init:function(){consoleLog("BN.Items Initializing (Items Managers)");for(var a=$("[data-itemlist],[data-itemscope]"),b=0;b<a.length;b++){var c=$(a[b]),d=c.attr("data-itemlist")||c.attr("data-itemscope");this.InitForType(d,!0)}consoleLog("BN.Items Initialized")},InitForType:function(a,b){var c=BN.Items.Managers[a];return a&&!c?(consoleLog("Attempting to create manager for "+a),b?BN.Items.Managers[a]=new BN.Items.Manager(a):c=new BN.Items.Manager(a)):a&&(consoleLog("Reinitializing manager for "+a),c.initItems(),c.initListeners()),c},Managers:{},Configuration:{Types:{}},Manager:function(){var a=function(a,b,c){consoleLog("Initializing Manager for "+a),this.type=a,BN.Items.Configuration.Types[a]||consoleError("Error trying to create manage for "+a+"; No configuration found."),c=c||document,this.config=BN.Items.Configuration.Types[this.type],this.$list=$(c).find("[data-itemlist]"),this.initItems(),this.initListeners()};return a.prototype={type:null,items:{},$list:null,config:null,initItems:function(){var a=this,b=this.type,c=this.$list.find('[data-itemscope="'+this.type+'"]');consoleLog("Attempting to initialize items for type "+b),c.each(function(){a.initSingleItem($(this).attr("data-itemid"),$(this),b)})},initSingleItem:function(a,b,c){a&&(c||(c=this.type),b||(b=null),this.items[a]||(this.items[a]=new BN.Items.Item(c,{id:a},b,this)))},initListeners:function(){consoleLog("Attaching event listeners to respective DOM elements...");var a=this,b=this.$list,c=this.type,d=this.config,e=d.actions;if(!b)return void consoleError("Failed: Invalid or Non-Existent DOM object supplied");for(var f in e){var g=null;switch(f){case"add":$('[data-itemcreator="'+c+'"]').not('[data-item-listener="attached"]').each(function(){a.attachActionListener("add",e.add,this)});break;case"status":g||(g="data-itemstatus");case"delete":g||(g="data-itemdelete");case"edit":g||(g="data-itemeditor");for(var h=$('[data-itemscope="'+c+'"] ['+g+"]").not('[data-item-listener="attached"]'),i=0;i<h.length;i++){var j=$(h[i]);a.attachActionListener(f,e[f],j[0])}break;default:consoleWarn("Warning: Invalid action type in configuration: "+f)}}},attachActionListener:function(a,b,c){var d=this;return BN.Items.Actions[b.type]?(consoleLog("Attaching "+a+" listener..."),void $(c).on("click",function(c){c.preventDefault();var e=$(this).parents("[data-itemscope]").first(),f=e.attr("data-itemid"),g=null,h=Modal.getModalForDom(e[0]);f&&(g=d.getItemBy("id",f)),consoleLog("Executing "+a+" listener..."),new BN.Items.Actions[b.type](b,d,g,a,this,h)}).attr("data-item-listener","attached")):void consoleError("Failed: Invalid action type: "+a.type)},getItemBy:function(a,b){for(var c in this.items){var d,e,f;if(d=this.items[c],e=d.data[a],(f=e)&&(e instanceof Object&&(f=e.value),f==b))return d}return null}},a}(),Item:function(){var a=function(a,b,c){consoleLog("Initializing New Item "+a),this.$dom=c,this.data=b,this.type=a,BN.Items.Configuration.Types[a]||consoleError("Error trying to instantiate item for "+a+"; No configuration found."),this.config=BN.Items.Configuration.Types[this.type],this.initData()};return a.prototype={$dom:null,data:null,type:null,config:null,manager:null,revisions:{original:null,last:null,list:[]},"delete":function(){this.$dom.remove()},initData:function(){var a=this,b=this.type,c=this.$dom,d=this.config,e=d.properties.length;if(c)for(var f=0;e>f;f++){var g=d.properties[f],h=c.find('[data-itemprop="'+g+'"]').filter(function(){return $(this).parents('[data-itemprop][data-itemprop!="$'+b+'"]').length<1?this:void 0}),i="";if(0!=h.length){if("$"==g.substring(0,1))i=this.__getSubObjectValue(g.substring(1),h);else{var j=h[0],k=this.__getContentProperty(j);i=(j[k]||"").trim().replace(/[\n\r]/gi,"")}a.data[g]={dom:h,value:i}}}},setValues:function(a){this.saveRevision();for(var b in a){var c=a[b];if(this.data[b]instanceof Object)if("$"!=b.substr(0,1)){for(var d=$(this.data[b].dom),e=0;e<d.length;e++){var f=d[e],g=this.__getContentProperty(f);f[g]=c}this.data[b].value=c}else this.data[b].value.setValues(c);else this.data[b]=c}return this.data},saveRevision:function(){var a={};for(var b in this.data)a[b]=this.data[b];return this.revisions.list.push(a),this.revisions.last=a},fillEditor:function(a){var b=$(a),c=this,d=this.type,e=this.$dom,f=this.config,g=f.properties,h=g.length,i=e.find("a.settings").length,j="",k="";if(i&&"PaymentMethod"==this.type?(k=a.find("#deletePayments"),k&&(j=k.attr("action").replace("payment","settings"),k.attr("action",j),isPayment=!0)):i&&"PostalAddress"==this.type&&!isPayment&&(k=a.find("#deleteAddress"),k&&(j=k.attr("action").replace("addresses","settings"),k.attr("action",j))),e){consoleLog("Filling editor with item values");for(var l=0;h>l;l++){var m=g[l],n=this.getDataValue(g[l]),o=b.find('[data-editprop="'+m+'"]').filter(function(){return $(this).parents('[data-editprop][data-editprop!="$'+d+'"]').length<1?this:void 0});void 0!=n&&null!=n&&("$"==m.substring(0,1)?o.each(function(){n.fillEditor(this)}):(n=$("<div/>").html(n).text(),consoleLog("Injecting values for "+m+" property"),consoleLog(m+" = ",n),o.each(function(){var a=c.__getContentProperty(this);consoleLog("Inserting value into "+a+" DOM property"),"INPUT"==this.nodeName.toUpperCase()&&["checkbox","radio"].indexOf($(this).attr("type"))>-1?$(this).prop("checked",n):("SELECT"==this.nodeName.toUpperCase()&&1===$(this).children().length&&""==$(this).find(":first-child").attr("value")?$(this).find(":first-child").attr("value",n):"SELECT"==this.nodeName.toUpperCase()&&$(this).attr("data-value",n),this[a]=n||"")})))}}},getDataValue:function(a){var b=this.data[a];return this.__evalIfBoolean(b instanceof Object?b.value:b)},__evalIfBoolean:function(a){return"true"==a||a===!0?!0:"false"==a||a===!1?!1:a},__getSubObjectValue:function(a,b){return new BN.Items.Item(a,{},b,this)},__getContentProperty:function(a){var b=$(a)[0];if(!b)return null;if(!b.nodeName)return consoleError("Failed: Invalid DOM element supplied to content property determinor"),null;switch(b.nodeName.toUpperCase()){case"BUTTON":case"SELECT":case"INPUT":return"value";case"IMG":case"SCRIPT":return"src";case"DATA":case"META":return"content";default:return"innerHTML"}return null}},a}(),Actions:{page:function(a){return consoleLog("Redirecting to url: "+a.url),window.location.href=a.url},callback:function(a,b,c){return consoleLog("Executing callback..."),a.callback.apply(c,arguments)}}};;/*! BARNES-BUILDER 2024-02-21 */
function Wishlist(a){this.scope=this,this.wishlist=$(a);var b=this;b.wishlist.find("#wishlistSelect").on("change",function(){var a=$(this).val();window.location=webContextRoot+"/account/wishlist.jsp?giftlistId="+a}),$(document).on("blur","#shareWishlistForm textarea",function(){this.required&&(""==$(this).val()?($(this).removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0)):$(this).val().length>0&&($(this).removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid")))}),$(document).on("change","#selectWishlist",function(){var a=$(this),b=$("#giftListId");b.val(a.val())}),$(document).on("focus blur keyup input propertychange","#newWishlist",function(){var a=$(this),b=$(this).parents("form").find("#giftListName");b.val(a.val())}),$(document).on("click",".swap-list",function(){$("input#giftListId").val("");var a=$(this),b={form:a.data("target")};"exists"==a.data("target")?($(".privacy-settings").addClass("hidden"),$(".privacy-settings").attr("aria-hidden",!0),$(".btn--full-width").attr("tabindex","6"),$("#cancelAddItemToWishlist").attr("tabindex","7")):($(".privacy-settings").removeClass("hidden"),$(".privacy-settings").attr("aria-hidden",!1),$(".privacy-settings").find("label:first").find(".focus-state").attr("tabindex","6"),$(".privacy-settings").find("label:last").find(".focus-state").attr("tabindex","7"),$(".btn--full-width").attr("tabindex","8"),$("#cancelAddItemToWishlist").attr("tabindex","9"),$(".privacy-settings").keydown(function(a){var b=a.keyCode?a.keyCode:a.which;a.shiftKey&&9==b&&$(".wishlist-radio").on("focus",function(){setTimeout(function(){$(this).find(".focus-state").focus()},100)})}));var c=$.ajax({url:webContextRoot+"/modals/account/wishlist-form-ra.jsp",data:b,type:"post",dataType:"html",cache:!1,async:!0});c.done(function(b){var c=$("#wishlistForms");c.html(b),"exists"==a.data("target")?(c.find("select").selectBox(),$("#selectWishlist").change(),$("#exist-wishlist .swap-list").attr("tabindex","4"),$("#exist-wishlist a.selectBox").attr("tabindex","5"),$(".btn--full-width").attr("tabindex","6"),$("#cancelAddItemToWishlist").attr("tabindex","7"),$("#exist-wishlist a.selectBox").keydown(function(a){var b=a.keyCode?a.keyCode:a.which;a.shiftKey||9!=b||($(".btn--full-width").focus(),a.preventDefault())}),$(".btn--full-width").keydown(function(a){var b=a.keyCode?a.keyCode:a.which;a.shiftKey||9!=b||($("#cancelAddItemToWishlist").focus(),a.preventDefault())})):($("#createWishlist .swap-list").attr("tabindex","4"),$("input#newWishlist").attr("tabindex","5"),$(".privacy-settings").attr("aria-hidden","false"),$(".privacy-settings").find("label:first").find(".focus-state").attr("tabindex","6"),$(".privacy-settings").find("label:last").find(".focus-state").attr("tabindex","7"),$(".btn--full-width").attr("tabindex","8"),$("#cancelAddItemToWishlist").attr("tabindex","9"),$(".wishlist-radio:first").attr("aria-label",$(".wishlist-radio:first").find(".radio__text").text()+"radio field"),$(".wishlist-radio:last").attr("aria-label",$(".wishlist-radio:last").find(".radio__text").text()+"radio-field"),$("#createWishlist .text-input").attr("aria-label",$("#createWishlist .text-input").closest("label").text()+"text box"),$("input#newWishlist").on("keydown",function(a){9==a.keyCode&&($("#btnAddItemToWishlist").focus(),a.preventDefault())}),$("#btnAddItemToWishlist").on("keydown",function(a){a.shiftKey&&9==a.keyCode&&($("input#newWishlist").focus(),a.preventDefault())})),$(".btn--full-width").keydown(function(b){var c=b.keyCode?b.keyCode:b.which;b.shiftKey&&9==c&&("exists"!=a.data("target")?($(".wishlist-radio:last .focus-state").focus(),b.preventDefault()):$("#exist-wishlist a.selectBox").focus(),b.preventDefault())}),$(".icon-close-modal").keydown(function(a){a.shiftKey&&9==a.keyCode&&($("#cancelAddItemToWishlist").focus(),a.stopPropagation(),a.preventDefault())}),$(".modal-add-to-wishlist .modal__header h2").keydown(function(a){var b=a.keyCode?a.keyCode:a.which;a.shiftKey||9!=b||($(".product-image--141").focus(),a.preventDefault())}),$(".product-image--141").keydown(function(a){var b=a.keyCode?a.keyCode:a.which;a.shiftKey||9!=b||($(".swap-list").focus(),a.preventDefault())})})})}$(window).on("load",function(){$(".edit-wishlist-link").removeClass("disabled"),$("#wishlistAccordian").removeClass("disabled"),$(".create-wishlist").removeClass("disabled")}),BN.Account=BN.Account||{},$(function(){BN.Account.Wishlist=new Wishlist("section.main-content"),$(".set-wlitem-priority").change(function(){var a=$(this),b=a.closest("form");$.ajax({type:"post",data:b.serialize(),url:webContextRoot+"/xhr/handler.jsp",dataType:"json",beforeSend:function(){b.find(".selectBox").addClass("loading-opacity")}}).done(function(){location.reload()}).always(function(){b.find(".selectBox").removeClass("loading-opacity")})})});;/*! BARNES-BUILDER 2024-02-21 */
!function(a){a.bnAutoSuggest=function(b){var c=this;this.settings=b,this.searchBarElement=a(c.settings.searchInputSelector),this.suggestionsContainer=a(this.settings.suggestionsContainerHtml),this.originalText="",this.updatedText=!1;var d=c.searchBarElement.data("mininputcharactercount");"undefined"!=typeof d&&d>=0&&(c.settings.minInputCharCount=d);var e=c.searchBarElement.data("maxautosuggestcount");"undefined"!=typeof e&&e>=0&&(c.settings.maxAutoSuggestCount=e),c.initializeSuggestionsContainer(),""!=c.settings.overrideInputEvents?that.settings.overrideInputEvents(c):c.bindEvents()},a.bnAutoSuggest.prototype.bindEvents=function(){var b=this;b.searchBarElement.off().on("focus input propertychange",function(){if(!BN_AUTOSUGGEST_IS_IE9){if(b.updatedText)return b.updatedText=!1,!1;b.canGetAutoSuggestions()?b.getAutoSuggestions():b.hideSuggestions(),b.originalText=b.getSearchText()}}),b.searchBarElement.on("blur",function(){b.hideSuggestions()}),b.searchBarElement.keyup(function(a){switch(a.keyCode){case 38:b.moveHighlighted("up");break;case 40:b.moveHighlighted("down");break;case 13:a.preventDefault(),""!=b.getSearchText()&&b.submitSearch();break;case 27:b.hideSuggestions(),b.restoreOriginalText();break;default:if(BN_AUTOSUGGEST_IS_IE9){if(b.updatedText)return b.updatedText=!1,!1;b.canGetAutoSuggestions()?b.getAutoSuggestions():b.hideSuggestions(),b.originalText=b.getSearchText()}}}),b.getFormJqueryElement().on("submit",function(a){""==b.getSearchText()&&a.preventDefault()}),b.suggestionsContainer.on("mouseenter","li",function(){var c=a(this);b.removeHighlightSuggestion(b.suggestionsContainer.find(".selected")),b.highlightSuggestion(c)}),b.suggestionsContainer.on("mouseleave",function(){b.removeHighlightSuggestion(a(this).find(".selected"))}),b.getFormJqueryElement().on("mousedown","a.bn-suggest-link",function(c){c.preventDefault(),b.updateSearchText(a(this)),window.location=a(this).attr("href")}),b.getFormJqueryElement().on("click","a.bn-suggest-link",function(a){a.preventDefault()})},a.bnAutoSuggest.prototype.moveHighlighted=function(b){var c=this.suggestionsContainer.find(".dimResult"),d=c.find("li.selected"),e=c.find("li"),f=-1;return e.length&&d.length&&(f=e.index(d)),"up"==b&&-1==f?!1:"up"==b&&0==f?(this.removeHighlightSuggestion(d),this.restoreOriginalText(),!1):"down"==b&&f==e.length-1?!1:void(d.length?(this.removeHighlightSuggestion(d),"up"==b?(f--,this.highlightSuggestion(a(e.get(f))),this.updateSearchText(a(e.get(f)))):(f++,this.highlightSuggestion(a(e.get(f))),this.updateSearchText(a(e.get(f))))):"down"==b&&(this.highlightSuggestion(a(e.get(0))),this.updateSearchText(a(e.get(0)))))},a.bnAutoSuggest.prototype.restoreOriginalText=function(){this.searchBarElement.val(this.originalText)},a.bnAutoSuggest.prototype.updateSearchText=function(a){var b=a.text();this.updatedText=!0,this.searchBarElement.val(b.replace(/\s+/g," "))},a.bnAutoSuggest.prototype.highlightSuggestion=function(b){b.addClass("focus"),a(b.children()[0]).addClass("focus"),b.addClass("selected")},a.bnAutoSuggest.prototype.removeHighlightSuggestion=function(b){b.removeClass("focus"),a(b.children()[0]).removeClass("focus"),b.removeClass("selected")},a.bnAutoSuggest.prototype.submitSearch=function(){this.getFormJqueryElement().find("#searchSubmit").click()},a.bnAutoSuggest.prototype.submitTypeAhead=function(){this.getFormJqueryElement().click()},a.bnAutoSuggest.prototype.areSuggestionsDisplayed=function(){return this.suggestionsContainer.is(":visible")},a.bnAutoSuggest.prototype.initializeSuggestionsContainer=function(){if(""!=this.settings.overrideInitializeSuggestionsContainer)that.settings.overrideInitializeSuggestionsContainer(this);else{var b=this.suggestionsContainer;this.getFormJqueryElement().append(b);var c=a('<div class="typeahead-results" show><ul class="ut-flyout dimResult"></ul></div>');b.append(c)}},a.bnAutoSuggest.prototype.showSuggestions=function(b){var c=this.getSearchText(),d=this.suggestionsContainer,e=d.find("ul.dimResult");if(e.empty(),b.mainContent[0][this.settings.searchType[0]].length>0||b.mainContent[0][this.settings.searchType[1]].length>0||b.mainContent[0][this.settings.searchType[2]].length>0){var f=!1;a.each(b.mainContent[0][this.settings.searchType[0]],function(a,b){var d=b.pageLink,g=b.url,h=d.split(c.toLowerCase()).join("<span>"+c.toLowerCase()+"</span>");e.append('<li class="nav-header" id="product"><a href="'+g+'" class="bn-suggest-link">'+h+"</a></li>"),f=!0}),f&&e.append("<hr>");var g=!1;a.each(b.mainContent[0][this.settings.searchType[1]],function(a,b){var d=b.suggestion,f=d.split(c.toLowerCase()).join("<span>"+c.toLowerCase()+"</span>"),h=b.url;e.append('<li class="nav-header" id="category"><a  href="'+h+'" class="bn-suggest-link">'+f+"</a></li>"),g=!0}),g&&e.append("<hr>"),a.each(b.mainContent[0][this.settings.searchType[2]],function(a,b){var d=b.suggestion,f=b.url,g=d.split(c.toLowerCase()).join("<span>"+c.toLowerCase()+"</span>");e.append('<li class="nav-header" id="product"><a href="'+f+'" class="bn-suggest-link">'+g+"</a></li>")}),d.show()}else this.hideSuggestions()},a.bnAutoSuggest.prototype.hideSuggestions=function(){this.suggestionsContainer.hide()},a.bnAutoSuggest.prototype.getFormJqueryElement=function(){return a(this.settings.searchInputSelector).closest("form")},a.bnAutoSuggest.prototype.getSearchText=function(){return a.trim(this.searchBarElement.val())},a.bnAutoSuggest.prototype.canGetAutoSuggestions=function(){return this.getSearchText().length>=this.settings.minInputCharCount?!0:!1},a.bnAutoSuggest.prototype.getAutoSuggestionsUrl=function(){return this.searchBarElement.data("autosuggesturl")},a.bnAutoSuggest.prototype.getAutoSuggestions=function(){var b=this,c=b.getSearchText(),d={Ntt:c};"undefined"!=typeof bn_autosuggest_xhr&&null!=bn_autosuggest_xhr&&bn_autosuggest_xhr.abort(),BN_AUTOSUGGEST_IS_IE9?(d.jsonp="bnsuggest",bn_autosuggest_xhr=a.ajax({url:this.getAutoSuggestionsUrl(),data:d,type:"get",cache:!1,dataType:"jsonp",jsonpCallback:"bnsuggest"}).done(function(a){""!=b.settings.overrideSuccessCallback?b.settings.overrideSuccessCallback(a,b):b.showSuggestions(a,b)})):bn_autosuggest_xhr=a.ajax({url:this.getAutoSuggestionsUrl(),data:d,type:"get",cache:!1,dataType:"json"}).done(function(a){""!=b.settings.overrideSuccessCallback?b.settings.overrideSuccessCallback(a,b):b.showSuggestions(a,b)})},a.fn.bnAutoSuggest=function(b){BN_AUTOSUGGEST_IS_IE9="XDomainRequest"in window&&"undefined"!=typeof window.XDomainRequest?!0:!1;var c=a.extend({},a.fn.bnAutoSuggest.defaults,b);new a.bnAutoSuggest(c)},a.fn.bnAutoSuggest.defaults={searchInputSelector:"",minInputCharCount:2,maxAutoSuggestCount:5,serviceUrl:"",suggestionsContainerHtml:'<div id="headSearchTypeAheadHolder" style="display: none;"></div>',searchType:["pageLinkSuggestion","categorySuggestions","productSuggestions"],overrideSuccessCallback:"",overrideInitializeSuggestionsContainer:"",overrideInputEvents:""}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function(a){function b(b){if(b.is(":visible")){var c=a(".error-msg.alert.alert--error").find("em"),d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=!1,o=!1,p=!1;if(b.is(":visible")){var c=a(".error-msg.alert.alert--error").find("em");a.each(c,function(a,b){b.innerText.includes("Your password must meet all")&&(d=!0)})}if(p=d,0==d&&a.each(c,function(a,b){1==b.innerText.includes("Password field")&&0==b.innerText.includes("Confirm")&&(e=!0),b.innerText.includes("Confirm Password field")&&(f=!0),b.innerText.includes("Security Question")&&(g=!0),b.innerText.includes("Security Answer")&&(h=!0),b.innerText.includes("New Password field")&&(i=!0),b.innerText.includes("Re-enter New Password field")&&(j=!0),b.innerText.includes("Confirm New Password field")&&(k=!0),b.innerText.includes("Please enter your Password")&&(l=!0),b.innerText.includes("Please re-enter your Password")&&(m=!0),b.innerText.includes("Please select a secret question")&&(n=!0),b.innerText.includes("Please enter your secret question answer")&&(o=!0)}),0==d)if(1==f)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Confirm Password field cannot")&&a(".error-msg.alert.alert--error").find('em:contains("Confirm Password field cannot")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==j)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Re-enter New Password field")&&a(".error-msg.alert.alert--error").find('em:contains("Re-enter New Password field")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==k)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Confirm New Password field")&&a(".error-msg.alert.alert--error").find('em:contains("Confirm New Password field")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==i)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("New Password field")&&a(".error-msg.alert.alert--error").find('em:contains("New Password field")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==e)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){1==c.innerText.includes("Password field")&&0==c.innerText.includes("Confirm")&&a(".error-msg.alert.alert--error").find('em:contains("Password field cannot be left blank")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==g)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Security Question")&&a(".error-msg.alert.alert--error").find('em:contains("Security Question")').prepend("<em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em><br/>")});else if(1==h)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Security Answer")&&a(".error-msg.alert.alert--error").find('em:contains("Security Answer")').prepend("<em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em><br/>")});else if(1==l)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Please enter your Password")&&a(".error-msg.alert.alert--error").find('em:contains("Please enter your Password")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==m)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Please re-enter your Password")&&a(".error-msg.alert.alert--error").find('em:contains("Please re-enter your Password")').append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")});else if(1==n)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Please select a secret question")&&a(".error-msg.alert.alert--error").find('em:contains("Please select a secret question")').prepend("<em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em><br/>")});else if(1==o)a.each(a(".error-msg.alert.alert--error").find("em"),function(b,c){c.innerText.includes("Please enter your secret question answer")&&a(".error-msg.alert.alert--error").find('em:contains("Please enter your secret question answer")').prepend("<em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em><br/>")});else{if(b.is(":visible")){var c=a(".error-msg.alert.alert--error").find("em");a.each(c,function(a,b){b.innerText.includes("Your password must meet all")&&(d=!0)})}0==d&&a(".error-msg.alert.alert--error").find("em:last-child").append("<br/><em class='emphasis emphasis--alert'>Your password must meet all our security requirements.</em>")}}}function c(b){var c,i,c=b.data,j=a.pwstrength(b,a(this).val(),c.userfirstname,c.userlastname,c.usersubmitted);i=c.classes[j],c.indicator.removeClass(c.indicator.data("pwclass")),c.indicator.data("pwclass",i),c.indicator.addClass(i),c.indicator.find(c.label).html(c.texts[j]),1==c.usersubmitted||"true"==c.usersubmitted?a.each(e,function(b,c){a("."+c).removeClass("pwdvalid").removeClass("pwdinvalid").addClass("pwderror"),a("."+c).find(".password-indicator-icon span").attr("class","icon-close-modal")}):a.each(e,function(b,c){a("."+c).removeClass("pwdvalid").removeClass("pwderror").addClass("pwdinvalid"),a("."+c).find(".password-indicator-icon span").attr("class","");var d=a("."+c).attr("id")+"_ada";a("."+c).hasClass("pwdinvalid")&&a("."+d).text(a("."+c).text()+" not checked")}),a.each(d,function(b,c){a("."+c).removeClass("pwdinvalid").removeClass("pwderror").addClass("pwdvalid"),a("."+c).find(".password-indicator-icon span").attr("class","icon-check");var d=a("."+c).attr("id")+"_ada";a("."+c).hasClass("pwdvalid")&&a("."+d).text(a("."+c).text()+" checked")});for(var k=0;f>k;k++){if(a(a("#pwdindicatorUL").find("li")[k]).hasClass("pwdinvalid")?h[k]=!1:a(a("#pwdindicatorUL").find("li")[k]).hasClass("pwdvalid")&&(h[k]=!0),1==h[k]&&0==g[k])a(".validText").text(a(".validText").text()+a(a("#pwdindicatorUL").find("li")[k]).text()+"checked "),a(".validText").attr("role","alert");else if(0==h[k]&&1==g[k]){var l=a(a("#pwdindicatorUL").find("li")[k]).text()+"checked ";a(".validText").text(a(".validText").text().replace(l,""))}g[k]=h[k]}}for(var d=[],e=[],f=a("#pwdindicatorUL").find("li").length,g=[],h=[],i=0;f>i;i++)g[i]=!1;a.pwstrength=function(a,b,c,f){var g,h,i=0,j=b.length,k="";return d.length=0,e.length=0,j>=8?(i++,d.push("pwdlength")):e.push("pwdlength"),g=b.match(/[A-Z]/g),g?(i++,d.push("pwdcapital")):e.push("pwdcapital"),h=b.match(/\d/g),h&&h.length>=1?(i++,d.push("pwdnumber")):e.push("pwdnumber"),void 0!=c&&void 0!=f?k=c.concat(f):void 0!=c&&void 0==f?k=c:void 0==c&&void 0!=f&&(k=f),""!=b&&b.toLowerCase()!==k.toLowerCase()?(i++,d.push("pwdusermatch")):e.push("pwdusermatch"),1==i?0:i>1&&3>=i?1:4==i?2:3},a.fn.pwstrengthError=function(c,f,g,h,i,j,k){var f=a.extend({label:".label",classes:["pw-weak","pw-mediocre","pw-strong","pw-normal"],texts:["Weak","Medium","Strong",""]},f||{});f.indicator=a(".pwindicator"),f.userfirstname=h,f.userlastname=i,f.usersubmitted=!0;{var f,l=""!=g?g:a(this).val();a.pwstrength(c,l,f.userfirstname,f.userlastname,f.usersubmitted)}e.length>0&&(a.each(d,function(b,c){a("."+c).removeClass("pwdinvalid").removeClass("pwderror").addClass("pwdvalid"),a("."+c).find(".password-indicator-icon span").attr("class","icon-check")}),a.each(e,function(b,c){a("."+c).removeClass("pwdvalid").addClass("pwderror"),a("."+c).find(".password-indicator-icon span").attr("class","icon-close-modal")}),j.val(g),setTimeout(function(){b(k)},100))},a.fn.pwstrength=function(b,d,e,f,g){var d=a.extend({label:".label",classes:["pw-weak","pw-mediocre","pw-strong","pw-normal"],texts:["Weak","Medium","Strong",""]},d||{});return d.indicator=a(".pwindicator"),d.userfirstname=e,d.userlastname=f,d.usersubmitted=g,this.keyup(d,c)}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
BN.Validate.SetAllMessages({unamePassNotValid:"Your email and password combination does not match our records.  Please try again.",deviceOverBought:"Sorry, there is a 5 per-customer limit on the item you have selected; please remove one or more device items from your shopping cart.",validInstantPurchase:"Please enter a valid InstantPurchase.",validExpMonth:"Please enter a valid ExpirationMonth.",emailMissing:"Please enter your email address.",fewItemsAvailableForBackorder:"We are sorry, we have only &lt;b&gt;java.lang.Object@30668d6a&lt;/b&gt; backorderable items for &lt;b&gt;{1}&lt;/b&gt;.",childNameMissing:"Please enter the child&amp;#39;s name.",noUserLogged:"User is not logged in.",missingUserDevice:"There is no device associated with your account.",cityReq:"City is required field.",emailLengthExceeded:"Email should not exceed 40 characters.",emailNotFound:"We are not able to find a BN.com account associated with that email address. Please check the address again or create a new account.",giftCardEmailMissing:"Please enter the gift recipients email address.",noCouponFound:"Coupon code java.lang.Object@1cce42f9 is not valid. Please check the code on your coupon and try again.",enterSecretQuestion:"Please select a secret question.",itemAlreadyCancelled:"The selected item(s) were already cancelled.",preOrderNowMessage:"Order now and choose Expedited delivery and select &amp;#34;Send each item as available&amp;#34; during checkout.",orderDetailSgHeadingMarket:"Items from Marketplace Seller",commentaryDataInValid:"Commentary data is not in valid XML format.",creditCardTokenReq:"Credit Card Token is required field.",emailInvalid:"You have entered an invalid email address.  Please check your email address and retry.",errorAddingItemSaveForLater:"We encountered a problem while adding the item to your Wishlist.  Please try again.",validContactPostalMail:"Please enter a valid ContactByPostalMail.",upsShippingLabelError:"We are experiencing a problem with printing your label (UPS error code java.lang.Object@298ef835). Please contact Customer Service.",mktPlaceItemIsNotEligible:"We&amp;#39;re sorry but the java.lang.Object@694974e3 of {1} does not ship to your address. Please return to the cart to remove this item.",yearMissing:"Please select the child&amp;#39;s birth year.",orderDetailSgmpandmagazine:"Information about this order was emailed to you",3:"Bad request. Please check input.",2:"Service Unavailable",notEligibleForInstantPurchase:"Sorry, this item is not available for Instant Purchase.",missingPassword:"Please enter a valid password &amp; confirm password.",1:"Server Error",passwordMissMatch:"Entered password doesn&#039;t match.",emailBlank:"Please enter your email address.",unsupportedRelationship:"The Relationship of type java.lang.Object@55991915 is not supported.",invalidGcPin:"The pin number is not valid.  Please check the number and try again.",TokenIdIsNull:"We were unable to process your credit card.  Please enter a valid credit card.",amexcardFirstName:"American Express cards have a limit of 15 characters for first name.  Please check the first name on your card and try again.",appliedMembershipPromoDefaultCopy:"You are eligible on qualified items &lt;i&gt;for&lt;/i&gt; &lt;span class=free-ship free-qualified&gt;Free Express Delivery&lt;/span&gt;",errorMovingToPurchaseInfo:"There was an error moving to the purchase info page.",InvalidOrderManagerParameter:"Invalid OrderManager parameter.",exceededResetPwAttempts:"You have exceeded 3 reset password attempts, please try again after 30 minutes.",invalidEmployeeId:"The employee ID you entered is not valid.  Please check your ID and try again.",phoneLengthExceeded:"Phone Number should not exceed max of 40 characters.","vertex.instant.purchase.invalid.address":"We&#039;re sorry but your shipping zip code is invalid. Please update your default shipping/billing address in your account.",orderNowMessage:"Order now and choose Expedited Delivery during checkout.",duplicateAddressFound:"This address has already been added to your account.",rentalInfoMissing:"rental information is missing.",orderDetailSgHeadingRental:"Rental Items",errorTryAgain:"There was an error, please try again.",errorAddingCoupon:"There was an error adding the promotion to the order.",productsEmpty:"Please select valid products.",removedPaymentSuccess:"Your payment method has been removed.",giftCardMaxAmount:"Your gift card order total exceeds the $1,000 per-order limit. Please adjust the number of cards or value per card to reduce your order total. If you wish to place a gift cards order for more than $1,000, please contact our &lt;a href=&#034;http://www.barnesandnoble.com/custserv/custmail_gc.asp?&#034;&gt;Bulk Orders Department&lt;/a&gt;.",validDate:"Please enter a valid date.",exceededLoginAttempts:"You have exceeded 6 login attempts, please try again after 30 minutes.",memberTermAndCondition:"Please accept the Terms &amp; Conditions.",upsShippingLabelDefaultError:"We are experiencing a problem with printing your label. Please contact Customer Service.",creditCardNumberMissing:"Please enter the Card Number.",enterValidAssociteID:"Please enter a valid Bookseller Associate ID.",secretAnswerLength:"Please enter a security answer between 4 to 15 characters.",validGiftPin:"The Gift Card pin you entered is not valid.  Please check your pin number and try again.",missingMembershipId:"Please enter your member number.",errorAddingItemWishlist:"We encountered a problem while adding the item to your Wishlist.  Please try again.",itemAlreadyPurchased:"You do not need to buy this item since you already purchased it before.",kidsClubAlreadyRegistered:"There is already a Kids&amp;#39; Club account associated with your account.",duplicateGC:"This Gift Card has already been added to your account.",InvalidAddress:"A null address was supplied for verification.",rentalGiftCardError:"We&amp;#39;re sorry, but in order to place a rental order with a gift card, you must also provide a valid credit card.",errorUpdateProtectionQty:"The quantity was not updated because you cannot have more java.lang.Object@363ddd9a in your order than {1}.",booksellerLogged:"You must be signed into the Bookseller Associate account in order to lookup a customer.",secretAnswerMissing:"Please enter a security answer.",phoneNumberInvalid:"Please enter a valid Phone Number.",penNameError:"There was an error saving the Pen Name, please try again.",noEmailRetrieved:"No email retrieved for the user to login.",itemQuantityMoreThanMax:"java.lang.Object@179fc548 quantity is more than the maximum permitted value of {1}.",orderIdNotPresent:"We cannot find an order associated with the order number. Please check your information and try again.",validExpYear:"Please enter a valid ExpirationYear.","test.key.number.three":"rwar",emailSignupUnavailable:"Email signup is currently not available.",enterConfirmPassword:"Please re-enter your Password.",faxLengthExceeded:"Fax Number should not exceed max of 30 characters.",giftWrapNotAllowed:"This item is not eligible for gift wrap.",address2Missing:"Please enter the complete Street Address.",gcAlreadyApplied:"This gift card has already been applied to your order.",mercuryIdReq:"Mercury User Id is required field.",ccNotInAtgForMercuryUpdate:"Credit card does not exists in Atg for update.",confirmEmailMissing:"Please confirm your email address.",associateLoggedIn:"Associate is already logged in this computer.",nameOnCardLengthExceeded:"Name on the card should not exceed max of 30 characters.",bookFairEnded:"This book fair has ended.",emailReq:"Email is required field.",qaNotmatch:"The security question and answer are incorrect.",lastModifiedReq:"Last Modified is required field.",validContactEmail:"Please enter a valid ContactByEmail.",errorAddRentalItem:"We encountered a problem while adding the rental to your Shopping Bag. Please try again.  If you continue to encounter a problem, please contact customer service.",gcNotFound:"Gift Card java.lang.Object@7a510615 was not found.",noItemsInCart:"There are no items in your Shopping Bag.",emptyGiftcardNumber:"Please enter your Gift Card number.",couponNotEntered:"Coupon Code cannot be blank. Please enter a valid Coupon Code.",confirmPasswordMissing:"Please enter the confirm password.",ipShippingMissing:"You do not have a default shipping address set, &lt;a href=&#034;/account/manage/addresses/&#034;&gt;Manage Default Address&lt;/a&gt;.",emptyGCNumber:"Please enter your gift card number.",lastNameLengthExceeded:"Last Name should not exceed max of 40 characters.",tooLong:"The entered text is too large! You used {%valueLen} letters and the limit is {%maxlength}.",postalCodeInvalid:"Please enter a valid Postal/Zip Code.",kidNotRegistered:"We are sorry, Kids Club is not registered with this Profile.",invalidGiftCard:"The gift card number you entered is not valid.  Please check the number and try again.",cityMissing:"Please enter the City.",numberOfChildsLimit:"You have reached the maximum number of children you can add to your B&amp;N Kids&amp;#39; Club™ profile.",giftCardError:"Please enter a valid Gift Card/Pin number.",recipientEmailInvalid:"Please enter a valid email address.",ccExpired:"The expiration date that you entered is not valid. Please check your expiration date and try again.",marketPlaceAddressValidationFail:"The Marketplace item in your cart cannot be shipped to the shipping address you have chosen. Please remove the item or ship to a different address.",loginAsDiffAssociate:"Please logout to login as different associate.",requireCVV:"Please enter your Security Code to proceed.",failedInventoryCheck:"Item is not in stock.",qtyMoreThanPrevntedQty:"java.lang.Object@5d668b6f The quantity you have added to your cart ({1}) is greater than the maximum permitted value of {2}.  Please update your requested quantity.",alreadyHaveMembership:"The membership number you entered is already associated with your account.",duplicateCreditcard:"Given credit card/ billing address already exists in your profile, so please update the card or choose a saved billing address.",selectMemberType:"Please select your membership type.",itemNotAllowedForPurchase:"Unfortunately  &lt;b&gt; java.lang.Object@774c5450 &lt;/b&gt; is no longer available for purchase. Please navigate back to your cart, remove it from your cart, and checkout again.",errorAddToCart:"There was an error adding to the cart. Please try again.",quantityLessThanZero:"Quantity is less than 0.",paypalAccountProblem:"Were sorry but there seems to be a problem with your Paypal account. Please choose another payment method.",orderDetailSgHeadingElectronic:"Delivered Electronically",invalidOrderNumber:"Please enter valid order number.",giftCardValueOutOfRange:"Gift cards must have a value between $10 and $350.",billingAddressNotFound:"Selected Address is not found.  Please enter new address.",loginMissing:"Please enter your email address.",profileWithOutDefaultCard:"Please ensure that default credit cards are set on your account to proceed.",InvalidPaymentGroupParameter:"Invalid PaymentGroup parameter.",missingPaymentMethod:"Please select a payment method (Check or PayPal).",freeMembershipAvailable:"You already have a free membership associated with your account.",invalidMembershipData:"The information you entered is not valid.  Please try again.",memberNumberMissing:"Please enter Member Number.",userExists:"An account already exists with this login.",enterValidBookFairId:"The Book Fair ID you entered is not valid. Please check the ID and try again.",generalUvError:"There was an error displaying the UltraViolet sign in page.",cannotPurchaseRental:"Sorry, Rental Purchase Can not be done now. Please try after some time.",stateReq:"State is required field.",loginToAssociateMembership:"Please login to link your membership",cartAddAmountToGetFreeShippingMobile:"Add &lt;span class=&#034;promo-price&#034;&gt;$java.lang.Object@34338d60&lt;/span&gt; of eligible items to qualify &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt;",missingCreditCardFields:"Sorry, your saved credit card information is missing required field(s).  Please correct and click &#034;Save&#034;",orderDetailSgAvailable:"Available immediately in your",noAddCart:"This item could not be added to your Shopping Bag.",missingMemberId:"Member number is missing.",enterKidsClubId:"Please Enter your Kids&amp;#39; Club Number.",giftMessageInvalid:"Gift message is required.",commentaryIdNotExist:"Commentary item with java.lang.Object@2486b466 does not exists.",cartAddAmountToGetFreeShipping:"Add &lt;span class=&#034;promo-price&#034;&gt;$java.lang.Object@7ada746&lt;/span&gt; of eligible items to qualify &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt; - &lt;a href=&#034;#&#034; data-modal-class=&#034;BN.Modal.Account.FreeShippingDetails&#034;&gt;Details&lt;/a&gt;",serviceIssue:"An unexpected error occurred.  Please try again.  If you continue to encounter a problem, please contact customer service.",addressAddedSuccess:"Your address has been added.",FreeMembershipUsed:"There is already a membership associated with this account.  There is a 1 membership per account limit; you may renew your membership.",stepMismatch:"The value {%value} is not allowed for this field. Only certain values are allowed for this field. {%title}",enterMemberId:"Please enter your Member number.",atg_flags:"i18n,l10n",newPasswordMissing:"Please enter a new password.",duplicateBillingAddressFound:"This billing address has already been added to your account.","vertex.invalid.address":"We&#039;re sorry but the shipping zip code entered is invalid. Please enter a valid zip code.",userCredentialsNotFound:"Your ID and password combination was not recognized.  Please check and try again.",passwordMissing:"Please enter your password.","typeMismatch\\.url":"{%value} is not a valid web address.",appliedMembershipPromotionCopy:"Your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=free-ship free-qualified&gt;java.lang.Object@19c0e89a&lt;/span&gt;",itemNotAllowedToCancel:"The selected item(s) is not eligible for cancellation.",marketPlaceInventoryUnavailable:"The following marketplace item(s) are no longer available from the seller you chose: java.lang.Object@47e6e3ab. Please remove them from your order and select from another seller on the product details page.",miniCartFreeShippingMobile:"Your order qualifies for &lt;span class=&#034;free-ship free-qualified&#034;&gt;Free Shipping!&lt;/span&gt;",loginAndConfirmloginMissmatch:"Please check your login and try again.",appliedMembershipPromotionDefaultCopy:"Your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=free-ship free-qualified&gt;Free Express Delivery&lt;/span&gt;",cannotExtendRental:"Sorry, rental extension is not available now. Please try after some time.",membershipAssociated:"The member number you entered is associated with another account.  Please check your number and try again.",lastModifiedDateEarlierToCreateDate:"Last Modified date should be later than created date.",ErrorInCanceledItemsToMA:"Please select a reason for the cancellation.",ambiguousInputForAdd:"There was conflicting input for adding items to the order.","ma-error-post-order-edit":"Order cannot be updated at this time.",secretQuestionMissing:"Please select a security question.","typeMismatch\\.number":"{%value} is not a number!",noWishlist:"There is no wishListItem.",lastModDateReq:"Last Modified date is required field.","typeMismatch\\.range":"{%value} is not a number!",addressNickNameReq:"Address Nick Name is required field.",missingMembershipType:"Please select the membership type.",giftCardNoAmountRemaining:"Gift Card java.lang.Object@76d146e has a balance of $0.00.",valueMissing:"{%label} field cannot be left blank",orderDetailSgHeadingBNItems:"Items from Barnes &amp; Noble",validExplicitContentSetting:"Please enter a valid ExplicitContentSetting.",oldPasswordSameAsNewPassword:"New Password &amp; Old Password cannot be same.",shareMaxWishlist:"You may share your Wishlist with up to a maximum of 25 email addresses.  Please reduce the number of email addresses to 25 or less.",giftCardQtyExceeded:"There is a 99 per-customer gift card limit for the order.",itemNotFound:"We are sorry, The item you have selected cannot be canceled.",invalidEmail:"Please enter a valid email address.",errorMagzSubscriptionAlreadyAdded:"You are already subscribed to this magazine.",invalidEducatorId:"The BN Educator Card Number you entered is not valid.  Please check your number and try again.",duplicateEmagazineSubscription:"You cannot add the subscription into the cart because there is already another subscription for this magazine in your cart.",minMaxGC:"The Gift Card number you entered is not valid.  Please check your card number and try again.",invalidArrivalDate:"Please enter valid Arrival Date.",missingRequiredFields:"Sorry, your saved default billing information is missing required field(s).  Please correct and click &#034;Save&#034;",errorKidsClubAddress:"We are sorry, Error while creating the Kids club card address.",limitReached:"You already have reached the limit for the allowed number of Gift Cards.",address2LengthExceeded:"address Line2 should not exceed max of 40 characters.",wishlistNameReq:"Please enter a name for your Wishlist.",invalidLogin:"Your email and password combination does not match our records.  Please try again.",orderDetailSgOrderBeingprocessed:"Your order is being processed …","typeMismatch\\.time":"{%value} is not a time.",loggedAssociate:"You are already logged in as Associate #",enterValidEmail:"Please enter a valid email address.",enterEducatorMemberId:"Please Enter your BN Educator Card Number.",errorAddToLocker:"There was an error adding to your locker, please try again.",validCCType:"Please enter a valid CreditCardType.",recipientInvalid:"Please enter a valid Gift Recipients Email Address.",errorNoItemsSelected:"Sorry, there are no items in your cart. Please add an item to your cart and try again.",couponAlreadyClaimed:"Coupon code java.lang.Object@a584591 is already claimed. Please enter a valid code.",appliedPromotionCopy:"Your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=free-ship free-qualified&gt;java.lang.Object@293f37e5&lt;/span&gt;",profileIncompleteDefaults:"Please ensure that the default shipping address, default shipping method, and default credit cards are set on your account to proceed.",quantityMoreThanMax:"Quantity is more than the maximum permitted value of java.lang.Object@756eb08a.",countryReq:"Country is required field.",userNotLoggedinforMemberPurchase:"Please sign in (or Create Account) to buy new or to renew existing BN Membership.",orderWithOutAddress:"Sorry, you can not proceed the check out with out a billing address.Please enter your billing address.",nameOnCardMissing:"Please enter your Name as it appears on your Card.",cantShipToState:"One or more of the items in your shopping bag cannot be shipped to the state you have selected in your shipping address.",itemExitsWishlist:"You’ve already added this item to your Wishlist.",resetLinkExpired:"This password reset link has expired. Please request password assistance again.",securityCodeNotValid:"The security code that you entered is not valid. Please check your code and try again.",miniCartFreeShipping:"Your order qualifies for &lt;span class=&#034;free-ship free-qualified&#034;&gt;Free Shipping!&lt;/span&gt; - &lt;a href=&#034;#&#034; data-modal-class=&#034;BN.Modal.Account.FreeShippingDetails&#034;&gt;Details&lt;/a&gt;",promotionExpired:"Cannot apply Coupon, promotion is expired.",childGenderMissing:"Please enter the child&amp;#39;s gender.",giftCardQtyMissing:"Please enter a gift card quantity greater than zero.",incompletePaymentCreateInformation:"Please provide the required data to create CreditCard.",noResultsFound:"No results were found for the entered search criteria.",emailAndConfirmEmailMissmatch:"Please check that your email addresses match and try again.",socketconnectionfailure:"We are experiencing technical issues. Please try again or contact customer service.",ccExpiredInstantPurchase:"We could not process your order at this time because your credit card is expired. Please click Edit Payment link below and update the credit card information.",duplicateDigitalItem:"You cannot add this item into the cart since you already purchased it before.",miniCartSpendFreeShippingMobile:"&lt;span class=&#034;promo-price&#034;&gt;Spend $java.lang.Object@36087041,&lt;/span&gt; Get &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt;  - &lt;a href=&#034;#&#034; data-toggle=&#034;modal&#034; data-target=&#034;#freeShippingDetails&#034;&gt;Details&lt;/a&gt;","typeMismatch\\.datetime-local":"{%value} is not a correct date-time format.",creditCardTypeMissing:"Please select the Card Type.",inventoryError:"Item &lt;b&gt;java.lang.Object@6401d71d&lt;/b&gt; is temporarily out of stock, please remove the item from the cart and try again.",cvvMissing:"Please enter a Security Code.",lastNameReq:"LastName is required field.",giftCardEmpty:"Gift card value cannot be empty or blank.",secretAnswerPattern:"Invalid secret answer pattern.",invalidPhoneNumber:"Please enter a valid phone number.",ipDeliveryMissing:"You do not have a delivery speed selected, &lt;a href=&#034;/account/manage/settings/&#034;&gt;Manage Default Delivery Speed&lt;/a&gt;.",commentaryIdReq:"Commentary Id is required field.",giftlistItemNotFound:"giftListItemList not found.","typeMismatch\\.email":"{%value} is not a valid email address.",requiredInfoMissing:"For the selected item java.lang.Object@34d1e436 required fields are missing, Please enter.",formBlank:"Form field cannot be left blank.",fewItemsAvailableForPreorder:"We are sorry, we have only &lt;b&gt;java.lang.Object@3fddb051&lt;/b&gt; preorderable items for &lt;b&gt;{1}&lt;/b&gt;.",emptyShippingInfo:"To place an order, please provide valid shipping information.",enterBNMemberId:"Please Enter valid BN Member number.",paymentUserNotFound:"User does not exists in Atg to create credit card.",itemQuantityLessThanMin:"java.lang.Object@7362b698 quantity is less than the minimum permitted value of {1}.",secretQstAndAnswerNotMatching:"The security question and answer do not match.",instPurchaseCantShipMethod:"One or more of the items in your shopping bag cannot be shipped using your default shipping method.",unknownDBError:"unknown error while updating DB.",errorAddChildsToKidsClub:"We are having a problem adding this child to your Kids&amp;#39; Club profile.  Please try again in a few minutes.",memberItemAlreadyExist:"There is already a membership in your shopping bag.",giftCardHostUnavailable:"We experienced a temporary problem with your gift card.  Please try again.",patternMismatch:"{%label} includes invalid characters, please update field to continue. {%title}",couponExpired:"Cannot apply Coupon, coupon is expired.",errorCreditCardProcessing:"There was an issue while attempting to process your credit card.  Please try again.",invalidGCNumber:"The gift card number you entered is not valid.  Please check the number and try again.",removeAddressSuccess:"Your address has been removed.",creditcardnotValidOrExpired:"The credit card number that you entered is not valid or expired. Please check your card and try again.",paymentAddedSuccess:"Your payment method has been added.",chooseItemForReturn:"did not choose any items for returns.",recipientConfirmInvalid:"Please enter a valid Confirm Email Address.",passwordMinMax:"Passwords must be between 6-15 characters.",cityLengthExceeded:"City should not exceed max of 30 characters.",errorAddingToOrder:"There was an error while attempting to add the item to the order.",noOrderToModify:"There is no order to modify (order=null).",emptyPassword:"Please enter your password.",countryMissing:"Please select the Country.",enterCreditCard:"Please Enter valid card number.",protectionPlan:"Protection Plans",passwordLengthExceeded:"Password should not exceed max of 68 characters.",bookFairIdNotExists:"The Book Fair ID you entered does not exist. Please check the ID and try again.",paypalEmailMismatch:"Please confirm your PayPal email address.",giftCardNotFound:"Gift Card java.lang.Object@55c1f056 was not found.",creditCardExpired:"Your default credit card has expired. Please update your credit card information.",contributorIdReq:"Contributor Id is required field.",invalidName:"Please enter valid Name.",loginToJoinMembership:"You must first login to your BN.com account.",paymentAddressNotFound:"The address for this payment is NOT found.",passwordsDoNotMatch:"Passwords must match.",penNameTaken:"We&amp;#39;re sorry, but &lt;b&gt;java.lang.Object@2f89ca16&lt;/b&gt; is already taken.  Please try another Pen Name.",passwordmatch:"Password and confirm password are not matching.",unknownGCError:"We encountered a problem while removing the Gift Card from your account.  Please try again.",cartFreeShippingPartOfMobile:"Part of your order qualifies towards &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt;",validPostalCode:"Please enter valid postal code.",mercuryAddrIdReq:"MercuryAddressId is required field.",recipientNameInvalid:"Please enter a valid name for your gift recipient.",orderDetailSgHeadingMembership:"Barnes &amp; Noble Membership",paypalInvalidEmail:"The PayPal email address you entered was invalid. Please use an email address associated with a working PayPal account.",deviceQtyExceeded:"Sorry, there is a 5 per-customer limit on the item you have selected.",address1LengthExceeded:"address Line1 should not exceed max of 40 characters.",stateLengthExceeded:"State should not exceed max of 20 characters.",recipientBlank:"Please enter an email address for your gift recipient.",promotionLookupQualifierCopy:"Add &lt;span class=&#034;promo-price&#034;&gt;$java.lang.Object@7f3282bb&lt;/span&gt; of eligible items to qualify &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship&#034;&gt;{1}&lt;/span&gt;",invalidMembershipId:"The member number you entered is not valid.  Please check your number and try again.",stateMissing:"Please select the State.",creditcardnotValid:"The credit card number that you entered is not valid. Please check your card and try again.",senderEmailInvalid:"Please enter a valid name.",postalCodeMissing:"Please enter the Postal/Zip Code.",instPurchaseExpressOrExpeditedShipMethod:"One or more of the items in your shopping bag can be shipped only through express or expedited shipping methods.",updateAddressSuccess:"Your address has been updated.",giftCardValueInvalid:"The value you entered for your gift card is not valid.  Please reenter the value.",enterSecretAnswer:"Please enter your secret question answer.",emailSendError:"Your account has been updated, but there was an error sending the email.",cartFreeShipping:"Your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship free-qualified&#034;&gt;Free Shipping!&lt;/span&gt; - &lt;a href=&#034;#&#034; class=&#034;free-shipping-details&#034; data-modal-class=&#034;BN.Modal.Account.FreeShippingDetails&#034;&gt;Details&lt;/a&gt;",errorApplyingCoupon:"Unable to apply promotion to the order.",mercuryUsedIdReq:"Mercury UserId is required field",cantShipRentalToCountry:"We are sorry but rental orders cannot be shipped outside of the United States. Please select a US shipping address or remove the rental item from your cart.",expirationMonthMissing:"Please select the Expiration Month.",mercuryCardIdReq:"Mercury Card Id is required field.",marketItemAlreadyInCart:"This item has already been added to your shopping bag.",instantPurchaseDisabledInProfile:"Please enable Instant Purchase in your profile.",deleteAddressKeyNotFound:"Address with the Nickname Not found to delete.",marketPlaceServiceNotAvaliable:"Market Place service is not available.",updateShippingMethod:"We encountered a problem while updating your shipping method. Please try again.  If you continue to encounter a problem, please contact customer service.",passwordReq:"Password is required field.",partialAppliedPromotionCopy:"Part of your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=free-ship free-qualified&gt;java.lang.Object@4d25043a&lt;/span&gt;",validContactPhone:"Please enter a valid ContactByTelephone.",rangeUnderflow:"{%value} is too low. The lowest value you can use is {%min}.",inventoryNotAvailable:"Sorry, this item is currently unavailable.",otherUsersAddress:"The address provided belongs to some other user.",expirationDateNotValid:"The expiration date that you entered is not valid. Please check your expiration date and try again.",memberShipIdNotFound:"The member number you entered is not valid.  Please check your number and try again.",postalCodeReq:"PostalCode is required field.",guestusernotallowedtocheckout:"In order to purchase a eBook,Magazine Subscription,NOOK App or eTextbook, you must either sign into your account or create a new account.",orderCorruptedDuringCommit:"A part of your order information seems to be missing. Please check to make sure that your Shipping Address, Billing Address, and payment information is present and valid and try again.",missingPaypalEmail:"Please enter the email address connected to your PayPal account.",emptyGiftcardPin:"Please enter your Gift Card pin.",testKey:"I got test message.",cvvInvalid:"The security code that you entered is not valid.  Please check your code and try again.",defaultCreditCardnotValid:"The default credit card set on your account is not valid. Please check your card and try again.",giftCardExistForUser:"mercury UserId java.lang.Object@3938a367 already has a saved Gift card with number {1}.",invalidRecaptcha:"Invalid captcha entered, please try again.",invalidBNMemberId:"The Member number you entered is not valid.  Please check your number and try again.",errorRemovingItemFromOrder:"We encountered a problem while removing the item from your order.  Please try again.",digitalOrderMissingMercuryId:"We&amp;#39;re sorry but we&amp;#39;re unable to process the digital items in your order at this time. Please remove those items and continue or check back later. We apologize for the inconvenience.",updateDefaultPaymentSuccess:"Your default payment method has been updated.",errorReprising:"An unexpected error occurred.  Please try again.  If you continue to encounter a problem, please contact customer service.",duplicateDigitalItems:"You have digital item(s) that you have purchased before; please remove the item(s) and check out.",itemQtyExceeded:"Sorry, you can not add more than one item you have selected.",validCountryCode:"Please enter valid two digit country code.",emptyBookFairId:"The Book Fair ID cannot be blank. Please enter a valid ID.",phnoNoMatch:"Phone Number pattern does not match. Please enter only numbers.",noItems:"Please add items in order to generate quote.",ccExpiredInOrderSubmit:"The credit card you use in the order is expired; please modify the billing information and try again.",passwordInvalid:"Only letters, numbers, or numeric symbols are allowed.",testKey2:"I got test message two.",testKey1:"I got test message one.",FailedSingleUseCouponClaim:"We could not process your order at this time because your coupon code java.lang.Object@356fdc8a is not valid for this order. Please remove the coupon from your order and continue.",giftCardMessageInvalid:"Your message can only contain letters, numbers, commas, periods, exclamation points, quotes, dashes and question marks.",joinMembership:"join membership",lastNameMissing:"Please enter your last name.",giftCardEmailMismatch:"The email address you entered for the gift recipient do not match.  Please reenter the email address.",miniCartSpendFreeShipping:"&lt;span class=&#034;promo-price&#034;&gt;Spend $java.lang.Object@42f8036e,&lt;/span&gt; Get &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt; - &lt;a href=&#034;#&#034; data-modal-class=&#034;BN.Modal.Account.FreeShippingDetails&#034;&gt;Details&lt;/a&gt;",regDateReq:"Registration Date is required field.",validAge:"Please Enter valid age.",expirationYearMissing:"Please select the Expiration year.",addressTiedWithPayment:"This address is linked to a payment method. In order to remove this address, you will have to remove the payment method on the Manage Payment Method page.",fewItemsAvailable:"We are sorry, we have only &lt;b&gt;java.lang.Object@28a94d1b&lt;/b&gt; items in stock for &lt;b&gt;{1}&lt;/b&gt;.",bookFairNotStarted:"This book fair has not started yet.",scheduledDateInvalid:"Please select a valid delivery date.",webserviceError:"An unexpected error occurred. Please try again.  If you continue to encounter a problem, please contact customer service.",InvalidAddressId:"Invalid Address id.",termsAndConditionsAccept:"Please accept the terms and conditions before proceeding.",missingRequiredAddressFields:"Sorry, your shipping information is missing required field(s).  Please correct your address.",noItemsToAdd:"Please select a quantity before clicking Add to Cart.",childBelowAge:"To be included in the Kids&amp;#39; Club, children need to be ages 12 or younger.",InvalidOrderParameter:"Invalid Order parameter.",userAlreadyExistsMercury:"User already exists with the same mercury id.",orderDetailSgHeadingCommerceHub:"Items from Barnes &amp; Noble Specialty Stores",noSampleEanFound:"There was an error adding to your locker, the sample item could not be found.",egiftDeliveryDateIsExpired:"We&amp;#39;re sorry but the delivery date for your eGift item has passed. Please click the &amp;#34;Edit this eGift&amp;#34; link below to update the delivery date.",descBlank:"Please enter a description.",firstNameReq:"FirstName is required field.",cantBuyMembershipWithGiftCard:"We will apply your gift card to your order, but require a default credit card on record for the purchase of a membership.  Please add your credit card.",orderDetailSgHeadingGiftCard:"Barnes &amp; Noble Gift Card",missingRecaptcha:"Please check the reCAPTCHA checkbox to continue.",invalidRentalItem:"Only textbooks can be rented.",errorCouponApply:"Cannot apply Coupon to your order.",validGender:"Please enter a valid Gender.",miniCartAddAmountToGetFreeShippingMobile:"&lt;span class=&#034;promo-price&#034;&gt;Add $java.lang.Object@3053c78,&lt;/span&gt; Get &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt;",address1Missing:"Please enter the Street Address.",gcNoAmountRemaining:"The Gift Card has a balance of $0.00.",enterValidConfirmEmail:"Please enter a valid confirm email address.",orderDetailSgHeadingMagazine:"Print Magazine Subscription",invalidState:"Please enter valid State.",creditCardOthers:"The payment information that you entered is not valid. Please check and try again.",cantShipToCountry:"One or more of the items in your shopping bag cannot be shipped to the country you have selected in your shipping address.",errorRemovingChildKidsClub:"We are having a problem removing this child to your Kids&amp;#39; Club profile.  Please try again in a few minutes.",validReceiveNotification:"Please enter a valid ReceiveNotification.",giftCardAdd:"We encountered a problem while adding the gift card to your shopping bag.  Please try again.  If you continue to encounter a problem, please contact customer service.",107:"Error occurred while creating extension or buyout the product.",invalidSecurityAnswer:"Please enter valid sercurity answer.",miniCartAddAmountToGetFreeShipping:"&lt;span class=&#034;promo-price&#034;&gt;Add $java.lang.Object@1456d2ac,&lt;/span&gt; Get &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt; - &lt;a href=&#034;#&#034; class=&#034;free-shipping-details&#034;&gt;Details&lt;/a&gt;",cartFreeShippingPartOf:"Part of your order qualifies towards &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship&#034;&gt;FREE Shipping&lt;/span&gt; - &lt;a href=&#034;#&#034; data-modal-class=&#034;BN.Modal.Account.FreeShippingDetails&#034;&gt;Details&lt;/a&gt;",106:"Extension or Buyout is not allowed. Pending extension or buyout found for the Order java.lang.Object@4cc4ebd4 and product {1}.",firstNameMissing:"Please enter your first name.",105:"CCToken validation failed",gcNotApplicableOnGCItem:"We are sorry, you cannot use a gift card to pay for your gift card order.",104:"Missing or Invalid values for the Order number java.lang.Object@502124a2 for the product {1}.",103:"Missing or Invalid values for the Order number java.lang.Object@2fec30c7 and product {1} extension term id {2}.",102:"Invalid Extension Term id java.lang.Object@3b767165.",101:"No rental found with Order number java.lang.Object@5d0ebc62 for the product {1}.",requiredOneField:"Please fill in at least one text box to lookup the customer.",firstNameORLastNameIsEmpty:"First Name and Last Name should not be null to link your membership.",acceptTCMissing:"Please accept the B&amp;N Kids&amp;#39; Club™ Terms and Conditions.",invalidFirstName:"Please enter a valid first name.",answerLengthExceeded:"Answer should not exceed max of 30 characters.",monthMissing:"Please select the child&amp;#39;s birth month.",sameAsOldPassword:"The new password is same as the old password.",kidIsAlreadyRegistered:"You have already added this child to your B&amp;N Kids&amp;#39; Club™ profile.",associateEmpty:"Please enter your Bookseller Associate ID.",mustAge:"You must be 18.",cannotApplyCouponMP:"Coupons cannot be applied to Marketplace items.",addItemInventoryError:"The selected product is out of stock or quantity requested might have exceeded available stock.",invalidCity:"Please enter valid City.",onlyOneEmailAllowed:"Only one email is allowed.",missingMemberType:"Please select the membership type.",loginForInstantPurchase:"Please sign in for Instant Purchase.",enterEmployeeMemberId:"Please Enter your Employee Discount Number.",invalidLastName:"Please enter a valid last name.",giftMessageMissing:"Please enter the gift message.",paymentAlreadyExistsMercury:"This payment method has already been added to your account.",errorMercuryUpdateEgift:"Unfortunately we are not able to process your eGift redemption.&lt;br/&gt;We will send you an email once we resolve the issue.",quantityLessThanMin:"Quantity is less than the minimum permitted value of java.lang.Object@7271f5a8.",invalidCreditCardToDelete:"We encountered a problem while removing your credit card. Please try again.  If you continue to encounter a problem, please contact customer service.",errorUpdateQty:"We encountered a problem while updating the item quantity.  Please try again.",noMembershipLinkService:"No Response received from Membership services.",invalidCompanyName:"Please enter valid Company Name.",noCouponForSpecialItems:"This coupon cannot be applied to Rental, Pre-order or Marketplace items.",quantityLessThanOrEqualToZero:"Quantity is less than or equal to 0.",errorParsingServiceKidsClub:"We are sorry, Error while parsing service response for kids club card address.",marketPlaceItemNotAvailable:"Market Place Item Is Not available.",rentalTermsNotSelected:"Please accept rental terms to place rental order.",dateMissing:"Please select the child&amp;#39;s birth date.",digitalOrderMissingMercuryIdForInstantPurchase:"We&amp;#39;re sorry but we&amp;#39;re unable to process the digital items in your order at this time. Please remove those items and continue or check back later. We apologize for the inconvenience.",membershipPurchased:"Membership already purchased.Please try with new card!",enterPassword:"Please enter a password.",penNameInvalid:"Your Pen Name can be any combination of alphanumeric characters (plus - and _), and must be 2 to 25 characters long.",rangeOverflow:"{%value} is too high. The highest value you can use is {%max}.",paypalBillingAddressIsNotEntered:"Please enter your billing address.",maxWishlistExceed:"you have reached your maximum of 10 Wishlists.",wishlistNameExists:"You already have a Wishlist with this name.  Please choose another name.",vaildPaidMembership:"You already have a membership associated with your account.",noProductReferenceFromInventoryRepository:"Item in cart is invalid.",rentalPrepaidCreditCardError:"Sorry, you can not use prepaid credit card(s) to rent items from Barnes &amp; Noble.",cantShipToAddress:"One or more of the items in your shopping bag cannot be shipped to your shipping address.",reasonNotSelected:"Please select a reason for the cancellation.",gcNotApplicableOnGSACard:"Gift Cards cannot be used when paying with a GSA card. Please remove either the gift card(s) or GSA card from the order.",userAlreadyMember:"There is already a membership associated with this account.  There is a 1 membership per account limit; you may renew your membership.","patternMismatch\\.email":"{%value} is not a valid email address.",enterEmail:"Please enter your email address.",validRegDate:"Please enter a valid Registration Date.",ipInstantPurchaseDisabled:"You do not have instant purchase turned on, &lt;a href=&#034;/account/manage/settings/index.jsp#instantPurchaseForm&#034;&gt;Manage Instant Purchase settings&lt;/a&gt;.",userDoesNotExists:"User does not exists.",phoneNumberMissing:"Please enter the Phone Number.",itemsNotEligible:"Item(s) in your bag are not eligible for this promotion.",address1Req:"Address1 is required field.",qaNotMatch:"Your security questions and answer combination does not match our records.  Please try again.",emptyGcPin:"Please enter the gift card pin.",firstNameLengthExceeded:"First Name should not exceed max of 40 characters.",cartFreeShippingMobile:"Your order qualifies &lt;i&gt;for&lt;/i&gt; &lt;span class=&#034;free-ship free-qualified&#034;&gt;FREE Shipping!&lt;/span&gt;",ipPaymentMissing:"You do not have a default payment set or your credit card is expired, &lt;a href=&#034;/account/manage/payment/&#034;&gt;Manage Default Payment&lt;/a&gt;.",itemsNotSelectedForCancel:"No items were selected for cancel.",invalidEmailFormat:"The email address you entered was not in a valid format.  Please check your email address and try again.",invalidQuantity:"The quantity entered is not valid.","typeMismatch\\.date":"{%value} is not a date.",memberSouldRenewelMembership:"Please renew your membership purchase.",billingAddressCountryNotSupported:"International addresses are not allowed when there are digital item(s) in your cart.",errorCreatingCreditCard:"Error occured while creating credit card.",emailMismatch:"Please check that your email addresses match and try again.","payment.taxExemptError":"Sorry, you don&amp;#39;t have the tax exemption in the state you&amp;#39;re shipping to. Please uncheck the Tax Exempt checkbox and contact customer service.",giftCardValueMissing:"Please enter a value for your gift card.",validCCNum:"Please enter a valid Account Display Number.",errorRemoveGiftItem:"Error removing gift item.",errorMarker:"Error while adding the Marker.",rentalItemQtyExceeded:"This rental is already in your Shopping Bag.",invalidGiftCardDetails:"The gift card number and pin combination you entered is not valid.  Please check your card details and try again.",mercuryGCReq:"Mercury GiftCard Id is required field.",attemptedToRenewWithOutMembership:"You have attempted to renew a Barnes &amp; Noble Membership and you do not currently have a Membership associated with this account. We have replaced your request for a renewal with a new Membership.",freeMembershipQualiItems:"To enroll in the free membership you must purchase a qualifying item.",errorRemovingItemFromList:"We encountered a problem while removing the item from the list.  Please try again.",attemptedToBuyMemebrshipAgain:"There is an active Barnes &amp; Noble Membership currently associated with your account. We have replaced your request for a new Membership with a renewal of your existing one.",emptyPaymentInfo:"To place an order, please provide valid billing information.",confirmLogInMissing:"Please confirm your email address.",gcNotExist:"The gift card number you entered is not valid.  Please check the number and try again.",membershipServiceDown:"We are having a problem processing your request.  Please try again in a few minutes.",accountNumDispReq:"Account Display Number is required field.",validModifiedDate:"Please enter a valid last activity Date."});
;/*! BARNES-BUILDER 2024-02-21 */
BN.Items.Configuration.Types.PostalAddress={properties:["id","default","excludeUPS","repositoryId","firstName","lastName","streetAddress1","streetAddress2","addressLocality","addressRegion","addressParentRegion","postalCode","telephone","cellphone","homephone","companyName","addressId","paymentgrouptypesavebilling"],actions:{add:{type:"page",url:SITE_ROOT+"/account/manage/addresses/new.jsp"},"delete":{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Account.ConfirmDelete("delete-address-ra",c);return f.data.target=e,f}},status:{type:"callback",callback:function(a,b,c,d,e){$(e).parents("form").first().submit()}},edit:{type:"callback",callback:function(a,b,c,d,e,f){var g=new BN.Modal.Account.EditAddress(null,this,null,f||null);return g.data.target=e,g}}}},BN.Items.Configuration.Types.CheckoutPostalAddress={properties:["id","default","excludeUPS","repositoryId","firstName","lastName","streetAddress1","streetAddress2","addressLocality","addressRegion","addressParentRegion","postalCode","telephone","cellphone","homephone","companyName","editAddressNickname","SpecialCharError"],actions:{"delete":{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Account.ConfirmDelete("delete-address-ra",c);return f.data.target=e,f}},status:{type:"callback",callback:function(a,b,c,d,e){$(e).parents("form").first().submit()}},edit:{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Checkout.EditShipping(this);return f.data.target=e,f}}}},BN.Items.Configuration.Types.CheckoutBillingPostalAddress={properties:["id","default","excludeUPS","repositoryId","firstName","lastName","streetAddress1","streetAddress2","addressLocality","addressRegion","addressParentRegion","postalCode","telephone","cellphone","homephone","companyName"],actions:{"delete":{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Account.ConfirmDelete("delete-address-ra",c);return f.data.target=e,f}},status:{type:"callback",callback:function(a,b,c,d,e){$(e).parents("form").first().submit()}},edit:{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Checkout.EditBilling(this);return f.data.target=e,f}}}},BN.Items.Configuration.Types.PaymentMethod={properties:["id","default","repositoryId","name","creditCardIcon","creditCardType","creditCardTypeLabel","$PostalAddress","creditCardNumber","expirationMonth","expirationYear","creditCardNickName"],actions:{add:{type:"page",url:SITE_ROOT+"/account/manage/payment/new.jsp"},"delete":{type:"callback",callback:function(a,b,c,d,e){var f=new BN.Modal.Account.ConfirmDelete("delete-payment-ra",c);return f.data.target=e,f}},status:{type:"callback",callback:function(a,b,c,d,e){$(e).parents("form").first().submit()}},edit:{type:"callback",callback:function(a,b,c,d,e,f){if("addModalForExpiredCard"!=e.getAttribute("data-action")){var g=new BN.Modal.Account.EditPayment(null,this,null,f||null);return g.data.target=e,g}var h=e.getAttribute("data-itemeditor"),i=e.getAttribute("data-modal-name");"PostAddCC"==i?new BN.Modal.Checkout.PostAddCC(null,{target:this},{useCache:!1,tplParams:{itemeditor:h}}):new BN.Modal.Checkout.AddCC(null,{target:this},{useCache:!1,tplParams:{itemeditor:h}})}}}};;/*! BARNES-BUILDER 2024-02-21 */
function getCardType(a){var b=new RegExp("^4");return null!=a.match(b)?"Visa":(b=new RegExp("^5[1-5]"),null!=a.match(b)?"Mastercard":(b=new RegExp("^3[47]"),null!=a.match(b)?"American Express":(b=new RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"),null!=a.match(b)?"Discover":(b=new RegExp("^30([0-5]|95)"),null!=a.match(b)?"Diners Club":(b=new RegExp("^3((08[8|9])|(09[0-4|6-9])|(10[0-2])|(11[2-9])|120|(15[8|9])|(33[7-9])|(34[0-9])|(5[2-8]))"),null!=a.match(b)?"JCB":"")))))}function initializeSearchBarTextForIE(){$("#logoAndSearch #searchBarBN").focus(function(){$("#logoAndSearch form#searchForm").addClass("focused"),($("body").hasClass("ie9")||$("body").hasClass("lt-ie9")||"undefined"!=typeof BN_IS_IE9&&BN_IS_IE9===!0)&&("Search"==$(this).val()||0===$(this).val().length)&&$(this).val("")}),$("#logoAndSearch #searchBarBN").blur(function(){$("#logoAndSearch form#searchForm").removeClass("focused"),($("body").hasClass("ie9")||$("body").hasClass("lt-ie9")||"undefined"!=typeof BN_IS_IE9&&BN_IS_IE9===!0)&&0===$(this).val().length&&$(this).val("Search")}),"undefined"!=typeof BN_IS_IE9&&BN_IS_IE9===!0&&$("#logoAndSearch #searchBarBN").length&&0===$("#logoAndSearch #searchBarBN").val().length&&$("#logoAndSearch #searchBarBN").val("Search")}function checkPriceChange(a){var b="",c="",d="";if("Wishlist"==a){var e="#searchGrid";b="bg-peech-03 pa-s mb-l",c='class="mt-0 mb-0"',d='class="mb-0"'}else if("cart"==a)var e="[id^=cartItemsContainer]";if($(".price-change-array").length){var f=$.trim($(".price-change-array").text());if(""!=f){var g=f.split("|"),h='<div class="general-messaging static '+b+'"><p '+c+">The Price of one or more items in your "+a+" has changed</p><ul "+d+">";try{$.each(g,function(a,b){if(""!=$.trim(b)){var c=b.split("^");h+="<li>The price of <span>"+c[0]+"</span> has changed from <span><span>"+c[1]+"</span> to "+c[2]+"</span></li>"}})}catch(i){}h+="</ul></div>","Wishlist"==a&&($(".account-wish-list>div.row").addClass("wl-show-message"),$(".account-wish-list div.wl-show-message .sidebar").addClass("mt-xxs"))}}$(h).insertBefore(e),$("#searchBar").on("keydown",function(a){return(40==a.keyCode||38==a.keyCode)&&($("#headSearchTypeAheadHolder ul li").length>0?(noItems=!0,$(document).focus()):noItems=!1),13==a.keyCode?(chosen="",result="",$("#headSearchTypeAheadHolder ul li a").removeClass("select-item"),noItems=!1,$("#headSearchTypeAheadHolder").hide(),!1):void 0}),$(document).on("keydown",function(a){if(1==noItems){if(40==a.keyCode)return""===chosen?chosen=0:chosen+1<$("#headSearchTypeAheadHolder ul li").length&&chosen++,$("#headSearchTypeAheadHolder ul li a").removeClass("select-item"),$("#headSearchTypeAheadHolder ul li:eq("+chosen+") a").addClass("select-item"),result=$("#headSearchTypeAheadHolder ul li:eq("+chosen+") a").text(),$("#searchBar").val(result),!1;if(38==a.keyCode)return""===chosen?chosen=0:chosen>0&&chosen--,$("#headSearchTypeAheadHolder ul li a").removeClass("select-item"),$("#headSearchTypeAheadHolder ul li:eq("+chosen+") a").addClass("select-item"),result=$("#headSearchTypeAheadHolder ul li:eq("+chosen+") a").text(),$("#searchBar").val(result),!1}})}function checkGoogleAdDOMChange(){var a=$("iframe[name^=google_ads_iframe]");if(a.length>0){var b=a.first().contents().find(".sovrn_ad_unit");b.length>0&&0!=b.css("height")?a.first().contents().find(".sovrn_ad_unit").css("height",0):setTimeout(checkDOMChange,100)}}function brierleyLoginCreateParams(a){var b={customerkey:a.data("customerkey"),intent:a.data("intent")};void 0!=a.data("email")&&""!=a.data("email")&&(b.email=a.data("email")),new BN.Modal.Account.LoginNew(null,{target:this},{useCache:!1,tplParams:b})}function showFavTooltipMsg(a,b){var c=b.__tooltip.content,d=$(b);c.find(".hidden").removeClass("hidden"),"addError"==a?(c.find("[data-added]").hide(),c.find("[data-removed]").hide(),c.find("[data-error-tooltip-add]").show(),c.find("[data-error-tooltip-remove]").hide()):"addSuccess"==a?(c.find("[data-added]").show(),c.find("[data-removed]").hide(),c.find("[data-error-tooltip-add]").hide(),c.find("[data-error-tooltip-remove]").hide()):"removeError"==a?(c.find("[data-added]").hide(),c.find("[data-removed]").hide(),c.find("[data-error-tooltip-add]").hide(),c.find("[data-error-tooltip-remove]").show()):"removeSuccess"==a&&(c.find("[data-added]").hide(),c.find("[data-removed]").show(),c.find("[data-error-tooltip-add]").hide(),c.find("[data-error-tooltip-remove]").hide()),d.tooltip("show"),d.attr("aria-hidden","true"),c.find("p").focus(),d.prop("disabled",!0),setTimeout(function(){d.tooltip("hide"),setTimeout(function(){d.prop("disabled",!1),d.parents(".product-shelf-favorite").find("input").focus(),d.attr("aria-hidden","false")},500)},1500)}function userWishlistAdd(a){if("false"==$(a).data("aria-selected")||0==$(a).data("aria-selected")){var b=$(a).siblings("form[id^=addItemToWishlist1test]");b.submit()}else{var c="";c=$(a).siblings("form[id^=frmRemoveGiftItemtest]").attr("id").split("_")[1];for(var d=0;d<itemsAdded.length;d+=2)if(itemsAdded[d]==c){var e="";e=itemsAdded[d+1],$(a).siblings("form[id^=frmRemoveGiftItemtest]").find("[id^='removedItemId']").attr("value",e)}var b=$(a).siblings("form[id^=frmRemoveGiftItemtest]");b.submit()}}function guestWishlistAdd(a){if("false"==$(a).data("aria-selected")||0==$(a).data("aria-selected")){wishlistItemsAdded.push(a.id);{$("#"+a.id).children()[1].id}$(a).siblings("a.browseAddToWishlistLink").click()}else{var b="";b=$(a).siblings("form[id^=frmRemoveGiftItemtest]").attr("id").split("_")[1];for(var c=0;c<itemsAdded.length;c+=2)if(itemsAdded[c]==b){var d="";d=itemsAdded[c+1],$(a).siblings("form[id^=frmRemoveGiftItemtest]").find("[id^='removedItemId']").attr("value",d)}var e=$(a).siblings("form[id^=frmRemoveGiftItemtest]");e.submit()}}function removeWishlistError(a){var b=$(a).siblings("label");$(b).data("aria-selected",!0);var c=$(a).siblings("label").find("[id^='img-']")[0],d="removeError";showFavTooltipMsg(d,c)}function removeWishlistSuccess(a){var b=$(a).siblings("label").find("[id^='img-']")[0],c="removeSuccess",d=$(a).siblings("label");$(d).data("aria-selected",!1),$(d).attr("data-aria-selected",!1),0==$(a).closest("#quick-view-productDetail").length&&showFavTooltipMsg(c,b)}function addWishlistError(a){var b=$(a).siblings("label");$(b).data("aria-selected",!1);var c=$(a).siblings("label").find("[id^='img-']")[0],d="addError";showFavTooltipMsg(d,c)}function addWishlistSuccess(a,b){var c=$(a).siblings("label").find("[id^='img-']")[0],d="addSuccess",e=$(a).siblings("label");$(e).data("aria-selected",!0),$(e).attr("data-aria-selected",!0),0==$(a).closest("#quick-view-productDetail").length&&showFavTooltipMsg(d,c),itemsAdded.push(b.gISkuId,b.gIItemId)}function tooltipIconClick(a,b){if(13==a.keyCode||"click"==a.type){a.preventDefault(),a.stopPropagation();var c=$(b),d=$(c.hasClass("bopisMsgTooltipContent")?".tooltip-bopis-msg":".tooltip-bopis-benefit"),e=$(b.__tooltip.content);e&&(e.is(":hidden")?(d.hide(),e.show("fast",function(){c.tooltip("redraw"),e.attr("aria-hidden","false"),e.find("p").focus(),$(".tooltip-bopis-msg").on("keydown",function(a){onTooltipContentClick(a,this)})})):e.is(":visible")&&e.hide("slow",function(){c.focus(),e.attr("aria-hidden","true")}))}return!1}function onTooltipContentClick(a,b){if("27"==a.keyCode||"Escape"==a.key){var c=$(b);if($(b).hasClass("tooltip-bopis-msg")){var c=$(".tooltip-bopis-msg:visible"),d=c.attr("class").split(" ");d.forEach(function(a){if(a.indexOf("tooltip-bopis_")>-1){var b=a.split("_")[1];content="#bopisMsgTooltip_"+b,c.hide("slow",function(){$("a[data-content='"+content+"']").focus()})}})}else if($(b).hasClass("tooltip-bopis-benefit")){var c=$(".tooltip-bopis-benefit"),e=$(".bopis-benefit-tooltip");c.hide("slow",function(){e.focus()})}}}function receiveMessage(a){if("https://tpc.googlesyndication.com"===a.origin){var b=a.data;b.indexOf("ic:",0)>=0&&set_cookie(""+b.substring(3))}}function initMCconfigure(a){a?$.ajax({url:SITE_ROOT+"/checkout/initiate-master-pass.jsp",type:"post"}).done(function(a){$("#masterpass-button").removeClass("config-start");try{var b=JSON.parse(a);SRCi.configure(b.merchantId,b.merchantName,b.merchantURL,b.hosted_session_id,{wsVersion:b.mpWsVersion},function(a){"SUCCESS"==a.result&&($("#consumerEmailAddressRequested").val(b.consumerEmailAddressRequested),$("#transactionAmount").val(b.transactionAmount),$("#transactionCurrency").val(b.transactionCurrency),$("#dpaShippingPreference").val(b.dpaShippingPreference),$("#dpaBillingPreference").val(b.dpaBillingPreference))})}catch(c){}}).fail(function(){}):$.ajax({url:SITE_ROOT+"/checkout/master-pass-checkout.jsp",type:"post"}).done(function(a){$("#masterpass-button").removeClass("config-start");try{response=JSON.parse(a),SRCi.configure(response.merchantId,response.merchantName,response.merchantURL,response.hosted_session_id,{wsVersion:response.mpWsVersion},function(a){"SUCCESS"==a.result&&($("#consumerEmailAddressRequested").val(response.consumerEmailAddressRequested),$("#transactionAmount").val(response.transactionAmount),$("#transactionCurrency").val(response.transactionCurrency),$("#dpaShippingPreference").val(response.dpaShippingPreference),$("#dpaBillingPreference").val(response.dpaBillingPreference))})}catch(b){}}).fail(function(){})}function pauseOthers(a){$("audio").not(a).each(function(a,b){b.pause(),$(b).siblings(".pause-overlay").find(".audiobook-pause-button").click()})}function getDuration(a){var b=a,c=b.duration,d=Math.floor(c/60),e=Math.floor(c/60)>9?Math.floor(c/60).toString():"0"+Math.floor(c/60);playerTime=d+":"+e,bodyClass.indexOf("pdpPage")>-1&&$(b).parents().find(".progress-bar .total-time").text(playerTime)}function UpdateProgressBar(a){var b=a;if(!isNaN(b.currentTime)&&!isNaN(b.duration)){var c=b.currentTime/b.duration,d=b.currentTime;countdownTimer=timeViewFormat(b.duration-d),bodyClass.indexOf("pdpPage")>-1?($(b).parents().find(".progress-bar .progress-status").width(100*c+"%"),$(b).parents().find(".progress-bar .current-time").text(countdownTimer)):($(b).siblings(".pause-overlay").find(".total-play-time").text(countdownTimer),$(b).siblings(".pause-overlay").find(".progress-status").width(100*c+"%"))}}function timeViewFormat(a){const b=Math.floor(a/60),c=Math.floor(a%60)>9?Math.floor(a%60).toString():"0"+Math.floor(a%60);return b+":"+c}function playEnded(a){if(onAudiobookSamplePlayCompleteAnalytics(a),bodyClass.indexOf("pdpPage")>-1){var b=a;b.pause(),b.currentTime=0,$(".pdp-pause-icon").addClass("d-none"),$(".pdp-play-icon").removeClass("d-none"),$(".sample-progress-bar-parent").addClass("d-none")}else $(".close-overlay").click()}function getUserProgress(a){var b=$(a.srcElement).width(),c=a.offsetX,d=c/b*100,e=$(a.srcElement).parent().parent().find("audio").length>0?$(a.srcElement).parent().parent().find("audio").attr("id"):$(document).find("audio").attr("id"),f=document.getElementById(e),g=f.duration*(c/b);f.currentTime=g,$(a.srcElement).children(".progress-status").width(d+"%")}function getCreditSummaryInPage(a,b){$(".audiobook-credit-summary [class^=credit-info]").addClass("d-none");var c=parseInt($("#creditSummaryItemstoShow").val()),d=$(".audiobook-credit-summary [class^="+a+"]"),e=d.length,f=d.splice((b-1)*c,c);if(f.length>0)$(".no-credits-available").addClass("d-none").removeClass("position-absolute"),$(".no-credits-available-message").addClass("d-none"),$.ajax({url:SITE_ROOT+"/account/audiobook/includes/credit-summary-pagination.jsp",data:{totalCount:e,itemsToShow:c,currentPagetoShow:b}}).done(function(a){$(".credit-summary-pagination").remove(),$(".credit-summary-container").append(a)}),$(f).each(function(){$(this).removeClass("d-none")});else{$(".credit-summary-pagination").remove();var g=$("#creditStatus").val(),h="all"==g?"Credits.":g+" Credits.";$(".no-credits-available").removeClass("d-none").addClass("position-absolute"),$(".no-credits-available-message").find(".text-capitalize").text(h),$(".no-credits-available-message").removeClass("d-none")}}var noItems=!1,chosen="",result="",bookGraphBookCount=21,modalObjToReset,itemsAdded=new Array,wishlistItemsAdded=new Array,addToFevourite="Add to Favourite ",initSessionCounter=function(){maxSCntr=0,maxITPS=$("#openModalAfterInSec").val(),lastAccessedTime=$("#sessionAccessedTime").val(),maxSEModalToDisplay=$("#maxSEModalToDisplay").val(),url=window.location.href,(url.indexOf("/checkout/")>-1||url.indexOf("/account/")>-1)&&null!=maxSEModalToDisplay&&(lastAccessedTime=isNaN(lastAccessedTime)?null:parseInt(lastAccessedTime/1e3),maxITPS=isNaN(maxITPS)?null:1e3*maxITPS,sessionInterval=setTimeout(checkLimit,maxITPS),$(document).ajaxComplete(function(a,b){var c=b.getResponseHeader("Get-Access-Time"),d=b.getResponseHeader("Open-Modal-After"),e=b.getResponseHeader("Is-Session-Tracking");null!=c&&"true"==e?(clearTimeout(sessionInterval),longDate=null==c?null:new Date(c).getTime(),lastAccessedTime=null==longDate?null:parseInt(longDate/1e3),maxITPS=null==d?maxITPS:1e3*d,sessionInterval=setTimeout(checkLimit,maxITPS)):"false"==e&&clearTimeout(sessionInterval)}))},checkLimit=function(){null==maxITPS||isNaN(lastAccessedTime)||(maxSEModalToDisplay>maxSCntr?notifySession():clearTimeout(sessionInterval))},notifySession=function(){if($("#modal-timeout-notification").is(":hidden")&&maxSEModalToDisplay>maxSCntr){{$("#modal-timeout-notification").modal()}initTimeoutModal()}},checkIsLogin=function(){var a=webContextRoot+"/includes/check-login.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(a=BN_EXTERNAL_DOMAIN_PREFIXED+a),$.ajax({type:"get",url:a,dataType:"script",cache:!1,async:!1,success:function(){BN.isExplicitlyLoggedIn===!0||BN.isSoftLoggedIn!==!0&&BN.isSoftLoggedIn!==!1?$("#wlContent").removeClass("d-none"):($("#isLoginModalOpen").val("yes"),new BN.Modal.Account.LoginNew(null,{target:this},{},null))}})};initTimeoutModal=function(){var a=$("#modal-timeout-notification"),b=!1,c=a.find("form");maxSCntr++,c.on("submit",function(){b=!0,a.modal("hide")});var d=setTimeout(function(){a.modal("hide")},6e4);a.on("hidden.bs.modal",function(){clearTimeout(d),b||($("body").hasClass("checkout-member")&&($("#memberSubmitOrder").is(":visible")?(void 0!=$("#memberSubmitOrder").attr("data-modal-class")||"undefined"!=$("#memberSubmitOrder").attr("data-modal-class"))&&($("#memberSubmitOrder").removeAttr("data-modal-class"),$("#memberSubmitOrder").bind("click",function(){window.location.href="/checkout"})):($("#verifyOrderAddress").removeAttr("data-modal-class"),$("#verifyOrderAddress").bind("click",function(){window.location.href="/checkout"}))),clearTimeout(sessionInterval))})},$(document).ready(function(){function a(){$(window).width()<=980&&window.location.href.indexOf("/checkout/")>0&&$(".container-cart").length>0&&0==$("#outOfStockNotification").length?window.location=SITE_DOMAIN_URL+"/?cart-redirect=true":$(window).width()>980&&window.location.href.indexOf("/?cart-redirect=true")>0&&(window.location=SITE_DOMAIN_URL+"/checkout")}function b(){0==$("#outOfStockNotification").length?$("#error-msg-notification").addClass("d-none"):($("#error-msg-notification").removeClass("d-none"),$("#error-msg-notification").css("border","solid 1px #f00"))}function c(a){clearInterval(a)}function c(a){clearInterval(a)}function c(a){clearInterval(a)}function d(){$(".product-removed").remove(),0==$("#itemCount").val()&&location.reload(!0)}function e(){"undefined"!=typeof gigya&&gigya.socialize.addEventHandlers({onLogin:onLoginHandler,onLogout:logoutFromGS})}$("main").removeClass("invisible"),$("#footer").removeClass("d-none"),0==$(".deal-badge-coupon").length&&$(".deal-badges").attr("style","display: none !important"),$(document).on("focus",".filter-list",function(){$(this).prev().attr("style","box-shadow:0 0 0 1px #347d56")}),$(document).on("blur",".filter-list",function(){$(this).prev().removeAttr("style")}),setCookieCheckout(),$("body").hasClass("homepage")&&($(".homepage .hp-promo-slide .promo-sm-item, .homepage .hp-promo-slide .promo-lg-item").parent().hasClass("hp-promo-slide")?$(".homepage .promo-carousel .hp-promo-slide").attr("role","menu"):$(".homepage .hp-promo-slide .promo-sm-item, .homepage .hp-promo-slide .promo-lg-item").parent().hasClass("slick-track")&&$(".homepage .promo-carousel .slick-track").attr("role","menu"),$(".homepage .hp-promo-slide .promo-sm-item, .homepage .hp-promo-slide .promo-lg-item").attr("role","menuitem"));var f;$(window).on("load resize",function(){if(setCookieCheckout(),b(),clearTimeout(f),f=setTimeout(a,200),$(window).width()>480&&$(window).width()<901){var c=$("#video-carousel-1 .video-item").length;c>2&&$(".video-carousel #video-carousel-1").addClass("video-tablet")}$(window).width()<481&&$(".see-all-link-mobile").length>0&&$(".see-all-link-mobile").each(function(){$(this).parents(".product-editorial").siblings("header").children("a.see-all-link").css("display","none")}),$(window).width()<600&&$(".deal-day").length>0&&0==$(".dod-content-desc").length&&$(".deal-day").each(function(){$(this).parent("section").append('<div class="d-sm-block d-md-none d-lg-none mt-s ml-s dod-content-desc">'+$(this).find(".dod-desc").html()+"</div>")})}),0==$("#pdp-page-container").length&&initializeImageLazyLoad(),(window.location.href.indexOf("/b/")>-1&&$("#searchGrid").find(".topXList").length<1||window.location.href.indexOf("/account")>-1)&&"undefined"!=typeof performance.clearMarks&&performance.clearMarks("Above_the_fold_loading_starts"),$("body").hasClass("landingPage")&&$(".landingPage").parent("html").addClass("h-100"),$(".bookgraph-list .bookgraph-product").css("display","none"),size_li=$(".bookgraph-list .bookgraph-product").length,x=bookGraphBookCount,$(".bookgraph-list .bookgraph-product:lt("+x+")").show(),$(".loadMore").on("click",function(){$("#load-alert").attr("role","alert"),$("#load-alert").attr("aria-label","New Books Loaded"),x+=bookGraphBookCount,size_li>=x?($(".bookgraph-list .bookgraph-product:lt("+x+")").show(),$(".bookgraph-list .bookgraph-product:lt("+(x-(bookGraphBookCount-1))+")").prevAll(".bookgraph-product").hide()):($(".bookgraph-list .bookgraph-product:lt("+bookGraphBookCount+")").nextAll(".bookgraph-product").hide(),$(".bookgraph-list .bookgraph-product:lt("+bookGraphBookCount+")").show(),x=bookGraphBookCount),setTimeout(function(){$("#load-alert").removeAttr("role"),$("#load-alert").removeAttr("aria-label")},1e3)}),$(".bookgraph-grid").closest(".main-content").find("header").first().find("span").first().replaceWith(function(){return $("<h1 />",{html:$(this).html(),"class":"text--center"})}),$(".bookgraph-grid ").closest(".main-content").find("header").first().find("span").last().replaceWith(function(){return $("<h4 />",{html:$(this).html(),"class":"text--center"})}),$("#birthdayMonth").on("focusout",function(){var a=$(this).siblings(".selectBox-container").find(".selectBox-dropdown .selectBox-label").text().trim();""===$("#birthdayMonth").siblings(".selectBox-container").find(".selectBox-dropdown .selectBox-label").text().trim()?$("#birthdayDay").removeAttr("required"):$("#birthdayDay").attr("required","required"),"February"===a?$("#birthdayDay-option-29, #birthdayDay-option-30, #birthdayDay-option-31").addClass("hidden"):"April"===a||"June"===a||"September"===a||"November"===a?($("#birthdayDay-option-29, #birthdayDay-option-30").removeClass("hidden"),$("#birthdayDay-option-31").addClass("hidden")):$("#birthdayDay-option-29, #birthdayDay-option-30, #birthdayDay-option-31").removeClass("hidden")}),$("#birthdayMonth").change(function(){$("#birthdayDay")[0].selectedIndex=0,$("#birthdayDay-replacement #birthdayDay-button-label").text(" "),$("#birthdayDay-replacement").removeClass("selectBox--filled")}),$("#birthdayDay").on("focusout",function(){""===$("#birthdayDay").siblings(".selectBox-container").find(".selectBox-dropdown .selectBox-label").text().trim()?$("#birthdayMonth").removeAttr("required"):$("#birthdayMonth").attr("required","required")}),$("#searchRecmdBtn, #reccommendsearch").on("click keydown",function(a){if("searchRecmdBtn"===$(a.currentTarget).attr("id")&&"click"===a.type||"reccommendsearch"===$(a.currentTarget).attr("id")&&13===a.keyCode){a.preventDefault();var b=$(window).scrollTop(),c=$("#reccommendsearch").val();new BN.Modal.Browse.recDisplay(null,{target:$(this)},{useCache:!1,tplParams:{Ntt:c,scrollPosition:b}})}}),$("#resetSearchBtn").on("click",function(){var a=$(".favorite-book-search .searchbox-container");a.removeClass("edit-result mb-s"),$("#reccommendsearch").removeClass("recommender-padding-left"),a.find(".fav-search-logo").removeClass("hidden"),$("#resetSearchBtn").addClass("strict-hidden"),$("#searchRecmdBtn").removeClass("strict-hidden"),$("#reccommendsearch").val("").focus(),$("#recommendedResponse").html(""),$(".no-selected-result").addClass("hidden"),$(".initial-recommendation").removeClass("hidden"),$(".recommended-books-suggestion").addClass("hidden"),$(".richTextDefault").removeClass("hidden"),$(".richTextResult").addClass("hidden")}),$(".recommendedBook").on("click",function(){var a={skuId:$(this).parent(".product-shelf-image").data("skuId"),imgPath:$(this).find("img").attr("src"),imgAlt:$(this).find("img").attr("alt"),pdpURL:$(this).parent(".product-shelf-image").data("pdpUrl")};$("#reccommendsearch").addClass("recommender-padding-left"),$(".favorite-book-search .searchbox-container").find(".fav-search-logo").addClass("hidden"),$("#reccommendsearch").val($(this).parent(".product-shelf-image").data("skuTitle")),getRecommendationOfSelectedBook_ajax(a)}),$(document).on("click",".checkout-membership-coupons__link",function(){}),$(".augHeader").each(function(){$(this).on("keyup click",function(a){(13==a.keyCode||"click"==a.type)&&("false"===$(this).attr("aria-expanded")&&($(this).find(".icon-minus").addClass("icon-plus"),$(this).find(".icon-minus").removeClass("icon-minus")),"true"===$(this).attr("aria-expanded")&&($(this).find(".icon-plus").addClass("icon-minus"),$(this).find(".icon-plus").removeClass("icon-plus")))})}),$("#view-more-discover").hide(),$("#view-more-discover-btn").on("click",function(){$("#view-more-discover").is(":visible")?($(this).html(this.getAttribute("data-closed-label")),this.setAttribute("aria-expanded","false"),$("#view-more-discover").slideUp(500)):($(this).html(this.getAttribute("data-opened-label")),this.setAttribute("aria-expanded","true"),$("#view-more-discover").slideDown(500));var a=$(window).scrollTop()+100;$("html,body").animate({scrollTop:a},500)}),"landingPage"==bodyClass&&0==$("ul#productInfoTabs").children().length&&$("#pdp-tabs").hide(),$("#shoppingBagLink").on("keyup",function(a){var b=a.keyCode?a.keyCode:a.which;9===b&&($("#miniCart").find("a").length>0?$("#miniCart").find("a:first").focus():($("#primaryNav").children("ul").find("li:first").find("a").focus(),$("#primaryNav").children("ul").find("li:first").addClass("focus"),a.stopPropagation(),a.preventDefault()))}),$("#page-curl__text").attr("tabindex","-1"),$("#page-curl__text").addClass("hidden");var g=setInterval(function(){"undefined"!==$("#country").siblings(".selectBox-container").attr("role")&&($("#country").siblings(".selectBox-container").removeAttr("role"),$("#country").siblings(".selectBox-container").removeAttr("aria-labelledby"),$("#country").siblings(".selectBox-container").find("a").attr("aria-labelledby","country-button-label"),c(g))},1e3);$(".product-shelf-favorite").find("label").on("keydown",function(a){13==a.keyCode&&($(this).trigger("click"),$(this).focus())});var h=$.trim($("#productDetail").find(".product-image-slide img").attr("alt"));"undefined"!=h&&""!=h&&$("#productDetail").find(".product-image-slide").removeAttr("aria-describedby").attr("aria-label",h),$("#productDetail").find(".product-thumb").each(function(){var a=$(this).find("img").attr("alt");"undefined"!=a&&""!=a&&$(this).removeAttr("aria-describedby").attr("aria-label",a)}),$(window).on("DOMMouseScroll mousewheel",function(a){if((a.originalEvent.detail<0||a.originalEvent.wheelDelta>0)&&$(window).scrollTop()<400&&$(".product-image-carousel").length>0){var b=$("#productDetail").find(".product-image-slide").attr("aria-describedby");"undefined"!=typeof b&&b!==!1&&$("#productDetail").find(".product-image-slide").removeAttr("aria-describedby")}$(".v-product-image-carousel").length>0&&$("#productDetail").find(".product-thumb").each(function(){var a=$(this).attr("aria-describedby");"undefined"!=typeof a&&a!==!1&&$(this).removeAttr("aria-describedby")})}),"undefined"==typeof BN_EXTERNAL_DOMAIN_PREFIXED&&$.fn.bnAutoSuggest({searchInputSelector:"#searchBarBN"}),initializeSearchBarTextForIE();var i=$("#sessionXtndEnabled").val();"true"==i&&initSessionCounter(),$("#checkoutSteps a").click(function(a){$(this).hasClass("completed")||a.preventDefault()}),$("#myAccountMenu .sign-in").click(function(){$("#myAccountLinks").css("display","none")}),$("#myAccountLink").hover(function(){$("#myAccountLinks").css("display","block").addClass("showMyAccountLinks")},function(){$("#myAccountLinks").removeClass("showMyAccountLinks")});var j;if($("body").on("click",function(a){var b=$(a.target);if("tooltip"===b.attr("data-dismiss")&&$(b).hasClass("audioformat-cross"))setTimeout(function(){$(".audio-book-tooltip-updated").focus()},0);else if("tooltip"===b.attr("data-dismiss")&&$(b).hasClass("audiobook-nook-cross"))setTimeout(function(){$(".audio-nook-tooltip").focus()},0);else if("tooltip"!==b.attr("data-dismiss")||$(b.parent()).hasClass("tooltip-marketplace"))if("tooltip"===b.attr("data-dismiss")&&$(b.parent()).hasClass("tooltip-marketplace")){var c='[data-content="'+j+'"]';setTimeout(function(){$(c).focus()},0),$(c).addClass("focus")}else b.hasClass("tooltip-icon-info")&&b.hasClass("audio-nook-tooltip")&&!b.hasClass("shipping-options-tooltip")&&!b.hasClass("shipping-tooltip-icon")?($(b[0].__tooltip.content).find("a").addClass("focus"),setTimeout(function(){"#audio-nook-tooltip-content"===$(b[0]).data("content")&&$($(b[0].__tooltip.content).find("a")[0]).on("keydown",function(a){(9==a.keyCode||38==a.keyCode)&&a.preventDefault()})},0)):b.hasClass("tooltip-icon-info")&&b.hasClass("audio-book-tooltip")&&!b.hasClass("shipping-options-tooltip")&&!b.hasClass("shipping-tooltip-icon")?($(b[0].__tooltip.content).find("a").addClass("focus"),setTimeout(function(){"#audio-book-tooltip-content"===$(b[0]).data("content")&&$($(b[0].__tooltip.content).find("a")[0]).on("keydown",function(a){(9==a.keyCode||38==a.keyCode)&&a.preventDefault()})},0)):!b.hasClass("tooltip-icon-info")||b.hasClass("shipping-options-tooltip")||b.hasClass("shipping-tooltip-icon")?b.hasClass("tooltip-icon-info")&&b.hasClass("shipping-options-tooltip")&&(j=b.attr("data-content"),$(b[0].__tooltip.content).find("a").addClass("focus"),setTimeout(function(){$(b[0].__tooltip.content).find("a").focus()},0)):($(b[0].__tooltip.content).find("a").addClass("focus"),setTimeout(function(){$(b[0].__tooltip.content).find("a").focus(),$("#taxexemption").find(".tooltip-icon-info").attr("aria-label","Click to close Tax Exemption Tooltip"),"#tax-exemption-tooltip-content"===$(b[0]).data("content")&&$($(b[0].__tooltip.content).find("a")[0]).on("keydown",function(a){(9==a.keyCode||38==a.keyCode)&&a.preventDefault()})},0));else setTimeout(function(){$("#taxexemption").find(".tooltip-icon-info").attr("aria-label","Click to open Tax Exemption Tooltip"),$(".tooltip-icon-info").focus()},0),$(".tooltip-icon-info").addClass("focus")}),$("#relatedAd").length>0&&($("#relatedAd div").hasClass("gpt-ad-container")||$("#relatedAd div").find("div").attr("class","advertisement-block")),$(".product-removed").is(":visible")){var k=$("#undoTimeOut").val();setTimeout(d,k)}if(0==$("#itemCount").val()&&$(".product-removed section a.icon-close-modal").on("click",function(){location.reload(!0)}),$(".text-input--location input").on("focusout",function(){""!=$(".text-input--location input").val()?$(".text-input--location form").submit():$(".text-input--location").addClass(" user-error invalid error-placeholder")}),$("#myAccountLink, #myAccountLinks, #myAccountLinks li a").focus(function(){$("#myAccountLinks").css("display","block").addClass("showMyAccountLinks")}),$("#myAccountLink, #myAccountLinks, #myAccountLinks li a").focusout(function(){$("#myAccountLinks").removeClass("showMyAccountLinks")}),$("#globalHeader, [id^=cartItemsContainer]").on("focus blur keyup input propertychange",".product-quantity",onlyNumbers),($("#userLinks").length||"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED)&&(openLoginModalNew(".sign-in-link",{preventDefault:"conditionally",successCallback:function(a,b){"true"==b.captureTeleNo&&-1==window.location.href.indexOf("/membership")?new BN.Modal.Account.AddPhoneNumber(null,{target:this}):$(".pdpPage").length>0?location.reload():window.location=$(this).attr("href")}}),$("#globalHeader").on("click",".move-to-checkout",function(a){a.preventDefault(),new BN.Modal.Account.LoginCheckout(null,{target:this})})),initTopNavMenus(),$("#checkBalanceGCLanding").submit(function(a){a.preventDefault(),$("#balanceErr").is(":visible")&&$("#balanceErr").hide();var b=$("#checkBalanceGCLanding").find("input#giftNumber").val(),c=$("#checkBalanceGCLanding").find("input#giftCardPIN").val();new BN.Modal.Browse.GiftCardBalance(null,{target:this},{useCache:!1,tplParams:{giftCardNumber:b,giftCardPin:c,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}})}),$("#checkBalanceGCLandingV3, #checkBalanceForm, #checkBalance").on("amplifiFormSuccess",function(a,b){if("checkBalanceGCLandingV3"==$(this).attr("id")){var c=$("#checkBalanceGCLandingV3").find("input#giftNumber").val(),d=$("#checkBalanceGCLandingV3").find("input#giftCardPIN").val(),e=b.gcInitialBalance,f=b.gcUsedBalance,g=b.giftCardRemainingBalance;new BN.Modal.Browse.GiftCardBalance(null,{target:this},{useCache:!1,tplParams:{giftCardNumber:c,giftCardPin:d,gcInitialBalance:e,gcUsedBalance:f,giftCardRemainingBalance:g,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}})}else $(".gc-balance-table").removeClass("strict-hidden"),$(".gc-balance-table table tr#gcRemBalance td:nth-child(2)").html("$"+b.giftCardRemainingBalance)}).on("amplifiFormError",function(a,b){var c=b.adiRecomendationCode;if("checkBalanceGCLandingV3"==$(this).attr("id"))var d=$("#checkBalanceGCLandingV3").find("#checkGCBal"),e=$(a.currentTarget).attr("id"),f=$("#checkBalanceGCLandingV3");else if("checkBalanceForm"==$(this).attr("id"))var d=$("#checkBalanceForm").find("#checkBalanceFormSubmit"),e=$(a.currentTarget).attr("id"),f=$("#checkBalanceForm");else var d=$("#checkBalance").find("#checkBalanceSubmit"),e=$(a.currentTarget).attr("id"),f=$("#checkBalance");"2FAREQUIRED"==b.response.items[0].toUpperCase()?($("#balanceErr").hide(),new BN.Modal.Account.TwoStepVerification(null,{target:this},{useCache:!1,tplParams:{formBtn:d,formName:f,formId:e,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}})):c&&"DENY"===c.toUpperCase()&&d.prop("disabled",!0)}),$(".membership-link").on("click",function(a){a.preventDefault(),new BN.Modal.Account.LoginNew(null,{target:this},{useCache:!1,tplParams:{membershipIDLink:!0}})}),openLoginModal("#ultraviolet-sign-in",{preventDefault:"always",successCallback:function(){var a=getModalObj("m-ultraviolet"),b=function(){"undefined"!=typeof a&&null!=a&&a.Close(),new BN.Modal.Success(null,{title:"Account Already Linked!",messages:[{type:"success",message:"Your BN.com NOOK account is already linked with your UltraViolet account."}]})},c=function(){"undefined"!=typeof a&&null!=a&&a.Close(),new BN.Modal.Browse.PDP.UltravioletSignIn(null,{target:this},{useCache:!1})};isUvAccountLinked(b,c)}}),$("#freeMemberSignIn").length>0){var l=$("#freeMemberSignIn");brierleyLoginCreateParams(l)}openLoginModal(".sign-in-email-link",{preventDefault:"always",successCallback:function(a,b){var c=b?b.data.confirmEmail:!1,d=b?b.data.isWelcomeGiftUsed:!0,e=$(".sign-in-email-link").data("intent");location.href=redirectbrierleyLogic(c,e,d)}}),openLoginModalNew("#getFreeNookSample",{type:"explicit",preventDefault:"always",successCallback:function(){var a=$(this).closest("form"),b=!1,c=!1;m(),a.length&&(BN.uXHR.Form.apply(a),a.on("amplifiFormBeforeSubmit",function(){a.addClass("loading-opacity")
}).on("amplifiFormSuccess",function(d,e){a.removeClass("loading-opacity"),"undefined"!=typeof e.isDuplicate&&"true"==e.isDuplicate?b||(new BN.Modal.Browse.PDP.Duplicatesample(null,{target:this},{useCache:!1},null),b=!0):c||(new BN.Modal.Browse.PDP.Sampleadded(null,{target:this},{useCache:!1},null),c=!0)}).on("amplifiFormError",function(){a.removeClass("loading-opacity")}),a.submit())}}),openLoginModalNew(".btn-start-free-trial",{preventDefault:"always",successCallback:function(){location.reload()}}),openLoginModalNew(".ab-signin-link",{preventDefault:"always",successCallback:function(a,b){var c=b.data.audioBookUserType;window.location.href="nonParticipatingUser"==c?"/account/audiobook/purchase-audiobook-subscription.jsp":"/account/audiobook/manage-audiobook-subscription.jsp"}}),openLoginModalNew(".ab-signin-page-cq",{preventDefault:"always",successCallback:function(){var a=$("#audioBookUserType").val();"nonParticipatingUser"==a?new BN.Modal.Account.PurchaseAudiobookSubscription(null,{target:this},{useCache:!1,tplParams:{}}):"trialCompletedUser"==a?new BN.Modal.Account.ReactivateAudiobookSubscription(null,{target:this},{useCache:!1,tplParams:{}}):window.location.href="/account/audiobook/manage-audiobook-subscription.jsp"}}),openLoginModalNew(".sign-in-checkout",{preventDefault:"always",successCallback:function(){m(),location.href=$(this).attr("href")}}),openLoginModalNew(".guest-create-wishlist",{preventDefault:"always",successCallback:function(){new BN.Modal.Account.Wishlist.Add(null,{target:this},{useCache:!1,tplParams:{newGuestWishlistCreate:"true"}},null),m()}}),openLoginModalNew(".pdpAddToWishlistLink",{type:"explicit",preventDefault:"always",successCallback:function(){var a=getCurrentModal($(this));m(),new BN.Modal.Account.Wishlist.Add(null,{target:this},{tplUrlOverride:$(this).attr($(this).attr("data-url")?"data-url":"href"),useCache:!1},a)}}),openLoginModalNew(".browseAddToWishlistLink",{type:"explicit",preventDefault:"always",successCallback:function(a,b){if(b){{var c=b.data.uid,d=b.giftlistId;new Array}$(this).hasClass("quick-view")?($(this).closest(".modal").show(),addFormArr=$(this).siblings("form[id^=addItemToWishlist1test]"),removeFormArr=$(this).siblings("form[id^=frmRemoveGiftItemtest_]")):(addFormArr=$(document).find("form[id^=addItemToWishlist1test]"),removeFormArr=$(document).find("form[id^=frmRemoveGiftItemtest_]")),$.each(addFormArr,function(a,b){$(b).find("[id^='owner']").attr("value",c),$(b).find("[id^='addGiftlistId']").attr("value",d)}),$.each(removeFormArr,function(a,b){$(b).find("[id^='removeGiftlistId']").attr("value",d)}),m()}var e=$(this).siblings("form[id^=addItemToWishlist1test]");e.submit()},onclose:function(){var a=wishlistItemsAdded[wishlistItemsAdded.length-1];$("#"+a).focus(),$("#"+a).addClass("focus");for(var b=0;b<wishlistItemsAdded.length;b++)$("#"+wishlistItemsAdded[b]).data("aria-selected","false"),$("#"+wishlistItemsAdded[b]).attr("aria-checked","false");$(".browseAddToWishlistLink").hasClass("quick-view")&&$(".browseAddToWishlistLink").closest(".modal").show()}}),openLoginModalNew("#writeReviewBtn",{type:"explicit",preventDefault:"always",successCallback:function(a,b){var c=(getCurrentModal($(this)),$("#writeReviewBtn")),d=b?b.data.uid:c.data("uid").toString(),e={"work-id":c.data("work-id").toString(),uid:d,ean:c.data("ean").toString(),target:c};return c.attr("data-uid",d),m(),new BN.Modal.Gigya.WriteReview(null,e)}}),initMasterPass=function(){$("#masterpass-button").addClass("disabled");var a=(document.getElementById("masterpassLibUrl").value,document.getElementById("masterpassUpgraded").value,$("#pageValue").val());if($("#mpscript").remove(),0==$("#mpscript").length){var b=document.createElement("script");b.async=!0,b.id="mpscript",b.type="text/javascript",b.src=document.getElementById("masterpassLibUrl").value,b.onload=function(){if($("#masterpass-button").length>0){var b=SITE_ROOT+$("#callbackUrlForMasterpass").val();if("undefined"!=typeof s_setP){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Masterpass Click"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","masterpassClick"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),_satellite.track("onMasterpassClick")}$.ajax({url:SITE_ROOT+"/checkout/master-pass-checkout.jsp",type:"post"}).done(function(c){function d(c){$("#mperrormsg").addClass("hidden"),url=b+"?oauth_token="+c.oauth_token+"&oauth_verifier="+c.oauth_verifier+"&checkoutId="+c.checkoutId+"&checkout_resource_url="+c.checkout_resource_url+"&mpstatus="+c.mpstatus+"&clickfrom="+a,$(location).attr("href",url)}function e(){}function f(){$("#mperrormsg").removeClass("hidden"),$("#mperrormsgid").html("We’re sorry! There was an error with your Click to Pay profile. Please try again or choose a different payment method.")}try{response=JSON.parse(c),MasterPass.client.checkout({version:"v6",callbackUrl:b,successCallback:d,cancelCallback:e,failureCallback:f,requestToken:response.requestToken,merchantCheckoutId:response.merchantCheckoutId,suppressShippingAddressEnable:response.suppressShippingAddressEnable,allowedCardTypes:response.allowedCardTypes})}catch(g){}}).fail(function(){})}};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}},initpayPalForSameSelector=function(a,b){$(a).each(function(){if(0==$(this).find(".paypal-button-context-iframe").length){var a="paypal-render-"+(new Date).getTime();$(this).addClass(a),initPaypalExpress("."+a,!0,b)}})},initPaypalExpress=function(a,b,c){b="undefined"==typeof b?!1:b,c="undefined"==typeof c?"":c;var d="pay";return".checkout-paypal"===a&&(d="checkout"),$(a).length>1&&!b?initpayPalForSameSelector(a,d):(""!==c&&(d=c),void("undefined"!=typeof paypal?paypal.Button.render({env:$("#pp_environment").val(),style:{label:d,shape:"rect",tagline:!1,size:"responsive"},payment:function(){return paypal.request.post($("#paypal_express_post_url").val()).then(function(a){try{var b=a.replace(/\n+/g,"").replace("}{","}||{").split("||"),c=JSON.parse(b[0]);"ERROR"==c.payToken&&c.errorMessage.search(/Shipping address/i)>-1&&($("form").each(function(){"undefined"!=typeof $(this).attr("data-messaging")&&""!=$(this).attr("data-messaging")&&$($(this).attr("data-messaging")).is(":visible")&&$($(this).attr("data-messaging")).hide()}),$("aside#payPalShipingAddressError").show(),$("aside#payPalShipingAddressError").attr("tabindex","0"),$("aside#payPalShipingAddressError").focus())}catch(d){}return"ERROR"==a.payToken?($("#paypalExpressRenderer").show(),$("#paypalExpressRenderer em").html(a.errorMessage),null):a.payToken},function(a){return a.details})},onAuthorize:function(a,b){return b.redirect()},onError:function(){}},a):setTimeout(function(){initPaypalExpress(".checkout-paypal")},100)))},initUpgradedMasterPass=function(){function a(a){$("#mperrormsg").removeClass("hidden"),$("#masterpass-button").removeClass("disabled"),$("#mperrormsgid").html("We're sorry! There was an error with your Click to Pay account. Please refresh your browser window and try again, or choose a different payment method.",a.explaination)}function b(){$("#masterpass-button").removeClass("disabled")}function c(a,b){url=e+"?correlationId="+a+"&scheme="+b,$(location).attr("href",url),$("#masterpass-button").removeClass("disabled")}if("true"==$("#masterpassUpgraded").val()&&!$("#masterpass-button").hasClass("config-start")){var d="true"==$("#masterpassUpgradedNewLogic").val();if(d)$("#masterpass-button").addClass("disabled"),$("#masterpass-button").length>0&&$.ajax({url:SITE_ROOT+"/checkout/initiate-master-pass-checkout.jsp",type:"post"}).done(function(a){function b(a){$("#mperrormsg").removeClass("hidden"),$("#masterpass-button").removeClass("disabled"),$("#mperrormsgid").html("We're sorry! There was an error with your Click to Pay account. Please refresh your browser window and try again, or choose a different payment method.",a.explaination)}function c(){$("#masterpass-button").removeClass("disabled")}function d(a,b){var c=f+"?correlationId="+a+"&scheme="+b;$(location).attr("href",c),$("#masterpass-button").removeClass("disabled")}try{var e=JSON.parse(a);$("#transactionAmount").val(e.transactionAmount);{var f=SITE_ROOT+$("#callbackUrlForMasterpass").val();$("#pageValue").val(),$("#masterpassUpgraded").val()}if("undefined"!=typeof s_setP){var g=getAnalyticsEventCount();s_setP("digitalData.event["+g+"].eventInfo.eventName","Masterpass Click"),s_setP("digitalData.event["+g+"].eventInfo.eventAction","masterpassClick"),s_setP("digitalData.event["+g+"].eventInfo.timeStamp",""+new Date),_satellite.track("onMasterpassClick")}SRCi.launchUI({consumerEmailAddressRequested:$("#consumerEmailAddressRequested").val(),transactionAmount:$("#transactionAmount").val(),transactionCurrency:$("#transactionCurrency").val(),dpaShippingPreference:$("#dpaShippingPreference").val(),dpaBillingPreference:$("#dpaBillingPreference").val()},d,b,c)}catch(h){}}).fail(function(){});else if($("#masterpass-button").addClass("disabled"),$("#masterpass-button").length>0){{var e=SITE_ROOT+$("#callbackUrlForMasterpass").val();$("#pageValue").val(),$("#masterpassUpgraded").val()}if("undefined"!=typeof s_setP){var f=getAnalyticsEventCount();s_setP("digitalData.event["+f+"].eventInfo.eventName","Masterpass Click"),s_setP("digitalData.event["+f+"].eventInfo.eventAction","masterpassClick"),s_setP("digitalData.event["+f+"].eventInfo.timeStamp",""+new Date),_satellite.track("onMasterpassClick")}SRCi.launchUI({consumerEmailAddressRequested:$("#consumerEmailAddressRequested").val(),transactionAmount:$("#transactionAmount").val(),transactionCurrency:$("#transactionCurrency").val(),dpaShippingPreference:$("#dpaShippingPreference").val(),dpaBillingPreference:$("#dpaBillingPreference").val()},c,a,b)}}},masterPassConfigure=function(a){if(0==$("#mpscript").length){var b=$("#masterpassLibUrl").val(),c=document.createElement("script");c.id="mpscript",c.type="text/javascript",c.src=b,c.onload=function(){initMCconfigure(a)};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}else initMCconfigure(a)},$(document).on("click","#createAcctLink, .email-create-account",function(a){a.preventDefault();var b={},c={target:a.target};"createAcctLink"!=$(this).attr("id")&&(b={useCache:!1,tplParams:{customerkey:$(".email-create-account").attr("data-customerkey"),intent:$(".email-create-account").attr("data-intent")}}),"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&""!=BN_EXTERNAL_DOMAIN_PREFIXED?createAccountSocialLogin($(this),{successCallback:function(){location.reload()},modalData:c,defaultOptions:b},a):new BN.Modal.Account.RegisterNew(null,c,b,null)}),$.receiveMessage(function(a){var b=deparam(a.data);switch(b.type){case"uvSuccess":var c=getModalObj("m-uv-signin-form"),d=function(){"undefined"!=typeof c&&null!=c&&c.Close(),new BN.Modal.Success(null,{title:"Success!",messages:[{type:"success",message:'Your account was linked successfully! <br><br> <p>To watch UltraViolet titles on BN.com, search for the video and select the "Watch Now" option on the product page.<br/><br/>All UltraViolet titles are not available for playback on BN.com.  Please visit <a href="https://www.uvvu.com">www.uvvu.com</a> to see a list of all of your UltraViolet videos.</p>'}]})},e=function(){"undefined"!=typeof c&&null!=c&&c.Close(),new BN.Modal.Success(null,{title:"Error!",messages:[{type:"error",message:"There was a problem linking your UltraViolet account. Please try again."}]})};isUvAccountLinked(d,e);break;case"uvError":var c=getModalObj("m-uv-signin-form"),f="There was a problem linking your UltraViolet account. Please try again.";"undefined"!=typeof b.message&&""!=b.message&&(f=b.message),"undefined"!=typeof c&&null!=c&&c.Close(),new BN.Modal.Success(null,{title:"Error!",messages:[{type:"error",message:f}]});break;case"changeHeight":var g=b.modal,c=getModalObj(g),h=$(c.modal).find("iframe"),i=h.height(b.height);"conflictingaccount"==b.modal||"sociallogin-missingparam"==b.modal||"login"==b.modal?$(".modal__dialog:visible").height(b.height):$(".modal__dialog").height(b.height);break;case"blurParent":document.activeElement.blur();var g=b.modal,j=b.frameUrl,k=b.selector,c=getModalObj(g),h=$(c.modal).find("iframe"),l={type:"blurDone",focusSelector:k};$.postMessage(l,j,h.get(0).contentWindow);break;case"frameLoaded":document.activeElement.blur();var g=b.modal,j=b.frameUrl,c=getModalObj(g),h=$(c.modal).find("iframe"),i=h.height(),l={type:"frameHeight",height:i};if(c.data=c.data||{},c.data.frameUrl=j,("reset-password-email"===g||"reset-password"===g)&&h&&h.length>0&&$(h).contents()){var m=$(h).contents().find("body"),n=m.find("#dialog-title");n.html("Password Assistant")}if("change-password"===g&&h&&h.length>0&&$(h).contents()){var m=$(h).contents().find("body"),n=m.find("#dialog-title");n.html("Reset Password")}if("login"===g&&h&&h.length>0&&$(h).contents()){var m=$(h).contents().find("body"),n=m.find("#dialog-title");n.html("Sign in or Create an Account")}$.postMessage(l,j,h.get(0).contentWindow),"undefined"!=typeof s_setP&&updateAnalyticsPageName(g),$("a.selectBox-dropdown").attr("role","combobox"),$(".selectBox-dropdown-menu").attr("role","listbox"),$(".selectBox-dropdown-menu > li").attr("role","option");break;case"removeLoader":$(".spinner").remove();break;case"displayFrame":$(".modal--611-wide--with-scaling").removeClass("hide-frame");break;case"frameFormSuccess":if("undefined"!=typeof s_setP){var o=getAnalyticsEventCount();"loginForm"===b.formId?(s_setP("digitalData.event["+o+"].eventInfo.eventName","Sign in Complete"),s_setP("digitalData.event["+o+"].eventInfo.eventAction","signInComplete"),s_setP("digitalData.event["+o+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+o+"].category.primaryCategory","User"),_satellite.track("onSigninComplete")):"createAccountForm"===b.formId&&(s_setP("digitalData.event["+o+"].eventInfo.eventName","Create Account Complete"),s_setP("digitalData.event["+o+"].eventInfo.eventAction","createAccountComplete"),s_setP("digitalData.event["+o+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+o+"].category.primaryCategory","User"),_satellite.track("onCreateAccountComplete"))}frameFormSuccess(b);break;case"nookLoginSuccess":var p=b.uxhr;if("undefined"!=typeof p.missingCard&&"addNew"==p.missingCard){var g=b.modal,c=getModalObj(g);new BN.Modal.Checkout.AddCC(null,this,null,c)}else if("undefined"!=typeof p.missingCard&&"showSaved"==p.missingCard){var g=b.modal,c=getModalObj(g);new BN.Modal.Checkout.UseSavedCC(null,this,null,c)}else redirectToNook();break;case"frameResetPwFormSuccess":if(""!=b.redirect)redirectFromFrame(b.redirect);else{var p=b.uxhr;if("undefined"!=typeof p.sentEmail&&"true"==p.sentEmail.toLowerCase()){var g=b.modal,c=getModalObj(g);new BN.Modal.Account.Base("reset-password-confirmation",null,{useCache:!1,tplParams:{email:encodeURIComponent(p.email)}},c)}else if("undefined"!=typeof p.questionAnswerSuccess&&"true"==p.questionAnswerSuccess.toLowerCase()){var g=b.modal,c=getModalObj(g),q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"change-password",u:p.userId},useCache:!1};new BN.Modal.Account.ChangePasswordNew(null,null,q,c)}else{if("undefined"==typeof p.changedPassword||"true"!=p.changedPassword.toLowerCase()){var g=b.modal,c=getModalObj(g),q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password",email:p.email,question:encodeURIComponent(p.question),encrypted:p.encrypted},useCache:!1};new BN.Modal.Account.ForgotPasswordNew(null,null,q,c);break}var g=b.modal,c=getModalObj(g);c.flow().goTo(0,"button").triggerClose("button"),new BN.Modal.Success(null,{title:"We've Changed Your Password",messages:[{type:"success",message:"You have successfully changed your password!"}],onclose:function(){$("#signInLink").addClass("focus"),$("#signInLink").focus()}})}}break;case"errorForInactiveUser":var p=b.uxhr,g=b.modal,c=getModalObj(g);if("true"===p.passwordInvalid)var q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password",email:p.email,question:encodeURIComponent(p.question),encrypted:p.encrypted,isInvalidPwdMaxLimit:!0},useCache:!1};if("true"===p.isInactiveUser)var q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password",email:p.email,question:encodeURIComponent(p.question),encrypted:p.encrypted,isInactiveUser:!0},useCache:!1};if("true"===p.isPasswordResetRequired)var q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password",email:p.email,question:encodeURIComponent(p.question),encrypted:p.encrypted,isPasswordResetRequired:!0},useCache:!1};if("true"===p.isAccDeactivated)var q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password",email:p.email,question:encodeURIComponent(p.question),encrypted:p.encrypted,isAccDeactivated:!0},useCache:!1};new BN.Modal.Account.ForgotPasswordNew(null,null,q,c);break;case"successFormForBrierley":redirectFromFrame(b.redirect);break;case"successFormForActivateMemberViaLogin":redirectFromFrame(b.redirect);break;case"closeModal":var g=b.modal;closeModalInstanceFromFrame(g);break;case"guestCheckout":var g=b.modal;closeModalInstanceFromFrame(g),redirectFromFrame(b.redirect);break;case"forgotPasswordEmail":var g=b.modal,c=getModalObj(g),q={tplParams:{parentUrl:encodeURIComponent(location.href),tplName:"reset-password-email"},useCache:!1};new BN.Modal.Account.ForgotPasswordEmailNew(null,{targetSelector:b.target},q,c);break;case"createAccount":var g=b.modal,c=getModalObj(g),r={parentUrl:encodeURIComponent(location.href),tplName:"register",isEgift:$("#isEgiftLogin").val(),isNookLogin:$("body").hasClass("nook-login-page")};void 0!=b.intent&&""!=b.intent&&(r.intent=b.intent),void 0!=b.customerkey&&""!=b.customerkey&&(r.customerkey=b.customerkey),void 0!==b.membershipID&&""!==b.membershipID&&(r.membershipID=b.membershipID,r.bnMemberId=b.bnMemberId);var q={tplParams:r,useCache:!1},s={redirect:!1,targetSelector:b.target};new BN.Modal.Account.RegisterNew(null,s,q,c);break;case"openLogin":var g=b.modal,c=getModalObj(g);c.Close(),null==getModalObj("login")&&new BN.Modal.Account.LoginNew(null,{target:this},{},null);break;case"errorFormForBrierley":redirectFromFrame(b.redirect);break;case"framePostError":case"frameValidateError":var o=getAnalyticsEventCount(),t="undefined"!=typeof b.uxhr?b.uxhr.response.items:b.messages;"loginForm"!==b.formId&&"createAccountForm"!==b.formId?trackOnError(t):(s_setP("digitalData.event["+o+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+o+"].category.primaryCategory","User"),"undefined"!=typeof t&&$.each(t,function(a,b){s_setP("digitalData.event["+o+"].attributes.message["+a+"]",b)}),"loginForm"===b.formId?(s_setP("digitalData.event["+o+"].eventInfo.eventName","Sign in Failed"),s_setP("digitalData.event["+o+"].eventInfo.eventAction","signInFailed"),_satellite.track("onSigninFailed")):"createAccountForm"===b.formId&&(s_setP("digitalData.event["+o+"].eventInfo.eventName","Create Account Failed"),s_setP("digitalData.event["+o+"].eventInfo.eventAction","createAccountFailed"),_satellite.track("onCreateAccountFailed")));break;case"socialloginMissingdata":var g=b.modal,c=getModalObj(g),q={tplParams:b.tplParams,useCache:!1};new BN.Modal.Account.SocialLoginMissingData(null,{targetSelector:b.target},q,c);break;case"socialloginConflictingAccount":var g=b.modal,c=getModalObj(g),q={target:this,tplParams:b.tplParams,useCache:!1};new BN.Modal.Account.SocialLoginConflictingAccount(null,{targetSelector:b.target},q,c);break;case"SocialLoginResetPassword":var g=b.modal,c=getModalObj(g),q={tplParams:b.tplParams,useCache:!1};new BN.Modal.Account.SocialLoginResetPassword(null,{targetSelector:b.target},q,c);break;case"ADISecurity":var g=b.modal,c=getModalObj(g),u=$(c.modal).find("iframe");if(u&&u.length>0){var v,w,m=$(u).contents().find("body"),x=m.find(b.target);x&&x.length>0&&(v=x.attr("id"),"loginForm"===v||"forgotPasswordForm"===v?w=x.find("button[type=submit]"):"createAccountForm"===v&&(w=x.find("#btnCreateAccount")))}new BN.Modal.Account.TwoStepVerification(null,{target:this,onClose:function(){}},{useCache:!1,tplParams:{formName:x,formBtn:w,formId:v,from:b.form,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}},c)}});var m=function(){$.ajax({url:SITE_ROOT+"/includes/digitalDataResponse.jsp"}).done(function(a){null!==a&&"undefined"!=typeof a&&""!==a&&"undefined"!=typeof digitalData&&""!==digitalData&&null!==digitalData&&(digitalData.user=JSON.parse(JSON.parse(a).digitalData).user)})};if($("#ptaChatLink").on("click",function(a){a.preventDefault();var b=$("#chatPtaURL").val();"undefined"!=typeof b&&(window.location.href=b)}),$("*[rel='ext']").on("click",function(){$this=$(this),$this.attr("target","_blank")}),$(".check-gift-card-balance").find(".error-msg").is(":visible")&&$("html, body").animate({scrollTop:$(".check-gift-card-balance").offset().top},0),$(e()),initInstantPurchaseSignIn(),$("a#headerSignoutLink").on("click",function(){$(logoutFromGS())}),$(document).on("click",".bn-share-link",function(a){a.preventDefault();var b=$(this).data("socialsharetype"),c=location.href,d="",e="";if($("body").hasClass("account"))d=$("div.product-image").eq(0).find("img").prop("src"),e=$.trim($(".wishlist-event-name").text());else if($("body").hasClass("pdpPage"))var d="https:"+$("#pdpMainImage").attr("src"),e=$("#prodSummary-header h1").text()+" by "+$("#prodSummary-header .contributors a").text().replace(/(\r\n|\n|\r)/gm,"").trim();if("undefined"!=typeof gigya){var f={type:"image",src:d,href:c},g=new gigya.socialize.UserAction;g.setLinkBack(c),g.setTitle(e),g.addMediaItem(f);var h={url:c,provider:b,userAction:g,shortURLs:"never"},i={action:"customer-social-share-link",subject:e,url:c,site:b};makeBnLoggingCall(i),gigya.socialize.postBookmark(h)}}),$(".print-this").click(function(a){a.preventDefault(),window.print()}),/\?(.*[&])?signin=true[&]?/i.test(window.location.toString())&&new BN.Modal.Account.LoginNew(null,{target:this},{},null),BN.Validate.Listen("form"),$(".btn-quick-view").attr("role","button"),$("select").selectBox(),$("body.pdpPage #commerce-zone").find(".formatSelect").length>0&&"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&(performance.mark("Format_dropdown_loading_ends"),performance.measure("FormatDropdownDur","Format_dropdown_loading_starts","Format_dropdown_loading_ends")),$("#searchForm .selectBox-container").find("a.selectBox-dropdown").attr("title","Search By"),$(document).on("keyup click",".selectBox-container",function(a){(a.altKey&&(38==a.keyCode||40==a.keyCode||13==a.keyCode||32==a.keyCode)||38==a.keyCode||40==a.keyCode||13==a.keyCode||32==a.keyCode||"click"==a.type)&&$(".selectBox-container").children("a").each(function(){("true"==$(this).attr("aria-expanded")||$(this).hasClass("selectBox-menuShowing"))&&$(this).find(".selectBox-label")[0].innerText.trim()==$(this).siblings(".selectBox-dropdown-menu").children("li:first")[0].textContent.trim()&&$(this).siblings(".selectBox-dropdown-menu").children("li:first").addClass("selectBox-selected selectBox-hover")})}),$("a.selectBox-dropdown").each(function(){var a=$(this),b=a.parent().parent(),c=(a.parent(),b.find("label:first")),d=b.find("select"),e=b.find(".selectBox-dropdown-menu"),f=a.find(".selectBox-label"),g=d.attr("id");f.attr("id",g+"-button-label"),e.attr({id:g+"-option-list",role:"listbox"}),a.attr({"aria-labelledby":g+"-button-label"}),e.find("li").each(function(a){$(this).attr({id:g+"-option-"+a,role:"option"})}),""!==g&&void 0!=c.attr("for")&&c.attr({"for":g+"-replacement",id:g+"-label"}),a.attr({id:g+"-replacement","aria-expanded":"false","aria-owns":e.attr("id")}).bind("keydown",function(b){switch(b.which){case 9:case 13:case 27:"true"==a.attr("aria-expanded")||e.not(":visible")?(a.attr("aria-expanded","false").removeAttr("aria-activedescendant"),e.attr("aria-hidden","true")):(e.attr("aria-hidden","false"),a.attr("aria-expanded","true").attr("aria-activedescendant",c));break;case 37:case 38:case 39:case 40:"false"==a.attr("aria-expanded")&&(a.attr("aria-expanded","true"),e.attr("aria-hidden","false"));var c=e.find(".selectBox-selected:first").attr("id");a.attr("aria-activedescendant",c)}})}),$(".pdpPage .pdp .selectBox-container").each(function(){if("combobox"===$(this).attr("role")){if($(this).removeAttr("role aria-labelledby"),"format"===$(this).children(".selectBox-dropdown").attr("title").toLowerCase()&&$("#adaLabel").length>0)$(this).children("a").attr("aria-labelledby","adaLabel");else{var a=$(this).children("a").find('span[id$="-button-label"]').attr("id");"undefined"!=a&&""!=a&&$(this).children("a").attr("aria-labelledby",a)}$(this).children("a").attr("role","combobox")}}),$("[id^=wishlist]").each(function(){$(this).children(".selectBox-container").removeAttr("role aria-labelledby"),$(this).children(".selectBox-container").children("a").attr("role","option")}),$(".styled-radio").attr("role","radio"),$(".styled-checkbox").attr("role","checkbox"),$(document).on("focus change",":checkbox",function(){var a=$(this);a.is(":checked")?a.attr("aria-checked","true"):a.attr("aria-checked","false")}),$(".augHeader").length>0&&$(".augHeader").attr("tabindex","0"),Modal.prototype.initOpeners(document.body),$('form.uxhr,form[action*="xhr"]').each(function(){("emailSignupForm"!=$(this).attr("id")||"locationForm"!=$(this).attr("id"))&&BN.uXHR.Form.apply(this),$(this).on("amplifiFormBeforeSubmit",function(){BN.Validate.ClearErrors(this)})}),$(".btn-quick-view").attr("role","button"),$('a.uxhr,a[href*="/xhr"],a[data-service]').each(function(){$(this).on("click",function(a){a.preventDefault();var b=$(this),c=BN.uXHR.getElemDataParams(b),d=c.service;d&&BN.uXHR.getService(d,c,function(){b.triggerHandler("amplifiServiceResponse",arguments)})})}),$(function(){var a=$("nav#refinements").length;a>0&&($("h2.refinement-header").on("click",function(){var a=$(this),b=$(this).next("ul");a.hasClass("facetCollapsed")?(a.removeClass("facetCollapsed"),a.attr("aria-expanded","true"),b.slideDown("slow"),b.attr("aria-hidden","false")):(a.addClass("facetCollapsed"),a.attr("aria-expanded","false"),b.slideUp("slow"),b.attr("aria-hidden","true"))}),$("h2.refinement-header:gt(1):not(#searchWithinContainer)").each(function(){var a,b=$(this).next("ul"),c=b.find(".viewMoreviewLessToggle"),d="";c.length&&(a=c.first().find("a"),a.length&&(d=a.first().html())),"show less"!=d.toLowerCase()&&(b.slideUp("fast"),b.not(":visible")&&$(this).addClass("facetCollapsed"))}))}),$("body").hasClass("wishlist")?checkPriceChange("Wishlist"):$("body").hasClass("shopping-bag")&&checkPriceChange("cart"),$("*[rel='ext']").on("click",function(){$this=$(this),$this.attr("target","_blank")}),$("textarea.gift-message").length&&$("textarea.gift-message").each(function(){initializeTextAreaCounter($(this),$(this).parent().find(".limit-notifier"))}),$("#searchForm").on("submit",function(a){!$("#searchBar").val()&&$("#searchBar").length&&a.preventDefault()}),$(".egift-date").datepicker({showOn:"button",buttonImage:"/static/img/sprites/calendar-up.png",buttonImageOnly:!0,minDate:0,maxDate:"+1Y",showOn:"both"}).on("change",function(){var a=$(this).val().split("/");""!==$(this).val()&&$(this).closest(".text-input").removeClass("invalid"),$(this).parent().find("#eGiftMonth").val(a[0]),$(this).parent().find("#eGiftDay").val(a[1]),$(this).parent().find("#eGiftYear").val(a[2])}),$(document).on("click",'#miniCart [data-modal-class="BN.Modal.Account.FreeShippingDetails"]',".free-shipping-details",function(a){a.preventDefault(),new BN.Modal.Account.FreeShippingDetails(null,{target:this},null,null)}),$("[id*=video-carousel] figure").hover(function(){$(this).find(".icon-play").addClass("icon-over")},function(){$(this).find(".icon-play").removeClass("icon-over")}),$(".toggle-panel").on("click",".btn",function(){var a=$(this),b=a.parent(),c=b.siblings(".toggle-content"),d=a.index(),e=c.get(d);return a.hasClass("active")?!1:(a.siblings().removeClass("active").attr({"aria-selected":"false","aria-expanded":"false"}),a.toggleClass("active"),a.attr({"aria-selected":"true","aria-expanded":"true"}),c.hide(),$(e).show(),void 0)}),$("body").hasClass("homepage")){var n,o=0,p=0,q=new Array;$(".footlight .featured-sub-item h2").each(function(){if(n=$(this),topPostion=n.position().top,p!=topPostion){for(currentDiv=0;currentDiv<q.length;currentDiv++)q[currentDiv].height(o);q.length=0,p=topPostion,o=n.height(),q.push(n)}else q.push(n),o=o<n.height()?n.height():o;for(currentDiv=0;currentDiv<q.length;currentDiv++)q[currentDiv].height(o);$(".footlight .featured-sub-item aside .arrow-link").height(o)})}if($("body").hasClass("membership-landing")&&$("#jmError").length&&$("#jmError").focus(),$("body").hasClass("nook-login-page")&&new BN.Modal.Account.LoginNew(null,{target:this},{useCache:!1,tplParams:{isNookLogin:"true",isEgift:$("#isEgiftLogin").val()}}),$("#state").length>0&&autofillStateFix(),$("[data-tooltip-trigger]").length>0&&showTooltip(),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||$("html").first().addClass("desktop"),$("body").hasClass("ie9")&&checkGoogleAdDOMChange(),$(document).on("change","form#addAddress select#country, form#addPaymentSavedAddress select#country, form#frmEditPaymentOrder select#country,form#frmEditPayment select#country, ul#editPayment select#country, form#checkoutForm select#country",function(){var a=$(this).val();"AS"==a||"FM"==a||"MH"==a||"PW"==a||"PR"==a||"GU"==a||"MP"==a||"VI"==a?($("input.state").val(a).attr("readonly","readonly").addClass("disabled"),$("input#state").val(a).attr("readonly","readonly").addClass("disabled"),$("label#state-label").css("top","30%")):($("input.state").val("").removeAttr("readonly").removeClass("disabled"),$("input#state").val("").removeAttr("readonly").removeClass("disabled"))}),$(document).on("focus","input.state[readonly], input#state[readonly]",function(){$(this).blur()}),$(document).on("click",".apply-coupon-code",function(){var a=$(this).siblings('input[type="text"]').first(),b=a.val();a.length>0&&a.val(b.toUpperCase())}),$(".browser-notice").on("click",".x",function(){$(".browser-notice").remove()}),"undefined"==typeof s_setP&&$(document).on("click","#payPalTrigger",function(a){a.preventDefault(),$("#payWPayPalBTN").click()}),$("section.main-content").hasClass("invalid-billing")?new BN.Modal.Checkout.ValidateBilling(null,{cvvrequired:"false",refreshpage:"true"}):$("section.main-content").hasClass("invalid-shipping")&&new BN.Modal.Checkout.ValidateShipping(null,{validatebilling:"true",cvvrequired:"false",refreshpage:"true"}),$(document).on("click","#payPalTrigger",function(a){a.preventDefault();try{"undefined"!=typeof s_setP&&trackCheckoutView("payment-info","PayPal")}catch(b){}$("#payWPayPalBTN").click()}),$(document).on("changedinvalid","select[required=required]",function(){var a=$(this),b=a.selectBox("control");b&&b.removeClass("user-success").addClass("user-error")}).on("changedvalid","select[required=required]",function(){var a=$(this),b=a.selectBox("control");b&&b.removeClass("user-error").addClass("user-success")}),$("body").hasClass("thank-you")&&$("form#submitOrder").on("amplifiFormError",function(a,b,c,d,e){var f=!1,g=[],h=e.items;if(4!=h.length||h.length>=4&&(h[0].indexOf("UPPER")>-1||h[0].indexOf("characters")>-1))for(var i=0;i<h.length;i++)h[i].indexOf("supplied")>-1?(g=[],g.push(0),g.push(1)):h[i].indexOf("Password")>-1&&!(h[i].indexOf("Confirm")>-1)?g.push(0):h[i].indexOf("Confirm")>-1?g.push(1):h[i].indexOf("question")>-1?g.push(2):h[i].indexOf("answer")>-1&&g.push(3);else f=!0;if($(this).find(".text-input").each(function(a,b){$(b).removeClass("invalid"),f?$(b).addClass("invalid"):jQuery.inArray(a,g)>-1&&$(b).addClass("invalid")}),$(this).hasClass("thank-you-submit-order")){var j=$("form#submitOrder.thank-you-submit-order"),k=j.find("input[type='submit']"),l=j.attr("id"),m=b.adiRecomendationCode;"2FAREQUIRED"==h[0].toUpperCase()?new BN.Modal.Account.TwoStepVerification(null,{target:this},{useCache:!1,tplParams:{formName:j,formBtn:k,formId:l,from:l,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}}):m&&"DENY"===m.toUpperCase()&&k&&k.length>0&&(k.prop("disabled",!0),k.addClass("adi-deny-button"))
}}),$(document).on("keyup",".creditCardInput",function(){$(".lists--credit-cards img").prop("class",""),$(".credit-cards form label input").prop("checked",!1);var a=!1;if($("#cType").html(""),this.value.length>=4){var b=getCardType(this.value);$("#cType").html(b),$("input[name='credit-cards']").each(function(c,d){d.value==b&&($(d).trigger("click"),$(d).siblings("img").prop("class","highlight"),a=!0)})}$("#audiobookForm--new").is(":visible")&&$("#abCreditCardType").val("American Express"==b?"americanExpress":b)}),$("[id^=label-score-]").on("click",function(){$(this).parents().is("#belowTheContent")||userWishlistAdd(this)}),$("[id^=guest-label-score-]").on("click",function(){$(this).parents().is("#belowTheContent")||guestWishlistAdd(this)}),$("form[name^=addItemToWishlist1test]").on("amplifiFormError",function(){addWishlistError(this),$(this).siblings("[id*=label-score-]").removeClass("disabled")}).on("amplifiFormBeforeSubmit",function(){$(this).siblings("[id*=label-score-]").addClass("disabled")}).on("amplifiFormSuccess",function(a,b){addWishlistSuccess(this,b),$(this).siblings("[id*=label-score-]").removeClass("disabled")}),$("form[id^=frmRemoveGiftItemtest]").on("amplifiFormError",function(){removeWishlistError(this),$(this).siblings("[id*=label-score-]").removeClass("disabled")}).on("amplifiFormBeforeSubmit",function(){$(this).siblings("[id*=label-score-]").addClass("disabled")}).on("amplifiFormSuccess",function(a,b){removeWishlistSuccess(this,b),$(this).siblings("[id*=label-score-]").removeClass("disabled")}),$(document).on("blur",".text-input input",input_onchange),$(document).on("blur","select",select_onchange),$(document).on("change","select",select_onchange),$(".text-input input[type='text'], input[type='email'], input[type='number'], input[type='password']").each(function(a,b){input_prefill.bind(b)()}),$("#br-related-widget-bn #br-related-searches-widget").length>0&&("undefined"==typeof isresponsive||0==isresponsive)){var r='<div class="clearer clear"></div>';$("#br-related-widget-bn").find(".br-sf-widget").each(function(a){$($("#br-related-widget-bn").find(".br-sf-widget-merchant-popup-cont")[a]).append(r),$($("#br-related-widget-bn").find(".br-sf-widget-merchant-cont")[a]).append(r),$($("#br-sf-widget-merchant .br-sf-widget-merchant-qv")[a]).find("a").text("Quick View");var b=$($("#br-sf-widget-merchant .br-sf-widget-merchant-title")[a]).find("a").text();$($(".br-sf-widget-merchant-cont .br-sf-widget-merchant-img")[a]).find("img").attr("alt",b)});var s=$("<ul id='br-product-carousel' style='display:inline-flex'>");$("#br-related-product-widget").children(".br-sf-widget").each(function(a){var b=$("<li>").append($(this));b.attr("id","br-elements-id-"+(a+1)),s.append(b)}),$("#br-related-product-widget").append(s);var t={"align-items":"left",auto:!1,carouselHeight:"auto",carouselWidth:720,circular:!0,incrementIds:!0,infinite:!0,itemWidth:220,next:{button:"#undefined",key:"right"},nextButtonID:"carousel-next",numDisplay:3,paginationButtons:'<div class="prev-item carousel-prev" style="display:block;" tabindex="0" role="button" title="previous"><span style="display:none;">Prev</span></div><div class="next-item carousel-next" tabindex="0" role="button" title="next"><span style="display:none;">Next</span></div>',prev:{button:"#undefined",key:"left"},prevButtonID:"carousel-prev",scroll:{fx:"scroll",items:3},selector:"[id^=br-product-carousel]"};initCarouFredSel(t),"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&(performance.mark("BloomReach_Widget_loading_ends"),performance.measure("BloomReachWidgetDur","BloomReach_Widget_loading_starts","BloomReach_Widget_loading_ends"));var u='<a href="javascript:void(0);" onclick="hideBrRpQv();" class="br-close-pop-up" title="Close" role="button" tabindex="2"><span>Close</span></a>';$("#br-related-widget-bn").find(".br-rp-qv-hide").each(function(a){$($(".br-rp-qv-hide")[a]).find(".br-sf-widget-merchant-popup-maincont").before(u)})}else("undefined"==typeof isresponsive||0==isresponsive)&&($("#br-related-widget-bn #br-related-product-widget").remove(),$("#br-related-widget-bn .clearer").remove(),$(".bloomreach").remove(),"undefined"!=typeof performance.clearMarks&&performance.clearMarks("BloomReach_Widget_loading_starts"));if($(document).on("click","#manageMembershipForm #checkMembershipUpgradation",function(a){a.preventDefault(),$("#m-acceptTerms").is(":checked")?($("#jmError_membership_renewal").hasClass("no-display")||$("#jmError_membership_renewal").addClass("no-display"),new BN.Modal.Membership.checkMembershipUpgradation(null,{target:this},null,null)):$("#jmError_membership_renewal").removeClass("no-display")}),$("body").hasClass("shopping-bag")&&$("aside.error-message-membership").is(":visible")&&$("aside.error-message-membership em").text().length>0&&$("aside.error-message-membership em a.sign-in-link").attr("href",$("#userLinks .sign-in-link").attr("href")),$("body").hasClass("account account-settings")&&"undefined"!=typeof gigya){gigya.socialize.getUserInfo({callback:myAccountGetUserInfo,includeAllIdentities:!0});var v="true"==$("input#autoGeneratedUser").val()?!0:!1}$("#socialLoginConnections #addRemoveConnectionFacebook button.fb").on("click",function(){gigya.socialize.login({callback:myAccountAddConnection,currentUserEmail:$("input#userEmailId").val(),provider:"facebook"})}),$("#socialLoginConnections #addRemoveConnectionGooglePlus button.gp").on("click",function(){gigya.socialize.login({callback:myAccountAddConnection,currentUserEmail:$("input#userEmailId").val(),provider:"googleplus"})}),$("#socialLoginConnections #addRemoveConnectionFacebook button.fbdisconnect").on("click",function(){var a=$("input#userEmailId").val();removeSocialLinking(a,"facebook",v)}),$("#socialLoginConnections #addRemoveConnectionGooglePlus button.gpdisconnect").on("click",function(){var a=$("input#userEmailId").val();removeSocialLinking(a,"googleplus",v)}),$(document).on("click",".page-curl",function(a){var b=$(this).data("preview-type"),c=$(this).data("url"),d=$(this).data("sku");"G"==b||"D"==b?(a.preventDefault(),redirectGloseRedeemUrl(d,c,!0),"undefined"!=typeof s_setP&&trackGlose($(this).data("sku"))):window.open(c)}),$(".product-shelf-curl").removeClass("hidden"),$(".slick-slider [aria-hidden=true]").find(":focusable").attr("tabindex","-1"),$(".slick-slider").each(function(){productImageTabbing()}),$(".myAccChangePasswd .restPwdLink").on("click",function(){$("input#autoGeneratedUser").val(),$("input#userEmailId").val();$("form#MyAccforgotPasswordForm").submit(),$("form#MyAccforgotPasswordForm").on("amplifiFormSuccess",function(a,b){new BN.Modal.Account.Base("reset-password-confirmation",null,{useCache:!1,tplParams:{email:encodeURIComponent(b.email)}},null),$("form#MyAccforgotPasswordForm").load($("form#MyAccforgotPasswordForm"))})}),$("body").hasClass("account review-profile")&&$(".error-msg").is(":visible")&&$(".error-msg:visible:first").focus(),$(".order-summary-line-item .product-title").each(function(){var a=$(this);0===a.find("span").length&&makeMultiLineEllipsis(a,2)}),$(".order-summary-line-item").addClass($(".order-summary-line-item .product").length>2?"order-summary-products":"no-max-height");var w="";try{void 0!=digitalData.session&&void 0!=digitalData.session.sessionID&&(w=digitalData.session.sessionID)}catch(y){}var z=localStorage.getItem("feed_"+w);if($("#dt-widget-container").length>0&&null===z)if($("body").hasClass("thank-you")){var A=$("#orderId").val(),B=localStorage.getItem("lastOrderId");null===B||B!==A?(localStorage.setItem("lastOrderId",A),$("#dt-widget-container").parent().removeClass("hidden"),getLocation(!0)):($("#dt-widget-container").parent().removeClass("hidden"),getLocation(!1))}else getLocation(!1);if($(".tooltip-icon-info").on("keypress",function(a){var b=a.which;13==b&&$(".tooltip-icon-info").click()}),$(".bopisMsgTooltipContent").on("keydown click",function(a){tooltipIconClick(a,this)}),"undefined"!=typeof Storage?window.location.href.indexOf("/checkout/")>-1&&localStorage.getItem("slmembershipErrorMessage")&&($(".membership-sl-errorMsg em").text(localStorage.getItem("slmembershipErrorMessage")),$(".membership-sl-errorMsg").show(),localStorage.removeItem("slmembershipErrorMessage")):consoleError("Local Storage not supported"),$(".egift-wrap-form").find(".icon-calendar").on("click",function(){0!==$(".ui-datepicker-header").length&&$(".ui-datepicker-header").is(":visible")||$(this).datepicker("show")}),$(".reset-password-page").length>0){var C=!1;$("#newPword").on("keyup",function(a){$("#newPword").pwstrength(a,$("#newPword").val(),$("#fName").val(),$("#lName").val(),C)}),$(".newpwdparent").on("focusout",function(a){setTimeout(function(){$(".newpwdparent").hasClass("focus")||($("#newPword").pwstrengthError(a,$("#newPword").val(),$("#newPword").val(),$("#fName").val(),$("#lName").val(),$("#newPword"),$("#accountPasswordErrors")),C=!0)},0)})}if(!$("body").hasClass("account-settings")){var D;$(document).on("click",".show-password, .hide-password",function(){D=$(this).parents("div.text-input").find($(this).parents("div.text-input").find("#newPword").length>0?"#newPword":"#password"),""!==D.val()&&null!==D.val()&&void 0!==D.val()&&($(this).hasClass("show-password")?(D.attr("type","text"),$(this).addClass("hidden"),$(this).siblings(".hide-password").removeClass("hidden").focus()):(D.attr("type","password"),$(this).addClass("hidden"),$(this).siblings(".show-password").removeClass("hidden").focus()))}),$(document).on("keydown",".show-password, .hide-password",function(a){13===a.keyCode&&(D=$(this).parents("div.text-input").find($(this).parents("div.text-input").find("#newPword").length>0?"#newPword":"#password"),""!==D.val()&&null!==D.val()&&void 0!==D.val()&&($(this).trigger("click"),a.preventDefault(),a.target===$(".show-password")[0]?$(this).siblings(".hide-password").focus():$(this).siblings(".show-password").focus()))})}if($(".manage-membership-account form#addAddress #addAddressSubmit").on("click",function(){openLoginModalNew("#addAddressSubmit",{preventDefault:"always",successCallback:function(){$(this).parents("form#addAddress").submit()}})}),$(".membership-renew #saveNewPayment").on("click",function(){if(doEncryption(),"true"===BN.isExplicitlyLoggedIn){var a=$("#saveNewPayment").parents(".membership-renew").siblings("#membershipAutoFields").find("form#addPaymentSavedAddress");return a.submit(),!0}openLoginModalNew("#saveNewPayment",{preventDefault:"always",successCallback:function(){var a=$("#saveNewPayment").parents(".membership-renew").siblings("#membershipAutoFields").find("form#addPaymentSavedAddress");return a.submit(),!0}})}),$(".check-if-soft-login").on("click",function(){return"true"===BN.isExplicitlyLoggedIn?!0:void openLoginModalNew(".check-if-soft-login",{preventDefault:"always",successCallback:function(){location.href=$(this).attr("href")}})}),$("#thePerfectBook").length>0&&$("#thePerfectBook").find(".product-title a").each(function(){makeMultiLineEllipsis($(this),2)}),"undefined"!=typeof captchaV3ApiKey){var E=[];E=$("body").hasClass("account-settings")?["#changeEmailForm","#changePasswordForm","#changeSecurityForm","#changePhoneForm"]:$("body").hasClass("account")?["#checkBalanceForm","#checkBalance","#manageCreditForm"]:["#memberOrder","#submitOrder","#frmApplyGC",".loyalty-field","#checkBalanceGCLandingV3"],$.each(E,function(a,b){intiateRecaptchaVthree(b)})}if($('.product-shelf-image-cont:not(".plp-qa-img-cont"), #thePerfectBook .prd-img-cont, .editorial-img').on("mouseenter",function(){$(this).find(".quick-add").hasClass("quick-add-hover")||$(".quick-add-hover").removeClass("quick-add-hover"),$(this).find(".quick-add").addClass("quick-add-hover")}),$(".plp-quick-add-cont").on("mouseover",function(){$(this).find(".quick-add").hasClass("quick-add-hover")||$(".quick-add-hover").removeClass("quick-add-hover"),$(this).find(".quick-add").addClass("quick-add-hover")}),$(".prd-img-cont").on("mouseover",function(){$(this).find(".quick-add").hasClass("quick-add-hover")||$(".quick-add-hover").removeClass("quick-add-hover"),$(this).find(".quick-add").addClass("quick-add-hover")}),$('.product-shelf-image-cont:not(".plp-qa-img-cont"), .plp-quick-add-cont, #thePerfectBook .prd-img-cont, .editorial-img').on("mouseleave",function(){$(this).find(".quick-add").removeClass("quick-add-hover")}),$(".quick-add").on("focusout blur",function(){$(this).hasClass("quick-add-hover")&&$(this).removeClass("quick-add-hover")}),"true"==$("#masterpassUpgraded").val()){var F="true"==$("#masterpassUpgradedNewLogic").val();masterPassConfigure(F)}if($("body").hasClass("account")&&$(".account-settings-form .add-gc-error").length>0)if($(".account-settings-form .add-gc-error em").text().toUpperCase().indexOf("2FAREQUIRED")>-1)new BN.Modal.Account.TwoStepVerification(null,{target:this},{useCache:!1,tplParams:{formName:$("#manageCreditForm"),formBtn:$("#manageCreditForm").find("input[type=submit]"),formId:"manageCreditForm",captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}});else{$(".account-settings-form .add-gc-error").show();var G=$(".adi-code").text();G&&"DENY"===G.toUpperCase()&&$("#addGiftCardBtn").prop("disabled",!0)}$("#recommendations, #recentlyViewed, #belowTheContent").on("mouseenter",".product-shelf-image-cont",function(){$(this).find(".quick-add").hasClass("quick-add-hover")||$(".quick-add-hover").removeClass("quick-add-hover"),$(this).find(".quick-add").addClass("quick-add-hover")}),$("#recommendations, #recentlyViewed, #belowTheContent").on("mouseleave",".product-shelf-image-cont",function(){$(this).find(".quick-add").removeClass("quick-add-hover")}),$("#recommendations, #recentlyViewed, #belowTheContent").on("click",".btn-quick-add",function(){new BN.Modal.Browse.Quickview(null,{target:this},{useCache:!1})})});var input_prefill=function(){var a=""!==this.value,b=$(this).closest(".text-input");a&&b.toggleClass("filled",a)},input_onchange=function(){var a=""!==this.value,b=$(this).closest(".text-input"),c=$(this).siblings(".error");if(b.toggleClass("filled",a),this.required)if(this.pattern&&this.pattern.length){var d=new RegExp("^"+this.pattern+"$");d.test(this.value)&&""!=this.value?(b.removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid")):(b.removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0),c.length&&c.attr("role","alert"))}else""==$(this).val()?(b.removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0),c.length&&c.attr("role","alert")):$(this).val().length>0&&(b.removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid"))},select_onchange=function(){var a=""!==this.value,b=$(this).parent().find(".selectBox-container"),c=$(this).siblings(".error");b.toggleClass("filled",a);var d=$(this).find(":selected").val();if(this.willValidate)d&&d.length>0?(b.removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid")):(b.removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0),c.length&&c.attr("role","alert"));else if(this.pattern&&this.pattern.length){var e=new RegExp("^"+this.pattern+"$");e.test(d)?(b.removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid")):(b.removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0),c.length&&c.attr("role","alert"))}};$(document).on("load",function(){});var elem=null;$(window).keyup(function(){}),$("#grid-view").keyup(function(a){var b=a.keyCode?a.keyCode:a.which;9==b&&($(".results-icons").find("#grid-view").addClass("focus"),$("#grid-view").hasClass("focus")&&$("#grid-view").addClass("grid-list-focus"))}).keydown(function(a){var b=a.keyCode?a.keyCode:a.which;9==b&&$("#grid-view").hasClass("focus")&&$("#grid-view").removeClass("grid-list-focus")}),$("#list-view").keyup(function(a){var b=a.keyCode?a.keyCode:a.which;9==b&&($(".results-icons").find("#list-view").addClass("focus"),$("#list-view").hasClass("focus")&&$("#list-view").addClass("grid-list-focus"))}).keydown(function(a){var b=a.keyCode?a.keyCode:a.which;9==b&&$("#list-view").hasClass("focus")&&$("#list-view").removeClass("grid-list-focus")}),$("html").bind("DOMNodeInserted DOMNodeRemoved",function(a){($(a.target).hasClass("xcomponent-visible")||$(a.target).hasClass("xcomponent-invisible"))&&$(document).trigger("payPalRendered")}),$(document).on("payPalRendered",function(){$(".xcomponent-visible").length>0&&($(".xcomponent-visible").attr("title","PayPal"),$(".xcomponent-visible").removeAttr("tabindex"),void 0!=modalObjToReset&&null!=modalObjToReset&&resetModalTabbing(modalObjToReset,!0))});var resetModalTabbing=function(a,b){var c=a,d=$(null!=a.modal&&void 0!=a.modal?a.modal:a),e="*[tabindex]:visible:not([tabindex=-1])",f=d.find(e);if(modalObjToReset=void 0==modalObjToReset?a:modalObjToReset,b){var g=d.find("[role='dialog']");g.length>0&&g.attr("role","document"),f.each(function(){var a=$(this);!a.is(":visible")||c.excludeFromTabindex&&a.is(c.excludeFromTabindex)||a.attr("tabindex","0")}),$(".dummy").remove(),d.find(".modal__content").append("<a class='dummy sr-only' href='/' tabindex='0' aria-hidden='true'></a>"),$dummyEle=d.find(".dummy"),shiftTabPressed=!1,d.off("keydown"),$(".icon-close-modal:visible").on("keydown",function(a){9==a.keyCode&&a.shiftKey?(shiftTabPressed=!0,$dummyEle.is(":visible")?$dummyEle.focus():(a.preventDefault(),$contentContainer.find(":tabbable:last").focus())):a.shiftKey||9!=a.keyCode||(shiftTabPressed=!1)}),$dummyEle.on("focusin",function(a){a.stopPropagation(),shiftTabPressed?($(this).trigger($.Event("keydown",{keyCode:9,shiftKey:!0})),shiftTabPressed=!1):($(".modal__dialog:visible .modal__header .icon-close-modal").focus(),$(".modal__dialog:visible .modal__header .icon-close-modal").addClass("focus"))})}else $(".dummy").remove(),BN.Modal.Base.prototype.addTabIndex(),BN.Modal.Base.prototype.initTabIndex(modalObjToReset);modalObjToReset=null},getLocation=function(a){function b(b,d,e){var f="";try{void 0!==digitalData&&(f=digitalData.page.pageInfo.ipAddress)}catch(g){}var h={coords:{latitude:b,longitude:d},access:e,ipAddress:f};localStorage.setItem("userCurrentLocation",JSON.stringify(h)),c=localStorage.getItem("userCurrentLocation"),c=JSON.parse(c),null===b?setDTData(null,a):setDTData(c,a)}var c=localStorage.getItem("userCurrentLocation");if(navigator.geolocation&&null===c){var d={enableHighAccuracy:!0,maximumAge:0};navigator.geolocation.getCurrentPosition(function(a){b(a.coords.latitude,a.coords.longitude,!0)},function(){b(null,null,!1)},d)}else c=JSON.parse(c),null===c.coords.latitude?setDTData(null,a):setDTData(c,a)},setDTData=function(a,b){var c=$("#dt-widget-container"),d="",e="",f="",g="",h="",i="",j="";null!==a&&(d=a.coords.latitude+","+a.coords.longitude),navigator.userAgent&&(e=navigator.userAgent);try{void 0!==digitalData.user&&void 0!=digitalData.user[0].profile[0].profileInfo.email&&(g=digitalData.user[0].profile[0].profileInfo.email),void 0!=digitalData.page&&(void 0!=digitalData.page.pageInfo.pageName&&(h=digitalData.page.pageInfo.pageName),void 0!=digitalData.page.pageInfo.ipAddress&&(f=digitalData.page.pageInfo.ipAddress)),void 0!=digitalData.session&&void 0!=digitalData.session.sessionID&&(i=digitalData.session.sessionID)}catch(k){}var l=c.data();l.browser=e,l.ip=f,l.dd=h,l.geo=d,l.email=g,l.session=i,l.context=j,b&&loadFeedbackForm()};$("#checkoutContainer .makeGift").on("click",function(a){a.preventDefault();var b=$(this).data("iswrapeligible"),c=$(this).data("hasgiftwrap"),d=$(this).data("ismessageeligible"),e=$(this).data("userentergm"),f=$(this).data("giftmessage"),g=$(this).data("commerceitemid");new BN.Modal.Checkout.MakeItAGift(null,{target:this},{useCache:!1,tplParams:{isWrapEligible:b,hasGiftWrap:c,isMessageEligible:d,userEnterGM:e,giftMessage:f,commerceItemID:g}},null)}),$(".gwp-modal-pdp").on("click",function(a){a.preventDefault(),new BN.Modal.Browse.PDP.GiftWithPurchasePdp(null,{target:this},{tplParams:{productName:$(this).data("productName")}})}),$(".gwp-modal-cart").on("click",function(a){a.preventDefault(),new BN.Modal.Checkout.GiftWithPurchaseCart(null,{target:this},{tplParams:{productName:$(this).data("productName")}})}),$(document).on("click","#promotionalEmailCheck",function(){$(".marketingEmailOptIn").val($(this).is(":checked")?"true":"false")}),(-1!==window.location.href.indexOf("/checkout/shipping.jsp?edit=true&editShipAddress=true")||-1!==window.location.href.indexOf("/checkout/shipping.jsp?editShipAddress=true&edit=true"))&&$(window).on("load",function(){$("#addAddress #continue").click()}),window.addEventListener("message",receiveMessage,!1),$(document).ready(function(){$(document).on("click",".icon-close-modal.remove-item-icon",function(){$(this).parents(".remove-link").find("input[type=submit]").click()}),"true"==sessionStorage.getItem("new-creditCard-saved")&&(new BN.Modal.Account.MembershipInstantPurchase(null,{target:this},{useCache:!1,tplParams:{}}),sessionStorage.removeItem("new-creditCard-saved")),window.location.pathname.indexOf("account/wishlist")>0&&checkIsLogin(),$("body").hasClass("thank-you")&&bouncyCastleAnalytics(),$("input[type='email']").on("change",function(){resolveInputFieldStyle("input[type='email']",$(this).val())}),$(".billing-link").on("click",function(){$(".billing-link").prop("disabled",!0)}),"educator"==sessionStorage.getItem("login-status-check")&&new BN.Modal.educatorProgram(null,{target:this},{useCache:!1,tplParams:{}}),"true"==sessionStorage.getItem("check-login-status-cookie")&&(sessionStorage.removeItem("check-login-status-cookie"),setCookieCreateAttentive()),BN.isExplicitlyLoggedIn===!0||BN.isSoftLoggedIn!==!0&&BN.isSoftLoggedIn!==!1||deleteCookieCreateAttentive(),"unification-error"==sessionStorage.getItem("login-status-check")&&"true"==sessionStorage.getItem("notMembershipCreateAccount")&&new BN.Modal.Account.ErrorCreateAccount(null,{target:this},{useCache:!1,tplParams:{errorType:"unification"}}),"confirm-reward"==sessionStorage.getItem("login-status-check")&&"true"==sessionStorage.getItem("notMembershipCreateAccount")&&new BN.Modal.Account.ConfirmMembershipReward(null,{target:this},{useCache:!1,tplParams:{}}),"reward-error"==sessionStorage.getItem("login-status-check")&&new BN.Modal.Account.ErrorCreateAccount(null,{target:this},{useCache:!1,tplParams:{errorType:"reward"}}),"updateConversionModal"==sessionStorage.getItem("login-status-check")&&-1==window.location.href.indexOf("/membership")&&new BN.Modal.updateConversion(null,{target:this},{useCache:!1,tplParams:{}})}),$(".audiobook-tab a").click(function(a){a.preventDefault(),$(this).parent().addClass("active"),$(this).parent().siblings().removeClass("active");var b=$(this).attr("href");if($(".tabcontent").not(b).addClass("d-none"),$(b).removeClass("d-none"),"#new"==b){$("#audiobookForm--saved").addClass("d-none"),$("#audiobookForm--new").removeClass("d-none"),$(this).parents().find(".billing-msg").empty().append("The payment method you use for your audiobooks subscription will become the default payment method for your barnesandnoble.com account."),$(this).parents().find(".defaultPaymentCheckbox").removeClass("d-none");for(var c,d=$("#audiobookForm--new").find("input, select"),e=0;e<d.length;e++)c=$(d[e]),"aptSuite"!=c.attr("id")&&"companyName"!=c.attr("id")&&c.attr("required","required")}else $("#audiobookForm--new").addClass("d-none"),$("#audiobookForm--new").find("input, select").removeAttr("required"),$("#state").removeAttr("required"),$("#audiobookForm--new").find("input, select").removeAttr("required"),$("#audiobookForm--saved").removeClass("d-none"),$(this).parents().find(".billing-msg").empty().append("Your subscription will be billed to the default payment method for your barnesandnoble.com account."),$(this).parents().find(".defaultPaymentCheckbox").removeClass("d-none"),$(this).parents().find(".use-saved-cc").removeClass("d-none").addClass("d-flex")});var bodyClass=$("body").attr("class");bodyClass.indexOf("pdpPage")>-1||$("audio").each(function(a){var b=a+1;$(this).attr("id","plpAudio"+b)});var playerTime,countdownTimer;$(".btn-pdp-addtocart").on("click",function(){var a=[];a.sku=$("#addItmPdp-sku").val(),a.productID=$("#addItmPdp-prodid").val(),a.audiobookProductStatus=$("#audiobookProductStatus").val(),a.bundleEANList="",a.isBundle="",a.pickupInStoreStatus=$("#pickupInStoreStatus").val(),a.isEligibleForFreeShipping=$("#isEligibleForFreeShipping").val(),a.availability=$("#availability").val(),a.isAudiobookProduct=$("#isAudiobookProduct").val(),a.giftCardValue="0",a.isGiftWrap=!1,a.isGiftCard=!1,a.purchaseType="addtobag_new",a.bundleID="",a.parentSku=$("#parentSku").val(),a.brand=null,a.pEAN=$("#pEAN").val(),a.mEAN=$("#mEAN").val(),"undefined"!=typeof s_setP&&audiobooksOnAddItemToCartAnalytics(a)}),$(".pdp-play-icon").on("click",function(){var a=[];a["primary-category"]=$(this).attr("data-primary-category"),a["product-type"]=$(this).attr("data-product-type"),a["sub-category"]=$(this).attr("data-sub-category"),a["base-price"]=$(this).attr("data-base-price"),a["product-name"]=$(this).attr("data-product-name"),a["product-id"]=$(this).attr("data-product-id"),a["audiobook-id"]=$(this).attr("data-audiobook-id"),a["product-url"]=$(this).attr("data-product-url"),a.sku=$(this).attr("data-sku"),a.ratings=$(this).attr("data-book-ratings"),a.reviews=$(this).attr("data-reviews"),a.availability=$(this).attr("data-availability"),onAudiobookSamplePlayAnalytics(a);var b=$(this).siblings("#pdpAudio").attr("id"),c=document.getElementById(b);c.play(),$(this).addClass("d-none"),$(".pdp-pause-icon").removeClass("d-none"),$(".sample-progress-bar-parent").removeClass("d-none")}),$(".pdp-pause-icon").on("click",function(){var a=$(this).siblings("#pdpAudio").attr("id"),b=document.getElementById(a);b.pause(),$(this).addClass("d-none"),$(".pdp-play-icon").removeClass("d-none"),$(".sample-progress-bar-parent").addClass("d-none")}),$(".audiobook-play-button").on("click",function(){var a=[];a["primary-category"]=$(this).attr("data-primary-category"),a["product-type"]=$(this).attr("data-product-type"),a["sub-category"]=$(this).attr("data-sub-category"),a["base-price"]=$(this).attr("data-base-price"),a["product-name"]=$(this).attr("data-product-name"),a["product-id"]=$(this).attr("data-product-id"),a["audiobook-id"]=$(this).attr("data-audiobook-id"),a["product-url"]=$(this).attr("data-product-url"),a.sku=$(this).attr("data-sku"),a.ratings=$(this).attr("data-book-ratings"),a.reviews=$(this).attr("data-reviews"),a.availability=$(this).attr("data-availability"),onAudiobookSamplePlayAnalytics(a);var b=$(this).siblings('[id^="plpAudio"]').attr("id"),c=document.getElementById(b);$(this).siblings(".pause-overlay").removeClass("d-none"),$(this).closest(".audiobook-play-button-2").hasClass("d-none")||($(".audiobook-play-button-2").addClass("d-none"),$(".audiobook-pause-button").removeClass("d-none")),$(this).addClass("d-none"),$(this).parent().find(".sample-playing").removeClass("d-none").text("Sample Playing"),c.play()}),$(".audiobook-pause-button").on("click",function(){var a=$(this).parent().siblings('[id^="plpAudio"]').attr("id"),b=document.getElementById(a);$(this).addClass("d-none"),$(this).siblings(".audiobook-play-button-2").removeClass("d-none"),$(this).parent().find(".sample-playing").removeClass("d-none").text("Sample Paused"),b.pause()}),$(".audiobook-play-button-2").on("click",function(){var a=$(this).parent().siblings('[id^="plpAudio"]').attr("id"),b=document.getElementById(a);$(this).addClass("d-none"),$(this).siblings(".audiobook-pause-button").removeClass("d-none"),$(this).siblings(".sample-playing").text("Sample Playing"),b.play()}),$(".close-overlay").on("click",function(){var a=$(this).parent().siblings('[id^="plpAudio"]').attr("id"),b=document.getElementById(a);b.pause(),b.currentTime=0,$(this).parent().addClass("d-none"),$(this).siblings(".audiobook-play-button-2").addClass("d-none"),$(this).siblings(".sample-playing").addClass("d-none").text(""),$(this).siblings(".audiobook-pause-button").removeClass("d-none"),$(this).parent().siblings(".audiobook-play-button").removeClass("d-none")}),$(".library-btn").on("click",function(){var a=$(this).attr("data-url");onClickDigitalLibrayBtn(),window.location.href=a}),$(".emailValidated").on("click",function(){$(this).closest("form");new BN.Modal.Account.ValidateEmailMembership(null,{target:this},{useCache:!1,tplParams:{}}),form.submit()}),$(".reward-mail-validate").on("click",function(){new BN.Modal.Checkout.ValidateRewards(null,{target:this},{useCache:!1,tplParams:{}}),$("form#rewardValidation").submit()}),$(document).ready(function(){$(window).on("load resize",function(){$(window).width()<=650&&$(".tooltip-icon-info.audio-nook-tooltip").on("click",function(){$(".tooltip.audiobook-nook-tooltip").removeClass("bottom-center"),$(".tooltip.audiobook-nook-tooltip").addClass("bottom-right")}),$(window).width()>650&&$(".tooltip-icon-info.audio-nook-tooltip").on("click",function(){$(".tooltip.audiobook-nook-tooltip").removeClass("bottom-right"),$(".tooltip.audiobook-nook-tooltip").addClass("bottom-center")})}),$("#rhf_header_element .user-login-state").on("click",function(){var a=$(this).data("link"),b=webContextRoot+"/includes/check-login.jsp",c=this;"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(b=BN_EXTERNAL_DOMAIN_PREFIXED+b),$.ajax({type:"get",url:b,dataType:"script",cache:!1,async:!1,success:function(){BN.isExplicitlyLoggedIn===!0||BN.isSoftLoggedIn!==!0&&BN.isSoftLoggedIn!==!1?window.location.href=a:($(window).width()<=991&&$(".rhf-mobile-only, .rhf-tablet-show").click(),$("#redirectAfterLogin").val(a),new BN.Modal.Account.LoginNew(null,{target:c},{},null))}})})}),$("#memberSubmitBtn").click(function(){var a=!1,b=$("#birthdayMonthofMember").val(),c=$("#birthdayDayofMember").val(),d=b+c,e=checkValidMemberName($("#firstName").val()),f=checkValidMemberName($("#lastName").val()),g=e&&f,h=$("#memberTermId").val(),i=$("#memberStatus").val();if(a=19!=h&&(14!=h||"E"!=i&&"D"!=i)?$("#streetAddress").val()&&$("#city").val()&&$("#zipCode").val()&&$("#state").val()&&$("#country").val()&&$("#firstName").val()&&$("#lastName").val():$("#firstName").val()&&$("#lastName").val(),$("#editMembershipErrorBlock em").hasClass("emphasis--alert")&&$("#editMembershipErrorBlock em").remove(),0==$("#firstName").parent().hasClass("invalid")&&1==$("#firstName").parent().hasClass("filled")?$("#firstNameHidden").val($("#firstName").val()):($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the First Name.</em>')),0==$("#lastName").parent().hasClass("invalid")&&1==$("#lastName").parent().hasClass("filled")?$("#lastNameHidden").val($("#lastName").val()):($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the Last Name.</em>')),$("#birthdayMonthofMember").length>0&&$("#birthdayDayofMember").length>0&&b>0&&c>0&&$("#memberBirthdayHidden").val(d),d.length>=2){$("#editMembershipErrorBlock").removeAttr("style");var j="";$("#birthdayMonthofMember").val().length>0==0?(j="Please Select Month and Day to save Birthday.",$("#birthdayMonthofMember-replacement").parent().addClass("invalid")):$("#birthdayDayofMember").val().length>0==0?(j="Please Select Month and Day to save Birthday.",$("#birthdayDayofMember-replacement").parent().addClass("invalid")):isValidDaySelected(b,c)||(j="Please enter a valid date.",$("#birthdayDayofMember-replacement").parent().addClass("invalid")),""!=j&&$("#editMembershipErrorBlock").html('<em class="emphasis emphasis--alert">'+j+"</em>")}0==$("#streetAddress").parent().hasClass("invalid")&&1==$("#streetAddress").parent().hasClass("filled")?$("#streetAddressHidden").val($("#streetAddress").val()):19!=h&&(14!=h||"E"!=i&&"D"!=i)&&($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the Street Address.</em>')),0==$("#companyNameMember").parent().hasClass("invalid")&&1==$("#companyNameMember").parent().hasClass("filled")&&$("#companyNameHiddenMember").val($("#companyNameMember").val()),0==$("#aptSuite").parent().hasClass("invalid")&&1==$("#aptSuite").parent().hasClass("filled")&&$("#aptSuiteHidden").val($("#aptSuite").val()),0==$("#city").parent().hasClass("invalid")&&1==$("#city").parent().hasClass("filled")?$("#cityHidden").val($("#city").val()):19!=h&&(14!=h||"E"!=i&&"D"!=i)&&($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the City.</em>')),0==$("#zipCode").parent().hasClass("invalid")&&1==$("#zipCode").parent().hasClass("filled")?$("#zipCodeHidden").val($("#zipCode").val()):19!=h&&(14!=h||"E"!=i&&"D"!=i)&&($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the Postal/Zip Code.</em>')),0==$("#phoneNumber").parent().hasClass("invalid")&&1==$("#phoneNumber").parent().hasClass("filled")&&$("#phoneNumberHidden").val($("#phoneNumber").val()),0==$("#nameOnCard").parent().hasClass("invalid")&&1==$("#nameOnCard").parent().hasClass("filled")&&$("#nameOnCardHidden").val($("#nameOnCard").val()),0==$("#firstName1").parent().hasClass("invalid")&&1==$("#firstName1").parent().hasClass("filled")&&$("#firstName1Hidden").val($("#firstName1").val()),0==$("#lastName1").parent().hasClass("invalid")&&1==$("#lastName1").parent().hasClass("filled")&&$("#lastName1Hidden").val($("#lastName1").val()),0==$("#streetAddress1").parent().hasClass("invalid")&&1==$("#streetAddress1").parent().hasClass("filled")&&$("#streetAddress1Hidden").val($("#streetAddress1").val()),0==$("#aptSuite1").parent().hasClass("invalid")&&1==$("#aptSuite1").parent().hasClass("filled")&&$("#aptSuite1Hidden").val($("#aptSuite1").val()),0==$("#city1").parent().hasClass("invalid")&&1==$("#city1").parent().hasClass("filled")&&$("#city1Hidden").val($("#city1").val()),0==$("#zipCode1").parent().hasClass("invalid")&&1==$("#zipCode1").parent().hasClass("filled")&&$("#zipCode1Hidden").val($("#zipCode1").val()),0==$("#phoneNumber1").parent().hasClass("invalid")&&1==$("#phoneNumber1").parent().hasClass("filled")&&$("#phoneNumber1Hidden").val($("#phoneNumber1").val()),0==$("#company").parent().hasClass("invalid")&&1==$("#company").parent().hasClass("filled")&&$("#companyNameHidden").val($("#company").val()),$("#country").val().length>0==1&&$("#countryHidden").val($("#country").val()),$("#state").val().length>0==1&&""==!$("#state").val()?$("#stateHidden").val($("#state").val()):19!=h&&(14!=h||"E"!=i&&"D"!=i)&&($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please enter the State.</em>')),$("#country1").val().length>0==1&&$("#country1Hidden").val($("#country1").val()),$("#state1").val().length>0==1&&$("#state1Hidden").val($("#state1").val()),$("#cardExpDate-label").val().length>0==1&&$("#cardExpDate-labelHidden").val($("#cardExpDate-label").val()),$("#cardExpYear-label").val().length>0==1&&$("#cardExpYear-labelHidden").val($("#cardExpYear-label").val()),"undefined"!=typeof $("input.radio-autorenew-card-select:checked").val()&&$("#selected-autorenew-credicard").val($("input.radio-autorenew-card-select:checked").val()),"undefined"!=typeof $("#savedAddressList input:checked").val()&&($("#selected-exist-address").val($("#savedAddressList input:checked").val()),$("#addrType").val("exsistAddress")),1==$(".default-payment-type-select").prop("checked")&&$("#default-payment-type-selected-field").val(!0),0==g&&(0==e&&1==f?($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">First Name includes invalid characters, please update field to continue.</em>')):0==f&&1==e?($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">last Name includes invalid characters, please update field to continue.</em>')):($("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">First Name and Last Name includes invalid characters, please update field to continue.</em>')));
var k;if(!$(".selectsavedpaymentSection").hasClass("payment-check")&&"true"==$("#autoRenewOptIn").val()){for(var l=1;l<=$(".payment-selection").length;l++)if(1==$(".payment-selection #saved_payment_"+l).find("input[type=radio]").prop("checked")){k=!0;break}k||(k=!1,$("#editMembershipErrorBlock").removeAttr("style"),$("#editMembershipErrorBlock").append('<em class="emphasis emphasis--alert">Please select a payment method.</em>'))}(!$(".auto-renewal-on").hasClass("d-none")||"false"==$("#autoRenewOptIn").val()||$(".selectsavedpaymentSection").hasClass("payment-check"))&&(k=!0),d&&0!=d.length&&4!=d.length||!g||!a||1!=k||$("#editMemberSaveChanges").click()}),$(".benefit-box-mobile .collapsed").on("click",function(){$(".mobile-hero-banner .credit-value-msg").hasClass("d-none")?$(".mobile-hero-banner .credit-value-msg").removeClass("d-none"):$(".mobile-hero-banner .credit-value-msg").addClass("d-none")}),$(".educator-landing-page .find-your-store-button").on("click",function(){var a=$("#rhf_header_element .rhf-utility-bar li:first.nav-item > a").attr("href"),b=window.location;b.href=a}),$(document).on("click",".free-premium-membership-Acountbutton",function(){1==$(".educator-free-member-enroll-section input.educator-free-member-enroll-section-input").prop("checked")?$(".premium-membership-account-educator").click():0==$(".educator-free-member-enroll-section input.educator-free-member-enroll-section-input").prop("checked")&&($(".educator-modal-error-checkbox ").removeClass("d-none"),$(".educator-free-member-enroll-section .checkbox__box").css("border-color","#dd2612"))}),$("#freeYearPremiumMembershipAcount").on("amplifiFormSuccess",function(a,b){b&&b.membershipOrderNumber&&new BN.Modal.FreeYearPremiumEnrollSuccess(null,{target:this},{useCache:!1,tplParams:{confirmationNumber:b.membershipOrderNumber}})}).on("amplifiFormError",function(a,b){$(".educator-modal-error-vfill").removeClass("d-none"),$(".educator-modal-error-vfill").html(b.response.items)}),$(document).on("keyup","#ccCode",function(a){13===a.keyCode&&$("#confirmSecurityCodeDisplayBtn").click()}),$("#resetPasswordForm").on("amplifiFormError",function(a,b,c,d,e){var f=$("#resetPasswordForm"),g=f.attr("id"),h=f.find("#resetPwSubmit"),i=b.adiRecomendationCode,j=e.items;hideSpinner(".reset-password-page .newpwdparent"),$("#resetPwSubmit").prop("disabled",!1),j.length>0&&("2FAREQUIRED"==j[0].toUpperCase()?new BN.Modal.Account.TwoStepVerification(null,{target:this},{useCache:!1,tplParams:{formBtn:h,formName:f,formId:g,captchav3Enabled:"undefined"!=typeof captchaV3ApiKey}}):i&&"DENY"===i.toUpperCase()&&h.prop("disabled",!0))}).on("amplifiFormBeforeSubmit",function(){showSpinner(".reset-password-page .newpwdparent"),$("#resetPwSubmit").prop("disabled",!0)}).on("amplifiFormSuccess",function(){hideSpinner(".reset-password-page .newpwdparent"),$("#resetPwSubmit").prop("disabled",!1)}),$("#submitNameChangesDummy").on("click",function(){var a=checkValidMemberName($("#fName").val()),b=checkValidMemberName($("#lName").val());a&&b?$("#submitNameChanges").click():0==a&&1==b?($("#accountNameErrors").removeAttr("style"),$("#accountNameErrors").html("First name includes invalid character")):1==a&&0==b?($("#accountNameErrors").removeAttr("style"),$("#accountNameErrors").html("Last name includes invalid character")):($("#accountNameErrors").removeAttr("style"),$("#accountNameErrors").html("First name and last name includes invalid character"))}),$("#fName, #lName, #firstName, #lastName").on("keyup",function(){handleSmartCharacters(this)});;/*! BARNES-BUILDER 2024-02-21 */
function MiniCart(a,b){$(document).on("input change","[id^=numberInput]",function(){var a=parseInt($(this).closest(".item-count").find("#updateQty").val()),b=parseInt($(this).prop("max"));parseInt(this.value)>b&&$(this).val(a),$(this).closest(".item-count").find("#updateQty").val(this.value)}),$(".cart-qty a").on("click",function(){$(this).parent().next().find("div.cart-update-btn").hasClass("hidden")&&($(this).parent().next().find("div.cart-update-btn").removeClass("hidden"),$(this).parent().next().find("div.cart-update-btn").slideDown(125))}),$(".product-quantity").on("focus",function(){""!=$(this).val()&&$(this).keydown(function(a){var b=a.keyCode?a.keyCode:a.which;13==b&&a.preventDefault()})}),$("#miniCart form,#miniCart a, #miniCart button").on("click",function(){"BN.Modal.Account.FreeShippingDetails"==$(this).attr("data-modal-class")||$(this).hasClass("sign-in-checkout")||"checkoutFormSB"==$(this).attr("id")||"up"==$(this).attr("data-spin")||"down"==$(this).attr("data-spin")||event.stopPropagation()}),$(".product-quantity").on("input",function(){$(this).parent().next().find("div.cart-update-btn").hasClass("hidden")&&parseInt($(this).val())<parseInt($(this).attr("max"))&&($(this).parent().next().find("div.cart-update-btn").removeClass("hidden"),$(this).parent().next().find("div.cart-update-btn").slideDown(125)),""!=$(this).val()&&$(this).keydown(function(a){var b=a.keyCode?a.keyCode:a.which;13==b&&(a.preventDefault(),$(this).parent().next().find("div.cart-update-btn").find(".update-link").click())})}),$('[data-trigger="spinner"]').spinner("delay",0).spinner("changed",function(a){$(a.target).trigger("change")}),this.scope=this,this.cart=$(a);var c=this;$(b).hover(function(a){var b=($(this),"mouseenter"===a.type);b?c.showCart():c.hideCart()}),$(b).focus(function(){c.showCart()}),$(b).on("focus touchstart",function(a){var b=$(this);b.hasClass("hover-on")||(b.addClass("hover-on").addClass("focus"),a.preventDefault(),$(".focus").not(this).removeClass("focus"),c.showCart())}),$("body").on("touchstart",function(a){0==$(a.target).closest(".cart").length&&0==$(a.target).closest(".cart-slide-out").length&&(c.hideCart(),$(".cart").removeClass("hover-on").removeClass("focus"))}),$(b).focusout(function(){$(".cart-slide-out").focus()}),$(document).on("mouseover focus","#miniCart",function(){c.showCart(),$("#miniCart").find(":tabbable:last").on("keydown",function(a){a.shiftKey||9!=a.keyCode||($("#primaryNav").children("ul").find("li:first").find("a").focus(),$("#primaryNav").children("ul").find("li:first").addClass("focus"),$("#shoppingBag").removeClass("focus"),$("#shoppingBag").removeClass("hover-on"),a.stopPropagation(),a.preventDefault())}),$("#miniCart").find(":tabbable:first").on("keydown",function(a){a.shiftKey&&9==a.keyCode&&$("#shoppingBagLink").focus()})}),$("#shoppingBag").on("keydown",function(a){a.shiftKey&&9===a.keyCode&&(c.hideCart(),$(this).removeClass("focus"),$(this).removeClass("hover-on"))}),$(document).on("mouseout focusout","#miniCart",function(){c.hideCart()})}$(document).on(".mini-cart-item input.product-quantity change","[id^=numberInput]",function(){var a=parseInt($(this).closest(".item-count").next().next().find("#updateQty").val()),b=parseInt($(this).prop("max"));parseInt(this.value)>b&&$(this).val(a),$(this).closest(".item-count").next().next().find("#updateQty").val(this.value),$("#update-last-mile-input").on("click",function(){var a=[];a.sku=$(".analytics-sku-id").val(),a.qty=$(".initial-qty").val(),a.productType=$("#productType").val(),a.audiobookProductStatus=$("#audiobookProductStatus").val(),a.bundleEANList="",a.isBundle="",a.pickupInStoreStatus="instore pickup available:geo or store selected",a.isEligibleForFreeShipping=$("#isEligibleForFreeShipping").val(),a.departmentCode=$("#departmentCode").val(),a.isAudiobookProduct=$("#isAudiobookProduct").val(),a.giftCardValue="0",a.isGiftWrap=!1,a.isGiftCard=!1,a.purchaseType="addtobag_new",a.bundleID="",a.brand=null,a.pEAN=$("#pEAN").val(),a.mEAN=$("#mEAN").val(),a.primaryCategory="",a.subCategory="",a.productURL=$("#productURL").val(),audiobooksOnAddItemToMinicheckoutCartAnalytics(a)})}),MiniCart.prototype.getTotal=function(){return this.total},MiniCart.prototype.refreshCart=function(){var a=$.ajax({url:webContextRoot+"/checkout/includes/closeness-qualifier.jsp",type:"post",dataType:"html",cache:!1,async:!0});a.done(function(a){var b=$("#miniCartItems");b.html(a),b.html(a)})},MiniCart.prototype.showCart=function(){if($("#headSearchTypeAheadHolder").is(":hidden")){if($("#miniCart").length)null!=$("#error-msg").value?this.cart.find("#error-msg").css("display","block"):this.cart.find("#error-msg").css("display","none"),$("#bagContentsContainer aside").stop(!0).delay(50).fadeTo(250,1);else{var a="/includes/shopping-bag.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(a=BN_EXTERNAL_DOMAIN_PREFIXED+"/external/shopping-bag.jsp"),loadHeaderElement($("#bagContentsContainer"),a,!0)}$("#bagContentsContainer").attr("aria-hidden","false")}},MiniCart.prototype.hideCart=function(){var a=(this.cart,"none"===$("#miniCart").css("display")?!1:!0);a&&$("#bagContentsContainer aside").stop(!0).fadeTo(250,0,function(){$("#bagContentsContainer aside").hide()}),$("#bagContentsContainer").attr("aria-hidden","true")};var BN=BN||{};;/*! BARNES-BUILDER 2024-02-21 */
BN.Data.Countries={US:{key:"US",label:"United States",states:{AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",APO:"Army Post Office",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FPO:"Fleet Post Office",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",AA:"U.S. Armed Forces – Americas",AE:"U.S. Armed Forces – Europe",AP:"U.S. Armed Forces – Pacific",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}},CA:{key:"CA",label:"Canada",states:{AB:"Alberta",BC:"British Columbia",MB:"Manitoba",NB:"New Brunswick",NL:"Newfoundland and Labrador",NT:"Northwest Territories",NS:"Nova Scotia",NU:"Nunavut",ON:"Ontario",PE:"Prince Edward Island",QC:"Quebec",SK:"Saskatchewan",YT:"Yukon"}},AF:{key:"AF",label:"Afghanistan",states:{}},AL:{key:"AL",label:"Albania",states:{}},DZ:{key:"DZ",label:"Algeria",states:{}},AS:{key:"AS",label:"American Samoa (U.S.)",states:{}},AD:{key:"AD",label:"Andorra",states:{}},AO:{key:"AO",label:"Angola",states:{}},AI:{key:"AI",label:"Anguilla",states:{}},AQ:{key:"AQ",label:"Antarctica",states:{}},AG:{key:"AG",label:"Antigua and Barbuda",states:{}},AR:{key:"AR",label:"Argentina",states:{}},AM:{key:"AM",label:"Armenia",states:{}},AW:{key:"AW",label:"Aruba",states:{}},AU:{key:"AU",label:"Australia",states:{}},AT:{key:"AT",label:"Austria",states:{}},AZ:{key:"AZ",label:"Azerbaijan",states:{}},AP:{key:"AP",label:"Azores",states:{}},BS:{key:"BS",label:"Bahamas",states:{}},BH:{key:"BH",label:"Bahrain",states:{}},BD:{key:"BD",label:"Bangladesh",states:{}},BB:{key:"BB",label:"Barbados",states:{}},BY:{key:"BY",label:"Belarus",states:{}},BE:{key:"BE",label:"Belgium",states:{}},BZ:{key:"BZ",label:"Belize",states:{}},BJ:{key:"BJ",label:"Benin",states:{}},BM:{key:"BM",label:"Bermuda",states:{}},BT:{key:"BT",label:"Bhutan",states:{}},BO:{key:"BO",label:"Bolivia",states:{}},BA:{key:"BA",label:"Bosnia And Herzegowina",states:{}},BW:{key:"BW",label:"Botswana",states:{}},BV:{key:"BV",label:"Bouvet Island",states:{}},BR:{key:"BR",label:"Brazil",states:{}},IO:{key:"IO",label:"British Indian Ocean Territory",states:{}},VG:{key:"VG",label:"British Virgin Islands",states:{}},BN:{key:"BN",label:"Brunei Darussalam",states:{}},BG:{key:"BG",label:"Bulgaria",states:{}},BF:{key:"BF",label:"Burkina Faso",states:{}},BI:{key:"BI",label:"Burundi",states:{}},KH:{key:"KH",label:"Cambodia",states:{}},CM:{key:"CM",label:"Cameroon",states:{}},CV:{key:"CV",label:"Cape Verde",states:{}},KY:{key:"KY",label:"Cayman Islands",states:{}},CF:{key:"CF",label:"Central African Republic",states:{}},TD:{key:"TD",label:"Chad",states:{}},CL:{key:"CL",label:"Chile",states:{}},CN:{key:"CN",label:"China",states:{}},CX:{key:"CX",label:"Christmas Island",states:{}},CC:{key:"CC",label:"Cocos (Keeling) Islands",states:{}},CO:{key:"CO",label:"Colombia",states:{}},KM:{key:"KM",label:"Comoros",states:{}},CG:{key:"CG",label:"Congo",states:{}},CD:{key:"CD",label:"Congo The Democratic Republic",states:{}},CK:{key:"CK",label:"Cook Islands",states:{}},XE:{key:"XE",label:"Corsica",states:{}},CR:{key:"CR",label:"Costa Rica",states:{}},CI:{key:"CI",label:"Cote d Ivoire (Ivory Coast)",states:{}},HR:{key:"HR",label:"Croatia",states:{}},CU:{key:"CU",label:"Cuba",states:{}},CW:{key:"CW",label:"Curacao",states:{}},CY:{key:"CY",label:"Cyprus",states:{}},CZ:{key:"CZ",label:"Czech Republic",states:{}},DK:{key:"DK",label:"Denmark",states:{}},DJ:{key:"DJ",label:"Djibouti",states:{}},DM:{key:"DM",label:"Dominica",states:{}},DO:{key:"DO",label:"Dominican Republic",states:{}},TP:{key:"TP",label:"East Timor",states:{}},EC:{key:"EC",label:"Ecuador",states:{}},EG:{key:"EG",label:"Egypt",states:{}},SV:{key:"SV",label:"El Salvador",states:{}},GQ:{key:"GQ",label:"Equatorial Guinea",states:{}},ER:{key:"ER",label:"Eritrea",states:{}},EE:{key:"EE",label:"Estonia",states:{}},ET:{key:"ET",label:"Ethiopia",states:{}},FK:{key:"FK",label:"Falkland Islands (Malvinas)",states:{}},FO:{key:"FO",label:"Faroe Islands",states:{}},FJ:{key:"FJ",label:"Fiji",states:{}},FI:{key:"FI",label:"Finland",states:{}},FR:{key:"FR",label:"France (Includes Monaco)",states:{}},FX:{key:"FX",label:"France Metropolitan",states:{}},GF:{key:"GF",label:"French Guiana",states:{}},PF:{key:"PF",label:"French Polynesia",states:{}},TA:{key:"TA",label:"French Polynesia (Tahiti)",states:{}},TF:{key:"TF",label:"French Southern Territories",states:{}},GA:{key:"GA",label:"Gabon",states:{}},GM:{key:"GM",label:"Gambia",states:{}},GE:{key:"GE",label:"Georgia",states:{}},DE:{key:"DE",label:"Germany",states:{}},GH:{key:"GH",label:"Ghana",states:{}},GI:{key:"GI",label:"Gibraltar",states:{}},GR:{key:"GR",label:"Greece",states:{}},GL:{key:"GL",label:"Greenland",states:{}},GD:{key:"GD",label:"Grenada",states:{}},GP:{key:"GP",label:"Guadeloupe",states:{}},GU:{key:"GU",label:"Guam (U.S.)",states:{}},GT:{key:"GT",label:"Guatemala",states:{}},GN:{key:"GN",label:"Guinea",states:{}},GW:{key:"GW",label:"Guinea-Bissau",states:{}},GY:{key:"GY",label:"Guyana",states:{}},HT:{key:"HT",label:"Haiti",states:{}},HM:{key:"HM",label:"Heard And Mc Donald Islands",states:{}},VA:{key:"VA",label:"Holy See (Vatican City State)",states:{}},HN:{key:"HN",label:"Honduras",states:{}},HK:{key:"HK",label:"Hong Kong",states:{}},HU:{key:"HU",label:"Hungary",states:{}},IS:{key:"IS",label:"Iceland",states:{}},IN:{key:"IN",label:"India",states:{}},ID:{key:"ID",label:"Indonesia",states:{}},IR:{key:"IR",label:"Iran",states:{}},IQ:{key:"IQ",label:"Iraq",states:{}},IE:{key:"IE",label:"Ireland",states:{}},IL:{key:"IL",label:"Israel",states:{}},IT:{key:"IT",label:"Italy",states:{}},JM:{key:"JM",label:"Jamaica",states:{}},JP:{key:"JP",label:"Japan",states:{}},JO:{key:"JO",label:"Jordan",states:{}},KZ:{key:"KZ",label:"Kazakhstan",states:{}},KE:{key:"KE",label:"Kenya",states:{}},KI:{key:"KI",label:"Kiribati",states:{}},KW:{key:"KW",label:"Kuwait",states:{}},KG:{key:"KG",label:"Kyrgyzstan",states:{}},LA:{key:"LA",label:"Laos",states:{}},LV:{key:"LV",label:"Latvia",states:{}},LB:{key:"LB",label:"Lebanon",states:{}},LS:{key:"LS",label:"Lesotho",states:{}},LR:{key:"LR",label:"Liberia",states:{}},LY:{key:"LY",label:"Libya",states:{}},LI:{key:"LI",label:"Liechtenstein",states:{}},LT:{key:"LT",label:"Lithuania",states:{}},LU:{key:"LU",label:"Luxembourg",states:{}},MO:{key:"MO",label:"Macao",states:{}},MK:{key:"MK",label:"Macedonia",states:{}},MG:{key:"MG",label:"Madagascar",states:{}},ME:{key:"ME",label:"Madeira Islands",states:{}},MW:{key:"MW",label:"Malawi",states:{}},MY:{key:"MY",label:"Malaysia",states:{}},MV:{key:"MV",label:"Maldives",states:{}},ML:{key:"ML",label:"Mali",states:{}},MT:{key:"MT",label:"Malta",states:{}},MH:{key:"MH",label:"Marshall Islands (U.S.)",states:{}},MQ:{key:"MQ",label:"Martinique",states:{}},MR:{key:"MR",label:"Mauritania",states:{}},MU:{key:"MU",label:"Mauritius",states:{}},YT:{key:"YT",label:"Mayotte",states:{}},MX:{key:"MX",label:"Mexico",states:{}},FM:{key:"FM",label:"Micronesia (U.S.)",states:{}},MD:{key:"MD",label:"Moldovia",states:{}},MC:{key:"MC",label:"Monaco",states:{}},MN:{key:"MN",label:"Mongolia",states:{}},MS:{key:"MS",label:"Montserrat",states:{}},MA:{key:"MA",label:"Morocco",states:{}},MZ:{key:"MZ",label:"Mozambique",states:{}},MM:{key:"MM",label:"Myanmar (Burma)",states:{}},NA:{key:"NA",label:"Namibia",states:{}},NR:{key:"NR",label:"Nauru",states:{}},NP:{key:"NP",label:"Nepal",states:{}},NL:{key:"NL",label:"Netherlands",states:{}},AN:{key:"AN",label:"Netherlands Antilles",states:{}},NC:{key:"NC",label:"New Caledonia",states:{}},NZ:{key:"NZ",label:"New Zealand",states:{}},NI:{key:"NI",label:"Nicaragua",states:{}},NE:{key:"NE",label:"Niger",states:{}},NG:{key:"NG",label:"Nigeria",states:{}},NU:{key:"NU",label:"Niue",states:{}},NF:{key:"NF",label:"Norfolk Island",states:{}},KP:{key:"KP",label:"North Korea",states:{}},MP:{key:"MP",label:"Northern Mariana Islands (U.S.)",states:{}},NO:{key:"NO",label:"Norway",states:{}},OM:{key:"OM",label:"Oman",states:{}},PK:{key:"PK",label:"Pakistan",states:{}},PW:{key:"PW",label:"Palau (U.S.)",states:{}},PS:{key:"PS",label:"Palestinian Territory Occupied",states:{}},PA:{key:"PA",label:"Panama",states:{}},PG:{key:"PG",label:"Papua New Guinea",states:{}},PY:{key:"PY",label:"Paraguay",states:{}},PE:{key:"PE",label:"Peru",states:{}},PH:{key:"PH",label:"Philippines",states:{}},PN:{key:"PN",label:"Pitcairn",states:{}},PL:{key:"PL",label:"Poland",states:{}},PT:{key:"PT",label:"Portugal",states:{}},PR:{key:"PR",label:"Puerto Rico (U.S.)",states:{}},QA:{key:"QA",label:"Qatar",states:{}},RE:{key:"RE",label:"Reunion",states:{}},RO:{key:"RO",label:"Romania",states:{}},RU:{key:"RU",label:"Russian Federation",states:{}},RW:{key:"RW",label:"Rwanda",states:{}},KN:{key:"KN",label:"Saint Kitts And Nevis",states:{}},SM:{key:"SM",label:"San Marino",states:{}},ST:{key:"ST",label:"Sao Tome and Principe",states:{}},SA:{key:"SA",label:"Saudi Arabia",states:{}},SN:{key:"SN",label:"Senegal",states:{}},RS:{key:"RS",label:"Serbia-Montenegro",states:{}},SC:{key:"SC",label:"Seychelles",states:{}},SL:{key:"SL",label:"Sierra Leone",states:{}},SG:{key:"SG",label:"Singapore",states:{}},SK:{key:"SK",label:"Slovak Republic",states:{}},SI:{key:"SI",label:"Slovenia",states:{}},SX:{key:"SX",label:"Sint Maarten",states:{}},SB:{key:"SB",label:"Solomon Islands",states:{}},SO:{key:"SO",label:"Somalia",states:{}},ZA:{key:"ZA",label:"South Africa",states:{}},GS:{key:"GS",label:"South Georgia And The South Sand",states:{}},KR:{key:"KR",label:"South Korea",states:{}},ES:{key:"ES",label:"Spain",states:{}},LK:{key:"LK",label:"Sri Lanka",states:{}},NV:{key:"NV",label:"St. Christopher and Nevis",states:{}},SH:{key:"SH",label:"St. Helena",states:{}},LC:{key:"LC",label:"St. Lucia",states:{}},PM:{key:"PM",label:"St. Pierre and Miquelon",states:{}},VC:{key:"VC",label:"St. Vincent and the Grenadines",states:{}},SD:{key:"SD",label:"Sudan",states:{}},SR:{key:"SR",label:"Suriname",states:{}},SJ:{key:"SJ",label:"Svalbard And Jan Mayen Islands",states:{}},SZ:{key:"SZ",label:"Swaziland",states:{}},SE:{key:"SE",label:"Sweden",states:{}},CH:{key:"CH",label:"Switzerland",states:{}},SY:{key:"SY",label:"Syrian Arab Republic",states:{}},TW:{key:"TW",label:"Taiwan",states:{}},TJ:{key:"TJ",label:"Tajikistan",states:{}},TZ:{key:"TZ",label:"Tanzania",states:{}},TH:{key:"TH",label:"Thailand",states:{}},TG:{key:"TG",label:"Togo",states:{}},TK:{key:"TK",label:"Tokelau",states:{}},TO:{key:"TO",label:"Tonga",states:{}},TT:{key:"TT",label:"Trinidad and Tobago",states:{}},XU:{key:"XU",label:"Tristan da Cunha",states:{}},TN:{key:"TN",label:"Tunisia",states:{}},TR:{key:"TR",label:"Turkey",states:{}},TM:{key:"TM",label:"Turkmenistan",states:{}},TC:{key:"TC",label:"Turks and Caicos Islands",states:{}},TV:{key:"TV",label:"Tuvalu",states:{}},UG:{key:"UG",label:"Uganda",states:{}},UA:{key:"UA",label:"Ukraine",states:{}},AE:{key:"AE",label:"United Arab Emirates",states:{}},GB:{key:"GB",label:"United Kingdom",states:{}},UM:{key:"UM",label:"United States Minor Outlying Isl",states:{}},UY:{key:"UY",label:"Uruguay",states:{}},UZ:{key:"UZ",label:"Uzbekistan",states:{}},VU:{key:"VU",label:"Vanuatu",states:{}},XV:{key:"XV",label:"Vatican City",states:{}},VE:{key:"VE",label:"Venezuela",states:{}},VN:{key:"VN",label:"Vietnam",states:{}},VI:{key:"VI",label:"Virgin Islands (U.S.)",states:{}},WF:{key:"WF",label:"Wallis and Furuna Islands",states:{}},EH:{key:"EH",label:"Western Sahara",states:{}},WS:{key:"WS",label:"Western Samoa",states:{}},YE:{key:"YE",label:"Yemen",states:{}},ZR:{key:"ZR",label:"Zaire",states:{}},ZM:{key:"ZM",label:"Zambia",states:{}},ZW:{key:"ZW",label:"Zimbabwe",states:{}}};;/*! BARNES-BUILDER 2024-02-21 */
$(document).ready(function(){function a(a,b){var c=a.offset().left,d=a.offset().left+a.width(),e=b-c,f=b-d;return Math.floor(Math.min(Math.abs(f),Math.abs(e)))}function b(a,b){$("ul#nav").hasClass("nav-in")?("ul"==b&&a.hasClass("li-focus")&&($(".nav-item").removeClass("focus"),a.find(".nav-menu").length>0&&(a.addClass("focus").find(".nav-menu")[0].style.transition="")),a.find(".nav-menu").hasClass("visibility-visible")||c(a.attr("id")),a.find(".nav-menu").addClass("visibility-visible"),$(".nav-item").removeClass("focus"),a.addClass("focus"),$(".nav-item:not('.nav-item.focus') .nav-menu").removeClass("visibility-visible")):($(".nav-item").removeClass("focus"),a.find(".nav-menu").length>0&&(a.addClass("focus").find(".nav-menu")[0].style.transition="0.22s cubic-bezier(0.5, 0, 0.67, 1.2) 0.066s"),a.find(".nav-menu").addClass("visibility-visible"),$(".nav-item:not('.nav-item.focus') .nav-menu").removeClass("visibility-visible"),$(".nav-item:not('.nav-item.focus') .nav-menu").removeAttr("style"),$("ul#nav").addClass("nav-in"),c(a.attr("id")))}function c(a){{var b=$(".nav-item");$(".nav-menu")}$(".nav-menu").attr("aria-hidden","true"),$(this).find(".nav-menu").attr("aria-hidden","false"),$("a[role=menuitem]").attr("aria-haspopup","false"),$(this).find("a[role=menu]").attr("aria-haspopup","true");var c="/xhr/html/cqContent.jsp",d=$("#"+a),e=d.find("input[type=hidden][name=type]").val(),f=d.find("input[type=hidden][name=contentId]").val(),g=d.find("input[type=hidden][name=optimizationEnabled]").val();if(g){var h=d.find("div[name=cq-renderer]");$.ajax({url:c,data:{type:e,contentId:f},dataType:"html",cache:!1,success:function(a){d.find("div[name=cq-renderer]").html(a),h.addClass("visibility-visible")},error:function(){h.addClass("visibility-visible")}})}$(this).find(".nav-menu").attr("aria-hidden","true"),$(this).find("a[role=menu]").attr("aria-haspopup","false"),$(".top-nav-close").bind("touchstart",function(a){a.preventDefault(),a.stopPropagation(),b.removeClass("hover-effect"),$(this).closest(".nav-menu").hide()}),$("#myAccountMenu").bind("touchstart",function(){$(this).hasClass("hover-effect")?$(this).removeClass("hover-effect"):$(this).addClass("hover-effect")})}var d=null,e=$(".nav-item");e.on("touchstart",function(a){a.preventDefault();var b,c,d=$(this),e=$(a.target);if(d.hasClass("hover-on")){if(b=e.is("a")?e:e.closest("a",d),b&&b.length>0&&(b.trigger("click"),c=b.attr("href")))return void(window.location.href=c)}else $(".hover-on:not(this)").removeClass("hover-on"),d.addClass("hover-on").addClass("focus")}),$("li[id^=topNav]").each(function(a){$($(this).children()[0]).attr("aria-label",$($(this).children()[0]).text()+" Press down arrow to access "+$($(this).children()[0]).text()+", "+(a+1)+" of "+($(this).siblings().length+1)+" and press escape button to close menu"),$($(this).children()[0]).attr("aria-posinset",a+1),$(this).find("a").attr("tabindex","0"),$(this).find("a").attr("aria-haspopup","true"),$($(this).children()[1]).find("div[class^=col-lg]").each(function(){$(this).find("a").attr("aria-setsize",$(this).find("a").length),$(this).find("a").attr("tabindex","0"),$(this).find("a").removeAttr("aria-haspopup")})}),$("#nav").on("mousemove",function(c){if(0===$(c.target).parents(".nav-menu").length)if("a"===c.target.tagName.toLowerCase()||"li"===c.target.tagName.toLowerCase())$(c.target).closest(".nav-item").find(".nav-menu").hasClass("visibility-visible")||(b($(c.target).closest(".nav-item"),"li"),$(c.target).closest(".nav-item").addClass("li-focus"));else{var d,f=c.pageX,g=[],h=0;e.each(function(){g.push(a($(this),f))}),h=Math.min.apply(Math,g),d=e[g.indexOf(h)],b($(d),"ul")}}),$("#nav").on("mouseleave",function(){$(".header-tile div[name=cq-renderer]").removeClass("visibility-visible"),$(this).find(".nav-item.focus .nav-menu").length>0&&($(this).find(".nav-item.focus .nav-menu")[0].style.transition="0.22s cubic-bezier(0.5, 0, 0.67, 1.2) 0.066s"),$(this).removeClass("nav-in"),$(this).find("li.nav-item").removeClass("li-focus").find(".nav-menu").removeClass("visibility-visible")}),$("[data-submenu]").on("mouseover mouseout",function(a){"mouseover"==a.type&&($(".account-sign-in").is(":hover")||$("#myAccountMenu").is(":hover"))?$(this).find("#myAccountLinks-old").addClass("visibility-visible"):"mouseout"==a.type&&$(this).find("#myAccountLinks-old").removeClass("visibility-visible")}),$("nav#primaryNav, nav#primaryNav *, header .cart").on("mouseover mousedown touchstart",function(a){"touchstart"==a.type&&"ul"==a.target.tagName.toLowerCase()&&"nav"==a.target.id&&a.preventDefault(),$("li[id^=topNav]").each(function(a){$($(this).children()[0]).attr("aria-label",$($(this).children()[0]).text()+" Press down arrow to access "+$($(this).children()[0]).text()+", "+(a+1)+" of "+($(this).siblings().length+1)+" and press escape button to close menu"),$($(this).children()[0]).attr("aria-posinset",a+1),$(this).find("a").attr("tabindex","0"),$(this).find("a").attr("aria-haspopup","true"),$($(this).children()[1]).find("div[class^=col-lg]").each(function(){$(this).find("a").attr("aria-setsize",$(this).find("a").length),$(this).find("a").attr("tabindex","0"),$(this).find("a").removeAttr("aria-haspopup")})});var b="a"===a.target.tagName.toLowerCase()?$(a.target).get(0):$(a.target).closest("a").get(0);$(".navigation-dropdown select.selectBox").length>0&&($(".navigation-dropdown select.selectBox").selectBox("instance").hideMenus(),$(".navigation-dropdown a.selectBox").blur());var c=!1;"undefined"!=typeof b&&("li"===$(b).parent().get(0).tagName.toLowerCase()&&(c=!0),($(b).attr("data-submenu")||"").trim()&&(c=!0)),c&&($(".focus:not('form#searchForm')").removeClass("focus"),$(b).addClass("focus"),$(b).not(":disabled")&&!$(b).attr("readonly")&&($(b).parents().addClass("focus"),d=b))}),$("#nav a[role='menuitem']:not('.nav-menu a')").on("keydown",function(a){27===a.keyCode&&$(".nav-menu.visibility-visible").removeClass("visibility-visible"),40===a.keyCode&&(a.preventDefault(),$(this).siblings(".nav-menu").addClass("visibility-visible"),$(".nav-menu").find(":tabbable:last").on("keydown",function(a){a.shiftKey||9!==a.keyCode||($(this).parents(".nav-item").removeClass("focus"),$(this).parents(".nav-menu").removeClass("visibility-visible"),0===$(this).parents(".nav-item").next(".nav-item").length&&$(".homepage-hero").length>0&&($("section.bopis-banner").length>0?($("section.bopis-banner").find(":tabbable:last").focus(),$("section.bopis-banner").find(":tabbable:last").addClass("focus")):($(".homepage-hero").find(".icon_hero").removeAttr("aria-hidden"),a.preventDefault(),a.stopPropagation(),$(".icon_hero").attr("aria-hidden","false").removeAttr("role"),$(".icon_hero svg").focus().addClass("focus"))))})),a.shiftKey||9!==a.keyCode||($(this).closest(".nav-item").find(".nav-menu.visibility-visible").length>0?(a.preventDefault(),$(".nav-menu.visibility-visible :tabbable:first").focus()):($(this).parent().removeClass("focus"),$(this).siblings(".nav-menu").removeClass("visibility-visible"),$(this).parent().prev().length>0&&$(this).parent().prev().removeClass("focus"),$(this).parent().next().length>0&&$(this).parent().next().removeClass("focus"))),a.shiftKey&&9===a.keyCode&&($(this).parent().removeClass("focus"),$(this).siblings(".nav-menu").removeClass("visibility-visible"),$(this).parent().prev().length>0&&$(this).parent().prev().removeClass("focus"),$(this).parent().next().length>0&&$(this).parent().next().removeClass("focus"),$(document.activeElement).is($("#nav :tabbable:first"))&&(a.preventDefault(),a.stopPropagation(),$("#shoppingBag").focus()))}),$("#nav .nav-menu a").on("keydown",function(a){27===a.keyCode&&$(".nav-menu.visibility-visible").removeClass("visibility-visible")}),$("body").on("mousedown mouseover",function(a){if(d!==a.target&&0!=$(d).closest("#globalHeader").length){var b=!1;if(d?$(a.target).closest(d.parentNode).length||(b=!0):$(a.target).closest(".focus").length||(b=!0),b)if("mousedown"==a.type&&"searchBarBN"!=$(a.target).attr("id"))$(".focus").removeClass("focus").removeClass("hover-on");else{if("mouseover"==a.type&&"searchFilterSelect-replacement"===$(d).attr("id"))return;$(".focus:not('form#searchForm')").removeClass("focus").removeClass("hover-on")}}}),$("#myAccountMenu").on("keydown",function(a){9===a.keyCode&&($(this).removeClass("focus"),$(this).removeClass("hover-on"))}),$("body")[0].addEventListener("focus",function(a){$(a.target).not(":disabled")&&!$(a.target).attr("readonly")&&(d=a.target)},!0)});;/*! BARNES-BUILDER 2024-02-21 */
$(function(){$("#searchBar").keydown(function(a){"13"==a.keyCode&&(a.preventDefault(),$("#searchSubmit").click())}),$("header div.icon-search-2").on("click keydown",function(a){("click"==a.type||"keydown"==a.type&&"13"==a.keyCode)&&(a.preventDefault(),$("#searchSubmit").click())})}),function($j){$j.EndecaSearchSuggestor=function(a,b){this._active=!0,this._options=b,this._lastValue="",this._element=a,this._container=$j('<div id="headSearchTypeAheadHolder" class="'+this._options.containerClass+'" />'),this._triangleUp=$('<div class="triangle-up"></div>'),this._timeOutId,this._hideTimeOutId,this._selectedIndex=-1;var c=this;$j("#searchForm").append(this._container),a.keydown(function(a){switch(a.keyCode){case 38:c._active?c.moveToPrev():c.show();break;case 40:c._active?c.moveToNext():c.show();break;case 9:c.hide();break;case 13:if(c._active&&-1!=c._selectedIndex)return a.preventDefault(),c.selectItem(),!1;break;case 27:c._active&&c.hide();break;default:c.handleRequest()}}),a.blur(function(){var a=function(){c.hide()};c._hideTimeOutId=setTimeout(a,200)})},$j.EndecaSearchSuggestor.prototype.moveToPrev=function(){var a=$j(this._container).find("ul li.selected"),b=$j(this._container).find("ul li"),c=b.filter(".selected");a=!c.length||c.is(":first-child")?b.last():c.prev(),$j(this._container).find("ul li").removeClass("selected"),a.addClass("selected"),this._selectedIndex=a.index();var d=$j("a",a).text();this._element.val(d)},$j.EndecaSearchSuggestor.prototype.moveToNext=function(){var a=$j(this._container).find("ul li.selected"),b=$j(this._container).find("ul li"),c=b.filter(".selected");a=!c.length||c.is(":last-child")?b.eq(0):c.next(),$j(this._container).find("ul li").removeClass("selected"),a.addClass("selected"),this._selectedIndex=a.index();var d=$j("a",a).text();this._element.val(d)},$j.EndecaSearchSuggestor.prototype.selectItem=function(){if(-1!=this._selectedIndex){var a=$j("a",$j(".dimResult",this._container).find("li").eq(this._selectedIndex)).attr("href");document.location.href=a}},$j.EndecaSearchSuggestor.prototype.hide=function(){this._container.hide(),this._active=!1},$j.EndecaSearchSuggestor.prototype.show=function(){this._container.is(":hidden")&&(this.setPosition(),this._container.show(),this._active=!0,this._selectedIndex=-1)},$j.EndecaSearchSuggestor.prototype.handleRequest=function(){var a=this,b=function(){var b=$j.trim(a._element.val());b!=a._lastValue&&(b.length>=3?a.requestData():a.hide()),a._lastValue=b};this._timeOutId&&clearTimeout(this._timeOutId),this._timeOutId=setTimeout(b,this._options.delay)},$j.EndecaSearchSuggestor.prototype.requestData="undefined"!=typeof BN_IS_IE9&&BN_IS_IE9?function(){var a=this,b=a.composeUrl();b+=b.indexOf("?")>=0?"&"+$j("#opt").serialize():"?"+$j("#opt").serialize(),makeAjaxRequest(b,function(b){a.showSearchResult(b)},"json",!1,!1)}:function(){{var a=this;$j.ajax({url:a.composeUrl(),dataType:"json",data:$j("#opt").serialize(),async:!0,success:function(b){a.showSearchResult(b)}})}},$j.EndecaSearchSuggestor.prototype.composeUrl=function(){var a=this._options.autoSuggestServiceUrl,b=$j.trim(this._element.val());a+=-1==a.indexOf("?")?"?":"&";var c=$j("select#searchFilterSelect").val();return a+="Dn=0&Dy=1&collection="+this._options.collection+"&N="+c+"&Ntt="+b+"*"},$j.EndecaSearchSuggestor.prototype.showSearchResult=function(a){var b=this.processSearchResult(a);null!=b?(this._container.html(b),this._container.prepend(this._triangleUp),this.bindEventHandler(),this.show()):this.hide()},$j.EndecaSearchSuggestor.prototype.processSearchResult=function(a){var b=null,a=a.contents[0];return b=this.generateHtmlContent(a)},$j.EndecaSearchSuggestor.prototype.generateHtmlContent=function(data){var autoSuggestCartridges=null,resultListCartridge=null,newContent=null;if(null!=data){var urlDomain="";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(urlDomain=BN_EXTERNAL_DOMAIN_PREFIXED),newContent=$j('<ul class="ut-flyout dimResult"/>');var searchTerm=$j.trim(this._element.val());if(newContent.append($j(this.highlightMatched(searchTerm))),autoSuggestCartridges=data.autoSuggest,null!=autoSuggestCartridges&&autoSuggestCartridges.length>0)for(var j=0;j<autoSuggestCartridges.length;j++){var cartridge=autoSuggestCartridges[j];if(null!=cartridge&&"NavigationSearchAutoSuggestItem"==cartridge["@type"]){var navigationRecords=cartridge.records;if(null!=navigationRecords&&navigationRecords.length>0){for(var i=0;i<navigationRecords.length;i++){var navigationRecord=navigationRecords[i];if(null!=navigationRecord&&null!=navigationRecord.attributes){var productName=navigationRecord.attributes.P_Display_Name[0],action=navigationRecord.detailsAction.recordState,category=navigationRecord.attributes["product.category"][0],listItemMarkup="";listItemMarkup+='<li class="nav-header product-item blk"><a class="product-item-image blk blk-l margin8r" href="'+urlDomain+webContextRoot+action+'"><img src="" /></a><div class="description-blk blk blk-l"><a class="blk primary" href="'+urlDomain+webContextRoot+"/details"+action+'">'+productName+"</a></div></li>"}newContent.append(listItemMarkup)}newContent.append('<li class="divider"></li>')}}else if(null!=cartridge&&"DimensionSearchAutoSuggestItem"==cartridge["@type"]){var dimSearchGroups=cartridge.dimensionSearchGroups;if(null!=dimSearchGroups&&dimSearchGroups.length>0)for(var i=0;i<dimSearchGroups.length;i++){var dimResultGroup=dimSearchGroups[i];if(null!=dimResultGroup&&null!=dimResultGroup.dimensionSearchValues&&dimResultGroup.dimensionSearchValues.length>0)for(var productsAvailable=!1,dimResultGroupDimensionName=dimResultGroup.dimensionName,n=0;n<dimResultGroup.dimensionSearchValues.length;n++){0==n&&productsAvailable&&newContent.append('<li class="divider"></li>');var scopeFacetValue=$j("select#searchFilterSelect").val(),dimResult=dimResultGroup.dimensionSearchValues[n],dimResultLabel=dimResult.label,contentPath="/s",nValue="/_/N-"+scopeFacetValue,dimResultLabel="/"+encodeURIComponent(dimResultLabel).replace(/%20/g,"+");if("/browse"==dimResult.contentPath)var action=contentPath+dimResultLabel+nValue;else var action=contentPath+dimResultLabel+nValue;if(null!=dimResult.ancestors&&dimResult.ancestors.length>0)var text=dimResult.label+" in "+dimResult.ancestors[0].label;else var text=dimResult.label;var inVal=$("#searchBar").val();newContent.append('<li class="nav-header"><a href="'+urlDomain+webContextRoot+action+'"> '+text.replace(eval("/"+inVal+"/i"),"<span>"+inVal+"</span>")+"</a></li>")}}}else null!=cartridge&&"AtgPromoItem"==cartridge["@type"]}}return newContent},$j.EndecaSearchSuggestor.prototype.highlightMatched=function(a){var b=$j.trim(this._element.val()).toLowerCase(),c=a.toLowerCase();if(-1!=c.indexOf(b)){{var d=c.indexOf(b);a.substring(0,d),a.substring(d+b.length)}b=a.substr(d,b.length)}return c},$j.EndecaSearchSuggestor.prototype.bindEventHandler=function(){var a=this;$j(".dimResult li ",this._container).mouseenter(function(){$j(this).addClass("selected").siblings().removeClass("selected"),a._selectedIndex=$j(this).index();var b=$j("a",$j(this)).text();a._element.val(b)}),$j("a",$j(".dimResult",this._container)).click(function(b){b.preventDefault(),a.selectItem()}),$j(".dimRoots",this._container).click(function(){clearTimeout(a._hideTimeOutId),a._element.focus()})},$j.EndecaSearchSuggestor.prototype.setPosition=function(){var a=this._element.offset();this._container.css({top:a.top+this._element.outerHeight(),left:a.left})},$j.fn.endecaSearchSuggest=function(a){var b=$j.extend({},$j.fn.endecaSearchSuggest.defaults,a);this.each(function(){var a=$j(this);new $j.EndecaSearchSuggestor(a,b)})},$j.fn.endecaSearchSuggest.defaults={minAutoSuggestInputLength:3,displayImage:!1,delay:250,autoSuggestServiceUrl:"",collection:"",searchUrl:"",containerClass:"dimSearchSuggContainer",defaultImage:"no_image.gif"}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
!function(a){var b="";a.bnAutoSuggest=function(b){var c=this;this.settings=b,this.searchBarElement=a(c.settings.searchInputSelector),this.suggestionsContainer=a(this.settings.suggestionsContainerHtml),this.originalText="",this.updatedText=!1;var d=c.searchBarElement.data("mininputcharactercount");"undefined"!=typeof d&&d>=0&&(c.settings.minInputCharCount=d);var e=c.searchBarElement.data("maxautosuggestcount");"undefined"!=typeof e&&e>=0&&(c.settings.maxAutoSuggestCount=e),c.initializeSuggestionsContainer(),""!=c.settings.overrideInputEvents?that.settings.overrideInputEvents(c):c.bindEvents()},a.bnAutoSuggest.prototype.bindEvents=function(){var b=this;b.searchBarElement.off().on("focus input propertychange",function(){if(!BN_AUTOSUGGEST_IS_IE9){if(b.updatedText)return b.updatedText=!1,!1;b.canGetAutoSuggestions()?b.getAutoSuggestions():b.hideSuggestions(),b.originalText=b.getSearchText()}}),b.searchBarElement.on("blur",function(){b.hideSuggestions()}),b.searchBarElement.keydown(function(a){switch(a.keyCode){case 38:b.moveHighlighted("up");break;case 40:b.moveHighlighted("down");break;case 13:a.preventDefault(),""!=b.getSearchText()&&b.submitSearch();break;case 27:b.hideSuggestions(),b.restoreOriginalText();break;default:if(BN_AUTOSUGGEST_IS_IE9){if(b.updatedText)return b.updatedText=!1,!1;b.canGetAutoSuggestions()?b.getAutoSuggestions():b.hideSuggestions(),b.originalText=b.getSearchText()}}}),b.getFormJqueryElement().on("submit",function(a){""==b.getSearchText()&&a.preventDefault()}),b.suggestionsContainer.on("mouseenter","li",function(){var c=a(this);b.removeHighlightSuggestion(b.suggestionsContainer.find(".selected")),b.highlightSuggestion(c)}),b.suggestionsContainer.on("mouseleave",function(){b.removeHighlightSuggestion(a(this).find(".selected"))}),b.getFormJqueryElement().on("mousedown","a.bn-suggest-new-link, a.bn-suggest-new-sectionone-link",function(c){c.preventDefault(),b.updateSearchText(a(this)),window.location=a(this).attr("href"),b.submitSearch()}),b.getFormJqueryElement().on("mousedown","a.bn-suggest-link",function(c){c.preventDefault(),b.updateSearchText(a(this)),b.populateTypeAhead(a(this)),b.submitSearch()}),b.getFormJqueryElement().on("click","a.bn-suggest-link",function(a){a.preventDefault()})},a.bnAutoSuggest.prototype.populateTypeAhead=function(b){if(b.find(".categorization-name").length>0){var c=b.text(),d=c.substr(0,c.lastIndexOf(" in "));this.getFormJqueryElement().find("#typeAheadValue").val(d);var e=b.is("a")?b:b.find("a"),f=e.attr("href"),g=f.substr(f.lastIndexOf("/")+3);a("#searchFilterSelect").val(g)}else a("#searchFilterSelect").val(0),this.getFormJqueryElement().find("#typeAheadValue").val(b.text())},a.bnAutoSuggest.prototype.moveHighlighted=function(b){var c=this.suggestionsContainer.find(".dimResult"),d=c.find("li.selected"),e=c.find("li"),f=-1;return e.length&&d.length&&(f=e.index(d)),"up"==b&&-1==f?!1:"up"==b&&0==f?(this.removeHighlightSuggestion(d),this.restoreOriginalText(),!1):"down"==b&&f==e.length-1?!1:void(d.length?(this.removeHighlightSuggestion(d),"up"==b?(f--,this.highlightSuggestion(a(e.get(f))),this.updateSearchText(a(e.get(f)))):(f++,this.highlightSuggestion(a(e.get(f))),this.updateSearchText(a(e.get(f)))),this.searchBarElement.attr("aria-activedescendant",a(e.get(f)).attr("id"))):"down"==b&&(this.highlightSuggestion(a(e.get(0))),this.updateSearchText(a(e.get(0))),this.searchBarElement.attr("aria-activedescendant",a(e.get(0)).attr("id"))))},a.bnAutoSuggest.prototype.restoreOriginalText=function(){this.searchBarElement.val(this.originalText)},a.bnAutoSuggest.prototype.updateSearchText=function(a){var b=a.text();this.updatedText=!0,this.populateTypeAhead(a),this.searchBarElement.val(b.replace(/\s+/g," "))},a.bnAutoSuggest.prototype.highlightSuggestion=function(b){b.addClass("focus"),a(b.children()[0]).addClass("focus"),b.addClass("selected")},a.bnAutoSuggest.prototype.removeHighlightSuggestion=function(b){b.removeClass("focus"),a(b.children()[0]).removeClass("focus"),b.removeClass("selected")},a.bnAutoSuggest.prototype.submitSearch=function(){if(setAnalyticsCookie("searchBar_value",null),setAnalyticsCookie("searchBar_value",this.originalText),this.suggestionsContainer.find(".nav-header.selected .categorization-name").length>0){var a=this.searchBarElement.val();a=a.substr(0,a.lastIndexOf(" in ")),this.searchBarElement.val(a)}else if(this.suggestionsContainer.find(".nav-header.selected .bn-suggest-new-sectionone-link").length>0){var c=b;this.searchBarElement.val(c)}this.getFormJqueryElement().find("#searchSubmit").click()},a.bnAutoSuggest.prototype.areSuggestionsDisplayed=function(){return this.suggestionsContainer.is(":visible")},a.bnAutoSuggest.prototype.initializeSuggestionsContainer=function(){if(""!=this.settings.overrideInitializeSuggestionsContainer)that.settings.overrideInitializeSuggestionsContainer(this);else{var b=this.suggestionsContainer;this.getFormJqueryElement().append(b);var c=a('<div class="typeahead-results" show><ul id="headSearchTypeAheadHolderUl" class="ut-flyout dimResult" role="listbox"></ul></div>');b.append(c)}},a.bnAutoSuggest.prototype.showSuggestionsOld=function(b){var c=this.getSearchText(),d=this.suggestionsContainer,e=d.find("ul.dimResult");e.empty(),!a.isEmptyObject(b.results[this.settings.searchType[0]])&&b.results[this.settings.searchType[0]].length>0?(a("#miniCart").hide(),a.each(b.results[this.settings.searchType[0]],function(a,b){var d=b.term,f=d.split(c.toLowerCase()).join("<span>"+c.toLowerCase()+"</span>");e.append('<li class="nav-header" role="option"><a href="#" class="bn-suggest-link">'+f+"</a></li>")}),a("li.nav-header").each(function(b){a(this).attr("id","nav-header-"+b).attr("role","option")}),d.show(),this.searchBarElement.attr("aria-expanded","true"),a("#headSearchTypeAheadHolder").attr("aria-hidden","false")):(this.hideSuggestions(),this.searchBarElement.attr("aria-expanded","false"))},a.bnAutoSuggest.prototype.showSuggestionsNew=function(c){var d=this.getSearchText(),e=this.suggestionsContainer,f=e.find("ul.dimResult");if(f.empty(),c.mainContent[0][this.settings.searchType[1]].length>0||c.mainContent[0][this.settings.searchType[2]].length>0||c.mainContent[0][this.settings.searchType[3]].length>0){var g=!1;a.each(c.mainContent[0][this.settings.searchType[1]],function(a,c){var e=c.pageLink,h=e.split(d.toLowerCase()).join("<span>"+d.toLowerCase()+"</span>"),i=c.searchTerm;b=i;var j=c.url;f.append('<li class="nav-header" id="productFirst'+a+'" role="option"><a href="'+j+'" class="bn-suggest-new-sectionone-link">'+h+"</a></li>"),g=!0}),g&&f.append("<hr>");var h=!1;a.each(c.mainContent[0][this.settings.searchType[2]],function(a,b){var c=b.suggestion,e=c.split(d.toLowerCase()).join("<span>"+d.toLowerCase()+"</span>"),g=b.url;f.append('<li class="nav-header" id="category'+a+'" role="option"><a href="'+g+'" class="bn-suggest-new-link">'+e+"</a></li>"),h=!0}),h&&f.append("<hr>"),a.each(c.mainContent[0][this.settings.searchType[3]],function(a,b){var c=b.suggestion,e=c.split(d.toLowerCase()).join("<span>"+d.toLowerCase()+"</span>"),g=b.url;f.append('<li class="nav-header" id="productThird'+a+'" role="option"><a href="'+g+'" class="bn-suggest-new-link">'+e+"</a></li>")}),e.show(),this.searchBarElement.attr("aria-expanded","true"),a("#headSearchTypeAheadHolder").attr("aria-hidden","false")}else this.hideSuggestions(),this.searchBarElement.attr("aria-expanded","false")},a.bnAutoSuggest.prototype.hideSuggestions=function(){this.suggestionsContainer.hide(),a("#headSearchTypeAheadHolder").attr("aria-hidden","true")},a.bnAutoSuggest.prototype.getFormJqueryElement=function(){return a(this.settings.searchInputSelector).closest("form")},a.bnAutoSuggest.prototype.getSearchText=function(){return a.trim(this.searchBarElement.val())},a.bnAutoSuggest.prototype.canGetAutoSuggestions=function(){return this.getSearchText().length>=this.settings.minInputCharCount?!0:!1},a.bnAutoSuggest.prototype.getAutoSuggestionsUrl=function(){return this.searchBarElement.data("autosuggesturl")},a.bnAutoSuggest.prototype.getAutoSuggestions=function(){var b=this,c=b.getSearchText(),d=this.getAutoSuggestionsUrl(),e=null;e=d.indexOf("bntypeahead-service-authoring/json/pages")>-1?{Ntt:c}:{"types[]":b.settings.searchType,term:c,limit:b.settings.maxAutoSuggestCount},"undefined"!=typeof bn_autosuggest_xhr&&null!=bn_autosuggest_xhr&&bn_autosuggest_xhr.abort(),BN_AUTOSUGGEST_IS_IE9?(e.jsonp="bnsuggest",bn_autosuggest_xhr=a.ajax({url:this.getAutoSuggestionsUrl(),data:e,type:"get",cache:!1,dataType:"jsonp",jsonpCallback:"bnsuggest"}).done(function(a){""!=b.settings.overrideSuccessCallback?b.settings.overrideSuccessCallback(a,b):void 0!=a["endeca:assemblerRequestInformation"]?b.showSuggestionsNew(a,b):b.showSuggestionsOld(a,b)})):bn_autosuggest_xhr=a.ajax({url:this.getAutoSuggestionsUrl(),data:e,type:"get",cache:!1,dataType:"json"}).done(function(a){""!=b.settings.overrideSuccessCallback?b.settings.overrideSuccessCallback(a,b):void 0!=a["endeca:assemblerRequestInformation"]?b.showSuggestionsNew(a,b):b.showSuggestionsOld(a,b)})},a.fn.bnAutoSuggest=function(b){BN_AUTOSUGGEST_IS_IE9="XDomainRequest"in window&&"undefined"!=typeof window.XDomainRequest?!0:!1;var c=a.extend({},a.fn.bnAutoSuggest.defaults,b);new a.bnAutoSuggest(c)},a.fn.bnAutoSuggest.defaults={searchInputSelector:"",minInputCharCount:2,maxAutoSuggestCount:5,serviceUrl:"",suggestionsContainerHtml:'<div id="headSearchTypeAheadHolder" aria-hidden="true" style="display: none;"></div>',searchType:["product","pageLinkSuggestion","categorySuggestions","productSuggestions"],overrideSuccessCallback:"",overrideInitializeSuggestionsContainer:"",overrideInputEvents:""}}(jQuery);;/*! BARNES-BUILDER 2024-02-21 */
function analyticsShoppingCart(a,b){if("undefined"!=typeof s_setP){{var c=b.element||"",d=($(c.parents("#cartItems").length>0?"#cartItems":"#miniCartItems"),updatedQty=""),e={},f=(b.updateType||"",b.addedFrom||"",getAnalyticsEventCount()),g=c.closest(".multi-product-select").length>0?!0:!1,h=c.closest("ul.subscriptions-container").length>0?!0:!1,i=b.isInstant||!1,j=c.closest(".modal-marketplace").length>0?!0:!1,k=purchaseTypeLabel="",l=b.addQty||1,m=!1,n=!1,o=!1,p=0,q=b.additionalProductData||{},r=b.bundleEANList||[],s=b.isBundle||!1;b["data-product-name"],b.skuType,b.price,b.productUrl,b.workId,b.viewType,b["data-primary-category"],b["data-product-type"],b["data-sub-category"],b["data-base-price"],b["data-product-id"],b["data-audiobook-id"],b["data-product-url"],b["data-sku"],b["data-book-ratings"],b["data-reviews"],b["data-availability"]}if("pdp"!==b.addedFrom&&"modal"!==b.addedFrom){var t=c.find(".analytics-sku-id").val().trim();d=getAnalyticsItemIndex(t);var u=c.find(".initial-qty").val();updatedQty="undefined"!=typeof b.updateType&&"remove"===b.updateType?0:c.find(".product-quantity").val()}var v="undefined"==typeof b.addedFrom||"pdp"!==b.addedFrom&&"modal"!==b.addedFrom?updatedQty-u:1;if(0===v)return!1;if("undefined"!=typeof b.addedFrom&&"pdp"===b.addedFrom){var w=digitalData&&digitalData.product&&digitalData.product[0];w&&$.extend(e,digitalData.product[0])}else if("undefined"!=typeof b.addedFrom&&"modal"===b.addedFrom){var x=$.parseJSON(c.find(".btn-addtocart").data("analyticsdata"))||"";x&&x.product[0]?$.extend(e,x.product[0]):$.isPlainObject(x)?$.extend(e,x.product):consoleError("No Product Data Available")}else{var w=digitalData&&digitalData.cart&&digitalData.cart.item&&digitalData.cart.item[d];w&&($.extend(e,digitalData.cart.item[d]),e.quantity&&delete e.quantity)}if(v>0?(s_setP("digitalData.event["+f+"].eventInfo.eventName","Add to Bag"),s_setP("digitalData.event["+f+"].eventInfo.eventAction","addToBag")):(s_setP("digitalData.event["+f+"].eventInfo.eventName","Remove from Bag"),s_setP("digitalData.event["+f+"].eventInfo.eventAction","removeFromBag")),s_setP("digitalData.event["+f+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+f+"].category.primaryCategory","ShoppingBag"),s_setP("digitalData.event["+f+"].attributes.product[0]",e),s_setP("digitalData.event["+f+"].attributes.product[0].quantity",0),s_setP("digitalData.event["+f+"].attributes.product[0].category.primaryCategory",""),s_setP("digitalData.event["+f+"].attributes.product[0].category.productType",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.audiobookID",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.productURL",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.mEAN",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.pEAN",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.departmentCode",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.parentSku",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.productName",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.productID",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.brand",""),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.bundleID",""),g||h){var y=c.find(".price.current-price").not(":hidden").text()||c.find(".emag-price .price").not(":hidden").text();y=Number(y.replace(/[^0-9\.]+/g,""))||"",s_setP("digitalData.event["+f+"].attributes.product[0].price.basePrice",y)}if(v>0){if((g||h)&&(purchaseTypeLabel=c.find("label").contents().filter(function(){return 3==this.nodeType}).text().trim()),k=purchaseTypeName(c,i,j,purchaseTypeLabel),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.purchaseType",k),s===!0){if(!$.isEmptyObject(q)){var z=!1,A="instore pickup available: geo or store unselected";s_setP("digitalData.event["+f+"].attributes.product[0]",q),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.notifyWhenStocked",z),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.pickupInStoreStatus",A)}s_setP("digitalData.event["+f+"].attributes.product[0].attributes.isBundle",s),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.isGiftCard",m),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.isGiftWrap",n),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.giftCardValue",p),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.isEligibleForFreeShipping",o),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.bundleEANList",r),s_setP("digitalData.event["+f+"].attributes.product[0].quantity",l);var B=pEAN=brand=bundleID="";s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.mEAN",B),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.pEAN",pEAN),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.brand",brand),s_setP("digitalData.event["+f+"].attributes.product[0].productInfo.bundleID",bundleID)}_satellite.track("onShoppingBagAddItem")}else{var C,D="",E=!1,F=Number(digitalData.event[f].attributes.product[0].productInfo.sku);if("Find My Store"==b.element.find(".open-ss-modal").text())D="instore pickup available: geo or store unselected";else if($("[id^='availableForPickup']").length>0){var G=$("[id^='availableForPickup']").val();D="true"==G?"instore pickup available:geo or store selected":"instore pickup unavailable:geo or store selected"}s_setP("digitalData.event["+f+"].attributes.product[0].attributes.pickupInStoreStatus",D),"undefined"!=typeof Storage&&(C=JSON.parse(sessionStorage.getItem("addedBundleEanList"))),$.inArray(F,C)>=0&&(E=!0,C.splice(C.indexOf("removedSku"),1),sessionStorage.setItem("addedBundleEanList",JSON.stringify(C))),s_setP("digitalData.event["+f+"].attributes.product[0].attributes.isBundle",E),s_setP("digitalData.event["+f+"].attributes.product[0].quantity",Math.abs(v)),_satellite.track("onShoppingBagRemoveItem")}}}function purchaseTypeName(a,b,c,d){var e=a,f="instant_",g="addtobag_",h=d,i=b?f:g,j=["new","used","subscription","rent"],k=function(a,b){return h=h||b,new RegExp(a,"gi").test(h)};if(h){for(var l=0;l<j.length;l++)if(k(j[l])){i+=j[l];break}}else if(c){var m=e.find('[data-prop="condition"]').text().trim().toLowerCase();i="new"===m?i+"new":i+"used"}else i+="new";return i}function getAnalyticsItemIndex(a){if("undefined"!=typeof s_setP){var b=((digitalData||{}).cart||{}).item||[];if(b.length>0)for(i=0;i<b.length;i++){var c=(((digitalData||{}).cart||{}).item[i]||{}).productInfo;if(c&&c.hasOwnProperty("sku")){var d=c.sku;if(d.trim()===a)return i}}}}function setAnalyticsCookie(a,b){$.cookie(a,b?b.trim():"",{expires:365,path:"/"})}function trackAnalyticsPrevPage(){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){var a=s_getP("digitalData.page.pageInfo.pageName"),b=$.cookie("setPrevPageName"),c=b?b.trim():"";s_setP("digitalData.page.pageInfo.previousPageName",c),setAnalyticsCookie("setPrevPageName",a)}}function getAnalyticsRopis(a){var b=$("#currStoreID").val();if("reserve-for-store-modal"==a&&"undefined"!=typeof s_setP){var c="reserve-online-pay-in-store -- modal",d="modal",e=getAnalyticsEventCount();s_setP("digitalData.event["+e+"].attributes.page.pageInfo.pageName",c),s_setP("digitalData.event["+e+"].attributes.page.pageInfo.pageType",d);var f=s_getP("digitalData.event["+e+"].attributes.page.pageInfo.pageName"),g=$.cookie("setPrevPageName"),a=g?g.trim():"";s_setP("digitalData.event["+e+"].attributes.page.pageInfo.previousPageName",a),setAnalyticsCookie("setPrevPageName",f),s_setP("digitalData.event["+e+"].eventInfo.eventName","ROPIS Request Modal View"),s_setP("digitalData.event["+e+"].eventInfo.eventAction","ropisRequestModalView"),s_setP("digitalData.event["+e+"].category.primaryCategory","ROPIS"),s_setP("digitalData.event["+e+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+e+"].attributes.page.pageInfo.destinationURL",window.location.href),$("#emptyStoreDetails").length>0?s_setP("digitalData.event["+e+"].attributes.page.attributes.reserveOnlinePayInStoreID","null"):s_setP("digitalData.event["+e+"].attributes.page.attributes.reserveOnlinePayInStoreID",b),_satellite.track("onModalView")}}function bouncyCastleAnalytics(){var a=$("#encryptedEmail").val(),b=$("#encryptionKeyId").val();"undefined"!=typeof s_setP&&(s_setP("digitalData.user[0].profile[0].profileInfo.bvEncryptedEmail",a),s_setP("digitalData.user[0].profile[0].profileInfo.bvEncryptionKeyId",b))}function thankYouRopisAnalytics(a){var b=$("#currStoreID").val();if("reserve-thank-you-modal"==a){var c="reserve-online-pay-in-store-reservation-success -- modal",d="modal",e=getAnalyticsEventCount();s_setP("digitalData.event["+e+"].attributes.page.pageInfo.pageName",c),s_setP("digitalData.event["+e+"].attributes.page.pageInfo.pageType",d);var f=s_getP("digitalData.event["+e+"].attributes.page.pageInfo.pageName"),g=$.cookie("setPrevPageName"),a=g?g.trim():"";s_setP("digitalData.event["+e+"].attributes.page.pageInfo.previousPageName",a),setAnalyticsCookie("setPrevPageName",f);var h=$("#commerce-zone").find(".bv_avgRating_component_container").length?$(".bv_avgRating_component_container").html():0,i=$("#commerce-zone").find(".bv_numReviews_component_container").length?$("#commerce-zone").find(".bv_numReviews_component_container").text().replace("(","").replace(")",""):0;s_setP("digitalData.product["+e+"].productInfo.rating",h),s_setP("digitalData.product["+e+"].productInfo.reviews",i),s_setP("digitalData.product["+e+"].productInfo.availability","true"),s_setP("digitalData.event["+e+"].eventInfo.eventName","ROPIS Reservation Confirmation Modal View"),s_setP("digitalData.event["+e+"].eventInfo.eventAction","ropisReservationConfirmationModalView"),s_setP("digitalData.event["+e+"].category.primaryCategory","ROPIS"),s_setP("digitalData.event["+e+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+e+"].attributes.page.pageInfo.destinationURL",window.location.href),$("#emptyStoreDetails").length>0?s_setP("digitalData.event["+e+"].attributes.page.attributes.reserveOnlinePayInStoreID","null"):s_setP("digitalData.event["+e+"].attributes.page.attributes.reserveOnlinePayInStoreID",b),_satellite.track("onModalView")}}function updateAnalyticsPageName(a,b,c){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){var d="undefined"!=typeof a?a.toLowerCase():"",e=""!==d?!0:!1,f="",g=!1;switch($.trim(d)){case"login":d="sign in";break;case"register":d="create account";break;case"add-to-wishlist":d="add to wishlist";break;case"quickview":d="quickview",g=!0;break;case"marketplace":d="marketplace",g=!0;break;case"allformats":d="all formats",g=!0;break;case"puis":d="instore pickup";break;case"puis-tooltip":d="instore pickup tooltip";break;case"kc-create-account-s1":d="kid's club create account step 1";break;case"kc-create-account-s3":d="kid's club create account step 2";break;case"kc-create-account-s4":d="kid's club create account step welcome";break;case"kc-manage-edit-child":d="kid's club edit child";break;case"kc-manage-add-child":d="kid's club add child";break;case"m-kids-club-info":d="kid's club info";break;case"m-kids-club-detail":d="kid's club your loyalty rewards";break;case"m-used-saved-address":d="saved shipping address";break;case"m-add-shipping":d="add shipping address";break;case"m-use-saved-cc":d="saved credit card";break;case"m-add-cc":d="add credit card";break;case"member-sign-up":d="n&n membership offer";break;case"editpayment":d="edit payment method";break;case"delete-payment":d="delete payment method";break;case"editaddress":d="edit shipping address";break;case"delete-address":d="delete shipping address";break;case"m-subscription-cancellation":d="account:confirm subscription cancellation"}f=d,"account:confirm subscription cancellation"==d&&(d="account:confirm subscription cancellation",f="account"),"undefined"==typeof window.DEFAULT_PAGE_NAME&&(window.DEFAULT_PAGE_NAME=s_getP("digitalData.page.pageInfo.pageName"),window.DEFAULT_PAGE_TYPE=s_getP("digitalData.page.pageInfo.pageType")),("undefined"==typeof d||""==d)&&(d=window.DEFAULT_PAGE_NAME,f=window.DEFAULT_PAGE_TYPE);var h=g?" : "+b+" | "+c:"";d=d+h.toLowerCase()+(1==e?"~modal":""),s_setP("digitalData.page.pageInfo.pageName",d),s_setP("digitalData.page.pageInfo.pageType",f),trackAnalyticsPrevPage()}}function onRopisStoreChangeButtonClick(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","ROPIS Store Change Button Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","ropisStoreChangeButtonClick"),s_setP("digitalData.event["+a+"].category.primaryCategory","ROPIS"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onROPISStoreChangeButtonClick")}}function onROPISStoreChangeFailed(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","ROPIS Store Change Failed"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","ropisStoreChangeFailed"),s_setP("digitalData.event["+a+"].category.primaryCategory","ROPIS"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onROPISStoreChangeFailed")}}function updateAnalyticsCart(){"undefined"!=typeof s_setP&&$.ajax({dataType:"json",url:webContextRoot+"/xhr/data/adobe-analytics-cart.jsp",data:"",success:function(a){digitalData.cart=digitalData.cart||{},"undefined"!=typeof s_setP&&digitalData&&a&&a.cart&&($.extend(digitalData.cart,a.cart),!a.cart.item&&digitalData.cart.item&&delete digitalData.cart.item)}})}function updateAnalyticsProdObj(a,b){"undefined"!=typeof s_setP&&"undefined"!=typeof a&&a.product&&a.product.length>0&&s_setP("digitalData.event["+b+"].attributes.product",a.product)}function updateAnalyticsSortView(a){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){var b=getAnalyticsEventCount(),c=a,d=$(".view-container .selectBox-label").first().text(),e=s_getP("digitalData.page.category");s_setP("digitalData.event["+b+"].eventInfo.eventName","Product List View"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","productListView"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),e&&s_setP("digitalData.event["+b+"].category",e),s_setP("digitalData.page.attributes.productlist.pageSize",Number(d)),s_setP("digitalData.page.attributes.productlist.viewMode",c),_satellite.track("onProductListView")}}function getAnalyticsEventCount(){return"undefined"!=typeof s_setP&&"undefined"!=typeof s_getP?"undefined"==typeof s_getP("digitalData.event")?0:s_getP("digitalData.event").length:void 0}function trackOnloadErrors(){var a=$(document).find(".error-msg").first(),b=[],c=a.find(".err").length;"undefined"!=typeof s_setP&&c>0&&a.find(".err").each(function(a){var d=$(this),e=d.text().trim();b.push(e),a==c-1&&trackOnError(b)})}function attachDataToButton(a,b){a&&b.data("analyticsdata",a)}function parse_query_string(a){for(var b=a.split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("="),f=decodeURIComponent(e[0]),g=decodeURIComponent(e[1]);if("undefined"==typeof c[f])c[f]=decodeURIComponent(g);else if("string"==typeof c[f]){var h=[c[f],decodeURIComponent(g)];c[f]=h}else c[f].push(decodeURIComponent(g))}return c}function setLocalStorageObj(a,b){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){var c=$(".search-utility .pagination ul > li > span").first().text(),d=$("[id^=listView]").length>0?$("[id^=listView] > div.product-shelf-list").length:$("#gridView > div.product-shelf-grid").length,e=$("#categoryHeaderContainer span.text").text(),f=!1,g=$(".product-shelf-title > a")[b];if("undefined"!=typeof g){var h=g.href,i=parse_query_string(h);f="1"==i.aug}var j={pageNumber:s_getP("digitalData.page.attributes.productlist.pageNumber")||parseInt(c,10)||"",pageSize:s_getP("digitalData.page.attributes.productlist.pageSize")||d||"",pageName:s_getP("digitalData.page.pageInfo.pageName")||"",searchTerm:s_getP("digitalData.page.attributes.internalSearch.term")||e||"",isSearchAugmented:f,positionIndex:"undefined"!=typeof b?b+1:""};"undefined"!=typeof Storage?(clearLocalStorageObj(a),localStorage.setItem(a,JSON.stringify(j))):consoleError("Local Storage not supported")}}function getLocalStorageObj(a){if("undefined"!=typeof Storage)var b=localStorage.getItem(a);else consoleError("Local Storage not supported");return JSON.parse(b)}function clearLocalStorageObj(a){"undefined"!=typeof Storage?localStorage.removeItem(a):consoleError("Local Storage not supported")}function trackProdFormatsClick(a){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Product Format Click"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","productFormatClick"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].attributes.formatName",a),_satellite.track("onProductFormatClick")}function trackReviewsClick(a,b){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Product Reviews Click"),s_setP("digitalData.event["+c+"].eventInfo.eventAction",a?"productReviewsViewAllClick":"productReviewsClick"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].attributes.location",b),_satellite.track("onProductReviewsClick")}function trackVideo(a,b){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Video"),s_setP("digitalData.event["+c+"].eventInfo.eventAction",a),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].attributes.videoName",b),_satellite.track("onVideo")}function trackAllFormatsEditions(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","All Available Formats Editions Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","allAvailableFormatsEditionsClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onAllAvailableFormatsEditionsClick")}function trackProductPhotoClick(a){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Photo Click"),s_setP("digitalData.event["+b+"].eventInfo.eventAction",a),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),_satellite.track("onProductPhotoClick")}function trackOnError(a,b){var c=getAnalyticsEventCount();if(s_setP("digitalData.event["+c+"].eventInfo.eventName","Error"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","error"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),b&&b.status&&b.statusText)s_setP("digitalData.event["+c+"].attributes.errorCode",b.status),s_setP("digitalData.event["+c+"].attributes.errorMessage",b.statusText);else if("undefined"!=typeof a)$.each(a,function(a,b){s_setP("digitalData.event["+c+"].attributes.errorMessage["+a+"]",b)});else{var d="An unexpected error has occurred. Please refresh your page and try again. If this problem persists, please contact customer support.";s_setP("digitalData.event["+c+"].attributes.errorMessage",d)}_satellite.track("onError")}function trackSocialMediaClick(a){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Social Network Icon Click"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","socialNetworkIconClick"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].attributes.networkName",a),_satellite.track("onSocialNetworkClick")}function trackReserveInStore(a,b){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Reserve In Store"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","reserveInStore"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].attributes.revenue",a),s_setP("digitalData.event["+c+"].attributes.quantity",b),_satellite.track("onReserveInStore")}function trackCheckoutView(a,b){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Checkout View"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","checkoutView"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].category.primaryCategory","User"),s_setP("digitalData.event["+c+"].attributes.stepName",a),s_setP("digitalData.event["+c+"].attributes.wishListPotentialRevenue",0),s_setP("digitalData.event["+c+"].attributes.audiobookPlanCredits",0),s_setP("digitalData.event["+c+"].attributes.audiobookPlanSchedule",""),s_setP("digitalData.event["+c+"].attributes.audiobookPlanStatus","sign up"),s_setP("digitalData.event["+c+"].attributes.audiobookPlanCost",0),s_setP("digitalData.event["+c+"].attributes.audiobookPlanEndDate",""),s_setP("digitalData.event["+c+"].user.cohort","Non-Members"),s_setP("digitalData.event["+c+"].user.profile.profileInfo.isAudiobookSubscriber",!1),b&&s_setP("digitalData.event["+c+"].attributes.stepValue",b),_satellite.track("onCheckoutView")}function trackProductView(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Product View"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","productView"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onProductView")}function trackApplyCoupon(a,b){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Coupon Code Applied"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","couponCodeApplied"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].category.primaryCategory","ShoppingBag"),s_setP("digitalData.cart.price.voucherCode",a.trim()),s_setP("digitalData.cart.price.voucherDiscount",Number(b)),_satellite.track("onShoppingBagCouponCodeApplied")}function attachEventCoupon(){var a=$("#frmApplyCoupon"),b=0;a.on("amplifiFormSuccess",function(a,c){var d=c.data,e=$(this).find('input[name="couponCode"]').val();d&&d.voucherDiscount&&(b=d.voucherDiscount),e&&trackApplyCoupon(e,b)});var c=$(".couponCodeVal").val();if(c){var b=-1*Number($(".discountAmount").val());trackApplyCoupon(c,b)}}function analyticsNewsletter(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Email Signup"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","emailSignup"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onEmailSignup")}function trackGlose(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Glose Read Sample Click"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","onGloseReadSampleClick"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].category.primaryCategory","Glose"),_satellite.track("onGloseReadSampleClick");var c=getProductDigitalData(a);s_setP("digitalData.event["+b+"].attributes.product",c)}}function getProductDigitalData(a){var b;return digitalData.product.length>1?$.each(digitalData.product,function(c){var d=digitalData.product[c].productInfo.sku;return d==a?(b=digitalData.product[c],!1):void 0}):b=digitalData.product,b}function bookGraphItemClick(){var a=getAnalyticsEventCount();category=s_getP("digitalData.page.category"),s_setP("digitalData.event["+a+"].eventInfo.eventName","Book Graph Book Selected"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onBookGraphBookSelected"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),category&&s_setP("digitalData.event["+a+"].category",category),_satellite.track("onBookGraphBookSelected")}function bookGraphExploreNow(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Book Graph Explore Now Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onBookGraphExploreNowClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Book Graph"),_satellite.track("onBookGraphExploreNowClick")}function bookGraphView(){var a=getAnalyticsEventCount(),b=s_getP("digitalData.page.category");s_setP("digitalData.event["+a+"].eventInfo.eventName","Book Graph View"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onBookGraphView"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),b&&s_setP("digitalData.event["+a+"].category",b),_satellite.track("onBookGraphView")}function bookGraphPDPViewed(){var a=getAnalyticsEventCount(),b=s_getP("digitalData.page.category");s_setP("digitalData.event["+a+"].eventInfo.eventName","Book Graph PDP View"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onBookGraphPDPView"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),b&&s_setP("digitalData.event["+a+"].category",b),_satellite.track("onBookGraphPDPView")}function bookGraphNewConnection(){var a=getAnalyticsEventCount(),b=s_getP("digitalData.page.category");s_setP("digitalData.event["+a+"].eventInfo.eventName","Book Graph Start New Connection"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onBookGraphStartNewConnection"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),b&&s_setP("digitalData.event["+a+"].category",b),_satellite.track("onBookGraphStartNewConnection")}function satelliteCallInternalSearch(){var a=getAnalyticsEventCount(),b=s_getP("digitalData.page.category");s_setP("digitalData.event["+a+"].eventInfo.eventName","Internal Search"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","internalSearch"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),b&&s_setP("digitalData.event["+a+"].category",b),_satellite.track("onInternalSearch"),setAnalyticsCookie("bn_searchBar_originalTerm",null)}function trackQVAnalytics(a,b,c,d,e,f,g,h){var i=getAnalyticsEventCount(),j=d.replace('"',"").trim().split(" ").join("-"),k={page:{pageInfo:{pageName:"pdp:"+j+"|"+b,pageType:"pdp"},attributes:{internalCampaignElement:"",internalCampaignCTA:"",internalCampaignAdFormat:"",internalCampaignDescription:"",internalCampaignPageType:""}},product:[{category:{primaryCategory:"",productType:c,subCategory:[]},price:{basePrice:Number(e)},productInfo:{productName:d,productID:"prd"+a,productURL:f,sku:c,ratings:g,reviews:h,availability:""},attributes:{purchaseType:"",notifyWhenStocked:!1,outOfStock:!1,isGiftCard:!1,isGiftWrap:!1,giftCardValue:0,isPhysicalProduct:"book"==c||"nook"!=c||"ebook"!=c,isDigitalProduct:!1,isNOOKProduct:"nook"==c,isDeviceProduct:!1,isEbookProduct:"ebook"==c,pickupInStoreStatus:"",isSearchAugmented:!1}}]};s_setP("digitalData.event["+i+"].eventInfo.eventName","Product Quick View"),s_setP("digitalData.event["+i+"].eventInfo.eventAction","productQuickView"),s_setP("digitalData.event["+i+"].eventInfo.timeStamp",new Date),s_setP("digitalData.event["+i+"].category.primaryCategory","Product"),s_setP("digitalData.event["+i+"].attributes",k),_satellite.track("onProductQuickView")}function dataAnalyticsAddToCart(a){var b=a.productName?a.productName:"",c=a.skuType?a.skuType:"",d=a.price?a.price:"",e=a.skuId?a.skuId:"",f=a.productUrl?a.productUrl:"",g=a.workId?a.workId:"",h=a.viewType?a.viewType:"",i=b.replace('"',"").trim().split(" ").join("-");digitalData.event=digitalData.event||[],digitalData.event.push({eventInfo:{eventName:"Add to Bag",eventAction:"addToBag",timeStamp:new Date},category:{primaryCategory:"ShoppingBag"},attributes:{upsellModalHasFrequentlyBoughtBundleSection:!1,product:[{quantity:1,category:{primaryCategory:"",productType:c,subCategory:[]},price:{basePrice:d},productInfo:{productName:b,productID:"prd"+e,audiobookID:"",productURL:f,sku:e,mEAN:"",pEAN:"",departmentCode:"",brand:"",parentSku:g,bundleID:""},attributes:{purchaseType:"",viewType:h,notifyWhenStocked:!1,outOfStock:!1,isGiftCard:!1,isGiftWrap:!1,giftCardValue:0,isPhysicalProduct:!1,isDigitalProduct:"book"==c||"nook"!=c||"ebook"!=c,isNOOKProduct:"nook"==c,isDeviceProduct:"nook"==c,isEbookProduct:"ebook"==c,isAudiobookProduct:!1,ratings:parseFloat($("#quickViewRatingsDisplay").find(".bv_avgRating_component_container").length?$("#quickViewRatingsDisplay").find(".bv_avgRating_component_container").text():0),reviews:parseInt($("#quickViewRatingsDisplay").find(".bv_numReviews_component_container").length?$("#quickViewRatingsDisplay").find(".bv_numReviews_component_container").text().replace("(","").replace(")",""):0),availability:"",isEligibleForFreeShipping:!1,pickupInStoreStatus:"",isBundle:!1,bundleEANList:[],audiobookProductStatus:"",referrer:{isSearchAugmented:!1,pageName:"pdp:"+i+"|"+g,pageNumber:$(".pagination .pagination__active").length>0?parseInt($(".pagination .pagination__active > span").html().substring($(".pagination .pagination__active>span").html().lastIndexOf(">")+1,$(".pagination .pagination__active>span").html().length)):-1,pageSize:$(".pagination .pagination__active").length>0?parseInt($(".pagination li:not(.pagination__next):not('.pagination__back'):last").text().toLowerCase().split("page")[1]):-1,positionIndex:$(".pagination .pagination__active").length>0?parseInt($(".pagination .pagination__active > span").html().substring($(".pagination .pagination__active>span").html().lastIndexOf(">")+1,$(".pagination .pagination__active>span").html().length)):-1,searchTerm:""}}}]}}),_satellite.track("onShoppingBagAddItem")}function dataAnalyticsRemoveFromCart(a){if("undefined"!=typeof s_setP){var b=(a.target.getAttribute("id"),a.target.getAttribute("data-price")),c=a.target.getAttribute("data-quantity"),d=a.target.getAttribute("data-sku-id"),e=a.target.getAttribute("data-product-id"),f=a.target.getAttribute("data-availability"),g=a.target.getAttribute("data-product-name"),h=digitalData||{};digitalData.event=h.event||[],digitalData.event.push({eventInfo:{eventName:"Remove from Bag",eventAction:"removeFromBag",timeStamp:new Date},category:{primaryCategory:"ShoppingBag"},attributes:{product:[{quantity:c,category:{primaryCategory:"",productType:"",subCategory:[]},price:{basePrice:b},productInfo:{productName:g,productID:e,productURL:"",sku:d,ratings:0,reviews:0,availability:f,parentSku:"",bundleID:""},attributes:{purchaseType:"",notifyWhenStocked:!1,outOfStock:!1,isGiftCard:!1,isGiftWrap:!1,giftCardValue:0,isPhysicalProduct:!1,isDigitalProduct:!1,isNOOKProduct:!1,isDeviceProduct:!1,isEbookProduct:!1,isInStorePickup:!1,pickupInStoreStatus:"",isBundle:!1,bundleEANList:[]}}]}}),_satellite.track("onShoppingBagRemoveItem")}}function startFreeTrialBtnanalytics(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Start Free Trial Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","startFreeTrialClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook"),_satellite.track("onAudiobookStartFreeTrialClick")}}function getSubscriptionBtnanalytics(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Get Subscription Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","getSubscriptionClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook"),_satellite.track("onAudiobookGetSubscriptionClick")}}function purchaseSubscriptionModal(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","audiobook:audiobook subscription signup page ~ modal"),s_setP("digitalData.page.pageInfo.pageType","audiobook"))}function analyticsAudiobookTooltip(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Audiobook Tooltip Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","audiobookTooltipClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook")
}}function analyticsPurchaseNotComplete(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","audiobook:purchase not complete exceed subscription ~ modal"),s_setP("digitalData.page.pageInfo.pageType","audiobook"),_satellite.track("onModalView"))}function onAudiobookSubscriptionCancellationAnalytics(a){var b=a.audiobookPlanCost,c=a.audiobookPlanCredits,d=a.audiobookPlanEndDate,e=a.newPlanSchedule,f=a.audiobookPlanStatus,g=a.isAudiobook,h=a.isDigitalProduct,i=a.isPhysicalProduct,j=a.primaryCategory,k=a.productType,l=a.subCategory,m=a.basePrice,n=a.audiobookID,o=a.availability,p=a.productID,q=a.productName,r=a.productURL,s=a.ratings,t=a.reviews,u=a.sku;if("undefined"!=typeof s_setP){var v=getAnalyticsEventCount();s_setP("digitalData.event["+v+"].eventInfo.eventName","Subscription Cancellation"),s_setP("digitalData.event["+v+"].eventInfo.eventAction","subscriptionCancellation"),s_setP("digitalData.event["+v+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+v+"].category.primaryCategory","Audiobook"),s_setP("digitalData.event["+v+"].attributes.product.category.primaryCategory",j),s_setP("digitalData.event["+v+"].attributes.product.category.productType",k),s_setP("digitalData.event["+v+"].attributes.product.category.subCategory",l),s_setP("digitalData.event["+v+"].attributes.product.price.basePrice",m),s_setP("digitalData.event["+v+"].attributes.product.productInfo.productName",q),s_setP("digitalData.event["+v+"].attributes.product.productInfo.productID",p),s_setP("digitalData.event["+v+"].attributes.product.productInfo.audiobookID",n),s_setP("digitalData.event["+v+"].attributes.product.productInfo.productURL",r),s_setP("digitalData.event["+v+"].attributes.product.productInfo.sku",u),s_setP("digitalData.event["+v+"].attributes.product.productInfo.ratings",s),s_setP("digitalData.event["+v+"].attributes.product.productInfo.reviews",t),s_setP("digitalData.event["+v+"].attributes.product.productInfo.availability",o),s_setP("digitalData.event["+v+"].attributes.product.attributes.isPhysicalProduct",i),s_setP("digitalData.event["+v+"].attributes.product.attributes.isDigitalProduct",h),s_setP("digitalData.event["+v+"].attributes.product.attributes.isAudiobook",g),s_setP("digitalData.event["+v+"].attributes.product.attributes.audiobookPlanCredits",c),s_setP("digitalData.event["+v+"].attributes.product.attributes.audiobookPlanSchedule",e),s_setP("digitalData.event["+v+"].attributes.product.attributes.audiobookPlanStatus",f),s_setP("digitalData.event["+v+"].attributes.product.attributes.audiobookPlanCost",b),s_setP("digitalData.event["+v+"].attributes.product.attributes.audiobookPlanEndDate",d),sessionStorage.setItem("audioEventData",JSON.stringify(s_getP("digitalData.event")))}}function analyticsAudiobookPaymentRadio(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Payment Type Change"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","paymentTypeChange"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),a&&s_setP("digitalData.event["+b+"].attributes.paymentType",a)}}function audioplayerFeatureTourAnalytics(a){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","audiobook:web audio player tour {{SLIDE NUMBER "+a+"}}~modal"),s_setP("digitalData.page.pageInfo.pageType","audiobook"))}function onAudiobookSamplePlayAnalytics(a){var b=a["primary-category"],c=a["product-type"],d=a["sub-category"],e=a["base-price"],f=a["product-name"],g=a["product-id"],h=a["audiobook-id"],i=a["product-url"],j=a.sku,k=a.ratings,l=a.reviews,m=a.availability;if("undefined"!=typeof s_setP){var n=getAnalyticsEventCount();s_setP("digitalData.event["+n+"].eventInfo.eventName","Sample Play"),s_setP("digitalData.event["+n+"].eventInfo.eventAction","samplePlay"),s_setP("digitalData.event["+n+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+n+"].category.primaryCategory","Audiobook"),s_setP("digitalData.event["+n+"].attributes.product.category.primaryCategory",b),s_setP("digitalData.event["+n+"].attributes.product.category.productType",c),s_setP("digitalData.event["+n+"].attributes.product.category.subCategory",d),s_setP("digitalData.event["+n+"].attributes.product.price.basePrice",e),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productName",f),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productID",g),s_setP("digitalData.event["+n+"].attributes.product.productInfo.audiobookID",h),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productURL",i),s_setP("digitalData.event["+n+"].attributes.product.productInfo.sku",j),s_setP("digitalData.event["+n+"].attributes.product.productInfo.ratings",k),s_setP("digitalData.event["+n+"].attributes.product.productInfo.reviews",l),s_setP("digitalData.event["+n+"].attributes.product.productInfo.availability",m),s_setP("digitalData.event["+n+"].attributes.product.attributes.isAudiobook","true"),s_setP("digitalData.event["+n+"].attributes.product.attributes.audiobookType","sample"),s_setP("digitalData.event["+n+"].attributes.product.attributes.audiobookListeningStatus","start"),_satellite.track("onAudiobookSamplePlay")}}function onAudiobookSamplePlayCompleteAnalytics(a){var b=a.getAttribute("data-primary-category"),c=a.getAttribute("data-product-type"),d=a.getAttribute("data-sub-category"),e=a.getAttribute("data-base-price"),f=a.getAttribute("data-product-name"),g=a.getAttribute("data-product-id"),h=a.getAttribute("data-audiobook-id"),i=a.getAttribute("data-product-url"),j=a.getAttribute("data-sku"),k=a.getAttribute("data-book-ratings"),l=a.getAttribute("data-reviews"),m=a.getAttribute("data-availability");if("undefined"!=typeof s_setP){var n=getAnalyticsEventCount();s_setP("digitalData.event["+n+"].eventInfo.eventName","Sample Play Complete"),s_setP("digitalData.event["+n+"].eventInfo.eventAction","samplePlayComplete"),s_setP("digitalData.event["+n+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+n+"].category.primaryCategory","Audiobook"),s_setP("digitalData.event["+n+"].attributes.product.category.primaryCategory",b),s_setP("digitalData.event["+n+"].attributes.product.category.productType",c),s_setP("digitalData.event["+n+"].attributes.product.category.subCategory",d),s_setP("digitalData.event["+n+"].attributes.product.price.basePrice",e),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productName",f),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productID",g),s_setP("digitalData.event["+n+"].attributes.product.productInfo.audiobookID",h),s_setP("digitalData.event["+n+"].attributes.product.productInfo.productURL",i),s_setP("digitalData.event["+n+"].attributes.product.productInfo.sku",j),s_setP("digitalData.event["+n+"].attributes.product.productInfo.ratings",k),s_setP("digitalData.event["+n+"].attributes.product.productInfo.reviews",l),s_setP("digitalData.event["+n+"].attributes.product.productInfo.availability",m),s_setP("digitalData.event["+n+"].attributes.product.attributes.isAudiobook","true"),s_setP("digitalData.event["+n+"].attributes.product.attributes.audiobookType","sample"),s_setP("digitalData.event["+n+"].attributes.product.attributes.audiobookListeningStatus","complete"),_satellite.track("onAudiobookSamplePlayComplete")}}function cancelSubscriptionModalAnalytics(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:confirm subscription cancellation~modal"),s_setP("digitalData.page.pageInfo.pageType","account"))}function validatEmailMembershipModalAnalytics(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.destinationURL",window.location.href),s_setP("digitalData.page.pageInfo.pageName","account: Validate email"),s_setP("digitalData.page.pageInfo.pageType","account"))}function instancePurchaseMembershipModalAnalytics(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Membership Join Premium Click"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","membershipJoinPremiumClick"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+b+"].attributes.membershipTermType",a),s_setP("digitalData.event["+b+"].attributes.MemberID",""),s_setP("digitalData.event["+b+"].attributes.membershipEducatorID",""),s_setP("digitalData.event["+b+"].attributes.membershipType","")}}function bnPremiumMembershipUpgradeAnalytics(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.destinationURL",window.location.href),s_setP("digitalData.page.pageInfo.pageName","bn premium membership upgrade ~ modal"),s_setP("digitalData.page.pageInfo.pageType","membership"))}function bnMembershipInstancePurchasePDPAnalytics(){if("undefined"!=typeof s_setP){var a=$(".Payment-form-premium-renew-id").val();s_setP("digitalData.page.pageInfo.destinationURL",window.location.href),s_setP("digitalData.page.pageInfo.pageName","Premium Membership | "+a+"  ~ modal"),s_setP("digitalData.page.pageInfo.pageType","membership view"),_satellite.track("onProductView")}}function membershipConfirmInstantPurchaseModalAnalytics(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].attributes.product.attributes.purchaseType",a),s_setP("digitalData.transaction.item.attributes,purchaseType","addtobag_membership"),s_setP("digitalData.transaction.item.attributes,membershipPurchaseType",a)}}function applyCheckoutRewardCouponAnalytics(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Rewards Applied"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","rewardsApplied"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Rewards"),_satellite.track("onRewardsApplied")}}function reqOnPurchaseMembershipAnalytics(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Purchase"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onPurchase"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onPurchase")}}function instancePurchaseMembershipUpgradeToPremiumAnalytics(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Membership "+a+" Success"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","membership"+a+"Success"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+b+"].attributes.membershipTermType",$(".confirmMembershipTermType").val()),s_setP("digitalData.event["+b+"].attributes.MemberID",$(".confirmMemberID").val()),s_setP("digitalData.event["+b+"].attributes.membershipEducatorID",$(".confirmMembershipEducatorID").val()),s_setP("digitalData.event["+b+"].attributes.membershipType",$(".confirmMembershipType").val()),s_setP("digitalData.event["+b+"].attributes.membershipRewardBalance",$(".confirmMembershipRewardBalance").val()),s_setP("digitalData.event["+b+"].attributes.membershipStampCount",$(".confirmMembershipStampCount").val()),_satellite.track("onMembership"+a+"Success")}}function onMembershipRewardsSignUpSuccessAnalytics(a){if("undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Rewards SignUp Success"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","rewardsSignUpSuccess"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].category.primaryCategory","Rewards"),s_setP("digitalData.event["+b+"].attributes.optsIntoPromotional",a),_satellite.track("onRewardsSignUpSuccess")}}function AccountcreateNewCAnalytics(a,b){if("undefined"!=typeof s_setP){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Create Account Complete"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","createAccountComplete"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+c+"].attributes.optsIntoPromotional",$("#emailCheckboxInput").prop("checked")),s_setP("digitalData.event["+c+"].attributes.customerID",b.profileId),s_setP("digitalData.event["+c+"].attributes.rewardsBalance","0"),s_setP("digitalData.event["+c+"].attributes.stampCount","0"),s_setP("digitalData.event["+c+"].attributes.isRewardsSignup",$("#rewardCheckboxInput").prop("checked")),_satellite.track("onCreateAccountComplete")}}function audiobookReactivateSubscriptionModalAnalytics(){"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:audiobook reactivate cancelled subscription ~ modal"),s_setP("digitalData.page.pageInfo.pageType","account"),_satellite.track("onModalView"))}function onAudiobookSubscriptionReactivateSuccessAnalytics(a){var b=(a.primaryCategory,a.basePrice),c=a.transactionID,d=a.audiobookID,e=a.audiobookPlanCredits,f=a.audiobookPlanSchedule,g=(a.audiobookPlanStatus,a.audiobookPlanCost),h=a.audiobookPlanStartDate;if("undefined"!=typeof s_setP){var i=getAnalyticsEventCount();s_setP("digitalData.event["+i+"].eventInfo.eventName","Subscription Reactivate Success"),s_setP("digitalData.event["+i+"].eventInfo.eventAction","subscriptionReactivateSuccess"),s_setP("digitalData.event["+i+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+i+"].category.primaryCategory","Audiobook"),s_setP("digitalData.event["+i+"].transaction.basePrice",b),s_setP("digitalData.event["+i+"].transaction.transactionID",c),s_setP("digitalData.event["+i+"].transaction.item.productInfo.audiobookID",d),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanCredits",e),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanSchedule",f),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanStatus","Reactivation"),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanCost",g),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanStartDate",h),_satellite.track("onAudiobookSubscriptionReactivateSuccess")}}function purchaseSubscriptionPlanAnalytics(a){var b=(a.primaryCategory,a.basePrice),c=a.transactionID,d=a.audiobookID,e=a.audiobookPlanCredits,f=a.audiobookPlanSchedule,g=(a.audiobookPlanStatus,a.audiobookPlanCost),h=a.audiobookPlanStartDate;if("undefined"!=typeof s_setP){var i=getAnalyticsEventCount();s_setP("digitalData.event["+i+"].eventInfo.eventName","Subscription Sign Up Success!"),s_setP("digitalData.event["+i+"].eventInfo.eventAction","subscriptionSignUpSuccess"),s_setP("digitalData.event["+i+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+i+"].category.primaryCategory","Audiobook"),s_setP("digitalData.event["+i+"].transaction.basePrice",b),s_setP("digitalData.event["+i+"].transaction.transactionID",c),s_setP("digitalData.event["+i+"].transaction.item.productInfo.audiobookID",d),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanCredits",e),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanSchedule",f),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanStatus","Sign up"),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanCost",g),s_setP("digitalData.event["+i+"].transaction.item.attributes.audiobookPlanStartDate",h),_satellite.track("onAudiobookSubscriptionSignUpSuccess")}}function analyticsCreditPurchase(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Purchase"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onPurchase"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onPurchase")}}function OrderwithRewardsAppliedAnalytics(){"undefined"!=typeof s_setP&&(s_setP("digitalData.transaction.attributes.rewardsRedeemed",$("#rewardsRedeemedMembershipAnalytics").val()),s_setP("digitalData.transaction.attributes.rewardsRedeemedCount",$("#rewardsRedeemedCountMembershipAnalytics").val()))}function LinkMembershiptoAccountAnalytics(a,b){if("undefined"!=typeof s_setP){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","Membership Link Success"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","membershipLinkSuccess"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+c+"].attributes.membershipTermType",b.membershipTermType),s_setP("digitalData.event["+c+"].attributes.MemberID",b.MemberID),s_setP("digitalData.event["+c+"].attributes.membershipType",b.membershipType),_satellite.track("onMembershipLinkSuccess")}}function onCreateAccountCompleteAnalytics(a){var b=a.optsIntoPromotional,c=a.customerID;if("undefined"!=typeof s_setP){var d=getAnalyticsEventCount();s_setP("digitalData.event["+d+"].eventInfo.eventName","Create Account Complete"),s_setP("digitalData.event["+d+"].eventInfo.eventAction","createAccountComplete"),s_setP("digitalData.event["+d+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+d+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+d+"].attributes.optsIntoPromotional",b),s_setP("digitalData.event["+d+"].attributes.customerID",c),s_setP("digitalData.event["+d+"].attributes.rewardsBalance",0),s_setP("digitalData.event["+d+"].attributes.stampCount",0),s_setP("digitalData.event["+d+"].attributes.isRewardsSignup",!1),_satellite.track("onCreateAccountComplete")}}function joinManageUpgradectaMemberships(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Membership Join Premium Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","membershipJoinPremiumClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Membership"),s_setP("digitalData.event["+a+"].attributes.membershipTermType",$("#analytics-membershipTermType").val()),s_setP("digitalData.event["+a+"].attributes.MemberID",$("#analytics-memberId").val()),s_setP("digitalData.event["+a+"].attributes.membershipEducatorID",$("#analytics-educatorId").val()),s_setP("digitalData.event["+a+"].attributes.membershipType",$("#analytics-membershipType").val()),_satellite.track("onMembershipJoinPremiumClick")}}function onShoppingBagAddItemMembershipAnalytics(a){var b=a.productType,c=a.subCategory,d=a.basePrice,e=a.productName,f=a.productID,g=a.productURL,h=a.sku,i=a.pEAN,j=a.departmentCode;if("undefined"!=typeof s_setP){var k=getAnalyticsEventCount();s_setP("digitalData.event["+k+"].eventInfo.eventName","Add to Bag"),s_setP("digitalData.event["+k+"].eventInfo.eventAction","addToBag"),s_setP("digitalData.event["+k+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+k+"].category.primaryCategory","ShoppingBag"),s_setP("digitalData.event["+k+"].attributes.upsellModalHasFrequentlyBoughtBundleSection",!1),s_setP("digitalData.event["+k+"].attributes.product.quantity","1"),s_setP("digitalData.event["+k+"].attributes.product.category.primaryCategory","ShoppingBag"),s_setP("digitalData.event["+k+"].attributes.product.category.productType",b),s_setP("digitalData.event["+k+"].attributes.product.category.subCategory",c),s_setP("digitalData.event["+k+"].attributes.product.price.basePrice",d),s_setP("digitalData.event["+k+"].attributes.product.productInfo.productName",e),s_setP("digitalData.event["+k+"].attributes.product.productInfo.productID",f),s_setP("digitalData.event["+k+"].attributes.product.productInfo.audiobookID","NA"),s_setP("digitalData.event["+k+"].attributes.product.productInfo.productURL",g),s_setP("digitalData.event["+k+"].attributes.product.productInfo.sku",h),s_setP("digitalData.event["+k+"].attributes.product.productInfo.mEAN","NA"),s_setP("digitalData.event["+k+"].attributes.product.productInfo.pEAN",i),s_setP("digitalData.event["+k+"].attributes.product.productInfo.departmentCode",j),s_setP("digitalData.event["+k+"].attributes.product.productInfo.brand","NA"),s_setP("digitalData.event["+k+"].attributes.product.productInfo.parentSku","NA"),s_setP("digitalData.event["+k+"].attributes.product.attributes.notifyWhenStocked",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.outOfStock",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isGiftCard",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isGiftWrap",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.giftCardValue",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isPhysicalProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isDigitalProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isNOOKProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isDeviceProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isEbookProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isAudiobookProduct",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.ratings",0),s_setP("digitalData.event["+k+"].attributes.product.attributes.reviews",0),s_setP("digitalData.event["+k+"].attributes.product.attributes.availability",null),s_setP("digitalData.event["+k+"].attributes.product.attributes.isEligibleForFreeShipping",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.pickupInStoreStatus",!1),s_setP("digitalData.event["+k+"].attributes.product.attributes.isBundle",!1),_satellite.track("onCreateAccountComplete")}}function onClickDigitalLibrayBtn(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","View In Library Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onAudiobookViewInLibraryClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook"),_satellite.track("onAudiobookViewInLibraryClick")}}function audiobooksOnAddItemToCartAnalytics(a){var b=a.audiobookProductStatus,c=a.bundleEANList,d=a.isBundle,e=a.pickupInStoreStatus,f=a.isEligibleForFreeShipping,g=a.availability,h=a.isAudiobookProduct,i=a.giftCardValue,j=a.isGiftWrap,k=a.isGiftCard,l=a.purchaseType,m=a.bundleID,n=a.parentSku,o=a.brand,p=a.pEAN,q=a.mEAN,r=a.primaryCategory,s=a.subCategory,t=(a.bopisEligibleMessage,a.bopisMessageData),u=a.sku,v=a.productID,w=a.qty?a.qty:"1",x=s_getP("digitalData.page.pageInfo.pageName"),y=s_getP("digitalData.attributes.productlist.pageNumber")?s_getP("digitalData.attributes.productlist.pageNumber"):"1",z=s_getP("digitalData.attributes.productlist.pageSize")?s_getP("digitalData.attributes.productlist.pageSize"):"0",A=s_getP("digitalData.product");if(void 0!=A&&A.length>0)for(var B=0;B<A.length;B++)if(A[B].productInfo&&A[B].productInfo.sku==u)var C=A[B].category.productType,r=r?r:A[B].category.primaryCategory,s=s?s:A[B].category.subCategory,D=A[B].price.basePrice,E=A[B].productInfo.departmentCode,F=A[B].productInfo.productName,G=A[B].productInfo.productURL,H=A[B].attributes.rating,I=A[B].attributes.reviews,J=A[B].attributes.notifyWhenStocked,K=A[B].attributes.outOfStock,L=A[B].attributes.isSearchAugmented?A[B].attributes.isSearchAugmented:!1,M=A[B].attributes.isPhysicalProduct,N=A[B].attributes.isNOOKProduct,O=(A[B].attributes.isIosAvailable,A[B].attributes.isEbookProduct),P=A[B].attributes.isDigitalProduct,Q=A[B].attributes.isDeviceProduct;if("undefined"!=typeof s_setP){var R=getAnalyticsEventCount();s_setP("digitalData.event["+R+"].eventInfo.eventName","Add to Bag"),s_setP("digitalData.event["+R+"].eventInfo.eventAction","addToBag"),s_setP("digitalData.event["+R+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+R+"].category.primaryCategory","ShoppingBag"),s_setP("digitalData.event["+R+"].attributes.upsellModalHasFrequentlyBoughtBundleSection",!1),s_setP("digitalData.event["+R+"].attributes.product["+R+"].quantity",w),s_setP("digitalData.event["+R+"].attributes.product["+R+"].category.primaryCategory",r),s_setP("digitalData.event["+R+"].attributes.product["+R+"].category.productType",C),s_setP("digitalData.event["+R+"].attributes.product["+R+"].category.subCategory",s),s_setP("digitalData.event["+R+"].attributes.product["+R+"].price.basePrice",D),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.pickupInStoreStatus",t),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.productName",F),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.productID",v),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.audiobookID",""),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.productURL",G),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.sku",u),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.mEAN",q),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.pEAN",p),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.departmentCode",E),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.brand",o),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.parentSku",n),s_setP("digitalData.event["+R+"].attributes.product["+R+"].productInfo.bundleID",m),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.purchaseType",l),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.viewType","LIST VIEW"),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.notifyWhenStocked",J),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.outOfStock",K),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isGiftCard",k),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isGiftWrap",j),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.giftCardValue",i),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isPhysicalProduct",M),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isDigitalProduct",P),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isNOOKProduct",N),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isDeviceProduct",Q),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isEbookProduct",O),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isAudiobookProduct",h),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.ratings",H),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.reviews",I),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.availability",g),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isEligibleForFreeShipping",f),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.pickupInStoreStatus",e),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.isBundle",d),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.bundleEANList",c),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.audiobookProductStatus",b),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.isSearchAugmented",L),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.pageName",x),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.pageNumber",y),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.pageSize",z),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.positionIndex",1),s_setP("digitalData.event["+R+"].attributes.product["+R+"].attributes.referrer.searchTerm",!1),_satellite.track("onShoppingBagAddItem")}}function audiobooksOnAddItemToMinicheckoutCartAnalytics(a){var b=a.productType,c=a.audiobookProductStatus,d=a.bundleEANList,e=a.isBundle,f=a.pickupInStoreStatus,g=a.isEligibleForFreeShipping,h=a.departmentCode,i=a.isAudiobookProduct,j=a.giftCardValue,k=a.isGiftWrap,l=a.isGiftCard,m=a.purchaseType,n=a.bundleID,o=a.brand,p=a.pEAN,q=a.mEAN,r=a.primaryCategory,s=a.subCategory,t=a.productURL,u=a.sku,v=a.qty?a.qty:"1",w=s_getP("digitalData.page.pageInfo.pageName"),x=s_getP("digitalData.attributes.productlist.pageNumber")?s_getP("digitalData.attributes.productlist.pageNumber"):"1",y=s_getP("digitalData.attributes.productlist.pageSize")?s_getP("digitalData.attributes.productlist.pageSize"):"0",z=s_getP("digitalData.cart.item");if(void 0!=z&&z.length>0)for(var A=0;A<z.length;A++)if(z[A].productInfo.sku==u)var B=z[A].price.basePrice,C=z[A].productInfo.productName,D=z[A].productInfo.productID,E=z[A].attributes.ratings?z[A].attributes.ratings:"0",F=z[A].attributes.reviews?z[A].attributes.reviews:"0",G=z[A].attributes.notifyWhenStocked,H=z[A].attributes.outOfStock,I=z[A].attributes.isPhysicalProduct,J=z[A].attributes.isNOOKProduct,K=z[A].attributes.isEbookProduct?z[A].attributes.isEbookProduct:!1,L=z[A].attributes.isDigitalProduct,M=z[A].attributes.isDeviceProduct?z[A].attributes.isDeviceProduct:!1;if("undefined"!=typeof s_setP){var N=getAnalyticsEventCount();s_setP("digitalData.event["+N+"].eventInfo.eventName","Add to Bag"),s_setP("digitalData.event["+N+"].eventInfo.eventAction","addToBag"),s_setP("digitalData.event["+N+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+N+"].category.primaryCategory","ShoppingBag"),s_setP("digitalData.event["+N+"].attributes.upsellModalHasFrequentlyBoughtBundleSection",!1),s_setP("digitalData.event["+N+"].attributes.product["+N+"].quantity",v),s_setP("digitalData.event["+N+"].attributes.product["+N+"].category.primaryCategory",r),s_setP("digitalData.event["+N+"].attributes.product["+N+"].category.productType",b),s_setP("digitalData.event["+N+"].attributes.product["+N+"].category.subCategory",s),s_setP("digitalData.event["+N+"].attributes.product["+N+"].price.basePrice",B),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.productName",C),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.productID",D),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.audiobookID",""),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.productURL",t),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.sku",u),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.mEAN",q),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.pEAN",p),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.departmentCode",h),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.brand",o),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.parentSku",null),s_setP("digitalData.event["+N+"].attributes.product["+N+"].productInfo.bundleID",n),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.purchaseType",m),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.viewType","LIST VIEW"),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.notifyWhenStocked",G),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.outOfStock",H),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isGiftCard",l),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isGiftWrap",k),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.giftCardValue",j),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isPhysicalProduct",I),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isDigitalProduct",L),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isNOOKProduct",J),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isDeviceProduct",M),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isEbookProduct",K),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isAudiobookProduct",i),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.ratings",E),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.reviews",F),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.availability",!0),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isEligibleForFreeShipping",g),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.pickupInStoreStatus",f),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.isBundle",e),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.bundleEANList",d),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.audiobookProductStatus",c),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.isSearchAugmented",!1),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.pageName",w),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.pageNumber",x),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.pageSize",y),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.positionIndex",1),s_setP("digitalData.event["+N+"].attributes.product["+N+"].attributes.referrer.searchTerm",!1),_satellite.track("onShoppingBagAddItem")
}}var BN=BN||{};BN.Analytics=BN.Analytics||{},BN.Analytics={Account:{init:function(){s_setP("digitalData.page.attributes.channel","my account")}},Landing:{init:function(){s_setP("digitalData.page.attributes.channel","store fronts"),$(".resultsListContainer").on("click",".product-image > a.pTopXImageLink, .product-info-listView .product-info-title > a",function(){var a=$("[id^=listView]"),b=(a.find(".product-shelf-list"),a.find(".product-shelf-list > div.bd-bottom-disabled-gray")),c=b.index($(this).closest("div.bd-bottom-disabled-gray"));return setLocalStorageObj("referrer",c),!0}),$(".resultsListContainer").on("click",".product-shelf-image > a.pImageLink, .product-info-view .product-info-title > a",function(){var a=(getAnalyticsEventCount(),$("#gridView").length>0?!0:!1),b=$("[id^=listView]"),c=(b.find(".search-results-promo").parent().closest("li"),$(a?"#gridView > div.product-shelf-grid > div.product-shelf-tile":"[id^=listView] > div.product-shelf-list > div.bd-bottom-disabled-gray")),d=c.index(a?$(this).closest("div.product-shelf-tile"):$(this).closest("[id^=listView] > div.product-shelf-list > div.bd-bottom-disabled-gray"));return setLocalStorageObj("referrer",d),!0})}},PDP:{init:function(){s_setP("digitalData.page.attributes.selectedPaymentType","PayByCredit"),s_setP("digitalData.page.attributes.hasAudiobookCreditPurchaseOption","false"),s_setP("digitalData.page.attributes.hasAudiobookPurchaseOption","false"),s_setP("digitalData.page.attributes.hasFrequentlyBoughtBundleSection","false"),s_setP("digitalData.product[0].productInfo.pEAN",""),s_setP("digitalData.product[0].productInfo.brand",""),s_setP("digitalData.product[0].productInfo.mEAN",""),s_setP("digitalData.product[0].productInfo.audiobookID",""),s_setP("digitalData.product[0].price.voucherDiscount","0"),s_setP("digitalData.product[0].price.voucherCode",""),s_setP("digitalData.product[0].attributes.referrer.pageSize","0"),s_setP("digitalData.product[0].attributes.referrer.pageNumber","0"),s_setP("digitalData.product[0].attributes.referrer.positionIndex","0"),s_setP("digitalData.product[0].attributes.referrer.searchTerm",""),s_setP("digitalData.product[0].attributes.referrer.isSearchAugmented",""),s_setP("digitalData.product[0].attributes.referrer.pageName",""),s_setP("digitalData.product[0].attributes.referrer.fusionQueryId",""),s_setP("digitalData.product[0].attributes.referrer.searchType",""),s_setP("digitalData.product[0].attributes.referrer.refinements.category",""),s_setP("digitalData.product[0].attributes.referrer.refinements.dimension",""),s_setP("digitalData.product[0].attributes.referrer.refinements.dimensionId",""),s_setP("digitalData.product[0].attributes.referrer.refinements.value",""),s_setP("digitalData.product[0].attributes.referrer.refinements.valueId",""),s_setP("digitalData.product[0].attributes.referrer.isEligibleForFreeShipping","false"),s_setP("digitalData.product[0].attributes.referrer.pickupInStoreStatus",""),s_setP("digitalData.product[0].attributes.viewType",""),$("#openReserveModal").length>0?(s_setP("digitalData.page.attributes.hasReserveOnlinePayInStore",!0),s_setP("digitalData.page.attributes.reserveOnlinePayInStoreID",$("#storeID").val())):(s_setP("digitalData.page.attributes.hasReserveOnlinePayInStore",!1),s_setP("digitalData.page.attributes.reserveOnlinePayInStoreID","")),s_setP("digitalData.product[0].attributes.isEligibleForFreeShipping",$("#isEligibleForFreeShipping").val()===!0||"true"===$("#isEligibleForFreeShipping").val()),"PRE-ORDER"===$(".purchase-button-container .add-to-cart-button").val()?s_setP("digitalData.product[0].attributes.isPreOrder",!0):s_setP("digitalData.product[0].attributes.isPreOrder",!1),$(document).on("analytics-track-pdp",trackProductView),"undefined"!=typeof localStorage.referrer&&digitalData&&(s_setP("digitalData.product[0].attributes.referrer",getLocalStorageObj("referrer")),clearLocalStorageObj("referrer")),$(document).find("#bg-container").length>0&&(bookGraphView(),$(document).on("click","a.book-component__link",function(){bookGraphItemClick()}),$(document).on("click","button.bg-banner",function(){bookGraphExploreNow()}),$(document).on("click","a.bg-pdp-toggle",function(){"true"==$(this).attr("aria-expanded")&&bookGraphExploreNow()}),$(document).on("click","a.product-details-link",function(){bookGraphPDPViewed()}),$(document).on("click","a.bg-new-connection",function(){bookGraphNewConnection()})),$(".pdp-form").on("amplifiFormSuccess",function(a){var b=$(this),c={element:b,updateType:"add",addedFrom:"pdp"};analyticsShoppingCart(a,c)}),$("#bundleProductSubmitButton").on("click",function(a){var b=[],c=0;if($(".product-box .product-checkbox .product-checkbox").each(function(){$(this).is(":checked")===!0&&(b[c++]=Number($(this).attr("data-ean")))}),"undefined"!=typeof Storage)if(null===sessionStorage.getItem("addedBundleEanList"))sessionStorage.setItem("addedBundleEanList",JSON.stringify(b));else{var d=JSON.parse(sessionStorage.getItem("addedBundleEanList")),e=$.unique(d.concat(b));sessionStorage.setItem("addedBundleEanList",JSON.stringify(e))}var f,g=Number($("input[type='hidden'][name='mainEAN']").val()),h=b.length,i=$(this),j={element:i,updateType:"add",addedFrom:"pdp",addQty:h,isBundle:!0,bundleEANList:b};if(h>=1&&(0==$.inArray(g,b)&&analyticsShoppingCart(a,j),1!=h||0!=$.inArray(g,b))){var k=webContextRoot+"/includes/frequentlyBoughtTogetherAnalytics.jsp";$.ajax({url:k,cache:!1,type:"post",data:{addedEanList:JSON.stringify(b),mainEAN:g}}).done(function(c){var d={},e=0;for(f=0;h>f;f++)b[f]!=g&&($.extend(d,JSON.parse(c)[e++]),j.additionalProductData=d,analyticsShoppingCart(a,j))}).fail(function(){console.log("Could not fetch product data for the additional products")})}}),$("#btnAddItemToWishlist").on("click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodWishlistAdd")}),$(document).on("click","#prodImage",function(){0==$(event.target).parents(".product-shelf-curl").length&&trackProductPhotoClick("photoView")}).on("analytics-zoom-click",function(){trackProductPhotoClick("photoZoom")}),$(document).on("analytics-zoom-click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Product Photo Zoom"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","productPhotoZoom"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onProductPhotoZoom")}),$("#reviews-container").on("click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodReviewView")}),$("#postReview").on("click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodReviewSubmit")}),$(document).on("click",".gig-rating-readReviewsLink",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodRatingView")}),$(document).on("analytics-reviews-clicked",function(a,b){trackReviewsClick(!1,b.location)}),$(document).on("click","#reviews-container .reviews-view-all a",function(a){a.preventDefault();var b=$(this).attr("href");trackReviewsClick(!0,"seeAllCustomerReviews"),window.location=b}),$(document).on("click",".gig-comments-more",function(){trackReviewsClick(!1,"showMoreReviews")}),$(document).on("click",'[data-modal-class="BN.Modal.Browse.PDP.ReserveTT"]',function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Available For Pick Up In Store Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","availableForPickUpInStoreClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onAvailableForPickUpInStoreClick")}),$(document).on("analytics-track-review",function(){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){var a=getAnalyticsEventCount(),b=s_getP("digitalData.product[0].productInfo");s_setP("digitalData.event["+a+"].eventInfo.eventName","Product Review Submit"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","productReviewSubmit"),s_setP("digitalData.event["+a+"].category.primaryCategory","Product"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].attributes.product[0].productInfo",b),_satellite.track("onProductReviewSubmit")}})}},ShoppingBag:{init:function(){var a=getAnalyticsEventCount();s_setP("digitalData.page.attributes.channel","shopping bag"),s_setP("digitalData.event["+a+"].eventInfo.eventName","Shopping Bag View"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","shoppingBagView"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onShoppingBagView"),$(".remove-item form > a").on("click",function(a){var b=$(this),c=b.parents(".cart-product-details"),d={element:c,updateType:"remove",isPickUpInStoreAvailable:$(this).parents(".cart-product-details").find(".deliveryRadioSection:visible")};analyticsShoppingCart(a,d)}),$("form[id^=frmUpdateQty] .update-btn").on("click",function(a){var b=$(this),c=b.parents(".price-section").parents(".cart-product-details"),d={element:c};analyticsShoppingCart(a,d)}),$("form[id^=frmUpdateQty] .quantity-select").on("change",function(a){var b=$(this);$parent=b.parents(".price-section").parents(".cart-product-details"),data={element:$parent},analyticsShoppingCart(a,data)}),$(".sign-in-checkout").on("click",function(){trackCheckoutView("sign-in")}),attachEventCoupon()}},Checkout:{init:function(){$("#signInLink").on("click",function(){trackCheckoutView("sign-in")}),attachEventCoupon(),$(document).on("click",'[data-itemscope="PaymentMethod"] .use-address, #editPayment #addAddressSubmit',function(a){a.preventDefault();var b="PayPal",c=$(this);(c.hasClass("use-address")||"addAddressSubmit"===c.attr("id"))&&(b="Credit Card"),trackCheckoutView("payment-info",b),c.closest("form").submit()}),$(document).on("click","#payWPPLink, #payWCCLink, .add-cc",function(){var a="Credit Card";"payWPPLink"===$(this).attr("id")&&(a="PayPal"),trackCheckoutView("payment-info",a)}),$("ul.loyalty-options form").on("amplifiFormSuccess",function(){var a=$(this),b=a.attr("name"),c="";switch(b){case"membershipApply":c="membership-info";break;case"reg":c="giftcard-info";break;case"frmApplyCoupon":c="coupon-info";break;case"bookfairApply":c="bookfair-info";break;case"taxExempt":c="tax-exempt-info"}c&&trackCheckoutView(c)}),$("form.gift-wrap-form").on("amplifiFormSuccess",function(){trackCheckoutView("make-it-a-gift-message-submit")}),$(".make-gift-radio").on("change",function(){var a="true"===$(this).val()?"yes":"no";trackCheckoutView("make-it-a-gift-selection",a)}),$(".edit-cart-items a").on("click",function(){trackCheckoutView("edit-quantity")}),$(document).on("click",'[data-modal-class="BN.Modal.Checkout.AddShipping"], [data-modal-class="BN.Modal.Checkout.UseSavedAddress"], [data-modal-name="m-used-saved-address"] address > a, [data-modal-name="m-used-saved-address"] .btn-submit.use-address, [data-modal-name="m-used-saved-address"] .add-shipping-address, [data-modal-name="m-add-shipping"] #addAddressSubmit, [data-modal-name="m-edit-shipping"] #editAddressSubmit',function(){trackCheckoutView("ship-to")}),$(document).on("click",'[data-modal-class="BN.Modal.Checkout.AddCC"], [data-modal-class="BN.Modal.Checkout.UseSavedCC"], [data-modal-name="m-use-saved-cc"] address > a, [data-modal-name="m-use-saved-cc"] .btn-submit.use-address, [data-modal-name="editpaymentorder"] #addAddressSubmit, [data-modal-name="m-add-cc"] #addAddressSubmit',function(){trackCheckoutView("payment-info"),trackCheckoutView("billing-info")})},trackDeliverySpeed:function(){var a=$(".delivery-options").find("input[type=radio]:checked").siblings(".radio-label-text").text(),b="shipping-method",c=a.split(":")[0].replace(/[\r\n]/g,"");trackCheckoutView(b,c)},trackDeliveryPref:function(){var a=$(".delivery-preferece").find("input[type=radio]:checked").siblings(".radio-label-text").text(),b="shipping-preference",c="Send each item as it is available";/send everything/i.test(a)&&(c="Send everything in as few packages"),trackCheckoutView(b,c)},LoggedUser:{init:function(){trackCheckoutView("express-start"),trackCheckoutView("review-items"),trackCheckoutView("final"),$('[id^="shipMethods"]').length>0&&BN.Analytics.Checkout.trackDeliverySpeed(),$("#deliveryOptionsContainer form").length>0&&BN.Analytics.Checkout.trackDeliveryPref()}},GuestUser:{init:function(){},shipping:function(){trackCheckoutView("regular-start"),trackCheckoutView("ship-to")},delivery:function(){$('[id^="shipMethods"]').length>0&&BN.Analytics.Checkout.trackDeliverySpeed(),$("#deliveryOptionsContainer form").length>0&&BN.Analytics.Checkout.trackDeliveryPref()},billing:function(){trackCheckoutView("payment-info"),trackCheckoutView("billing-info")},review:function(){trackCheckoutView("final")}}},Search:{init:function(){if("undefined"!=typeof s_setP&&"undefined"!=typeof s_getP){!function(){var a=getQueryParameterByName("Ntk"),b=a.length>0?a:"All";s_setP("digitalData.page.attributes.endeca.recordSearchKey",b)}(),""!=$.cookie("bn_searchBar_originalTerm")&&(s_setP("digitalData.page.attributes.internalSearch.originalTerm",$.cookie("bn_searchBar_originalTerm")),setAnalyticsCookie("bn_searchBar_originalTerm",null));var a=getAnalyticsEventCount(),b=$("#searchFilterSelect").find(":selected").text(),c=s_getP("digitalData.page.category");s_setP("digitalData.event["+a+"].eventInfo.eventName","Internal Search"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","internalSearch"),s_setP("digitalData.event["+a+"].attributes.storeFront",b),s_setP("digitalData.page.attributes.selectedPaymentType","PayByCredit"),s_setP("digitalData.page.attributes.hasAudiobookCreditPurchaseOption","false"),s_setP("digitalData.page.attributes.hasAudiobookPurchaseOption","false"),s_setP("digitalData.page.attributes.hasFrequentlyBoughtBundleSection","false"),s_setP("digitalData.product["+a+"].price.voucherDiscount","0"),s_setP("digitalData.product["+a+"].price.voucherCode",""),s_setP("digitalData.product["+a+"].category.primaryCategoryId",""),s_setP("digitalData.product[0].productInfo.pEAN",""),s_setP("digitalData.product[0].productInfo.brand",""),s_setP("digitalData.product[0].productInfo.mEAN",""),s_setP("digitalData.product[0].productInfo.audiobookID",""),s_setP("digitalData.product[0].attributes.referrer.pageSize","0"),s_setP("digitalData.product[0].attributes.referrer.pageNumber","0"),s_setP("digitalData.product[0].attributes.referrer.positionIndex","0"),s_setP("digitalData.product[0].attributes.referrer.searchTerm",""),s_setP("digitalData.product[0].attributes.referrer.isSearchAugmented",""),s_setP("digitalData.product[0].attributes.referrer.pageName",""),s_setP("digitalData.product[0].attributes.referrer.fusionQueryId",""),s_setP("digitalData.product[0].attributes.referrer.searchType",""),s_setP("digitalData.product[0].attributes.referrer.refinements.category",""),s_setP("digitalData.product[0].attributes.referrer.refinements.dimension",""),s_setP("digitalData.product[0].attributes.referrer.refinements.dimensionId",""),s_setP("digitalData.product[0].attributes.referrer.refinements.value",""),s_setP("digitalData.product[0].attributes.referrer.refinements.valueId",""),s_setP("digitalData.product[0].attributes.referrer.isEligibleForFreeShipping","false"),s_setP("digitalData.product[0].attributes.referrer.pickupInStoreStatus",""),s_setP("digitalData.product[0].attributes.referrer.isPreOrder",""),s_setP("digitalData.product[0].attributes.referrer.viewType",""),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),c&&s_setP("digitalData.event["+a+"].category",c),_satellite.track("onInternalSearch"),$("#refinements .refinements dd a").on("click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodlistFilter")}),$("[id^=sortProducts]").on("change",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodListSort")}),$(".landingPage .selectBox-dropdown-menu li a").on("click",function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","prodListSelect")}),$(".resultsListContainer").on("click",".product-shelf-image > a.pImageLink, .product-info-view .product-info-title > a",function(){var a=getAnalyticsEventCount(),b=$("#gridView").length>0?!0:!1,c=$("[id^=listView]"),d=(c.find(".search-results-promo").parent().closest("li"),$(b?"#gridView > div.product-shelf-grid > div.product-shelf-tile":"[id^=listView] > div.product-shelf-list > div.bd-bottom-disabled-gray")),e=d.index(b?$(this).closest("div.product-shelf-tile"):$(this).closest("[id^=listView] > div.product-shelf-list > div.bd-bottom-disabled-gray")),f=s_getP("digitalData.product["+e+"]");return setLocalStorageObj("referrer",e),s_setP("digitalData.event["+a+"].attributes.product[0]",f),s_setP("digitalData.event["+a+"].eventInfo.eventName","Internal Search"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","internalSearchResultsProductClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onInternalSearchResultsProductClick"),!0}),$("[id^=listView]").length>0?updateAnalyticsSortView("List"):$("#gridView").length>0&&updateAnalyticsSortView("Grid")}}},Thankyou:{init:function(){_satellite.track("onPurchase")}},Generic:{init:function(){$(document).on("analytics-email-signup",analyticsNewsletter),$("#emailSignupForm").on("amplifiFormSuccess",analyticsNewsletter),$(document).on("analytics-mini-cart-add",function(a){var b=$(a.target),c=b.closest(".mini-cart-item"),d={element:c};analyticsShoppingCart(a,d)}),$(document).on("analytics-mini-cart-remove",function(a){var b=$(a.target),c=b.closest(".mini-cart-item"),d={element:c,updateType:"remove"};analyticsShoppingCart(a,d)}),$(document).on("analytics-add-to-bag",'[data-modal-name="quickview"] .pdp-form',function(a){var b=$(this),c={element:b,updateType:"add",addedFrom:"modal"};analyticsShoppingCart(a,c)}),$(document).on("analytics-market-add",function(a,b){var c=($(this),{element:$(b.currentTarget).parents("div.product-module"),updateType:"add",addedFrom:"modal"});analyticsShoppingCart(a,c)}),$(document).on("analytics-quick-view",function(a,b){var c=getAnalyticsEventCount();b&&b.analytics&&updateAnalyticsProdObj(b.analytics,c),s_setP("digitalData.event["+c+"].eventInfo.eventName","Product Quick View"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","productQuickView"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),_satellite.track("onProductQuickView")}),$(document).on("click","#qvFormatsTabContent .all-formats-tab h3>a",function(){var a=getAnalyticsEventCount(),b=$(this),c=b.data("format-name");s_setP("digitalData.event["+a+"].eventInfo.eventName","Formats Editions Tab Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","formatsEditionsTabClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].attributes.formatName",c),_satellite.track("onFormatsEditionsTabClick")}),$(document).on("analytics-add-to-bag",'[data-modal-name="allFormats"] .pdp-form',function(a){var b=$(this),c=b.find(".btn-addtocart"),d=b.siblings(".analytics-qv-data").text(),e={element:b,updateType:"add",addedFrom:"modal"};attachDataToButton(d,c),analyticsShoppingCart(a,e)}),$(document).on("click",'[data-modal-class="BN.Modal.Browse.Formats"]',trackAllFormatsEditions),$(document).on("click",".bn-share-link",function(){var a=$(this).data("socialsharetype");trackSocialMediaClick(a)}),$(document).on("click",".global-footer-social-links .social > li > a",function(a){var b=$(this),c=b.text(),d=b.attr("href");a.preventDefault(),trackSocialMediaClick(c),window.location=d}),$(document).on("click","#giftWrapId",function(){var a=getAnalyticsEventCount();$(this).is(":checked")&&(s_setP("digitalData.event["+a+"].eventInfo.eventName","Gift Wrap Option Selected"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","giftWrapOptionSelected"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onGiftWrappedOptionSelected"))}),$(document).on("click",'[data-modal-class="BN.Modal.Browse.PDP.Reserve"]',function(){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Find IN-Store Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","findInStoreClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onFindInStoreClick")}),$("form.ip-form").on("amplifiFormSuccess",function(a){var b=$(this),c=b.closest(".multi-product-select").length>0?!0:!1,d=c?"li":"#prodInfoContainer",e=b.parents(d).find(".pdp-form")||b.siblings(".pdp-form"),f={element:e,updateType:"add",addedFrom:"pdp",isInstant:!0};analyticsShoppingCart(a,f)}),$(".topXList").find("form.pdp-form").on("amplifiFormSuccess",function(){var a=[],b=$(this).closest("form")[0];if(b&&void 0!=b&&b.length>0){var c=b.getAttribute("data-skuId");c&&$("#product-shelf-"+c).length>0&&(a.productName=$("#product-shelf-"+c+" #productName").val(),a.skuType=b.getAttribute("data-skuType"),a.price=$("#product-shelf-"+c+" #price").val(),a.skuId=c,a.productUrl=$("#product-shelf-"+c+" #productUrl").val(),a.workId=$("#product-shelf-"+c+" #workId").val(),a.viewType="BROWSE LIST VIEW",dataAnalyticsAddToCart(a))}}),trackOnloadErrors();var a=window.location!=window.parent.location?!0:!1;if(a||trackAnalyticsPrevPage(),$("#headSearchTypeAheadHolder").on("click","a.bn-suggest-link",function(){_satellite.track("onTypeAheadSearch")}),$("#searchForm").on("submit",function(){setAnalyticsCookie("bn_searchBar_originalTerm",null),setAnalyticsCookie("bn_searchBar_originalTerm",$.cookie("searchBar_value"))}),"undefined"!=typeof s_setP&&"undefined"!=typeof $.cookie("bn_searchBar_originalTerm")&&""!=$.cookie("bn_searchBar_originalTerm")){if(s_setP("digitalData.page.attributes.internalSearch.originalTerm",$.cookie("bn_searchBar_originalTerm")),$("body").hasClass("landingPage")&&!$("body").hasClass("searchResultsPage")){s_setP("digitalData.page.attributes.internalSearch.primaryCategory","redirect");var b=s_getP("digitalData.page.attributes.internalSearch.resultsCount");"0"===b&&s_setP("digitalData.page.attributes.internalSearch.resultsCount",0),satelliteCallInternalSearch()}$("body").hasClass("pdpPage")&&(s_setP("digitalData.page.attributes.internalSearch.primaryCategory","Onsite Search"),s_setP("digitalData.page.attributes.internalSearch.resultsCount",1),s_setP("digitalData.page.attributes.internalSearch.type","single_product"),satelliteCallInternalSearch())}$(document).on("click",".sign-in-link, #ultraviolet-sign-in, .sign-in-email-link, #getFreeNookSample, .sign-in-checkout, .guest-create-wishlist, .buy-as-egift, .pdpAddToWishlistLink, .browseAddToWishlistLink, #writeReviewBtn",function(){if("undefined"!==s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Sign in Start"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","signInStart"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),_satellite.track("onSigninStart")}})},GoogleAds:function(){var a=!1,b=function(){if(a===!0){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","Advertising"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","advertisingClick"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),_satellite.track("onAdvertisingClick"),a=!1}};$("#relatedAd [id^=google_ads_iframe], #relatedAd2 [id^=google_ads_iframe], #adcontainer1 iframe").mouseenter(function(){a=!0,document.activeElement.blur()}).mouseleave(function(){a=!1}),$(window).blur(function(){b()})}},BookGraph:{init:function(){bookGraphView(),$(document).on("click","a.book-component__link",function(){bookGraphItemClick()}),$(document).on("click","button.bg-banner",function(){bookGraphExploreNow()}),$(document).on("click","a.product-details-link",function(){bookGraphPDPViewed()}),$(document).on("click","a.bg-new-connection",function(){bookGraphNewConnection()})}}},BN.Analytics.init=function(){BN.Analytics.Generic.init()},$(document).ready(function(){var a=$("#analyticsEnabledFlag"),b=a.length>0?a.val():null;"false"!=b&&BN.Analytics.init()}),$(document).on("click",".audio-book-tooltip, .audio-nook-tooltip",function(){analyticsAudiobookTooltip()}),$(document).on("click",".view-library-analytics",function(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","View In Library Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onAudiobookViewInLibraryClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook")}}),$(document).on("click",".play-now-analytics",function(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Audiobook Play Now Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","onAudiobookPlayNowClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Audiobook")}}),$(window).on("load",function(){if(bodyClass.indexOf("purchase-subscription-plan")>-1&&"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","audiobook:audiobook subscription promotional landing page"),s_setP("digitalData.page.pageInfo.pageType","audiobook")),bodyClass.indexOf("pdpPage")>-1&&"true"==$("#isRopisEnabled").val()&&"undefined"!=typeof s_setP){var a=getAnalyticsEventCount(),b=parseFloat($("#commerce-zone").find(".bv_avgRating_component_container").length?$(".bv_avgRating_component_container").html():0),c=parseFloat($("#commerce-zone").find(".bv_numReviews_component_container").length?$("#commerce-zone").find(".bv_numReviews_component_container").text().replace("(","").replace(")",""):0),d=$("#primayCategoryId").length?$("#primayCategoryId").val():"NA";s_setP("digitalData.product["+a+"].attributes.rating",b),s_setP("digitalData.product["+a+"].attributes.reviews",c),s_setP("digitalData.product["+a+"].attributes.referrer.pageName","PDP"),s_setP("digitalData.product["+a+"].category.primaryCategoryId",d)}}),$("[id^=startFreeTrial]").on("click",function(){startFreeTrialBtnanalytics()}),$("[id^=getSubscriptionBtn]").on("click",function(){getSubscriptionBtnanalytics()}),$(window).on("load resize",function(){if($(".results-icons").find("#grid-view.selected").length>0)if($(window).width()>900){if("undefined"!=typeof s_setP){{getAnalyticsEventCount()}s_setP("digitalData.page.attributes.hasAudiobookSample","false")}}else if($(".audiobook-play-button").length>0){if("undefined"!=typeof s_setP){{getAnalyticsEventCount()}s_setP("digitalData.page.attributes.hasAudiobookSample","true")}}else if("undefined"!=typeof s_setP){{getAnalyticsEventCount()}s_setP("digitalData.page.attributes.hasAudiobookSample","false")}}),$(document).ready(function(){if(0==$(".results-icons").find("#grid-view.selected").length)if($(".product-shelf-tile-book").find(".audiobook-play-button").length>0||$(".pdp-product-image").find(".pdp-play-icon").length>0){if("undefined"!=typeof s_setP){{getAnalyticsEventCount()}s_setP("digitalData.page.attributes.hasAudiobookSample","true")}}else if("undefined"!=typeof s_setP){{getAnalyticsEventCount()}s_setP("digitalData.page.attributes.hasAudiobookSample","false")}if(bodyClass.indexOf("manage-audiobook-subscription")>-1&&"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:audiobook manage subscription"),s_setP("digitalData.page.pageInfo.pageType","account"),sessionStorage.getItem("audioEventData"))){s_setP("digitalData.event",JSON.parse(sessionStorage.getItem("audioEventData"))),sessionStorage.removeItem("audioEventData");var a=$("#cancellationDate");a&&a.length>0&&s_setP("digitalData.event[0].attributes.product.attributes.audiobookPlanEndDate",a.text()),_satellite.track("onAudiobookSubscriptionCancellation")}bodyClass.indexOf("change-payment-method")>-1&&"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:change subscription payment method"),s_setP("digitalData.page.pageInfo.pageType","account")),$(".account-wish-list").find(".audiobook-play-button").length>0&&"undefined"!=typeof s_setP&&s_setP("digitalData.page.attributes.hasAudiobookSample","true")}),$(document).ready(function(){bodyClass.indexOf("Manage-Membership-page")>-1&&"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:manage membership "),s_setP("digitalData.page.pageInfo.pageType","account"))}),$("#manageMembership #manageMembershipForm .submit-cancel #addAddressSubmit").on("click",function(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Link Existing Membership Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","linkExistingMembershipClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Membership"),_satellite.track("onAudiobookSamplePlay")}}),$(".renew-expire-member .upgrade-member-btn").on("click",function(){if("undefined"!=typeof s_setP){var a=getAnalyticsEventCount();s_setP("digitalData.event["+a+"].eventInfo.eventName","Membership Renewal Click"),s_setP("digitalData.event["+a+"].eventInfo.eventAction","membershipRenewalClick"),s_setP("digitalData.event["+a+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+a+"].category.primaryCategory","Membership")}}),$(window).on("load",function(){bodyClass.indexOf("reactivate-subscription")>-1&&"undefined"!=typeof s_setP&&(s_setP("digitalData.page.pageInfo.pageName","account:audiobook reactivate cancelled subscription"),s_setP("digitalData.page.pageInfo.pageType","account"))}),$(".order-confirmation-detail-bopis").children(".order-confirmation-detail__value").text().indexOf("Credit")>-1&&analyticsCreditPurchase();;/*! BARNES-BUILDER 2024-02-21 */
function loadADIScript(a){function b(){window.hasOwnProperty("_bcn")&&window._bcn.hasOwnProperty("dvc")?window._bcn.dvc.setSubmissionCallback(c):$("#ubaId")&&$("#ubaId").length>0&&($("#ubaId").val(""),$("#adiPageId").val(""),$("#ubaSessionId").val(""),$("#deviceTransactionId").val(""))}function c(){var b=window.location.href;b.indexOf("/account/manage/settings")>-1?fillHiddenADIElement("manageSettings"):b.indexOf("/password-management/reset-password.jsp")>-1?fillHiddenADIElement("resetPassword"):b.indexOf("/account/giftcard/manage")>-1?fillHiddenADIElement("manageGiftCard"):b.indexOf("/b/gift-cards/")>-1||b.indexOf("/account/giftcard/checkbalance")>-1?fillHiddenADIElement("checkBalance"):"paymentMethod2"===a?fillHiddenADIElement("paymentMethod2"):"paymentMethod"===a||b.indexOf("/manage/payment/new.jsp")>-1||b.indexOf("/audiobook/purchase-audiobook-subscription.jsp")>-1||b.indexOf("/audiobook/reactivate-audiobook-subscription.jsp")>-1||b.indexOf("/checkout/checkout.jsp")>-1?fillHiddenADIElement("paymentMethod"):b.indexOf("/account/complete-account.jsp")>-1||b.indexOf("/checkout/thank-you.jsp")>-1?fillHiddenADIElement("other"):fillHiddenADIElement()}var d=$("#enableADI")&&$("#enableADI").text();if(d===!0||"true"===d){var e=$("#adiJSUrl")&&$("#adiJSUrl").text(),f=$("#adiJSTimeout")&&$("#adiJSTimeout").text(),g=document.getElementById("bcn");g&&g.parentNode&&g.parentNode.removeChild(g);var h=document.createElement("script");h.setAttribute("type","text/javascript"),h.setAttribute("defer",""),h.setAttribute("src",e),h.setAttribute("id","bcn"),"removeUBA"===a?h.setAttribute("dvc","d"):(h.setAttribute("dvct",f),h.setAttribute("dvc","a")),h.onload=function(){b()},document.head.appendChild(h)}}function fillHiddenADIElement(a){if(window.hasOwnProperty("_bcn")){window._bcn.flush();var b=window._bcn.hasOwnProperty("dvc")?window._bcn.dvc.getTID():"DEVICE_FINGERPRINTING_NOT_ENABLED";"manageSettings"===a||"resetPassword"===a?($("#ubaIdPwd").val(window._bcn.getToken()),$("#adiPageIdPwd").val(window._bcn.getPageId()),$("#ubaSessionIdPwd").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdPwd").val(b),"manageSettings"===a&&($("#ubaIdMobile").val(window._bcn.getToken()),$("#adiPageIdMobile").val(window._bcn.getPageId()),$("#ubaSessionIdMobile").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdMobile").val(b),$("#ubaIdEmail").val(window._bcn.getToken()),$("#adiPageIdEmail").val(window._bcn.getPageId()),$("#ubaSessionIdEmail").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdEmail").val(b))):"checkBalance"===a||"manageGiftCard"===a?($("#ubaIdGCB").val(window._bcn.getToken()),$("#adiPageIdGCB").val(window._bcn.getPageId()),$("#ubaSessionIdGCB").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdGCB").val(b),"manageGiftCard"===a&&($("#ubaIdAddGCB").val(window._bcn.getToken()),$("#adiPageIdAddGCB").val(window._bcn.getPageId()),$("#ubaSessionIdAddGCB").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdAddGCB").val(b))):"paymentMethod"===a?($("#ubaIdPayment").val(window._bcn.getToken()),$("#adiPageIdPayment").val(window._bcn.getPageId()),$("#ubaSessionIdPayment").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdPayment").val(b)):"paymentMethod2"===a?($("#ubaIdPayment2").val(window._bcn.getToken()),$("#adiPageIdPayment2").val(window._bcn.getPageId()),$("#ubaSessionIdPayment2").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdPayment2").val(b)):"other"===a?($("#ubaIdOther").val(window._bcn.getToken()),$("#adiPageIdOther").val(window._bcn.getPageId()),$("#ubaSessionIdOther").val(window._bcn.getUbaSessionId()),$("#deviceTransactionIdOther").val(b)):($("#ubaId").val(window._bcn.getToken()),$("#adiPageId").val(window._bcn.getPageId()),$("#ubaSessionId").val(window._bcn.getUbaSessionId()),$("#deviceTransactionId").val(b))}};/*! BARNES-BUILDER 2024-02-21 */
function pdpBopisSectionLoad(){if($("#pdp-page-container").hasClass("pdp-books")||$("#pdp-page-container").hasClass("pdp-device")||$("#pdp-page-container").hasClass("pdp-text-books")||$("#pdp-page-container").hasClass("pdp-music")||$("#pdp-page-container").hasClass("pdp-movie")||$("#pdp-page-container").hasClass("pdp-otherNonDigital")){var a=$("#pdpBopisSecLazyLoad").val(),b=$("#isCommerceHub").val(),c=$("#isNeverForSale").val();"false"==b&&"true"!=c&&("true"==a&&1!=userLocationCheckFlag?pdpAjaxOnFlagTrue():pdpOnLoad())}}function pdpOnLoad(){var a=$("#totalFormatsOnLoad").val();void 0==a&&(a=0);var b="";b=$("#bopisEligibleMessageUpdated").length>0?$("#bopisEligibleMessageUpdated").val():$("#bopisEligibleMessage").val();var c=$("#productSkuId").val(),d=$("#productPId").val(),e=$("#listPrice").val(),f=$("#salePrice").val(),g=$("#availabilityStatus").val(),h=$("#skuType").val(),i=$("#storeName").val(),j=$("#storeID").val();sessionStorage.setItem("storeName",i),sessionStorage.setItem("storeID",j),sessionStorage.setItem("bopisLocationSet","true"),1!=userLocationCheckFlag&&pdpAjax(b,c,d,e,f,g,h,pdpLocationCheck,a)}var userLocationCheckFlag=0,pdpLocationCheck=!1;getUserLocation=function(a){function b(b){if(d(b.coords.latitude,b.coords.longitude,!0),showPosition(b.coords.latitude,b.coords.longitude,a),"undefined"!=typeof s_setP){var c=getAnalyticsEventCount();s_setP("digitalData.event["+c+"].eventInfo.eventName","BOPIS GEO Detection Success"),s_setP("digitalData.event["+c+"].eventInfo.eventAction","bopisGeoDetectionSuccess"),s_setP("digitalData.event["+c+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+c+"].category.primaryCategory","Buy Online Pay In Store"),_satellite.track("onBopisGeoDetectionSuccess")}}function c(){if(d(null,null,!1),showPosition(null,null,a),"undefined"!=typeof s_setP){var b=getAnalyticsEventCount();s_setP("digitalData.event["+b+"].eventInfo.eventName","BOPIS GEO Detection Failed"),s_setP("digitalData.event["+b+"].eventInfo.eventAction","bopisGeoDetectionFailed"),s_setP("digitalData.event["+b+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+b+"].category.primaryCategory","Buy Online Pay In Store"),_satellite.track("onBopisGeoDetectionFailed")}}function d(a,b,c){var d="";try{void 0!==digitalData&&(d=digitalData.page.pageInfo.ipAddress)}catch(e){}var f={coords:{latitude:a,longitude:b},access:c,ipAddress:d};localStorage.setItem("userCurrentLocation",JSON.stringify(f))}var e=localStorage.getItem("userCurrentLocation");if(null===e)if(navigator.geolocation){var f={enableHighAccuracy:!0,maximumAge:0};navigator.geolocation.getCurrentPosition(b,c,f)}else showPosition(null,null,a);else{var g=JSON.parse(e);showPosition(g.coords.latitude,g.coords.longitude,a)}setTimeout(function(){var b=null!=navigator.userAgent.match(/iPad/i);0==$(".storeAvailable").length&&b&&$("body").hasClass("homepage")&&showPosition(null,null,a)},3e3)},showPosition=function(a,b,c){var d=c?"fromGeo":"fromCurrent";if($("body").hasClass("shopping-bag"))var e="cart";var f;if(f=null!=a&&null!=b?"?action="+d+"&lat="+a+"&lng="+b+"&myBn="+myBN+"&page="+e:"?action="+d+"&myBn="+myBN+"&page="+e,c)getStoreDetails(f);else{var g="/xhr/store-list-item.jsp"+f;$.ajax({url:g,cache:!1,type:"get"}).done(function(){if($("body").hasClass("homepage")){var a=!1,b=!0;fetchHomePageRibbon(a,b),fetchMyBN(a,b)}else if($("#plpRibbonCont").length>0){var a=!1,b=!0;fetchPLPRibbon(a,b)}else $("body").hasClass("pdpPage")&&(userLocationCheckFlag=0,pdpLocationCheck=!0,pdpBopisSectionLoad())})}};var bopisAnalytics=function(){var a=$("#storeName").val(),b=$("#storeID").val();"undefined"!=typeof s_setP&&void 0==s_getP("digitalData.user[0].profile[0].profileInfo.storeName")&&(s_setP("digitalData.user[0].profile[0].profileInfo.storeName",a),s_setP("digitalData.user[0].profile[0].profileInfo.storeID",b)),sessionStorage.setItem("storeName",a),sessionStorage.setItem("storeID",b),sessionStorage.setItem("bopisLocationSet","true")};$(document).ready(function(){var a=$("#isRopisEnabled"),b=$("input[name=bopisEnabled]");if("true"==b.val()||a.length>0&&"true"==a.val()){{$("#storeName").val()}if("undefined"!=typeof s_setP){var c="";getCustomCookie("selected-storeId")&&"null"!=getCustomCookie("selected-storeId")&&"undefined"!=typeof getCustomCookie("selected-storeId")&&(c=getCustomCookie("selected-storeId"));var d=getAnalyticsEventCount();"storeUpdated"==c.split("-")[1]?(s_setP("digitalData.event["+d+"].eventInfo.eventAction","bopisStoreUpdate"),s_setP("digitalData.event["+d+"].eventInfo.eventName","BOPIS Store Update"),s_setP("digitalData.event["+d+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+d+"].category.primaryCategory","Buy Online Pay In Store"),s_setP("digitalData.event["+d+"].attributes.storeId",c.split("-")[0]),_satellite.track("onBopisStoreUpdate"),setCustomCookie("selected-storeId",null)):"storeSelected"==c.split("-")[1]&&(s_setP("digitalData.event["+d+"].eventInfo.eventAction","bopisStoreSelected"),s_setP("digitalData.event["+d+"].eventInfo.eventName","BOPIS Store Selected"),s_setP("digitalData.event["+d+"].eventInfo.timeStamp",""+new Date),s_setP("digitalData.event["+d+"].category.primaryCategory","Buy Online Pay In Store"),s_setP("digitalData.event["+d+"].attributes.storeId",c.split("-")[0]),_satellite.track("onBopisStoreSelected"),setCustomCookie("selected-storeId",null))}if("true"==sessionStorage.getItem("bopisLocationSet")&&"undefined"!=typeof s_setP&&void 0!=digitalData.user&&void 0==digitalData.user[0].profile[0].profileInfo.storeName){var e=sessionStorage.getItem("storeName"),f=sessionStorage.getItem("storeID");s_setP("digitalData.user[0].profile[0].profileInfo.storeName",e),s_setP("digitalData.user[0].profile[0].profileInfo.storeID",f)}if($("body").hasClass("homepage")||$("body").hasClass("pdpPage")&&$("#defaultPdpMessage").length>0||$("#nonAjaxPdpMessage").length>0||$("#radioMsgContBopis").length>0||a.length>0||$("body").hasClass("searchResultsPage")||$("body").hasClass("landingPage")||$("body").hasClass("shopping-bag")||$("body").hasClass("membership-landing")){{var g=window.location.href,h=!1;$("#pdpBopisSecLazyLoad").val()}if((g.indexOf("/discover-categories/")>-1||g.indexOf("/contributor/")>-1||g.indexOf("/series/")>-1)&&(h=!0),(0==$(".storeAvailable").length&&0==$(".unavailable-for-bopis").length&&!$("body").hasClass("shopping-bag")&&"false"!=$("#bopisEligible").val()&&!h&&!$("body").hasClass("homepage")&&!$("body").hasClass("searchResultsPage")&&!$("body").hasClass("landingPage")||$("#storeNamePDP").length>0)&&(userLocationCheckFlag=1,getUserLocation(!1,!1)),$("body").hasClass("homepage")){var i=0==$(".storeAvailable").length,j=!1;fetchHomePageRibbon(i,j),fetchMyBN(i,j)}if($("body").hasClass("searchResultsPage")||$("body").hasClass("landingPage")&&!h){var i=0==$(".storeAvailable").length,j=!1;fetchPLPRibbon(i,j)}$("body").hasClass("pdpPage")&&(pdpBopisSectionLoad(),userLocationCheckFlag=0),$(document).on("click",".open-ss-modal",function(){var a=$(this).data("position");"modal"==a?($("#changeStoreBtnPosition").val(a),closeAllModals()):$("#changeStoreBtnPosition").val("page");var b=window.location.href.toLowerCase(),c={};b.indexOf("debug=true")>-1&&(c={tplParams:{debug:!0}}),new BN.Modal.Account.Findstore(null,{target:$(this)},c)}),myBNToggle()}}if("false"==$("input[name=bopisEnabled]").val()&&$("body").hasClass("homepage")&&$("#myBNContainer").length>0){var i=0==$(".storeAvailable").length,j=!1;fetchHomePageRibbon(i,j),fetchMyBN(i,j),$(document).on("click",".open-ss-modal",function(){var a=window.location.href.toLowerCase(),b={};a.indexOf("debug=true")>-1&&(b={tplParams:{debug:!0}}),new BN.Modal.Account.Findstore(null,{target:$(this)},b)}),myBNToggle()}});var fetchHomePageRibbon=function(a,b){if($("#bopisRbnCont").length>0){var c=webContextRoot+"/cartridges/BOPISRibbon/BOPISRibbon.jsp";$.ajax({url:c,cache:!1,type:"post"}).done(function(c){$("#bopisRbnCont").html(c),a&&0==$(".storeAvailable").length&&getUserLocation(),b&&bopisAnalytics(),$("section.bopis-banner").length>0&&placeFocusToHomePageCarousel()}).fail(function(){})}},fetchPLPRibbon=function(a,b){if($("#plpRibbonCont").length>0){var c=webContextRoot+"/bopis/PLPRibbon.jsp",d=$("#requestURI").val();$.ajax({url:c,cache:!1,data:{requestURI:d},type:"post"}).done(function(c){$("#plpRibbonCont").html(c),itemsPerRequest=Number($("#itemsPerRequest").val()),a&&0==$(".storeAvailable").length&&getUserLocation(),"false"==$("#enablePLPCheckboxFilter").val()&&""!=$("#currentStorePLP").val()&&null!=$("#currentStorePLP").val()&&showBadgesAfterAjaxPlp(),"true"==$("#enablePLPCheckboxFilter").val()&&(BN.uXHR.Form.apply($("#bopisPlpRibbonForm")),changeCheckboxPlp()),b&&bopisAnalytics()}).fail(function(){})}},fetchMyBN=function(a,b){if($("#myBNContainer").length>0){var c=webContextRoot+"/cartridges/MyBNContainer/MyBNContainer.jsp";$.ajax({url:c,cache:!1,type:"post"}).done(function(c){$("#myBNContainer").html(c),a&&0==$(".storeAvailable").length&&getUserLocation(),b&&bopisAnalytics(),myBNToggle()}).fail(function(){})}},myBNToggle=function(){$(".store-link-parent .icon-remove,.store-link-parent .icon-add").on("click",function(a){"icon-remove"===a.target.className?($(this).removeClass("icon-remove").addClass("icon-add"),$(".suggestion-cards").addClass("strict-hidden"),$(this).parents(".my-bn").removeClass("opened")):"icon-add"===a.target.className&&($(this).removeClass("icon-add").addClass("icon-remove"),$(".suggestion-cards").removeClass("strict-hidden"),$(this).parents(".my-bn").addClass("opened"))})};;/*! BARNES-BUILDER 2024-02-21 */
function rhfSignIn(a){var b={type:"explicit",preventDefault:"conditionally",modalData:{},onclose:!1,modalObjOverride:"undefined"!=typeof BN.Modal.Account.LoginNew?BN.Modal.Account.LoginNew:BN.Modal.Account.Login,keepParentModalOpen:!1,runSuccessCallbackOnce:!1,callbackRunCount:0};"undefined"==typeof redirectRegisteredUser&&$(document).on("click",a,function(a){if($("body").hasClass("nook-login-page")&&"signInLink"==$(this).attr("id"))return new BN.Modal.Account.Login(null,{target:this},{useCache:!1,tplParams:{isNookLogin:"true",isEgift:$("#isEgiftLogin").val()}}),!1;var c=webContextRoot+"/includes/check-login.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(c=BN_EXTERNAL_DOMAIN_PREFIXED+c),$.ajax({type:"get",url:c,dataType:"script",cache:!1,async:!1});var d=$("form.ip-form .btn-instant-purchase");d.length&&d.hasClass("disabled")&&d.removeClass("disabled");var e=$("#btnInstPurTextbook");e.length&&e.hasClass("disabled")&&e.removeClass("disabled");var f=$("#btnInstPureMag");f.length&&f.hasClass("disabled")&&f.removeClass("disabled");var g=this;if("always"==b.preventDefault&&a.preventDefault(),"explicit"==b.type&&!BN.isExplicitlyLoggedIn||"soft"==b.type&&!BN.isSoftLoggedIn){"conditionally"==b.preventDefault&&a.preventDefault();var h=getCurrentModal($(g));"undefined"==typeof h&&(h=null),b.modalData.target=b.modalData.target||this,b.modalData.redirect=b.modalData.redirect||!1,b.modalData.onclose=b.onclose||this;var i=b.keepParentModalOpen?new b.modalObjOverride(null,b.modalData,$(g).data("params")):new b.modalObjOverride(null,b.modalData,$(g).data("params"),h),j="undefined"!=typeof $(g).attr("href")?$(g).attr("href"):"#";$(g).hasClass("wishlist-link")&&(j=$(g).attr("data-wishlist-link")),$(g).hasClass("rhf-atg-guest-user")&&"undefined"!=typeof $(g).attr("data-link")&&"#"!=$(g).attr("data-link")&&(j=$(g).attr("data-link")),$(window).off("amplifiFrameFormSuccess").on("amplifiFrameFormSuccess",function(a,b){BN.isExplicitlyLoggedIn=!0,BN.isSoftLoggedIn=!0;i&&i.pureModal&&i.flow().goTo(0).Close(),$(".pdpPage").length>0||"#"==j?location.reload():window.location=j})}else b.successCallback!==!1&&(!b.runSuccessCallbackOnce||b.runSuccessCallbackOnce&&0==b.callbackRunCount)&&(b.callbackRunCount++,$(g).hasClass("rhf-atg-guest-user")?"undefined"!=typeof $(g).attr("data-link")&&"#"!=$(g).attr("data-link")?(j=$(g).attr("data-link"),window.location.href=j):"undefined"!=typeof $(g).attr("data-wishlist-link")&&"#"!=$(g).attr("data-wishlist-link")?(j=$(g).attr("data-wishlist-link"),window.location.href=j):location.reload():$(".pdpPage").length>0||"undefined"!=typeof $(g).attr("href")&&"#"==$(g).attr("href")?location.reload():window.location=$(g).attr("href"))})}function rhfCreateAccount(a){var b={},c={target:a};$(a).off("click").on("click",function(a){a.preventDefault(),"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&""!=BN_EXTERNAL_DOMAIN_PREFIXED?createAccountSocialLogin($(this),{successCallback:function(){location.reload()},modalData:c,defaultOptions:b},a):new BN.Modal.Account.RegisterNew(null,c,b,null)})}function RhfMiniCart(a,b){this.scope=this,this.cart=$(a),$(document).on("input change","[id^=numberInput]",function(){$(this).closest(".item-count").find("#updateQty").val(this.value)}),$(window).width()>980&&$(b).off("mouseenter mouseover").on("mouseenter",function(){0===$("#rhf-asyn-typeahead").length&&(($(".rhf-navbar-nav-cart .rhf-cart .rhf-mobile-hide").is(":visible")||$(".rhf-navbar-nav-cart .rhf-cart .rhf-my-cart-icon").is(":visible"))&&($(a).closest(".bagContentsContainer").removeClass("mobile-hide"),$("form.rhf-global-search").css("z-index",1)),RhfMiniCartShowCart())})}function RhfMiniCartShowCart(){if($(".rhf-globalHeader .rhf-navbar-nav-cart").css("z-index","10"),$("#orderSummary .payment-wide-icon .zoid-outlet > iframe.zoid-visible").css("z-index","0"),"undefined"!=typeof openCartFlyout)openCartFlyout();else{var a=".rhf-navbar-nav-cart > li > div.dropdown-menu";if($("#miniCart").length)0===$("#rhf-asyn-typeahead").length&&(null!=$("#error-msg").value?$("#miniCart").find("#error-msg").css("display","block"):$("#miniCart").find("#error-msg").css("display","none"),$(".landingPage .bn-banner-container").css("z-index","0"),$(a+" aside").removeClass("crtHidden"),$(a+" aside").stop(!0).fadeTo(250,1),$(a+" aside").show(),$(a).stop(!0).fadeTo(250,1));else{var b="/includes/minicart-shopping-bag.jsp";"undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED&&(b=BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp"),RhfLoadHeaderElement($(a),b,!0),$(".landingPage .bn-banner-container").css("z-index","0"),$(a+" aside").removeClass("crtHidden"),$(a+" aside").stop(!0).fadeTo(250,1),$(a+" aside").show(),$(a).stop(!0).fadeTo(250,1)}if($(a).attr("aria-hidden","false"),$("#miniCart").length){$("#rhfMiniCartContainer").closest("body").addClass("mini-cart-open"),$(".mini-cart-mask, .icon-close-modal").on("click",function(){RhfMiniCartHideCart()}),$(document).on("click",".mini-cart-mask, .icon-close-modal",function(){RhfMiniCartHideCart()});var c=$(".mini-cart-top-section").height(),d=$(".order-total-container");$(".mini-cart .order-total-container .payment-sectionbox p").length?d.attr("style","height: 270.812px !important;"):d.attr("style","height: 211px !important;");var e=d.height(),f=$(".cart-slide-out__body.mini-cart-scroll-section"),g=c+e;f.attr("style","height: calc( 100% - "+g+"px) !important;"),$(".rhf-globalHeader .rhf-logo-bar .logo-img").css("z-index","0"),$(".grecaptcha-badge").css("z-index","0"),$(".navbar-toggler").css("z-index","0"),$(".product-shelf").css("z-index","0"),$(".rhf-store").css("z-index","0"),$(".rhf-globalHeader .rhf-icon-wishlist").css("z-index","0"),$(".rhf-globalHeader .input-group-append .btn").css("z-index","0"),$(".sticky-commerce-mobile").css("z-index","0"),$(".rhf-globalHeader .btn:hover").css("background-color","none")}else $("#rhfMiniCartContainer").closest("body").removeClass("mini-cart-open"),$(".rhf-globalHeader .rhf-logo-bar .logo-img").css("z-index","2"),$(".product-shelf").css("z-index","2"),$(".navbar-toggler").css("z-index","4"),$(".rhf-globalHeader .rhf-icon-wishlist").css("z-index","3"),$(".rhf-store").css("z-index","3"),$(".rhf-globalHeader .input-group-append .btn").css("z-index","2"),$(".sticky-commerce-mobile").css("z-index","9999"),$(".rhf-globalHeader .btn:hover").css("background-color","#283d44");$("#miniCart select.AllRadOption").selectBox(),$("body").find("#miniCart").length&&$("#miniCart #paypal-button").is(":visible")&&($("#miniCart #paypal-button").empty(),initPaypalExpress(".checkout-paypal"))}}function RhfMiniCartHideCart(){var a="none"===$("#miniCart").css("display")?!1:!0,b=".rhf-navbar-nav-cart > li > div.dropdown-menu";$(".navbar-toggler").css("z-index","4"),$(".grecaptcha-badge").css("z-index","1000"),a&&$(b+" aside").fadeTo(250,0,function(){$(b+" aside").hide(),$(b+" aside").addClass("crtHidden")}),$(b).attr("aria-hidden","true"),$("#rhfMiniCartContainer").closest("body").removeClass("mini-cart-open"),$(".searchResultsPage .bn-banner-container").css("z-index","9"),$(".rhf-globalHeader .rhf-navbar-nav-cart").removeAttr("style"),$("#orderSummary .payment-wide-icon .zoid-outlet > iframe.zoid-visible").css("z-index","100")}function RhfMiniCartEvts(a){function b(a){a.slideDown("fast",function(){a.css("overflow","visible")}),a.find(".ui-datepicker-trigger").addClass("d-none");var b=a.find("textarea.gift-message").val(),c=b.length,d=a.find(".steel").text(),e=d.split("/")[1];c>0&&a.find(".limit-notifier").text(e-c)}function c(a){a.slideUp("fast")}$(a).find(".mini-cart-quantity-update").each(function(){BN.uXHR.Form.apply(this)}),BN.uXHR.Form.apply($(a).find("#frmApplyCoupon")),$(a).find("#frmApplyCoupon").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".gift-wrap-form")),$(a).find(".gift-wrap-form").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".egift-wrap-form")),$(a).find(".egift-wrap-form").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find("#removeCoupon")),$(a).find("#removeCoupon").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".save-item-for-later")),$(a).find(".save-item-for-later").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0),$(".save-item-for-later .btn--link").prop("disabled",!1)}).on("amplifiFormBeforeSubmit",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0),$(".save-item-for-later .btn--link").prop("disabled",!0)}).on("amplifiFormError",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0),$(".save-item-for-later .btn--link").prop("disabled",!1)}),BN.uXHR.Form.apply($(a).find(".mini-cart-add-cart-item-from-later")),$(a).find(".mini-cart-add-cart-item-from-later").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".mini-cart-remove-saved-item-for-later")),$(a).find(".mini-cart-remove-saved-item-for-later").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".stop-reloding-mini-cart-bopis")),$(a).find(".stop-reloding-mini-cart-bopis").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".add-plan-button")),$(a).find(".add-plan-button").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),BN.uXHR.Form.apply($(a).find(".remove-add-protection-plan")),$(a).find(".remove-add-protection-plan").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0)}),$(a+"[id^=numberInput]").on("change","[id^=numberInput]",function(){$(this).closest(".item-count").find("#updateQty").val(this.value)});var d=$("<div/>").addClass("mini-cart-spinner");$("#headingPayOptn1").on("click",function(){"false"===$(this).attr("aria-expanded")?($("#payment-options-Link1").show(),$("#payment-options-Link1").addClass("show"),$(this).attr("aria-expanded","true")):($("#payment-options-Link1").hide(),$(this).attr("aria-expanded","false"),$("#payment-options-Link1").removeClass("show"))}),$("#mySavedOptionsLink").on("click",function(){"false"===$(this).attr("aria-expanded")?($("#my-saved-options-Link").show(),$("#my-saved-options-Link").addClass("show"),$(this).attr("aria-expanded","true")):($("#my-saved-options-Link").hide(),$(this).attr("aria-expanded","false"),$("#my-saved-options-Link").removeClass("show"))}),$(".AllRadOption").on("select change",function(){$(this).closest("section").find(".pickup-in-storename-label").removeClass("d-block").addClass("d-none"),$(this).closest("section").find(".pickup-in-store-label").removeClass("d-block").addClass("d-none"),$(this).parent().find("a.AllRadOption").removeClass("bopis-item-is-selected"),$(this).closest("section").parent().find(".mini-cart-error").addClass("d-none");var a=$(this).val(),b=$(this).closest("section").next().next().find("[name^=orderTypeRadio]"),c=$(this).parent().find(".pickup-in-storename-label");"free store pickup"==a?(b[1].click(),$(this).closest("section").find(".change-my-store").removeClass("d-none"),$(this).closest("ul").parent().next().removeClass("d-block").addClass("d-none"),$(this).closest("section").parent().find(".outOfStockBopis").length>0?($(this).closest("section").parent().find(".outOfStockBopis").removeClass("d-none"),b[0].click(),$(this).parent().find("a.AllRadOption").html('<span class="selectBox-title"></span><span class="selectBox-label">Ship This Item</span><span class="selectBox-arrow"></span>')):c.length>0?($(this).closest("section").find(".pickup-in-storename-label").removeClass("d-none"),$(this).closest("section").find(".pickup-in-store-label").removeClass("d-none"),$(this).parent().find(".selectBox-label").addClass("pickup-in-store-label-text"),b.closest("form").submit()):($(this).closest("section").find(".pickup-in-storename-label").addClass("d-none"),$(this).closest("section").find(".pickup-in-store-label").addClass("d-none"),$(this).parent().find(".selectBox-label").removeClass("pickup-in-store-label-text"))):(b[0].click(),$(this).closest("section").find(".change-my-store").addClass("d-none"),$(this).closest("ul").parent().next().removeClass("d-none").addClass("d-block"),$(this).closest("section").find(".pickup-in-storename-label").addClass("d-none"),$(this).closest("section").find(".pickup-in-store-label").addClass("d-none"),$(this).closest("section").parent().find(".outOfStockOnline").length>0?($(this).closest("section").parent().find(".outOfStockOnline").removeClass("d-none"),b[1].click(),$(this).parent().find("a.AllRadOption").html('<span class="selectBox-title"></span><span class="selectBox-label">Pick up in Store</span><span class="selectBox-arrow"></span>'),$(this).parent().find("a.AllRadOption").addClass("bopis-item-is-selected"),$(this).closest("section").find(".pickup-in-storename-label").removeClass("d-none"),$(this).closest("section").find(".pickup-in-store-label").removeClass("d-none"),$(this).parent().find(".selectBox-label").addClass("pickup-in-store-label-text")):b.closest("form").submit())}),$(document).on("click",".make-gift-checkbox-new-cart",function(){var a=$(this),d=a.closest(".make-it-a-gift-select").next(),e=!1;d.find(".gift-wrap-message-indicator").length&&(e=!0),1==$(this).prop("checked")?(b(d),d.find("form").find(".make-it-a-gift-checkbox").length>0&&d.find("form").find(".make-it-a-gift-checkbox").val("true")):(d.find("form").find(".make-it-a-gift-checkbox").length>0&&"true"===d.find("form").find(".make-it-a-gift-checkbox").val()&&(d.find("form").find(".make-it-a-gift-checkbox").val("false"),d.find("form").find(".gift-wrap").val("false"),d.find("form").find("textarea").val(""),d.find("form").find("textarea").removeAttr("required"),d.find("form").find(".gift-message").val(""),d.find(".gift-wrap-submit").click()),e?(d.find(".remove-gift-wrap-message").val("true"),d.find(".gift-wrap-submit").click()):c(d))}),$(document).on("click",".make-it-a-gift-checkbox",function(){var a=$(this).closest(".gift-wrap-form");1==$(this).prop("checked")?a.find(".gift-container__textarea .gift-message").attr("required","required"):(a.find(".gift-container__textarea .gift-message").removeAttr("required"),a.find(".gift-container__textarea .gift-message").val(""))}),$(document).on("change",".hasDatepicker",function(){var a=$(this);a.val()?a.parent().addClass("filled"):a.parent().removeClass("filled")}),$(document).on("click",".add-gift-message-minicart",function(){0==$(this).closest(".gft-minicart").find(".add-gift-message-checkbox-minicart").prop("checked")?($(this).closest(".gft-minicart").next().removeClass("d-none"),$(this).closest(".gft-minicart").next().find(".gift-message").attr("required",!0),$(this).closest("form").find(".make-it-a-gift-checkbox").val("true")):($(this).closest(".gft-minicart").next().addClass("d-none"),$(this).closest(".gft-minicart").next().find(".gift-message").val(""),$(this).closest(".gft-minicart").next().find(".gift-message").removeAttr("required"))}),$(document).on("click",".gift-wrap",function(){$(this).prop("checked")===!0&&$(this).parent().siblings(".make-it-a-gift-checkbox").val("true")}),$(document).on("change",".membershipFormUpsellCart #memberUpsellAddCart",function(){var a=$("#error-msg-save-item-for-later .emphasis--alert");1==$("#memberUpsellAddCart").prop("checked")?$(".sign-in-checkout")&&$(".sign-in-checkout").length>0?a&&a.length>0&&(a[0].innerText="To Become a B&N Member you must Sign in or Create Account."):(a&&a.length>0&&(a[0].innerText=""),$(".membershipMinicartAddForm #membershipMinicartAddFormjoinBtn").click()):a&&a.length>0&&(a[0].innerText="")}),$(document).on("click",".edit-gift-wrap-message",function(a){a.preventDefault();var c=$(this),d=c.closest(".gift-wrap-message-indicator").next().next();c.closest(".gift-wrap-message-indicator").hide(),b(d),c.closest(".gift-wrap-message-indicator").siblings(".make-it-a-gift-select").show(),c.closest(".gift-wrap-message-indicator").siblings(".make-it-a-gift-select").find(".make-gift-checkbox-new-cart").attr("checked","checked"),c.closest(".gift-wrap-message-indicator").parent().find(".gift-wrap-form").find(".make-it-a-gift-checkbox-cart").val("true"),""!=d.find(".gift-message-form-container").find("textarea").val()?(d.find(".gift-message-form-container").find(".add-gift-message-checkbox-minicart").attr("checked","checked"),d.find(".gift-message-form-container").find(".gift-container__textarea").removeClass("d-none"),d.find(".gift-message-form-container").find(".gift-container__textarea textarea").attr("required",!0)):(d.find(".gift-message-form-container").find(".add-gift-message-checkbox-minicart").removeAttr("checked"),d.find(".gift-message-form-container").find(".gift-container__textarea").addClass("d-none"))}),$(document).off("click",".edit-egift-items").on("click",".edit-egift-item",function(a){var b=$(this).closest(".whole-gift-apply-container").find("form");b.find(".text-input--full-width").addClass("filled"),BN.uXHR.Form.apply($(".egift-wrap-form")),$("[id^=giftWrapMessage]").attr("required","required"),a.preventDefault();var c=$(this).closest(".whole-gift-apply-container").find(".make-it-gift__text-row"),d=c.find(".egift-wrap-form"),e=c.find(".gift-wrap-container");d.find(".ui-datepicker-trigger").addClass("d-none"),c.removeClass("hidden");var f=c.find("textarea.gift-message").val(),g=f.length,h=c.find(".steel").text(),i=h.split("/")[1];g>0&&c.find(".limit-notifier").text(i-g),d.on("submit",function(){var a=$("<div />",{"class":"mini-cart-spinner"});e.append(a)})}),$(".egift-date").datepicker({showOn:"button",buttonImage:"/static/img/sprites/calendar-up.png",buttonImageOnly:!0,minDate:0,maxDate:"+1Y",showOn:"both"}).on("change",function(){var a=$(this).val().split("/");""!==$(this).val()&&$(this).closest(".text-input").removeClass("invalid"),$(this).parent().find("#eGiftMonth").val(a[0]),$(this).parent().find("#eGiftDay").val(a[1]),$(this).parent().find("#eGiftYear").val(a[2])}),$(".hasDatepicker").on("focus",function(){$("#rhfMiniCartContainer").css("display","block"),$("#ui-datepicker-div").css("z-index","3000")}),$(".mini-cart-quantity-update").on("submit",function(){var a=$(this),b=a.parents("#miniCart");d.appendTo(b)}).on("amplifiFormSuccess",function(b,c){dataAnalyticsRemoveFromCart(b);var e="undefined"!=typeof BN_EXTERNAL_DOMAIN_PREFIXED?BN_EXTERNAL_DOMAIN_PREFIXED:"";if($("#shoppingBagReloadFlag").length||window.location.href.indexOf("/checkout/")>0)location.reload(!0);else if($.ajax({url:e+"/includes/get-mini-cart-commerce-items.jsp",cache:!1,type:"get",xhrFields:{withCredentials:!0}}).done(function(b){$("#miniCartItems .miniCartItems-list").html(b),rebindClick(),RhfMiniCartEvts(a)}),RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0),$(".rhf-cart-count").html($("#miniCartQuantityVal").val()),c.data.totalQuantity<1){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0),rebindClick();try{window.top.postMessage("refreshCart")}catch(f){}}d.remove()}).on("amplifiFormError",function(){d.remove();var a=$(".mini-cart-top-section").height(),b=$(".order-total-container");$(".mini-cart .order-total-container .payment-sectionbox p").length?b.attr("style","height: 270.812px !important;"):b.attr("style","height: 211px !important;");var c=b.height(),e=$(".cart-slide-out__body.mini-cart-scroll-section"),f=a+c;e.attr("style","height: calc( 100% - "+f+"px) !important;")})}function rebindClick(){$(document).on("input change","[id^=numberInput]",function(){$(this).closest(".item-count").parent().find("#updateQty").val(this.value),$(this).closest(".item-count").parent().find("div.cart-update-btn").hasClass("hidden")&&($(this).closest(".item-count").parent().find("div.cart-update-btn").removeClass("hidden"),$(this).closest(".item-count").parent().find("div.cart-update-btn").slideDown(125))}),$(".cart-qty a").off("click"),$(".cart-qty a").on("click",function(){var a=$(this).closest(".item-count").find("[id^=numberInput]").val();"down"==$(this).attr("data-spin")?a>0&&--a:"up"==$(this).attr("data-spin")&&999>a&&++a,$(this).closest(".item-count").find("[id^=numberInput]").val(a).trigger("change"),$(this).closest(".item-count").parent().find("div.cart-update-btn").hasClass("hidden")&&($(this).closest(".item-count").parent().find("div.cart-update-btn").removeClass("hidden"),$(this).closest(".item-count").parent().find("div.cart-update-btn").slideDown(125))})}function cartSuccess(){var a=".rhf-navbar-nav-cart > li > div.dropdown-menu";$(".pdp-form").on("amplifiFormSuccess",function(){RhfLoadHeaderElement($(a),BN_EXTERNAL_DOMAIN_PREFIXED+"/includes/minicart-shopping-bag.jsp",!0,!0);try{window.top.postMessage("refreshCart")}catch(b){}})}function RhfLoadHeaderElement(a,b,c,d){var e="";c&&(e="jsonpCallbackShoppingBag"),$("#miniCart").length||d&&a.html('<div id="miniCart" style="height: 150px; display:none;"><div class="triangle-up"></div><div class="mini-cart-spinner"></div>'),$.ajax({url:b,cache:!1,type:"get",dataType:"html",xhrFields:{withCredentials:!0}}).done(function(b){a.html(b),d&&$("#miniCart").css("display","none"),RhfMiniCartEvts(".rhf-navbar-nav-cart > li > div.dropdown-menu"),rebindClick(),rhfSignIn(".cart-sign-in"),$(".rhf-cart-count").html($("#miniCartQuantityVal").val()),$(".mini-cart-mask, .icon-close-modal").on("click",function(){RhfMiniCartHideCart()}),$(document).on("click",".mini-cart-mask, .icon-close-modal",function(){RhfMiniCartHideCart()});var c=$(".mini-cart-top-section").height(),e=$(".order-total-container");$(".mini-cart .order-total-container .payment-sectionbox p").length?e.attr("style","height: 270.812px !important;"):e.attr("style","height: 211px !important;");var f=e.height(),g=$(".cart-slide-out__body.mini-cart-scroll-section"),h=c+f;if(g.attr("style","height: calc( 100% - "+h+"px) !important;"),$(".rhf-globalHeader .rhf-logo-bar .logo-img").css("z-index","0"),$(".grecaptcha-badge").css("z-index","0"),$(".navbar-toggler").css("z-index","0"),$(".product-shelf").css("z-index","0"),$(".rhf-store").css("z-index","0"),$(".rhf-globalHeader .rhf-icon-wishlist").css("z-index","0"),$(".rhf-globalHeader .input-group-append .btn").css("z-index","0"),$(".sticky-commerce-mobile").css("z-index","0"),$(".rhf-globalHeader .btn:hover").css("background-color","none"),"true"==$("#masterpassUpgraded").val()){var i="true"==$("#masterpassUpgradedNewLogic").val();masterPassConfigure(i)}$("#miniCart select.AllRadOption").selectBox(),$("body").find("#miniCart").length&&$("#miniCart #paypal-button").is(":visible")&&($("#miniCart #paypal-button").empty(),initPaypalExpress(".checkout-paypal"))})}function bindFooterForms(){window.innerWidth<768&&($(".ft-drawer-name").on("click",function(){var a=$(this);$(this).siblings(".ft-drawer-contents").slideToggle({duration:150,start:function(){a.hasClass("toggled-off")?a.removeClass("toggled-off").addClass("toggled-on"):a.removeClass("toggled-on").addClass("toggled-off")}})}),$("#locationForm").attr("action","https://mstores.barnesandnoble.com/stores?storeFilter=all")),$(".ft-forms .text-input input[type='text']").on("focus",function(){$(this).siblings("label").addClass("focused")}),$(".ft-forms .text-input input[type='text']").on("blur",function(){""==$(this).val()&&$(this).siblings("label").removeClass("focused")}),window.innerWidth>1023?$(".dr-shipping").detach():$(".dr-shop").detach()}var BN_EXTERNAL_DOMAIN_PREFIXED=BN_EXTERNAL_DOMAIN_PREFIXED||"",FooterElementsEvtBind=!1;$(document).ready(function(){rhfSignIn(".rhf-myaccount-menu .rhf-sign-in"),rhfCreateAccount(".rhf-myaccount-menu .rhf-create-ac"),rhfSignIn(".rhf-guest-user"),rhfSignIn(".rhf-atg-guest-user"),rhfSignIn(".save-item-for-later.focus .btn--link.login-to-save"),$(".rhf-globalHeader .nav-item").off("touchstart"),$("#bagContentsContainer").attr("id","bagCC"),$(".wishlist-link").length>0&&!$(".wishlist-link").hasClass("rhf-guest-user")&&$(".wishlist-link").on("click",function(){$(this).parent().hasClass("rhf-mobile-hide")&&(window.location.href=$(this).attr("data-wishlist-link"))}),$(".dropdown-menu").children().children().children().hasClass("rewards")&&$(".dropdown-menu").addClass("dropdown-rewards"),$("body").hasClass("shopping-bag")&&($(window).on("resize",function(){$(window).width()<981?(RhfMiniCartShowCart(),$("#miniCart").closest(".bagContentsContainer").removeClass("mobile-hide")):RhfMiniCartHideCart()}),$(window).trigger("resize")),$(".rhf-cart a").on("click",function(a){a.preventDefault(),a.stopPropagation(),RhfMiniCartShowCart()}),$(document).on("click",".mini-cart-mask, .icon-close-modal",function(){RhfMiniCartHideCart()}),-1!==window.location.href.indexOf("/?cart-redirect=true")&&(RhfMiniCartShowCart(),$("#rhfMiniCartContainer").css({display:"block",opacity:"1"})),$(document).on("click","#expressCheckoutImg",function(){$("#expressCheckoutSubmit").trigger("click")})}),$(".rhf-atg-guest-user").keypress(function(a){var b=a.which;13==b&&(a.preventDefault(),$(this).click())}),$(".user-login-state").keypress(function(a){var b=a.which;13==b&&(a.preventDefault(),$(this).click())});;/*! BARNES-BUILDER 2024-02-21 */
function atgFooterFormSubmission(){$(".rhf-global-footer").find("form").each(function(){var a=this;$(this).find("input:visible").on("blur",function(){""!=$(this).val().trim()?$(a).submit():$(this).closest(".text-input").addClass(" user-error invalid error-placeholder")})}),$("#allOfferDrawer #allOffer #subscribe #aodEmailSignupForm").find("input[type=email]").on("blur",function(){""!=$(this).val().trim()?$("#allOfferDrawer #allOffer #subscribe #aodEmailSignupForm").submit():$(this).closest(".text-input").addClass(" user-error invalid error-placeholder")}),$(document).on("submit","#allOfferDrawer #allOffer #subscribe #aodEmailSignupForm",function(a){a.preventDefault();var b=$(this).find("input[type=email]").val(),c=$(this).find("input[name=emailContext]").val();emailSignUpFormSubmit(this,b,"#allOfferDrawer #allOffer #subscribe",c)}),$(document).on("submit",".rhf-global-footer #emailSignupForm",function(a){a.preventDefault();var b=$(this).find("input:visible").val(),c=$(this).find("input[name=emailContext]").val();emailSignUpFormSubmit(this,b,".rhf-global-footer",c)}),$(document).on("submit","#locationForm",function(a){a.preventDefault();var b=$(this).serialize(),c=$(this).attr("action"),d="";d=c.indexOf("?")>-1?c+"&"+b:c+"?"+b,window.location=d})}function emailSignUpFormSubmit(a,b,c,d){$(a).find("input[type=text]").removeClass("user-error"),$(a).find(".handler-email-signup").remove(),$(a).find("input[type=text]").removeClass("user-error invalid error-placeholder");{var e="";$("input[name=spinnerPath]").val()}if($(a).closest(".text-input--email-signup").addClass("spinner-container").append($('<div><img src="'+e+'"></div>').addClass("spinner spinner__medium")),"undefined"!=typeof s_setP){var f=f||{};f.event=f.event||[],f.event.push({eventInfo:{eventName:"Email Signup",eventAction:"emailSignup",timeStamp:new Date}}),_satellite.track("onEmailSignup")}"undefined"==typeof SITE_ROOT&&(SITE_ROOT="https://www.barnesandnoble.com"),$.ajax({url:SITE_ROOT+"/xhr/email-signup-submit.jsp",data:{email:b,emailContext:d,amplifiHandler:"/atg/userprofiling/ProfileFormHandler.emailSignup"},cache:!1,type:"post"}).done(function(b){b=JSON.parse(b),$(a).closest(".text-input--email-signup").find(".spinner").remove(),$(c).find("#emailAddressErr em").remove(),1==b.success?($(a).closest(".text-input--email-signup").remove(),$(c).find("#emailAddressErr").removeClass("alert--error"),$(c).find("#emailAddressErr").addClass("alert--success").append($("<em/>").addClass("emphasis emphasis--success")),$(c).find("#emailAddressErr em").text("Thank you for submitting your email address."),$(c).find("#emailAddressErr").show()):($(c).find("#emailAddressErr").removeClass("alert--success").addClass("alert--error").append($("<em/>").addClass("emphasis emphasis--alert")),$(c).find("#emailAddressErr em").text("Some error Occurred.. Please try again."),"undefined"!=typeof b.response.items&&$(c).find("#emailAddressErr em").text(b.response.items[0]),$(a).find("input[type=text]").addClass("user-error invalid"),$(a).closest(".text-input").addClass(" user-error invalid error-placeholder"),$(c).find("#emailAddressErr").show())}).always(function(){$(a).closest(".text-input--email-signup").find(".spinner").remove()})}